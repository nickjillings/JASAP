var JSAP=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var r={LinkedStore:function(t){var e={};function n(t,e,i){var o;for(o in t){var u;t.hasOwnProperty(o)&&("object"==typeof t[o]?(t[o].toXML?u=t[o].toXML(i):(u=i.createElement(o),e.appendChild(u),t[o].length?r(t[o],u,i):n(t[o],u,i)),e.appendChild(u)):e.setAttribute(o,t[o]))}}function r(t,e,r){var i,o;t.length,i=t.every(function(t){return"number"==typeof t}),o=t.every(function(t){return"string"==typeof t}),i||o?t.forEach(function(t,n){e.setAttribute("index-"+n,t)}):t.forEach(function(t,i){var o=document.createElement("value");o.setAttribute("index",i),n(t,o,r),e.appendChild(o)})}Object.defineProperties(this,{name:{get:function(){return t},set:function(e){if(void 0!==t)throw"Name is already set"}},addTerm:{value:function(t,n){if("string"!=typeof t&&0===t.length)throw"term must be a string";e[t]=n}},addTerms:{value:function(t){if("object"!=typeof t)throw"addTerms takes an object of term/value pairs";var e;for(e in t)t.hasOwnProperty(e)&&this.addTerm(e,t[e])}},deleteTerm:{value:function(t){this.addTerm(t,void 0)}},getTerm:{value:function(t){if("string"!=typeof t&&0===t.length)throw"term must be a string";return e[t]}},hasTerm:{value:function(t){if("string"!=typeof t&&0===t.length)throw"term must be a string";return e.hasOwnProperty(t)}},toJSON:{value:function(){return JSON.parse(JSON.stringify(e))}},toXML:{value:function(r){var i;return i=r?r.createElement(t):(r=document.implementation.createDocument(null,t,null)).firstElementChild,n(e,i,r),i}}})}};"function"==typeof AudioNode&&void 0===window.importScripts&&(AudioNode.prototype.getInputs=function(){return[this]});var i=function(t,e){var n=[],r=[],i=e,a=new EventTarget;function s(t,e){var n=e.findIndex(function(t){return t===this},t);return-1!==n&&(e.splice(n,1),!0)}void 0===this.context&&(this.context=t.context),void 0===this.factory&&(this.factory=t),this.featureMap=new u(this),this.externalInterface=new f(this),this.parameters=new o(this,this.externalInterface,a),this.addInput=function(t){return n.push(t),n},this.deleteInput=function(t){return s(t,n)},this.addOutput=function(t){return r.push(t),this.outputs},this.deleteOutput=function(t){return s(t,r)},this.start=this.stop=this.onloaded=this.onunloaded=this.deconstruct=function(){},Object.defineProperties(this,{numInputs:{get:function(){return n.length},set:function(){throw"Cannot set the number of inputs of BasePlugin"}},numOutputs:{get:function(){return r.length},set:function(){throw"Cannot set the number of outputs of BasePlugin"}},numParameters:{get:function(){return this.parameters.parameters.length},set:function(){throw"Cannot set the number of parameters of BasePlugin"}},owner:{get:function(){return i},set:function(t){return"object"==typeof t&&(i=t),i}},inputs:{get:function(t){return n},set:function(){throw"Illegal attempt to modify BasePlugin"}},outputs:{get:function(t){return r},set:function(){throw"Illegal attempt to modify BasePlugin"}},connect:{value:function(t){this.outputs[0].connect(t.inpt?t.input:t)}},disconnect:{value:function(t){void 0===t?this.outputs[0].disconnect():this.outputs[0].disconnect(t.input?t.input:t)}},getInputs:{value:function(){return this.inputs}},getOutputs:{value:function(){return this.outputs}},getParameterName:{value:function(){return this.parameters.getParameterNames()}},getParameterByName:{value:function(){return this.parameters.getParameterByName()}},getParameterObject:{value:function(){return this.parameters.getParameterObject()}},setParameterByName:{value:function(t,e){return this.parameters.setParameterByName(t,e)}},setParametersByObject:{value:function(t){return this.parameters.setParametersByObject(t)}},addEventListener:{value:function(t,e){return a.addEventListener(t,e)}},removeEventListener:{value:function(t,e){return a.addEventListener(t,e)}}})},o=function(t,e,n){var r=[];function i(t){return r.find(function(e){return e.name.toLowerCase()===t.toLowerCase()})}function o(t){return r.findIndex(function(e){return e.name.toLowerCase()===t.toLowerCase()})}function u(){var t={};return r.forEach(function(e){t[e.name]=e}),t}function a(t){return-1===r.findIndex(function(e){return e===t},t)&&r.push(t),t}function s(t,e,n){var r,i,o,u;r=i=function(t){return t},o=function(){},Object.defineProperties(this,{name:{value:e},owner:{value:t},update:{get:function(){return r},set:function(t){if("function"!=typeof t)throw"Must be a callback function";if(void 0===t(0))throw"Function must return a value";r=t}},translate:{get:function(){return i},set:function(t){if("function"!=typeof t)throw"Must be a callback function";if(void 0===t(0))throw"Function must return a value";i=t}},trigger:{get:function(){return o},set:function(t){if("function"!=typeof t)throw"Must be a callback function";o=t}},bindToAudioParam:{value:function(t){if("object"!=typeof t||void 0===t.value)throw"Must be an AudioParam object from an AudioNode";var e=this.update(this.value);(u=t).value=e}},boundAudioParam:{get:function(){return u}},actionList:{value:[]}})}function c(t,e,r,i,o){s.call(this,t,e,"Number");var u,a=r;Object.defineProperties(this,{destroy:{value:function(){t=e=r=i=o=a=u=void 0}},minimum:{value:i},maximum:{value:o},defaultValue:{value:r},value:{get:function(){return this.boundAudioParam?this.translate(this.boundAudioParam.value):a},set:function(t){if(this.minimum&&(t=Math.max(t,this.minimum)),this.maximum&&(t=Math.min(t,this.maximum)),u&&(t=Math.round(t/u),t*=u),this.boundAudioParam&&(this.boundAudioParam.value=this.update(t)),a!==t){a=t;var e=new Event("parameterset");n.dispatchEvent(e)}this.trigger()}},stepSize:{get:function(){return u},set:function(t){if(!isFinite(t)||t<0)throw"Invalid step size";u=t}}})}function f(t,e,r,i){s.call(this,t,e,"String");var o=r;Object.defineProperties(this,{destroy:{value:function(){t=e=r=i=o=void 0}},maxLength:{value:i},defaultValue:{value:r},value:{get:function(){return this.boundAudioParam?this.translate(this.boundAudioParam.value):o},set:function(t){if(i&&t.length>i)throw"String longer than "+i+" characters";if(this.boundAudioParam&&(this.boundAudioParam.value=this.update(t)),o!==t){o=t;var e=new Event("parameterset");n.dispatchEvent(e)}this.trigger()}}})}function l(t,e){s.call(this,t,e,"Button");var n=function(){};Object.defineProperties(this,{destroy:{value:function(){t=e=void 0}},onclick:{get:function(){return n},set:function(t){if("function"!=typeof t)throw"onclick must be a function";n=t}}})}function h(t,e,r,i,o){s.call(this,t,e,"Button");var u=r;function a(t){if(this.boundAudioParam&&(this.boundAudioParam.value=this.update(t)),function(t){var e={time:new Date,value:t};this.actionList.push(e)}.call(this,t),u!==t){u=t;var e=new Event("parameterset");n.dispatchEvent(e)}return this.trigger(),t}Object.defineProperties(this,{destroy:{value:function(){t=e=void 0}},defaultValue:{value:r},minState:{value:i},maxState:{value:o},value:{get:function(){return this.boundAudioParam?this.translate(this.boundAudioParam.value):u},set:function(t){if(t<i)throw"Set value is less than "+i;if(t>o)throw"Set value is greater than "+o;return a.call(this,t)}},increment:{value:function(){var t=u+1;return t>o&&(t=i),a.call(this,t)}},decrement:{value:function(){var t=u-1;return t<i&&(t=o),a.call(this,t)}}})}function d(t,e,r,i){s.call(this,t,e,"Button");var o=i.indexOf(r);function u(t){var e=i.indexOf(t);if(void 0===e||e<0)throw"Not in list range";if(this.boundAudioParam&&(this.boundAudioParam.value=this.update(t)),function(t){var e={time:new Date,value:t};this.actionList.push(e)}.call(this,t),o!==e){o=e;var r=new Event("parameterset");n.dispatchEvent(r)}return this.trigger(),i[o]}Object.defineProperties(this,{destroy:{value:function(){t=e=void 0}},defaultValue:{value:r},listValues:{get:function(){var t=[];return i.forEach(function(e){t.push(e)}),v}},value:{get:function(){return this.boundAudioParam?this.translate(this.boundAudioParam.value):i[o]},set:function(t){if(t<minState)throw"Set value is less than "+minState;if(t>maxState)throw"Set value is greater than "+maxState;return u.call(this,t)}},increment:{value:function(){var t=_value+1;return t>maxState&&(t=minState),u.call(this,t)}},decrement:{value:function(){var t=_value-1;return t<minState&&(t=maxState),u.call(this,t)}}})}c.prototype=Object.create(s.prototype),c.prototype.constructor=c,f.prototype=Object.create(s.prototype),f.prototype.constructor=f,l.prototype=Object.create(s.prototype),l.prototype.constructor=l,h.prototype=Object.create(s.prototype),h.prototype.constructor=h,d.prototype=Object.create(s.prototype),d.prototype.constructor=d,Object.defineProperties(this,{createNumberParameter:{value:function(e,n,r,i){if("string"!=typeof e||"number"!=typeof n||void 0!==r&&"number"!=typeof r||void 0!==i&&"number"!=typeof i)throw"Invlid constructor";if(-1!==o(e))throw"Parameter with name '"+e+"' already exists";var u=new c(t,e,n,r,i);return a(u),u}},createStringParameter:{value:function(e,n,r){if("string"!=typeof e||"string"!=typeof n||void 0!==r&&"number"!=typeof r)throw"Invlid constructor";if(-1!==o(e))throw"Parameter with name '"+e+"' already exists";var i=new f(t,e,n,r);return a(i),i}},createButtonParameter:{value:function(e){if("string"!=typeof e)throw"Invalid constructor";if(-1!==o(e))throw"Parameter with name '"+e+"' already exists";var n=new l(t,e);return a(n),n}},createSwitchParameter:{value:function(e,n,r,i){if("string"!=typeof e||"number"!=typeof n||"number"!=typeof r||"number"!=typeof i)throw"Invlid constructor";if(-1!==o(e))throw"Parameter with name '"+e+"' already exists";var u=new h(t,e,n,r,i);return a(u),u}},createParameter:{value:function(){throw"This function is now deprecated"}},getParameterName:{value:function(){var t,e=[];for(t=0;t<r.length;t++)e.push(r[t].name);return e}},getParameterByName:{value:function(t){return i(t)}},getParameterObject:{value:function(){return u()}},getParameterNames:{value:function(){var t=[];return r.forEach(function(e){t.push(e.name)}),t}},setParameterByName:{value:function(t,e){var n=i(t);n&&(n.value=e)}},deleteParameter:{value:function(t){var e=r.findIndex(function(e){return e===t},t);return e>=0&&(r.splice(e,1),t.destroy(),!0)}},deleteAllParameters:{value:function(t){return r.forEach(function(t){t.destroy()}),r=[],!0}},setParametersByObject:{value:function(t){var e;for(e in t)if(t.hasOwnProperty(e))if("object"==typeof t[e])this.setParameterByName(e,t[e].value);else{if("number"!=typeof t[e])throw"Cannot set "+e+": Not a valid object";this.setParameterByName(e,t[e])}}},parameters:{get:function(){return u()},set:function(){throw"Cannot set, use .setParameterBy...()"}}})},u=function(t){this.plugin=t,this.Receiver=new a(this,t.factory.FeatureMap),this.Sender=new s(this,t.factory.FeatureMap),Object.defineProperty(this,"onfeatures",{get:function(){return this.Receiver.onfeatures},set:function(t){return this.Receiver.onfeatures=t,t}})},a=function(t,e){function n(t,e){if(void 0===t)throw"Source plugin must be defined";if(void 0===e)throw"FeatureObject must be defined";if("number"!=typeof e.outputIndex||"number"!=typeof e.frameSize||"object"!=typeof e.features)throw"Malformed featureObject";return!0}var r=function(){};this.requestFeatures=function(t){var e;for(e=0;e<t.length;e++)this.requestFeaturesFromPlugin(t[e].plugin,{outputIndex:t[e].outputIndex,frameSize:t[e].frameSize,features:t[e].features})},this.requestFeaturesFromPlugin=function(r,i){n(r,i),e.requestFeatures(t.plugin,r,i)},this.cancelFeaturesFromPlugin=function(r,i){n(r,i),e.deleteFeatures(t.plugin,r,i)},this.cancelAllFeaturesFromPlugin=function(n){if(void 0===n)throw"Source plugin must be defined";e.deleteFeatures(t.plugin,n)},this.cancelAllFeatures=function(){e.deleteFeatures(t.plugin)},this.postFeatures=function(t){"function"==typeof r&&r(t)},Object.defineProperty(this,"onfeatures",{get:function(){return r},set:function(t){return"function"==typeof t&&(r=t,!0)}})},s=function(t,e){var n=function(e,n,r){var i=[],o=function(e,n){this.extractor=t.plugin.factory.context.createAnalyser(),this.extractor.fftSize=n,e.connect(this.extractor),this.features=[],Object.defineProperty(this,"frameSize",{value:n});var r=this.factory.recursiveProcessing;function i(t){var e={numberOfChannels:1,results:[]};r(t,this.features),e.results[0]={channel:0,results:JSON.parse(t.toJSON())},this.postFeatures(t.length,e)}this.setFeatures=function(t){this.features=t,0===this.features.length?this.extractor.clearCallback():this.extractor.frameCallback(i,this)}},u=function(e,n){var r=new Worker("jsap/feature-worker.js");r.onerror=function(t){console.error(t)},this.setFeatures=function(i){var o=this,u={state:1,sampleRate:t.plugin.factory.context.sampleRate,featureList:i,numChannels:e.numberOfOutputs,frameSize:this.frameSize};this.features=i,i&&i.length>0?(r.onmessage=function(t){1===t.data.state?(r.onmessage=function(t){this.postFeatures(n,t.data.response)}.bind(o),o.extractor.onaudioprocess=function(t){var e,n=[];for(e=0;e<t.inputBuffer.numberOfChannels;e++)n[e]=t.inputBuffer.getChannelData(e);r.postMessage({state:2,frames:n})}.bind(o)):r.postMessage(u)},r.postMessage({state:0})):this.extractor.onaudioprocess=void 0},this.extractor=t.plugin.factory.context.createScriptProcessor(n,e.numberOfOutputs,1),e.connect(this.extractor),this.extractor.connect(t.plugin.factory.context.destination),Object.defineProperty(this,"frameSize",{value:n})};this.addExtractor=function(t){var e;return e=window.Worker?new u(n,t):new o(n,t),i.push(e),Object.defineProperty(e,"postFeatures",{value:function(t,e){var n={outputIndex:r,frameSize:t,results:e};this.postFeatures(n)}.bind(this)}),e},this.findExtractor=function(t){var e=t;return i.find(function(t){return t.frameSize===e})},this.deleteExtractor=function(t){}},r=[];this.updateFeatures=function(e){var i;for(i=0;i<e.length;i++){if(void 0===r[i]){if(i>t.plugin.numOutputs)throw"Requested an output that does not exist";r[i]=new n(t.plugin,t.plugin.outputs[i],i),Object.defineProperty(r[i],"postFeatures",{value:function(t){this.postFeatures(t)}.bind(this)})}var o;for(o=0;o<e[i].length;o++){var u=r[i].findExtractor(e[i][o].frameSize);u||(u=r[i].addExtractor(e[i][o].frameSize)),u.setFeatures(e[i][o].featureList)}}},this.postFeatures=function(e){t.plugin.factory.FeatureMap.postFeatures({plugin:t.plugin.pluginInstance,outputIndex:e.outputIndex,frameSize:e.frameSize,results:e.results})},e.createSourceMap(this,t.plugin.pluginInstance)},c=function(t,e,n){console.log("DEPRECATED!!"),console.log("The class PluginUserInterface has been deprecated"),console.log("Please look at the documents for the new methods for building plugins"),this.processor=t,this.root=document.createElement("div"),e>0&&(this.root.style.width=e+"px"),n>0&&(this.root.style.height=n+"px"),this.dim={width:e,height:n},this.intervalFunction=null,this.updateInterval=null,this.PluginParameterInterfaces=[];var r=function(t,e,n,r){this.input=t,this.processor=n,this.GUI=r,this.AudioParam=e,this.handleEvent=function(t){this.AudioParam.value=this.input.value},this.input.addEventListener("change",this),this.input.addEventListener("mousemove",this),this.input.addEventListener("click",this)};this.createPluginParameterInterfaceNode=function(t,e){var n=new r(t,e,this.processor,this);return this.PluginParameterInterfaces.push(n),n},this.update=function(){}};c.prototype.getRoot=function(){return this.root},c.prototype.getDimensions=function(){return this.dim},c.prototype.getWidth=function(){return this.dim.width},c.prototype.getHeight=function(){return this.dim.height},c.prototype.beginCallbacks=function(t){void 0===t&&(t=250),null===this.intervalFunction&&(this.updateInterval=t,this.intervalFunction=window.setInterval(function(){this.update()}.bind(this),250))},c.prototype.stopCallbacks=function(){null!==this.intervalFunction&&(window.clearInterval(this.intervalFunction),this.updateInterval=null,this.intervalFunction=null)},c.prototype.loadResource=function(t){return new Promise(function(e,n){var r=new XMLHttpRequest;r.open("GET",t),r.onload=function(){200===r.status?e(r.response):n(Error(r.statusText))},r.onerror=function(){n(Error("Network Error"))},r.send()})},c.prototype.clearGUI=function(){this.stopCallbacks(),this.root.innerHTML=""};var f=function(t){function e(e){var n,r,i={message:"updateParameters",parameters:(n=t.parameters.getParameterNames(),r={},n.forEach(function(e){var n=t.parameters.getParameterByName(e);r[e]={value:n.value,maximum:n.maximum,minimum:n.minimum,defaultValue:n.defaultValue,type:n.constructor.name,name:e}}),r)};return e&&(i.sender_id=e),i}function n(t){var n=e(t);r.forEach(function(t){t.postMessage(n)})}var r=[];window.onmessage=function(r){switch(r.data.message){case"setParameterByName":r.data.parameter&&(r.data.parameter.name&&r.data.parameter.value&&t.parameters.setParameterByName(r.data.parameter.name,r.data.parameter.value),n(r.data.sender_id));break;case"setParametersByObject":r.data.parameter&&(!function(e){var n=JSON.parse(e.message.parameters);Object.keys(n).forEach(function(e){t.parameters.setParameterByName(e,n[e].value)})}(r),n(r.data.sender_id));break;case"requestParameters":r.source.postMessage(e());break;default:throw'Unknown message type "'+r.data.message+'"'}},Object.defineProperties(this,{updateInterfaces:{value:function(){n()}},closeWindows:{value:function(){for(1;r.length>0;){r.pop().close()}}},registerWindow:{value:function(t){return!r.includes(t)&&(r.push(t),!0)}}})};"undefined"!=typeof window&&(window.BasePlugin=i);var l=function(t,e){var n=!1,r=!1;i.call(this,t,e),Object.defineProperties(this,{addInput:{value:function(){throw'Cannot add input to type "SynthesiserBasePlugin"'}},deleteInput:{value:function(){throw'Cannot delete input to type "SynthesiserBasePlugin"'}},scheduleEvent:{value:function(t,e){n||(console.warning("WARNING - .scheduleEvent is not overridden"),n=!0)},writable:!0},cancelAllEvents:{value:function(){r||(console.warning("WARNING - .cancelAllEvents is not overridden"),r=!0)},writable:!0}})};function h(t,e){var n=[],i=[],o=[],u=[],a=0,s=!1;function c(t){return!1===t.url.startsWith("http")&&void 0!==e&&e.startsWith("http")&&(t.url=e+t.url),new Promise(function(e,n){var r=new XMLHttpRequest;r.open("GET",t.url),r.onreadystatechange=function(){if(4==r.readyState){var n=document.createElement("script");n.textContent=r.responseText,document.getElementsByTagName("head")[0].appendChild(n),e(t)}},r.send()})}this.loadResource=function(t){return new Promise(function(e,n){"object"!=typeof t?n("Error"):"string"!=typeof t.url?n("resourceObject.url must be a string"):"function"!=typeof t.test?n("resourceObject.test must be a function"):e(t)}).then(function(t){var e=t.test();if(!1!==e&&!0!==e)throw"resourceObject.test must return true or false";switch(t.type||(t.type="javascript"),t.type=t.type.toLowerCase(),t.type){case"javascript":return e?new Promise(function(e,n){"string"==typeof t.returnObject?window.hasOwnProperty(t.returnObject)?e(window[t.returnObject]):n(!1):e(!0)}):c(t).then(function(t){return"string"!=typeof t.returnObject||!!window.hasOwnProperty(t.returnObject)&&window[t.returnObject]});default:throw"Invalid type "+String(t.type)}})},this.loadPluginScript=function(t){if(t){if("string"!=typeof t.returnObject)throw"resourceObject.returnObject must be the name of the prototype function";return this.loadResource(t).then(function(t){return this.addPrototype(t)}.bind(this))}};var f=function(e,n){this.next_node=void 0;var r=!1,i=t.createGain(),o=t.createGain();i.connect(n.getInputs()[0]),n.getOutputs()[0].connect(o),this.bypass=function(t){return(t=!0===t)===r?r:(t?(i.disconnect(),i.connect(o),r=!0):(i.disconnect(),i.connect(n.getInputs()[0]),r=!1),r)},this.isBypassed=function(){return r},this.reconnect=function(t){this.connect(t)},this.connect=function(t){return void 0!==this.next_node&&this.disconnect(),void 0!==t&&void 0!==t.input&&(this.next_node=t,o.connect(this.next_node.input),!0)},this.disconnect=function(){void 0!==this.next_node&&(o.disconnect(this.next_node.input),this.next_node=void 0)},this.destroy=function(){n.destroy()},Object.defineProperties(this,{id:{value:e},node:{value:n},input:{get:function(){return i}},output:{get:function(){return o}},bypassed:{get:function(){return r}}})};f.prototype.factory=this;var l=function(e,n){var r=t.createGain();n.getOutputs()[0].connect(r),this.destroy=function(){n.destroy()},Object.defineProperties(this,{id:{value:e},node:{value:n},output:{get:function(){return r}}})},d=function(t,e){var n=this;function r(t,e){if(e)return e.then(c(t));var n=c(t);return n.then(function(t){if(void 0!==t.resources&&t.resources.length>0)for(var e=0;e<t.resources.length;e++)n=r(t.resources[e],n)}),n}function i(t){return t.hasOwnProperty("length")&&t.length>0?i(t[t.length-1]):t.hasOwnProperty("resources")?i(t.resources):t.test}Object.defineProperties(this,{name:{value:t.prototype.name},proto:{value:t},version:{value:t.prototype.version},uniqueID:{value:t.prototype.uniqueID},hasMidiInput:{value:t.prototype.hasMidiInput||!1},hasMidiOutput:{value:t.prototype.hasMidiOutput||!1}}),this.createPluginInstance=async function(r,i){var o=function(r){return Promise.all(s).then(function(){return new Promise(function(n,i){!function(){for(var t=!0,e=0;e<s.length;e++)if(1!==s[e].state||!s[e].test()){t=!1;break}return t}()?i(new Error("Plugin not ready")):n(new t(e,r))})}).then(function(t){return new Promise(function(e,n){if(t.initialise)return t.initialise().then(function(){e(t)});e(t)})}).then(function(r){var i;if(!0!==r.hasMidiInput&&!0!==r.hasMidiOutput)i=new f(a++,r);else{if(!0!==r.hasMidiInput||!0===r.hasMidiOutput)throw"No Instance Holder Available!";i=new l(a++,r)}return Object.defineProperties(r,{pluginInstance:{value:i},prototypeObject:{value:n},name:{value:t.prototype.name},version:{value:t.prototype.version},uniqueID:{value:t.prototype.uniqueID},SesionData:{value:e.SessionData},UserData:{value:e.UserData}}),Object.defineProperties(i,{prototypeObject:{value:n},externalInterface:{value:r.externalInterface}}),e.registerPluginInstance(i),i})}(r);return!0===i?o:(await o,o)};var o,u,s=[];if(t.prototype.resources)for(var h=0;h<t.prototype.resources.length;h++){var d=t.prototype.resources[h];switch(d.type=d.type.toLowerCase(),d.type){case"css":o=d.url,u=void 0,(u=document.createElement("link")).setAttribute("rel","stylesheet"),u.setAttribute("type","text/css"),u.setAttribute("href",o),document.getElementsByTagName("head")[0].appendChild(u);break;case"javascript":var p={promise:r(d),state:0,complete:function(){this.state=1},test:i(d)};p.promise.then(p.complete.bind(p)),s.push(p);break;default:throw"Could not load "+d.url+", invalid resource.type"}}this.getResourcePromises=function(){return s}};this.addPrototype=function(t){var e=this;return new Promise(function(e,n){"function"!=typeof t?n("The Prototype must be a function!"):"string"!=typeof t.prototype.name||0===t.prototype.name.length?n("Malformed plugin. Name not defined"):"string"!=typeof t.prototype.version||0===t.prototype.version.length?n("Malformed plugin. Version not defined"):"string"!=typeof t.prototype.uniqueID||0===t.prototype.uniqueID.length?n("Malformed plugin. uniqueID not defined"):e(t)}).then(function(t){var n={proto:t,name:t.prototype.name,version:t.prototype.version,uniqueID:t.prototype.uniqueID},r=o.find(function(t){var e,n=0;for(e in this)t[e]===this[e]&&n++;return 4===n},n);if(r)throw"The plugin must be unique!";return r=new d(t,e),o.push(r),Object.defineProperties(r,{factory:{value:e}}),r})},this.getPrototypes=function(){return o},this.getAudioPluginPrototypes=function(){return o.filter(function(t){return 0==t.hasMidiInput&&0==t.hasMidiOutput})},this.getMidiSynthPrototypes=function(){return o.filter(function(t){return 1==t.hasMidiInput&&0==t.hasMidiOutput})},this.getMidiPluginPrototypes=function(){return o.filter(function(t){return 1==t.hasMidiInput&&1==t.hasMidiOutput})},this.getAllPlugins=function(){return u},this.getAllPluginsObject=function(){var t,e={factory:this,subFactories:[]};for(t=0;t<n.length;t++)e.subFactories.push({subFactory:n[t],plugins:n[t].getPlugins()});return e},this.createSubFactory=function(t,e){return console.warn('DEPRECATED - This function will be deprecated in favour of "createAudioPluginChainManager"'),this.createAudioPluginChainManager(t,e)},this.destroySubFactory=function(t,e){return console.warn('DEPRECATED - This function will be deprecated in favour of "destroyAudioPluginChainManager"'),this.destroyAudioPluginChainManager(t,e)},this.createAudioPluginChainManager=function(t,e){var r=new m(this,t,e);return Object.defineProperties(r,{SessionData:{value:this.SessionData},UserData:{value:this.UserData}}),n.push(r),r},this.destroyAudioPluginChainManager=function(t){var e=n.findIndex(function(t){return t===this},t);e>=0&&(n.splice(e,1),t.destroy())},this.createMidiSynthesiserHost=function(t){var e=new g(t);return Object.defineProperties(e,{SessionData:{value:this.SessionData},UserData:{value:this.UserData}}),i.push(e),e},this.destroyMidiSynthesiserHost=function(t){var e=i.findIndex(function(t){return t===this},t);e>=0&&(i.splice(e,1),t.destroy())},this.registerPluginInstance=function(t){if(u.find(function(t){return t===this},t))throw"Plugin Instance not unique";return u.push(t),s&&t.node.start.call(t.node),!0},this.deletePlugin=function(t){var e=u.findIndex(function(e){return e.id===t});e>=0&&u.splice(e,1)[0].node.externalInterface.closeWindows()},this.audioStart=function(){s||(u.forEach(function(t){t.node.start.call(t.node)}),s=!0)},this.audioStop=function(){s&&(u.forEach(function(t){t.node.stop.call(t.node)}),s=!1)};this.FeatureMap=new function(){var t=[],e=function(t){this.name=t.name,this.parameters=this.parameters,this.features=[]};function n(t,e){return t.find(function(t){return t.name===this.name},e)}function r(t,n){var r=new e(t);return n.push(r),r}var i=function(t,e){var i=[];function u(t){return i.find(function(t){return t.outputIndex===this.outputIndex&&t.frameSize===this.frameSize},t)}function a(){function e(t){var i,o=[];for(i=0;i<t.length;i++){var u=n(o,t[i]);(!u||t.parameters&&0!==t[i].parameters.length)&&(u=r(t[i],o)),t[i].features&&t[i].features.length>0&&(u.features=e(t[i].features))}return o}var o,u=[];for(o=0;o<i.length;o++){void 0===u[i[o].outputIndex]&&(u[i[o].outputIndex]=[]);var a=u[i[o].outputIndex].find(function(t){return t.frameSize===this.frameSize},i[o]);a||(a={frameSize:i[o].frameSize,featureList:void 0},u[i[o].outputIndex].push(a)),a.featureList=e(i[o].getFeatureList())}t.updateFeatures(u)}this.getSourceInstance=function(){return e},this.getSender=function(){return t},this.requestFeatures=function(t,e){var n=u(e);n||(n={outputIndex:e.outputIndex,frameSize:e.frameSize,requestors:[],getFeatureList:function(){var t,e=[];for(t=0;t<this.requestors.length;t++)e=e.concat(this.requestors[t].getFeatureList());return e}},i.push(n));var r=n.requestors.find(function(t){return t.getRequestorInstance()===this},t);r||(r=new o(t),n.requestors.push(r)),r.addFeatures(e),a()},this.findFrameMap=function(t,e){return i.find(function(n){return n.outputIndex===t&&n.frameSize===e})},this.cancelFeatures=function(t,e){if(void 0===e)i.forEach(function(e){var n=e.requestors.findIndex(function(e){return e.getRequestorInstance()===t});n>=0&&e.requestors.splice(n,1)});else{var n=u(e);if(!n)return;var r=n.requestors.find(function(t){return t.getRequestorInstance()===this},t);if(!r)return;r.deleteFeatures(e)}a()}},o=function(t){var e=[];t.node.featureMap.Receiver,this.getRequestorInstance=function(){return t},this.addFeatures=function(t){!function t(e,i){var o;for(o=0;o<i.length;o++){var u=n(e,i[o]);(!u||i[o].parameters&&0!==i[o].parameters.length)&&(u=r(i[o],e)),void 0!==i[o].features&&i[o].features.length>0&&t(u.features,i[o].features)}}(e,t.features)},this.deleteFeatures=function(t){!function t(r,i){var o,u=i.length;for(o=0;o<u;o++){var a=n(r,i[o]);a>=0&&(i[a].features&&i[a].features.length>0?t(r[a].features,i[a].features):e.splice(a,0))}}(e,t.features)},this.getFeatureList=function(){return e},this.postFeatures=function(n){var r,i={plugin:n.plugin,outputIndex:n.outputIndex,frameSize:n.frameSize,features:{numberOfChannels:n.results.numberOfChannels,results:[]}};function o(t,e,n){var r;function i(t){return t.name===r}for(r in e)if(e.hasOwnProperty(r)){var u=n.find(i);u&&(e[r].constructor===Object&&u.results?(t[r]={},o(t[r],e[r],u.results)):t[r]=e[r])}}for(r=0;r<n.results.numberOfChannels;r++)i.features.results[r]={},o(i.features.results[r],n.results.results[r].results,e);t.node.featureMap.Receiver.postFeatures(i)}};function u(e){return t.findIndex(function(t){return t.getSender()===this},e)}function a(t,e,n){var r=t[u(e)];if(!r&&!(r=t[u(n)]))throw"Could not locate source map";return r}this.createSourceMap=function(e,n){var r=new i(e,n);return t.push(r),r},this.deleteSourceMap=function(e){var n=u(e);if(-1===n)throw"Could not find the source map for the plugin";t.splice(n,1)},this.getPluginSender=function(t){return t.constructor===f&&(t=t.node),t.featureMap.Sender},this.requestFeatures=function(e,n,r){e.constructor!==f&&(e=e.pluginInstance);var i=this.getPluginSender(n);a(t,n,i).requestFeatures(e,r)},this.deleteFeatures=function(e,n,r){if(e.constructor!==f&&(e=e.pluginInstance),void 0===n)t.forEach(function(t){t.cancelFeatures(e)});else{var i=this.getPluginSender(n);a(t,n,i).cancelFeatures(e,r)}},this.getFeatureList=function(t,e){},this.postFeatures=function(e){var n=t[u(e.plugin)];if(!n&&!(n=t[u(this.getPluginSender(e.plugin))]))throw"Plugin Instance not loaded!";n.findFrameMap(e.outputIndex,e.frameSize).requestors.forEach(function(t){t.postFeatures(this)},e)}},Object.defineProperty(this.FeatureMap,"factory",{value:this});var p=[];this.createStore=function(t){var e=new r.LinkedStore(t);return p.push(e),e},this.getStores=function(){return p},this.findStore=function(t){return p.find(function(e){return e.name===t})},this.SessionData=new r.LinkedStore("Session"),this.UserData=new r.LinkedStore("User");var v=function(t,e){var n,r=function(e,n){var r=[],i=function(e,n){this.extractor=e.context.createAnalyser(),this.extractor.fftSize=n,e.connect(this.extractor),this.features=[],Object.defineProperty(this,"frameSize",{value:n});var r=t.recursiveProcessing;function i(t){var e={numberOfChannels:1,results:[]};r(t,this.features),e.results[0]={channel:0,results:JSON.parse(t.toJSON())},this.postFeatures(t.length,e)}this.setFeatures=function(t){this.features=t,0===this.features.length?this.extractor.clearCallback():this.extractor.frameCallback(i,this)},this.rejoinExtractor=function(){e.connect(this.extractor)}},o=function(t,e){var n=new Worker("jsap/feature-worker.js");n.onerror=function(t){console.error(t)},this.setFeatures=function(r){var i=this,o={state:1,sampleRate:t.context.sampleRate,featureList:r,numChannels:t.numberOfOutputs,frameSize:this.frameSize};this.features=r,r&&r.length>0?(n.onmessage=function(t){1===t.data.state?(n.onmessage=function(t){this.postFeatures(e,t.data.response)}.bind(i),i.extractor.onaudioprocess=function(t){var e,r=[];for(e=0;e<t.inputBuffer.numberOfChannels;e++)r[e]=t.inputBuffer.getChannelData(e);n.postMessage({state:2,frames:r})}.bind(i)):n.postMessage(o)},n.postMessage({state:0})):this.extractor.onaudioprocess=void 0},this.rejoinExtractor=function(){t.connect(this.extractor)},this.extractor=t.context.createScriptProcessor(e,t.numberOfOutputs,1),t.connect(this.extractor),this.extractor.connect(t.context.destination),Object.defineProperty(this,"frameSize",{value:e})};this.addExtractor=function(t){var e;return e=window.Worker?new o(n,t):new i(n,t),r.push(e),Object.defineProperty(e,"postFeatures",{value:function(t,e){var n={outputIndex:0,frameSize:t,results:e};this.postFeatures(n)}.bind(this)}),e},this.findExtractor=function(t){var e=t;return r.find(function(t){return Number(t.frameSize)===Number(e)})},this.rejoinExtractors=function(){r.forEach(function(t){t.rejoinExtractor()})},this.deleteExtractor=function(t){}};this.updateFeatures=function(e){var i;for(i=0;i<e.length;i++){if(void 0===n){if(i>1)throw"Requested an output that does not exist";n=new r(t,t.chainStart),Object.defineProperty(n,"postFeatures",{value:function(t){this.postFeatures(t)}.bind(this)})}var o;for(o=0;o<e[i].length;o++){var u=n.findExtractor(e[i][o].frameSize);u||(u=n.addExtractor(e[i][o].frameSize)),u.setFeatures(e[i][o].featureList)}}},this.rejoinExtractors=function(){n&&n.rejoinExtractors()},this.postFeatures=function(t){e.postFeatures({plugin:this,outputIndex:t.outputIndex,frameSize:t.frameSize,results:t.results})},e.createSourceMap(this,void 0)},m=function(t,e,n){var i=[],o=e,u=n,a="",s=1,c=new v(this,t.FeatureMap);function f(){for(var t=0,e=i.length-1;t<e;){var n=i[t++],r=i[t];n.reconnect(r)}}function l(){i.forEach(function(t){t.disconnect()})}function h(){return i.length>0?(o.disconnect(i[0].input),i[i.length-1].output.disconnect(u)):o.disconnect(u),!0}function d(){i.length>0?(o.connect(i[0].input),i[i.length-1].output.connect(u)):o.connect(u),c.rejoinExtractors()}function p(t){return new Promise(function(e,n){0===s?n("SubFactory has been destroyed! Cannot add new plugins"):e(t)}).then(function(){return t.createPluginInstance(self,!1).then(function(t){return Object.defineProperties(t,{TrackData:{value:self.TrackData}}),t})})}function m(t,e){var n,r,i=e.length;for(n=0;n<i;n++)t[(r=e[n]).name].apply(t,r.parameters),r.features&&r.features.length>0&&m(t.result[r.name],r.features)}this.parent=t,o.disconnect(),o.connect(n),this.TrackData=new r.LinkedStore("Track"),this.PluginData=new r.LinkedStore("Plugin"),this.featureSender=c,this.getFeatureChain=function(){},this.bypassPlugin=function(t,e){!1!==i.includes(t)&&t.bypass(e)},this.getPrototypes=function(){return this.parent.getPrototypes()},this.getFactory=function(){return this.parent},this.destroy=function(t){var e;for(e=0;e<i.length;e++)this.destroyPlugin(i[e]);o.disconnect(),!0===t&&o.connect(u)},this.createPlugin=function(t){return p(t).catch(function(t){throw"Plugin did not get created! Aborting"}).then(function(t){return h(),i.push(t),l(),f(),d(),t.node.onloaded.call(t.node),t})},this.destroyPlugin=function(t){if(0!==s){var e=this.getPluginIndex(t);e>=0&&(h(),t.node.stop.call(t.node),t.node.onunloaded.call(t.node),t.node.deconstruct.call(t.node),i.splice(e,1),this.parent.deletePlugin(t.id),l(),f(),d())}},this.getPlugins=function(){return i},this.getAllPlugins=function(){return this.parent.getAllPluginsObject()},this.getPluginIndex=function(t){if(0!==s)return i.findIndex(function(t,e,n){return t===this},t)},this.movePlugin=function(t,e){if(0!==s){var n,r,o,u=this.getPluginIndex(t);u>=0&&(h(),l(),n=i.splice(u,1),t.node.onunloaded.call(t.node),0===e?i=n.concat(i):e>=i.length?i=i.concat(n):(r=i.slice(0,e),o=i.slice(e),i=r.concat(n.concat(o))),f(),d(),t.node.onloaded.call(t.node))}},this.copyPlugin=function(t,e){if(void 0===e&&(e=i.length),"number"!=typeof e||e<0||e>i.length)throw"Plugin copy index outside of the chain scope.";return p(t.prototypeObject).catch(function(t){throw"Plugin did not get created! Aborting"}).then(function(n){return n.node.parameters.setParametersByObject(t.node.parameters.getParameterObject()),h(),l(),i.splice(e,0,n),f(),d(),n.node.onloaded.call(n.node),n})},Object.defineProperties(this,{chainStart:{value:e},chainStop:{value:n},name:{get:function(){return a},set:function(t){return"string"==typeof t&&(a=t),a}},recursiveProcessing:{get:function(){return m}}})},g=function(t){var e,n=[];Object.defineProperties(this,{connect:{value:function(t,r,i){if(void 0===t)throw"Must define an AudioNode object";n.find(function(e){return e.destinationNode==t&&e.output==r&&e.input==i})||(n.push({destinationNode:t,output:r,input:i}),void 0===e?console.warn("MIDI Synthesiser is not loaded, connections will be validated on load"):e.node.connect(t,r,i))}},disconnect:{value:function(t,r,i){void 0===t?(e&&e.disconnect(),n=[]):"number"==typeof t&&void 0===r?(r=t,t=void 0,n=n.filter(function(t){return t.output!=r||(e&&e.node.disconnect(t.destinationNode,t.output),!1)})):"object"==typeof t&&void 0===r?n=n.filter(function(n){return n.destinationNode!=t||(e&&e.node.disconnect(n.destinationNode),!1)}):"object"==typeof t&&"number"==typeof r?n=n.filter(function(n){return n.destinationNode!=t||n.output!=r||(e&&e.node.disconnect(n.destinationNode,n.output),!1)}):"object"==typeof t&&"number"==typeof r&&"number"==typeof i&&(n=n.filter(function(n){return n.destinationNode!=t||n.output!=r||n.input!=i||(e&&e.node.disconnect(n.destinationNode,n.output,n.input),!1)}))}},scheduleEvent:{value:function(t,n){if(!e)throw"MIDI Synthesiser not loaded";e.node.scheduleEvent(t,n)}},cancelAllEvents:{value:function(t,n){if(!e)throw"MIDI Synthesiser not loaded";e.node.cancelAllEvents()}},midiSynthesiser:{get:function(){return e},set:function(){throw"Cannot set read-only attribute."}},loadMidiSynthesiserModule:{value:function(t){var r=this;return new Promise(function(e,n){0==t.hasMidiInput||1==t.hasMidiOutput?n("Prototype is not a MidiSynthesis type. hasMidiInput must be true and hasMidiOutput must be false"):e(t)}).then(function(t){return function(t){var e=this;return new Promise(function(e,n){0==t.hasMidiInput||1==t.hasMidiOutput?n("Prototype is not a MidiSynthesis type. hasMidiInput must be true and hasMidiOutput must be false"):e(t)}).then(function(){return t.createPluginInstance(e,!1).then(function(t){return Object.defineProperties(t,{TrackData:{value:e.TrackData}}),t})})}.call(r,t).catch(function(t){throw"Plugin did not get created! Aborting"})}).then(function(t){return e=t,n.forEach(function(t){e.node.connect(t.destinationNode,t.output,t.input)}),e})}}})},y=function(t){return Object.create({setDefaultInterface:function(t,e,n){return{url:t,width:e,height:n}},buildPluginInterface:function(t,e){var n=document.createElement("iframe");return n.src=e.src,e.width&&(n.width=e.width),e.height&&(n.height=e.height),n.style.border="0",n},pollAllPlugins:function(){t.getAllPlugins().forEach(function(t){t.node.externalInterface.updateInterfaces()})}})}(this);Object.defineProperties(this,{context:{value:t},pluginRootURL:{get:function(){return e},set:function(t){if("string"==typeof t)return e=t;throw"Cannot set root URL without a string"}},createFactoryCopy:{value:function(t){return e=t,new Promise(function(t,n){void 0===e.sampleRate?n(new Error("Invalid audio context provided")):t(e)}).then(function(t){var e=new h(t),n=[];return o.forEach(function(t){n.push(e.addPrototype(t.proto))}),Promise.all(n).then(function(){return e})}).then(function(t){return t});var e}},PluginGUI:{value:y}})}(l.prototype=Object.create(i.prototype)).constructor=l,n.d(e,"PluginFactory",function(){return h}),n.d(e,"BasePlugin",function(){return i}),n.d(e,"SynthesiserBasePlugin",function(){return l}),function(){if(void 0===window.jsXtract){var t=document.createElement("script");t.src="https://gitcdn.xyz/repo/nickjillings/js-xtract/master/jsXtract.js",document.getElementsByTagName("head")[0].appendChild(t)}}()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9KU0FQL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL0pTQVAvLi9zcmMvTGlua2VkU3RvcmUuanMiLCJ3ZWJwYWNrOi8vSlNBUC8uL3NyYy9iYXNlX3BsdWdpbi5qcyIsIndlYnBhY2s6Ly9KU0FQLy4vc3JjL3N5bnRoX2Jhc2UuanMiLCJ3ZWJwYWNrOi8vSlNBUC8uL3NyYy9wbHVnaW4tZmFjdG9yeS5qcyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsInNyY19MaW5rZWRTdG9yZSIsIkxpbmtlZFN0b3JlIiwic3RvcmVOYW1lIiwicm9vdCIsIm9iamVjdFRvWE1MIiwib2JqIiwiZG9jIiwidGVybSIsImRvY05vZGUiLCJ0b1hNTCIsImNyZWF0ZUVsZW1lbnQiLCJhcHBlbmRDaGlsZCIsImxlbmd0aCIsImFycmF5VG9YTUwiLCJzZXRBdHRyaWJ1dGUiLCJhcnIiLCJhbGxfbnVtYmVycyIsImFsbF9zdHJpbmdzIiwiZXZlcnkiLCJhIiwiZm9yRWFjaCIsIm5vZGUiLCJkb2N1bWVudCIsImRlZmluZVByb3BlcnRpZXMiLCJ0aGlzIiwic2V0IiwidW5kZWZpbmVkIiwiYWRkVGVybSIsImFkZFRlcm1zIiwidGVybXNPYmplY3QiLCJkZWxldGVUZXJtIiwiZ2V0VGVybSIsImhhc1Rlcm0iLCJ0b0pTT04iLCJKU09OIiwicGFyc2UiLCJzdHJpbmdpZnkiLCJpbXBsZW1lbnRhdGlvbiIsImNyZWF0ZURvY3VtZW50IiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJBdWRpb05vZGUiLCJ3aW5kb3ciLCJpbXBvcnRTY3JpcHRzIiwiZ2V0SW5wdXRzIiwiQmFzZVBsdWdpbiIsImZhY3RvcnkiLCJvd25lciIsImlucHV0TGlzdCIsIm91dHB1dExpc3QiLCJwT3duZXIiLCJldmVudFRhcmdldCIsIkV2ZW50VGFyZ2V0IiwiZGVsZXRlSU8iLCJsaXN0IiwiZmluZEluZGV4IiwiZSIsInNwbGljZSIsImNvbnRleHQiLCJmZWF0dXJlTWFwIiwiUGx1Z2luRmVhdHVyZUludGVyZmFjZSIsImV4dGVybmFsSW50ZXJmYWNlIiwiUGx1Z2luSW50ZXJmYWNlTWVzc2FnZUh1YiIsInBhcmFtZXRlcnMiLCJQYXJhbWV0ZXJNYW5hZ2VyIiwiYWRkSW5wdXQiLCJwdXNoIiwiZGVsZXRlSW5wdXQiLCJhZGRPdXRwdXQiLCJvdXRwdXRzIiwiZGVsZXRlT3V0cHV0Iiwic3RhcnQiLCJzdG9wIiwib25sb2FkZWQiLCJvbnVubG9hZGVkIiwiZGVjb25zdHJ1Y3QiLCJudW1JbnB1dHMiLCJudW1PdXRwdXRzIiwibnVtUGFyYW1ldGVycyIsImlucHV0cyIsImluZGV4IiwiY29ubmVjdCIsImRlc3QiLCJpbnB0IiwiaW5wdXQiLCJkaXNjb25uZWN0IiwiZ2V0T3V0cHV0cyIsImdldFBhcmFtZXRlck5hbWUiLCJnZXRQYXJhbWV0ZXJOYW1lcyIsImdldFBhcmFtZXRlckJ5TmFtZSIsImdldFBhcmFtZXRlck9iamVjdCIsInNldFBhcmFtZXRlckJ5TmFtZSIsInNldFBhcmFtZXRlcnNCeU9iamVjdCIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwicGx1Z2luRXh0ZXJuYWxJbnRlcmZhY2UiLCJwYXJhbWV0ZXJMaXN0IiwiZmluZFBhcmFtZXRlciIsImZpbmQiLCJ0b0xvd2VyQ2FzZSIsImZpbmRQYXJhbWV0ZXJJbmRleCIsImJ1aWxkUGFyYW1ldGVyT2JqZWN0IiwiYWRkUGFyYW1ldGVyIiwicGFyYW0iLCJQbHVnaW5QYXJhbWV0ZXIiLCJkYXRhVHlwZSIsInVwZGF0ZSIsInRyYW5zbGF0ZSIsInRyaWdnZXIiLCJhdWRpb1BhcmFtIiwidiIsImYiLCJiaW5kVG9BdWRpb1BhcmFtIiwiYXAiLCJib3VuZEF1ZGlvUGFyYW0iLCJhY3Rpb25MaXN0IiwiTnVtYmVyUGFyYW1ldGVyIiwiZGVmYXVsdFZhbHVlIiwibWluaW11bSIsIm1heGltdW0iLCJfc3RlcFNpemUiLCJfdmFsdWUiLCJkZXN0cm95IiwiTWF0aCIsIm1heCIsIm1pbiIsInJvdW5kIiwiRXZlbnQiLCJkaXNwYXRjaEV2ZW50Iiwic3RlcFNpemUiLCJpc0Zpbml0ZSIsIlN0cmluZ1BhcmFtZXRlciIsIm1heExlbmd0aCIsIkJ1dHRvblBhcmFtZXRlciIsIm9uY2xpY2siLCJTd2l0Y2hQYXJhbWV0ZXIiLCJtaW5TdGF0ZSIsIm1heFN0YXRlIiwic2V0ViIsImVudHJ5IiwidGltZSIsIkRhdGUiLCJpbmNyZW1lbnQiLCJkZWNyZW1lbnQiLCJMaXN0UGFyYW1ldGVyIiwibGlzdE9mVmFsdWVzIiwiX2luZGV4IiwiaW5kZXhPZiIsImxpc3RWYWx1ZXMiLCJjb25zdHJ1Y3RvciIsImNyZWF0ZU51bWJlclBhcmFtZXRlciIsImNyZWF0ZVN0cmluZ1BhcmFtZXRlciIsImNyZWF0ZUJ1dHRvblBhcmFtZXRlciIsImNyZWF0ZVN3aXRjaFBhcmFtZXRlciIsImNyZWF0ZVBhcmFtZXRlciIsIm5hbWVzIiwicGFyYW1ldGVyIiwiZGVsZXRlUGFyYW1ldGVyIiwiZGVsZXRlQWxsUGFyYW1ldGVycyIsIkJhc2VQbHVnaW5JbnN0YW5jZSIsInBsdWdpbiIsIlJlY2VpdmVyIiwiUGx1Z2luRmVhdHVyZUludGVyZmFjZVJlY2VpdmVyIiwiRmVhdHVyZU1hcCIsIlNlbmRlciIsIlBsdWdpbkZlYXR1cmVJbnRlcmZhY2VTZW5kZXIiLCJvbmZlYXR1cmVzIiwiZnVuYyIsIkZlYXR1cmVJbnRlcmZhY2VJbnN0YW5jZSIsIkZhY3RvcnlGZWF0dXJlTWFwIiwiY2hlY2tGZWF0dXJlQXJncyIsInNvdXJjZSIsImZlYXR1cmVPYmplY3QiLCJvdXRwdXRJbmRleCIsImZyYW1lU2l6ZSIsImZlYXR1cmVzIiwiY19mZWF0dXJlcyIsInJlcXVlc3RGZWF0dXJlcyIsImZlYXR1cmVMaXN0IiwicmVxdWVzdEZlYXR1cmVzRnJvbVBsdWdpbiIsImNhbmNlbEZlYXR1cmVzRnJvbVBsdWdpbiIsImRlbGV0ZUZlYXR1cmVzIiwiY2FuY2VsQWxsRmVhdHVyZXNGcm9tUGx1Z2luIiwiY2FuY2VsQWxsRmVhdHVyZXMiLCJwb3N0RmVhdHVyZXMiLCJNZXNzYWdlIiwiT3V0cHV0Tm9kZSIsInBhcmVudCIsIm91dHB1dCIsImV4dHJhY3RvcnMiLCJFeHRyYWN0b3IiLCJleHRyYWN0b3IiLCJjcmVhdGVBbmFseXNlciIsImZmdFNpemUiLCJyZWN1cnNpdmVQcm9jZXNzaW5nIiwib25hdWRpb2NhbGxiYWNrIiwiZGF0YSIsIm1lc3NhZ2UiLCJudW1iZXJPZkNoYW5uZWxzIiwicmVzdWx0cyIsImNoYW5uZWwiLCJzZXRGZWF0dXJlcyIsImNsZWFyQ2FsbGJhY2siLCJmcmFtZUNhbGxiYWNrIiwiV29ya2VyRXh0cmFjdG9yIiwid29ya2VyIiwiV29ya2VyIiwib25lcnJvciIsImNvbnNvbGUiLCJlcnJvciIsInNlbGYiLCJjb25maWdNZXNzYWdlIiwic3RhdGUiLCJzYW1wbGVSYXRlIiwibnVtQ2hhbm5lbHMiLCJudW1iZXJPZk91dHB1dHMiLCJvbm1lc3NhZ2UiLCJtc2ciLCJyZXNwb25zZSIsIm9uYXVkaW9wcm9jZXNzIiwiZnJhbWVzIiwiaW5wdXRCdWZmZXIiLCJnZXRDaGFubmVsRGF0YSIsInBvc3RNZXNzYWdlIiwiY3JlYXRlU2NyaXB0UHJvY2Vzc29yIiwiZGVzdGluYXRpb24iLCJhZGRFeHRyYWN0b3IiLCJyZXN1bHRzSlNPTiIsImZpbmRFeHRyYWN0b3IiLCJjaGVjayIsImRlbGV0ZUV4dHJhY3RvciIsIm91dHB1dE5vZGVzIiwidXBkYXRlRmVhdHVyZXMiLCJyZXN1bHRPYmplY3QiLCJzaSIsInBsdWdpbkluc3RhbmNlIiwiY3JlYXRlU291cmNlTWFwIiwiUGx1Z2luVXNlckludGVyZmFjZSIsIndpZHRoIiwiaGVpZ2h0IiwibG9nIiwicHJvY2Vzc29yIiwic3R5bGUiLCJkaW0iLCJpbnRlcnZhbEZ1bmN0aW9uIiwidXBkYXRlSW50ZXJ2YWwiLCJQbHVnaW5QYXJhbWV0ZXJJbnRlcmZhY2VzIiwiUGx1Z2luUGFyYW1ldGVySW50ZXJmYWNlTm9kZSIsIkRPTSIsIlBsdWdpblBhcmFtZXRlckluc3RhbmNlIiwiZ3VpIiwiR1VJIiwiQXVkaW9QYXJhbSIsImhhbmRsZUV2ZW50IiwiZXZlbnQiLCJjcmVhdGVQbHVnaW5QYXJhbWV0ZXJJbnRlcmZhY2VOb2RlIiwiZ2V0Um9vdCIsImdldERpbWVuc2lvbnMiLCJnZXRXaWR0aCIsImdldEhlaWdodCIsImJlZ2luQ2FsbGJhY2tzIiwibXMiLCJzZXRJbnRlcnZhbCIsInN0b3BDYWxsYmFja3MiLCJjbGVhckludGVydmFsIiwibG9hZFJlc291cmNlIiwidXJsIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJyZXEiLCJYTUxIdHRwUmVxdWVzdCIsIm9wZW4iLCJvbmxvYWQiLCJzdGF0dXMiLCJFcnJvciIsInN0YXR1c1RleHQiLCJzZW5kIiwiY2xlYXJHVUkiLCJpbm5lckhUTUwiLCJidWlsZFBhcmFtZXRlclVwZGF0ZVBheWxvYWQiLCJzZW5kZXJfaWQiLCJPIiwidHlwZSIsImJyb2FkY2FzdFBhcmFtZXRlclVwZGF0ZXMiLCJ3aW5kb3dNZXNzYWdlTGlzdCIsInciLCJrZXlzIiwic2V0UGFyYW1ldGVyTWVzc2FnZSIsInVwZGF0ZUludGVyZmFjZXMiLCJjbG9zZVdpbmRvd3MiLCJwb3AiLCJjbG9zZSIsInJlZ2lzdGVyV2luZG93IiwiaW5jbHVkZXMiLCJTeW50aGVzaXNlckJhc2VQbHVnaW4iLCJoYXNXYXJuZWRTY2hlZHVsZU5vdFNldCIsImhhc1dhcm5lZENhbmNlbE5vdFNldCIsInNjaGVkdWxlRXZlbnQiLCJjb250ZXh0VGltZSIsIndhcm5pbmciLCJ3cml0YWJsZSIsImNhbmNlbEFsbEV2ZW50cyIsInBsdWdpbl9mYWN0b3J5X1BsdWdpbkZhY3RvcnkiLCJhdWRpb19jb250ZXh0Iiwicm9vdFVSTCIsInN1YkZhY3RvcmllcyIsInN5bnRoZXNpc2VySG9zdHMiLCJwbHVnaW5fcHJvdG90eXBlcyIsInBsdWdpbnNMaXN0IiwiY3VycmVudFBsdWdpbklkIiwiYXVkaW9TdGFydGVkIiwicmVzb3VyY2VPYmplY3QiLCJzdGFydHNXaXRoIiwieGhyIiwib25yZWFkeXN0YXRlY2hhbmdlIiwicmVhZHlTdGF0ZSIsInNjcmlwdCIsInRleHRDb250ZW50IiwicmVzcG9uc2VUZXh0IiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJ0ZXN0IiwidGhlbiIsInJldHVybk9iamVjdCIsIlN0cmluZyIsImxvYWRQbHVnaW5TY3JpcHQiLCJhZGRQcm90b3R5cGUiLCJQbHVnaW5JbnN0YW5jZSIsImlkIiwicGx1Z2luX25vZGUiLCJuZXh0X25vZGUiLCJfYnlwYXNzZWQiLCJfaW4iLCJjcmVhdGVHYWluIiwiX291dCIsImJ5cGFzcyIsImlzQnlwYXNzZWQiLCJyZWNvbm5lY3QiLCJuZXdfbmV4dCIsImJ5cGFzc2VkIiwiTWlkaVN5bnRoZXNpc0luc3RhbmNlIiwic3ludGhOb2RlIiwiUGx1Z2luUHJvdG90eXBlIiwicHJvdG8iLCJsb2FkUmVzb3VyY2VDaGFpbiIsImsiLCJyZXNvdXJjZXMiLCJyZWN1cnNpdmVHZXRUZXN0IiwidmVyc2lvbiIsInVuaXF1ZUlEIiwiaGFzTWlkaUlucHV0IiwiaGFzTWlkaU91dHB1dCIsImNyZWF0ZVBsdWdpbkluc3RhbmNlIiwiYXN5bmMiLCJhbGwiLCJyZXNvdXJjZVByb21pc2VzIiwiY2hlY2tJc1JlYWR5IiwiaW5pdGlhbGlzZSIsInByb3RvdHlwZU9iamVjdCIsIlNlc2lvbkRhdGEiLCJTZXNzaW9uRGF0YSIsIlVzZXJEYXRhIiwicmVnaXN0ZXJQbHVnaW5JbnN0YW5jZSIsImNzcyIsInJlc291cmNlIiwicHJvbWlzZSIsImNvbXBsZXRlIiwiZ2V0UmVzb3VyY2VQcm9taXNlcyIsInBsdWdpbl9wcm90byIsInRlc3RPYmoiLCJtYXRjaCIsImdldFByb3RvdHlwZXMiLCJnZXRBdWRpb1BsdWdpblByb3RvdHlwZXMiLCJmaWx0ZXIiLCJnZXRNaWRpU3ludGhQcm90b3R5cGVzIiwiZ2V0TWlkaVBsdWdpblByb3RvdHlwZXMiLCJnZXRBbGxQbHVnaW5zIiwiZ2V0QWxsUGx1Z2luc09iamVjdCIsInN1YkZhY3RvcnkiLCJwbHVnaW5zIiwiZ2V0UGx1Z2lucyIsImNyZWF0ZVN1YkZhY3RvcnkiLCJjaGFpblN0YXJ0IiwiY2hhaW5TdG9wIiwid2FybiIsImNyZWF0ZUF1ZGlvUGx1Z2luQ2hhaW5NYW5hZ2VyIiwiZGVzdHJveVN1YkZhY3RvcnkiLCJkZXN0cm95QXVkaW9QbHVnaW5DaGFpbk1hbmFnZXIiLCJBdWRpb1BsdWdpbkNoYWluTWFuYWdlciIsIlN1YkZhY3RvcnkiLCJlbGVtZW50IiwiY3JlYXRlTWlkaVN5bnRoZXNpc2VySG9zdCIsImhvc3QiLCJNaWRpU3ludGhlc2lzZXJIb3N0IiwiZGVzdHJveU1pZGlTeW50aGVzaXNlckhvc3QiLCJpbnN0YW5jZSIsImRlbGV0ZVBsdWdpbiIsImF1ZGlvU3RhcnQiLCJhdWRpb1N0b3AiLCJNYXBwaW5ncyIsIkZlYXR1cmVOb2RlIiwiZ2V0RmVhdHVyZU5vZGUiLCJhZGRGZWF0dXJlTm9kZSIsImZlYXR1cmVOb2RlIiwiU291cmNlTWFwIiwicGx1Z2luSW5zdGFjZSIsImZpbmRGZWF0dXJlT2JqZWN0IiwidXBkYXRlU2VuZGVyIiwicmVjdXJzaXZlRmluZCIsImZyYW1lTGlzdCIsImdldEZlYXR1cmVMaXN0IiwiZ2V0U291cmNlSW5zdGFuY2UiLCJnZXRTZW5kZXIiLCJyZXF1ZXN0b3JJbnN0YW5jZSIsIm1hcCIsInJlcXVlc3RvcnMiLCJGIiwiY29uY2F0IiwicmVxdWVzdG9yIiwiZ2V0UmVxdWVzdG9ySW5zdGFuY2UiLCJSZXF1ZXN0b3JNYXAiLCJhZGRGZWF0dXJlcyIsImZpbmRGcmFtZU1hcCIsImNhbmNlbEZlYXR1cmVzIiwicmVxdWVzdG9ySW5kZXgiLCJGZWF0dXJlcyIsInJlY3Vyc2l2ZWx5QWRkRmVhdHVyZXMiLCJyb290QXJyYXkiLCJyZWN1cnNpdmVseURlbGV0ZUZlYXR1cmVzIiwicmVjdXJzaXZlUG9zdEZlYXR1cmVzIiwicm9vdE5vZGUiLCJyZXN1bHRzTGlzdCIsIkZlYXR1cmVMaXN0IiwiYW8iLCJmaW5kU291cmNlSW5kZXgiLCJmaW5kU291cmNlTWFwIiwicGx1Z2luU2VuZGVyIiwic291cmNlTWFwIiwiZGVsZXRlU291cmNlTWFwIiwiZ2V0UGx1Z2luU2VuZGVyIiwic3RvcmVzIiwiY3JlYXRlU3RvcmUiLCJnZXRTdG9yZXMiLCJmaW5kU3RvcmUiLCJTdWJGYWN0b3J5RmVhdHVyZVNlbmRlciIsInJlam9pbkV4dHJhY3RvciIsIk51bWJlciIsInJlam9pbkV4dHJhY3RvcnMiLCJQbHVnaW5GYWN0b3J5IiwicGx1Z2luX2xpc3QiLCJwbHVnaW5DaGFpblN0YXJ0IiwicGx1Z2luQ2hhaW5TdG9wIiwiZmFjdG9yeU5hbWUiLCJjaGFpblN0YXJ0RmVhdHVyZSIsInJlYnVpbGQiLCJjdXJyZW50Tm9kZSIsIm5leHROb2RlIiwiaXNvbGF0ZSIsImN1dENoYWluIiwiam9pbkNoYWluIiwiYnVpbGROZXdQbHVnaW4iLCJUcmFja0RhdGEiLCJiYXNlIiwiYXBwbHkiLCJyZXN1bHQiLCJQbHVnaW5EYXRhIiwiZmVhdHVyZVNlbmRlciIsImdldEZlYXR1cmVDaGFpbiIsImJ5cGFzc1BsdWdpbiIsInBsdWdpbl9pbnN0YW5jZSIsImdldEZhY3RvcnkiLCJkZXN0cm95UGx1Z2luIiwiY3JlYXRlUGx1Z2luIiwiY2F0Y2giLCJwbHVnaW5fb2JqZWN0IiwiZ2V0UGx1Z2luSW5kZXgiLCJhcnJheSIsIm1vdmVQbHVnaW4iLCJuZXdfaW5kZXgiLCJob2xkTG93IiwiaG9sZEhpZ2giLCJzbGljZSIsImNvcHlQbHVnaW4iLCJjb3B5X2luZGV4IiwibWlkaVN5bnRoU2xvdCIsImNvbm5lY3Rpb25zIiwiZGVzdGluYXRpb25Ob2RlIiwiY29ubiIsIm1pZGlTeW50aGVzaXNlciIsImxvYWRNaWRpU3ludGhlc2lzZXJNb2R1bGUiLCJQbHVnaW5Vc2VySW50ZXJmYWNlTWVzc2FnZUh1YiIsInNldERlZmF1bHRJbnRlcmZhY2UiLCJidWlsZFBsdWdpbkludGVyZmFjZSIsImludGVyZmFjZV9vYmplY3QiLCJpZnJhbWUiLCJzcmMiLCJib3JkZXIiLCJwb2xsQWxsUGx1Z2lucyIsInBsdWdpblJvb3RVUkwiLCJjcmVhdGVGYWN0b3J5Q29weSIsIm5ld2NvbnRleHQiLCJCRmFjdG9yeSIsInByb21pc2VzIiwibmV3RmFjdG9yeSIsIlBsdWdpbkdVSSIsIl9fd2VicGFja19leHBvcnRzX18iLCJqc1h0cmFjdCJdLCJtYXBwaW5ncyI6InFCQUNBLElBQUFBLEVBQUEsR0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxHQUFBLENBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsUUFBQSxJQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUEwREEsT0FyREFGLEVBQUFRLEVBQUFGLEVBR0FOLEVBQUFTLEVBQUFWLEVBR0FDLEVBQUFVLEVBQUEsU0FBQVIsRUFBQVMsRUFBQUMsR0FDQVosRUFBQWEsRUFBQVgsRUFBQVMsSUFDQUcsT0FBQUMsZUFBQWIsRUFBQVMsRUFBQSxDQUEwQ0ssWUFBQSxFQUFBQyxJQUFBTCxLQUsxQ1osRUFBQWtCLEVBQUEsU0FBQWhCLEdBQ0Esb0JBQUFpQixlQUFBQyxhQUNBTixPQUFBQyxlQUFBYixFQUFBaUIsT0FBQUMsWUFBQSxDQUF3REMsTUFBQSxXQUV4RFAsT0FBQUMsZUFBQWIsRUFBQSxj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QXdELEVBQUEsSUFBQU0sTUFBQSxtQ0FFQVAsRUFBQXdPLEtBRVNsTCxLQUFBLFNBQUFrTCxHQUNULElBQUFDLEVBQUEsSUFBK0J0TSxFQUFhcU0sR0FDNUNFLEVBQUEsR0FJQSxPQUhBbE0sRUFBQS9SLFFBQUEsU0FBQWtVLEdBQ0ErSixFQUFBcGIsS0FBQW1iLEVBQUEvSyxhQUFBaUIsWUFFQTVFLFFBQUF1RixJQUFBb0osR0FBQXBMLEtBQUEsV0FDQSxPQUFBbUwsTUFFU25MLEtBQUEsU0FBQXFMLEdBQ1QsT0FBQUEsSUFsQkEsSUFBQUgsSUFzK0NBSSxVQUFBLENBQ0F0Z0IsTUFBQXdmLE1EempEQW5NLEVBQUExUyxVQUFBbEIsT0FBQVksT0FBZ0RzRCxFQUFVaEQsWUFDMUR3SixZQUFBa0osRUN6Q0ExVSxFQUFBVSxFQUFBa2hCLEVBQUEsa0NBQUExTSxJQUFBbFYsRUFBQVUsRUFBQWtoQixFQUFBLCtCQUFBNWMsSUFBQWhGLEVBQUFVLEVBQUFraEIsRUFBQSwwQ0FBQWxOLElBT0EsV0FDQSxRQUFBNVEsSUFBQWUsT0FBQWdkLFNBQUEsQ0FDQSxJQUFBMWYsRUFBQXVCLFNBQUFaLGNBQUEsVUFDQVgsRUFBQStlLElBQUEsb0VBQ0F4ZCxTQUFBeVMscUJBQUEsV0FBQXBULFlBQUFaLElBSkEiLCJmaWxlIjoianNhcC5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsIi8qZ2xvYmFscyBkb2N1bWVudCAqL1xyXG4vKmVzbGludC1lbnYgYnJvd3NlciAqL1xyXG5cclxudmFyIExpbmtlZFN0b3JlID0gZnVuY3Rpb24gKHN0b3JlTmFtZSkge1xyXG4gICAgLy8gU3RvcmUgZm9yIHRoZSBzZW1hbnRpYyB0ZXJtcywgZWFjaCBzdG9yZSBob2xkcyBpdHMgb3duIGRhdGEgdHJlZVxyXG4gICAgLy8gVGVybXMgYXJlIGFkZGVkIGFzIGtleS92YWx1ZSBwYXJpcyB0byBhIHJvb3Qgbm9kZVxyXG4gICAgdmFyIHJvb3QgPSB7fTtcclxuXHJcbiAgICBmdW5jdGlvbiBvYmplY3RUb1hNTChvYmosIHJvb3QsIGRvYykge1xyXG4gICAgICAgIC8vIFVzZWQgaWYgYW4gb2JqZWN0IHdhcyBwYXNzZWQgYXMgYSB0ZXJtIHZhbHVlXHJcbiAgICAgICAgdmFyIHRlcm07XHJcbiAgICAgICAgZm9yICh0ZXJtIGluIG9iaikge1xyXG4gICAgICAgICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KHRlcm0pKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9ialt0ZXJtXSA9PT0gXCJvYmplY3RcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkb2NOb2RlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvYmpbdGVybV0udG9YTUwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jTm9kZSA9IG9ialt0ZXJtXS50b1hNTChkb2MpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY05vZGUgPSBkb2MuY3JlYXRlRWxlbWVudCh0ZXJtKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcm9vdC5hcHBlbmRDaGlsZChkb2NOb2RlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9ialt0ZXJtXS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5VG9YTUwob2JqW3Rlcm1dLCBkb2NOb2RlLCBkb2MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0VG9YTUwob2JqW3Rlcm1dLCBkb2NOb2RlLCBkb2MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJvb3QuYXBwZW5kQ2hpbGQoZG9jTm9kZSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJvb3Quc2V0QXR0cmlidXRlKHRlcm0sIG9ialt0ZXJtXSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gYXJyYXlUb1hNTChhcnIsIHJvb3QsIGRvYykge1xyXG4gICAgICAgIC8vIFVzZWQgdG8gY29udmVydCBhbiBhcnJheSB0byBhIGxpc3Qgb2YgWE1MIGVudHJpZXNcclxuICAgICAgICB2YXIgYWxsX251bWJlcnMgPSB0cnVlLFxyXG4gICAgICAgICAgICBhbGxfc3RyaW5ncyA9IHRydWUsXHJcbiAgICAgICAgICAgIGksIGwgPSBhcnIubGVuZ3RoO1xyXG4gICAgICAgIGFsbF9udW1iZXJzID0gYXJyLmV2ZXJ5KGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0eXBlb2YgYSA9PT0gXCJudW1iZXJcIjtcclxuICAgICAgICB9KTtcclxuICAgICAgICBhbGxfc3RyaW5ncyA9IGFyci5ldmVyeShmdW5jdGlvbiAoYSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdHlwZW9mIGEgPT09IFwic3RyaW5nXCI7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKGFsbF9udW1iZXJzIHx8IGFsbF9zdHJpbmdzKSB7XHJcbiAgICAgICAgICAgIC8vIEFuIGFycmF5IG9mIG51bWJlcnMgb3Igc3RyaW5nc1xyXG4gICAgICAgICAgICBhcnIuZm9yRWFjaChmdW5jdGlvbiAoYSwgaSkge1xyXG4gICAgICAgICAgICAgICAgcm9vdC5zZXRBdHRyaWJ1dGUoXCJpbmRleC1cIiArIGksIGEpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBBbiBhcnJheSBvZiBvYmplY3RzXHJcbiAgICAgICAgICAgIGFyci5mb3JFYWNoKGZ1bmN0aW9uIChhLCBpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ2YWx1ZVwiKTtcclxuICAgICAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKFwiaW5kZXhcIiwgaSk7XHJcbiAgICAgICAgICAgICAgICBvYmplY3RUb1hNTChhLCBub2RlLCBkb2MpO1xyXG4gICAgICAgICAgICAgICAgcm9vdC5hcHBlbmRDaGlsZChub2RlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMsIHtcclxuICAgICAgICAnbmFtZSc6IHtcclxuICAgICAgICAgICAgJ2dldCc6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzdG9yZU5hbWU7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzZXQnOiBmdW5jdGlvbiAobmFtZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHN0b3JlTmFtZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZSA9IHN0b3JlTmFtZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgKFwiTmFtZSBpcyBhbHJlYWR5IHNldFwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgJ2FkZFRlcm0nOiB7XHJcbiAgICAgICAgICAgICd2YWx1ZSc6IGZ1bmN0aW9uICh0ZXJtLCB2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0ZXJtICE9PSBcInN0cmluZ1wiICYmIHRlcm0ubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgKFwidGVybSBtdXN0IGJlIGEgc3RyaW5nXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcm9vdFt0ZXJtXSA9IHZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICAnYWRkVGVybXMnOiB7XHJcbiAgICAgICAgICAgICd2YWx1ZSc6IGZ1bmN0aW9uICh0ZXJtc09iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0ZXJtc09iamVjdCAhPT0gXCJvYmplY3RcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IChcImFkZFRlcm1zIHRha2VzIGFuIG9iamVjdCBvZiB0ZXJtL3ZhbHVlIHBhaXJzXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdmFyIHRlcm07XHJcbiAgICAgICAgICAgICAgICBmb3IgKHRlcm0gaW4gdGVybXNPYmplY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGVybXNPYmplY3QuaGFzT3duUHJvcGVydHkodGVybSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRUZXJtKHRlcm0sIHRlcm1zT2JqZWN0W3Rlcm1dKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgICdkZWxldGVUZXJtJzoge1xyXG4gICAgICAgICAgICAndmFsdWUnOiBmdW5jdGlvbiAodGVybSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hZGRUZXJtKHRlcm0sIHVuZGVmaW5lZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgICdnZXRUZXJtJzoge1xyXG4gICAgICAgICAgICAndmFsdWUnOiBmdW5jdGlvbiAodGVybSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0ZXJtICE9PSBcInN0cmluZ1wiICYmIHRlcm0ubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgKFwidGVybSBtdXN0IGJlIGEgc3RyaW5nXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJvb3RbdGVybV07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgICdoYXNUZXJtJzoge1xyXG4gICAgICAgICAgICAndmFsdWUnOiBmdW5jdGlvbiAodGVybSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0ZXJtICE9PSBcInN0cmluZ1wiICYmIHRlcm0ubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgKFwidGVybSBtdXN0IGJlIGEgc3RyaW5nXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJvb3QuaGFzT3duUHJvcGVydHkodGVybSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgICd0b0pTT04nOiB7XHJcbiAgICAgICAgICAgICd2YWx1ZSc6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHJvb3QpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgJ3RvWE1MJzoge1xyXG4gICAgICAgICAgICAndmFsdWUnOiBmdW5jdGlvbiAoZG9jKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbm9kZTtcclxuICAgICAgICAgICAgICAgIGlmICghZG9jKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZG9jID0gZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlRG9jdW1lbnQobnVsbCwgc3RvcmVOYW1lLCBudWxsKTtcclxuICAgICAgICAgICAgICAgICAgICBub2RlID0gZG9jLmZpcnN0RWxlbWVudENoaWxkO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBub2RlID0gZG9jLmNyZWF0ZUVsZW1lbnQoc3RvcmVOYW1lKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIG9iamVjdFRvWE1MKHJvb3QsIG5vZGUsIGRvYyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQge0xpbmtlZFN0b3JlfTtcclxuIiwiLy8gQWRkIGdldElucHV0cyB0byBhbGwgQXVkaW9Ob2RlcyB0byBlYXNlIGRlcGxveW1lbnRcclxuLypnbG9iYWxzIEF1ZGlvTm9kZSwgV29ya2VyLCBjb25zb2xlLCB3aW5kb3csIGRvY3VtZW50LCBQcm9taXNlLCBYTUxIdHRwUmVxdWVzdCAqL1xyXG4vKmVzbGludC1lbnYgYnJvd3NlciAqL1xyXG4vKmpzaGludCBlc3ZlcnNpb246IDYgKi9cclxuaWYgKHR5cGVvZiBBdWRpb05vZGUgPT09IFwiZnVuY3Rpb25cIiAmJiB3aW5kb3cuaW1wb3J0U2NyaXB0cyA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICBBdWRpb05vZGUucHJvdG90eXBlLmdldElucHV0cyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gW3RoaXNdO1xyXG4gICAgfTtcclxufVxyXG5cclxuLy8gVGhpcyBzaG91bGQgc2ltcGx5IGRlZmluZSB0aGUgQmFzZVBsdWdpbiBmcm9tIHdoaWNoIGN1c3RvbSBwbHVnaW5zIGNhbiBiZSBidWlsdCBmcm9tXHJcbnZhciBCYXNlUGx1Z2luID0gZnVuY3Rpb24oZmFjdG9yeSwgb3duZXIpIHtcclxuICAgIHZhciBpbnB1dExpc3QgPSBbXSxcclxuICAgICAgICBvdXRwdXRMaXN0ID0gW10sXHJcbiAgICAgICAgcE93bmVyID0gb3duZXIsXHJcbiAgICAgICAgZXZlbnRUYXJnZXQgPSBuZXcgRXZlbnRUYXJnZXQoKTtcclxuICAgIGlmICh0aGlzLmNvbnRleHQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHRoaXMuY29udGV4dCA9IGZhY3RvcnkuY29udGV4dDtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLmZhY3RvcnkgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHRoaXMuZmFjdG9yeSA9IGZhY3Rvcnk7XHJcbiAgICB9XHJcbiAgICB0aGlzLmZlYXR1cmVNYXAgPSBuZXcgUGx1Z2luRmVhdHVyZUludGVyZmFjZSh0aGlzKTtcclxuICAgIHRoaXMuZXh0ZXJuYWxJbnRlcmZhY2UgPSBuZXcgUGx1Z2luSW50ZXJmYWNlTWVzc2FnZUh1Yih0aGlzKTtcclxuICAgIHRoaXMucGFyYW1ldGVycyA9IG5ldyBQYXJhbWV0ZXJNYW5hZ2VyKHRoaXMsIHRoaXMuZXh0ZXJuYWxJbnRlcmZhY2UsIGV2ZW50VGFyZ2V0KTtcclxuXHJcbiAgICBmdW5jdGlvbiBkZWxldGVJTyhub2RlLCBsaXN0KSB7XHJcbiAgICAgICAgdmFyIGkgPSBsaXN0LmZpbmRJbmRleChmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZSA9PT0gdGhpcztcclxuICAgICAgICB9LCBub2RlKTtcclxuICAgICAgICBpZiAoaSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsaXN0LnNwbGljZShpLCAxKTtcclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLmFkZElucHV0ID0gZnVuY3Rpb24gKG5vZGUpIHtcclxuICAgICAgICBpbnB1dExpc3QucHVzaChub2RlKTtcclxuICAgICAgICByZXR1cm4gaW5wdXRMaXN0O1xyXG4gICAgfTtcclxuICAgIHRoaXMuZGVsZXRlSW5wdXQgPSBmdW5jdGlvbiAobm9kZSkge1xyXG4gICAgICAgIHJldHVybiBkZWxldGVJTyhub2RlLCBpbnB1dExpc3QpO1xyXG4gICAgfTtcclxuICAgIHRoaXMuYWRkT3V0cHV0ID0gZnVuY3Rpb24gKG5vZGUpIHtcclxuICAgICAgICBvdXRwdXRMaXN0LnB1c2gobm9kZSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMub3V0cHV0cztcclxuICAgIH07XHJcbiAgICB0aGlzLmRlbGV0ZU91dHB1dCA9IGZ1bmN0aW9uIChub2RlKSB7XHJcbiAgICAgICAgcmV0dXJuIGRlbGV0ZUlPKG5vZGUsIG91dHB1dExpc3QpO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnN0YXJ0ID0gdGhpcy5zdG9wID0gdGhpcy5vbmxvYWRlZCA9IHRoaXMub251bmxvYWRlZCA9IHRoaXMuZGVjb25zdHJ1Y3QgPSBmdW5jdGlvbiAoKSB7fTtcclxuXHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLCB7XHJcbiAgICAgICAgXCJudW1JbnB1dHNcIjoge1xyXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBpbnB1dExpc3QubGVuZ3RoO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IChcIkNhbm5vdCBzZXQgdGhlIG51bWJlciBvZiBpbnB1dHMgb2YgQmFzZVBsdWdpblwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgXCJudW1PdXRwdXRzXCI6IHtcclxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb3V0cHV0TGlzdC5sZW5ndGg7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgKFwiQ2Fubm90IHNldCB0aGUgbnVtYmVyIG9mIG91dHB1dHMgb2YgQmFzZVBsdWdpblwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgXCJudW1QYXJhbWV0ZXJzXCI6IHtcclxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJhbWV0ZXJzLnBhcmFtZXRlcnMubGVuZ3RoO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IChcIkNhbm5vdCBzZXQgdGhlIG51bWJlciBvZiBwYXJhbWV0ZXJzIG9mIEJhc2VQbHVnaW5cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIFwib3duZXJcIjoge1xyXG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBwT3duZXI7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKG93bmVyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG93bmVyID09PSBcIm9iamVjdFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcE93bmVyID0gb3duZXI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcE93bmVyO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBcImlucHV0c1wiOiB7XHJcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKGluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaW5wdXRMaXN0O1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IChcIklsbGVnYWwgYXR0ZW1wdCB0byBtb2RpZnkgQmFzZVBsdWdpblwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgXCJvdXRwdXRzXCI6IHtcclxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoaW5kZXgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBvdXRwdXRMaXN0O1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IChcIklsbGVnYWwgYXR0ZW1wdCB0byBtb2RpZnkgQmFzZVBsdWdpblwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgXCJjb25uZWN0XCI6IHtcclxuICAgICAgICAgICAgXCJ2YWx1ZVwiOiBmdW5jdGlvbiAoZGVzdCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vdXRwdXRzWzBdLmNvbm5lY3QoZGVzdC5pbnB0ID8gZGVzdC5pbnB1dCA6IGRlc3QpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBcImRpc2Nvbm5lY3RcIjoge1xyXG4gICAgICAgICAgICBcInZhbHVlXCI6IGZ1bmN0aW9uIChkZXN0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGVzdCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vdXRwdXRzWzBdLmRpc2Nvbm5lY3QoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vdXRwdXRzWzBdLmRpc2Nvbm5lY3QoZGVzdC5pbnB1dCA/IGRlc3QuaW5wdXQgOiBkZXN0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgXCJnZXRJbnB1dHNcIjoge1xyXG4gICAgICAgICAgICBcInZhbHVlXCI6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmlucHV0cztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgXCJnZXRPdXRwdXRzXCI6IHtcclxuICAgICAgICAgICAgXCJ2YWx1ZVwiOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5vdXRwdXRzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBcImdldFBhcmFtZXRlck5hbWVcIjoge1xyXG4gICAgICAgICAgICBcInZhbHVlXCI6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcmFtZXRlcnMuZ2V0UGFyYW1ldGVyTmFtZXMoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgXCJnZXRQYXJhbWV0ZXJCeU5hbWVcIjoge1xyXG4gICAgICAgICAgICBcInZhbHVlXCI6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcmFtZXRlcnMuZ2V0UGFyYW1ldGVyQnlOYW1lKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIFwiZ2V0UGFyYW1ldGVyT2JqZWN0XCI6IHtcclxuICAgICAgICAgICAgXCJ2YWx1ZVwiOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJhbWV0ZXJzLmdldFBhcmFtZXRlck9iamVjdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBcInNldFBhcmFtZXRlckJ5TmFtZVwiOiB7XHJcbiAgICAgICAgICAgIFwidmFsdWVcIjogZnVuY3Rpb24gKG5hbWUsIHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJhbWV0ZXJzLnNldFBhcmFtZXRlckJ5TmFtZShuYW1lLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIFwic2V0UGFyYW1ldGVyc0J5T2JqZWN0XCI6IHtcclxuICAgICAgICAgICAgXCJ2YWx1ZVwiOiBmdW5jdGlvbiAob2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJhbWV0ZXJzLnNldFBhcmFtZXRlcnNCeU9iamVjdChvYmplY3QpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBcImFkZEV2ZW50TGlzdGVuZXJcIjoge1xyXG4gICAgICAgICAgICBcInZhbHVlXCI6IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBldmVudFRhcmdldC5hZGRFdmVudExpc3RlbmVyKGtleSwgdmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBcInJlbW92ZUV2ZW50TGlzdGVuZXJcIjoge1xyXG4gICAgICAgICAgICBcInZhbHVlXCI6IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBldmVudFRhcmdldC5hZGRFdmVudExpc3RlbmVyKGtleSwgdmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn07XHJcblxyXG52YXIgUGFyYW1ldGVyTWFuYWdlciA9IGZ1bmN0aW9uIChvd25lciwgcGx1Z2luRXh0ZXJuYWxJbnRlcmZhY2UsIGV2ZW50VGFyZ2V0KSB7XHJcbiAgICB2YXIgcGFyYW1ldGVyTGlzdCA9IFtdO1xyXG5cclxuICAgIGZ1bmN0aW9uIGZpbmRQYXJhbWV0ZXIobmFtZSkge1xyXG4gICAgICAgIHJldHVybiBwYXJhbWV0ZXJMaXN0LmZpbmQoZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGUubmFtZS50b0xvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gZmluZFBhcmFtZXRlckluZGV4KG5hbWUpIHtcclxuICAgICAgICByZXR1cm4gcGFyYW1ldGVyTGlzdC5maW5kSW5kZXgoZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGUubmFtZS50b0xvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gYnVpbGRQYXJhbWV0ZXJPYmplY3QoKSB7XHJcbiAgICAgICAgdmFyIG9iaiA9IHt9O1xyXG4gICAgICAgIHBhcmFtZXRlckxpc3QuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBvYmpbZS5uYW1lXSA9IGU7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIG9iajtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBhZGRQYXJhbWV0ZXIocGFyYW0pIHtcclxuICAgICAgICB2YXIgZXhpc3RzID0gcGFyYW1ldGVyTGlzdC5maW5kSW5kZXgoZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGUgPT09IHBhcmFtO1xyXG4gICAgICAgIH0sIHBhcmFtKTtcclxuICAgICAgICBpZiAoZXhpc3RzID09PSAtMSkge1xyXG4gICAgICAgICAgICBwYXJhbWV0ZXJMaXN0LnB1c2gocGFyYW0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcGFyYW07XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gUGx1Z2luUGFyYW1ldGVyKG93bmVyLCBuYW1lLCBkYXRhVHlwZSkge1xyXG4gICAgICAgIHZhciB1cGRhdGUsIHRyYW5zbGF0ZSwgdHJpZ2dlciwgYXVkaW9QYXJhbSwgX0FjdGlvbkxpc3QgPSBbXTtcclxuICAgICAgICB1cGRhdGUgPSB0cmFuc2xhdGUgPSBmdW5jdGlvbiAodikge1xyXG4gICAgICAgICAgICByZXR1cm4gdjtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRyaWdnZXIgPSBmdW5jdGlvbiAoKSB7fTtcclxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLCB7XHJcbiAgICAgICAgICAgIFwibmFtZVwiOiB7XHJcbiAgICAgICAgICAgICAgICBcInZhbHVlXCI6IG5hbWVcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgXCJvd25lclwiOiB7XHJcbiAgICAgICAgICAgICAgICBcInZhbHVlXCI6IG93bmVyXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIFwidXBkYXRlXCI6IHtcclxuICAgICAgICAgICAgICAgIFwiZ2V0XCI6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdXBkYXRlO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIFwic2V0XCI6IGZ1bmN0aW9uIChmKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBmICE9PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgKFwiTXVzdCBiZSBhIGNhbGxiYWNrIGZ1bmN0aW9uXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZigwKSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IChcIkZ1bmN0aW9uIG11c3QgcmV0dXJuIGEgdmFsdWVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZSA9IGY7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIFwidHJhbnNsYXRlXCI6IHtcclxuICAgICAgICAgICAgICAgIFwiZ2V0XCI6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNsYXRlO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIFwic2V0XCI6IGZ1bmN0aW9uIChmKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBmICE9PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgKFwiTXVzdCBiZSBhIGNhbGxiYWNrIGZ1bmN0aW9uXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZigwKSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IChcIkZ1bmN0aW9uIG11c3QgcmV0dXJuIGEgdmFsdWVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zbGF0ZSA9IGY7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIFwidHJpZ2dlclwiOiB7XHJcbiAgICAgICAgICAgICAgICBcImdldFwiOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRyaWdnZXI7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgXCJzZXRcIjogZnVuY3Rpb24gKGYpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGYgIT09IFwiZnVuY3Rpb25cIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyAoXCJNdXN0IGJlIGEgY2FsbGJhY2sgZnVuY3Rpb25cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRyaWdnZXIgPSBmO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBcImJpbmRUb0F1ZGlvUGFyYW1cIjoge1xyXG4gICAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiBmdW5jdGlvbiAoYXApIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGFwICE9PSBcIm9iamVjdFwiIHx8IGFwLnZhbHVlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgKFwiTXVzdCBiZSBhbiBBdWRpb1BhcmFtIG9iamVjdCBmcm9tIGFuIEF1ZGlvTm9kZVwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHYgPSB0aGlzLnVwZGF0ZSh0aGlzLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICBhdWRpb1BhcmFtID0gYXA7XHJcbiAgICAgICAgICAgICAgICAgICAgYXVkaW9QYXJhbS52YWx1ZSA9IHY7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIFwiYm91bmRBdWRpb1BhcmFtXCI6IHtcclxuICAgICAgICAgICAgICAgIFwiZ2V0XCI6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXVkaW9QYXJhbTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgXCJhY3Rpb25MaXN0XCI6IHtcclxuICAgICAgICAgICAgICAgIFwidmFsdWVcIjogX0FjdGlvbkxpc3RcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIE51bWJlclBhcmFtZXRlcihvd25lciwgbmFtZSwgZGVmYXVsdFZhbHVlLCBtaW5pbXVtLCBtYXhpbXVtKSB7XHJcbiAgICAgICAgUGx1Z2luUGFyYW1ldGVyLmNhbGwodGhpcywgb3duZXIsIG5hbWUsIFwiTnVtYmVyXCIpO1xyXG4gICAgICAgIHZhciBfdmFsdWUgPSBkZWZhdWx0VmFsdWUsXHJcbiAgICAgICAgICAgIF9zdGVwU2l6ZTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gYWRkQWN0aW9uKHYpIHtcclxuICAgICAgICAgICAgdmFyIGVudHJ5ID0ge1xyXG4gICAgICAgICAgICAgICAgJ3RpbWUnOiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgJ3ZhbHVlJzogdlxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLmFjdGlvbkxpc3QucHVzaChlbnRyeSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLCB7XHJcbiAgICAgICAgICAgIFwiZGVzdHJveVwiOiB7XHJcbiAgICAgICAgICAgICAgICBcInZhbHVlXCI6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBvd25lciA9IG5hbWUgPSBkZWZhdWx0VmFsdWUgPSBtaW5pbXVtID0gbWF4aW11bSA9IF92YWx1ZSA9IF9zdGVwU2l6ZSA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgXCJtaW5pbXVtXCI6IHtcclxuICAgICAgICAgICAgICAgIFwidmFsdWVcIjogbWluaW11bVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBcIm1heGltdW1cIjoge1xyXG4gICAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiBtYXhpbXVtXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIFwiZGVmYXVsdFZhbHVlXCI6IHtcclxuICAgICAgICAgICAgICAgIFwidmFsdWVcIjogZGVmYXVsdFZhbHVlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIFwidmFsdWVcIjoge1xyXG4gICAgICAgICAgICAgICAgXCJnZXRcIjogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmJvdW5kQXVkaW9QYXJhbSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50cmFuc2xhdGUodGhpcy5ib3VuZEF1ZGlvUGFyYW0udmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZhbHVlO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIFwic2V0XCI6IGZ1bmN0aW9uICh2KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubWluaW11bSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2ID0gTWF0aC5tYXgodiwgdGhpcy5taW5pbXVtKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubWF4aW11bSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2ID0gTWF0aC5taW4odiwgdGhpcy5tYXhpbXVtKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9zdGVwU2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2ID0gTWF0aC5yb3VuZCh2IC8gX3N0ZXBTaXplKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdiA9IHYgKiBfc3RlcFNpemU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmJvdW5kQXVkaW9QYXJhbSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJvdW5kQXVkaW9QYXJhbS52YWx1ZSA9IHRoaXMudXBkYXRlKHYpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoX3ZhbHVlICE9PSB2KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF92YWx1ZSA9IHY7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gbmV3IEV2ZW50KFwicGFyYW1ldGVyc2V0XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudFRhcmdldC5kaXNwYXRjaEV2ZW50KGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgXCJzdGVwU2l6ZVwiOiB7XHJcbiAgICAgICAgICAgICAgICBcImdldFwiOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9zdGVwU2l6ZTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBcInNldFwiOiBmdW5jdGlvbiAobikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNGaW5pdGUobikgfHwgbiA8IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgKFwiSW52YWxpZCBzdGVwIHNpemVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIF9zdGVwU2l6ZSA9IG47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIE51bWJlclBhcmFtZXRlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFBsdWdpblBhcmFtZXRlci5wcm90b3R5cGUpO1xyXG4gICAgTnVtYmVyUGFyYW1ldGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IE51bWJlclBhcmFtZXRlcjtcclxuXHJcbiAgICBmdW5jdGlvbiBTdHJpbmdQYXJhbWV0ZXIob3duZXIsIG5hbWUsIGRlZmF1bHRWYWx1ZSwgbWF4TGVuZ3RoKSB7XHJcbiAgICAgICAgUGx1Z2luUGFyYW1ldGVyLmNhbGwodGhpcywgb3duZXIsIG5hbWUsIFwiU3RyaW5nXCIpO1xyXG4gICAgICAgIHZhciBfdmFsdWUgPSBkZWZhdWx0VmFsdWU7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGFkZEFjdGlvbih2KSB7XHJcbiAgICAgICAgICAgIHZhciBlbnRyeSA9IHtcclxuICAgICAgICAgICAgICAgICd0aW1lJzogbmV3IERhdGUoKSxcclxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IHZcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdGhpcy5hY3Rpb25MaXN0LnB1c2goZW50cnkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcywge1xyXG4gICAgICAgICAgICBcImRlc3Ryb3lcIjoge1xyXG4gICAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3duZXIgPSBuYW1lID0gZGVmYXVsdFZhbHVlID0gbWF4TGVuZ3RoID0gX3ZhbHVlID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBcIm1heExlbmd0aFwiOiB7XHJcbiAgICAgICAgICAgICAgICBcInZhbHVlXCI6IG1heExlbmd0aFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBcImRlZmF1bHRWYWx1ZVwiOiB7XHJcbiAgICAgICAgICAgICAgICBcInZhbHVlXCI6IGRlZmF1bHRWYWx1ZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBcInZhbHVlXCI6IHtcclxuICAgICAgICAgICAgICAgIFwiZ2V0XCI6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5ib3VuZEF1ZGlvUGFyYW0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudHJhbnNsYXRlKHRoaXMuYm91bmRBdWRpb1BhcmFtLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92YWx1ZTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBcInNldFwiOiBmdW5jdGlvbiAodikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXhMZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYubGVuZ3RoID4gbWF4TGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyAoXCJTdHJpbmcgbG9uZ2VyIHRoYW4gXCIgKyBtYXhMZW5ndGggKyBcIiBjaGFyYWN0ZXJzXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmJvdW5kQXVkaW9QYXJhbSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJvdW5kQXVkaW9QYXJhbS52YWx1ZSA9IHRoaXMudXBkYXRlKHYpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoX3ZhbHVlICE9PSB2KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF92YWx1ZSA9IHY7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gbmV3IEV2ZW50KFwicGFyYW1ldGVyc2V0XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudFRhcmdldC5kaXNwYXRjaEV2ZW50KGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgU3RyaW5nUGFyYW1ldGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoUGx1Z2luUGFyYW1ldGVyLnByb3RvdHlwZSk7XHJcbiAgICBTdHJpbmdQYXJhbWV0ZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gU3RyaW5nUGFyYW1ldGVyO1xyXG5cclxuICAgIGZ1bmN0aW9uIEJ1dHRvblBhcmFtZXRlcihvd25lciwgbmFtZSkge1xyXG4gICAgICAgIFBsdWdpblBhcmFtZXRlci5jYWxsKHRoaXMsIG93bmVyLCBuYW1lLCBcIkJ1dHRvblwiKTtcclxuICAgICAgICB2YXIgb25jbGljayA9IGZ1bmN0aW9uICgpIHt9O1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBhZGRBY3Rpb24odikge1xyXG4gICAgICAgICAgICB2YXIgZW50cnkgPSB7XHJcbiAgICAgICAgICAgICAgICAndGltZSc6IG5ldyBEYXRlKCksXHJcbiAgICAgICAgICAgICAgICAndmFsdWUnOiBcImNsaWNrZWRcIlxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLmFjdGlvbkxpc3QucHVzaChlbnRyeSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLCB7XHJcbiAgICAgICAgICAgIFwiZGVzdHJveVwiOiB7XHJcbiAgICAgICAgICAgICAgICBcInZhbHVlXCI6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBvd25lciA9IG5hbWUgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIFwib25jbGlja1wiOiB7XHJcbiAgICAgICAgICAgICAgICBcImdldFwiOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9uY2xpY2s7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgXCJzZXRcIjogZnVuY3Rpb24gKGYpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGYgIT09IFwiZnVuY3Rpb25cIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyAoXCJvbmNsaWNrIG11c3QgYmUgYSBmdW5jdGlvblwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgb25jbGljayA9IGY7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIEJ1dHRvblBhcmFtZXRlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFBsdWdpblBhcmFtZXRlci5wcm90b3R5cGUpO1xyXG4gICAgQnV0dG9uUGFyYW1ldGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEJ1dHRvblBhcmFtZXRlcjtcclxuXHJcbiAgICBmdW5jdGlvbiBTd2l0Y2hQYXJhbWV0ZXIob3duZXIsIG5hbWUsIGRlZmF1bHRWYWx1ZSwgbWluU3RhdGUsIG1heFN0YXRlKSB7XHJcbiAgICAgICAgUGx1Z2luUGFyYW1ldGVyLmNhbGwodGhpcywgb3duZXIsIG5hbWUsIFwiQnV0dG9uXCIpO1xyXG4gICAgICAgIHZhciBvbmNsaWNrID0gZnVuY3Rpb24gKCkge307XHJcbiAgICAgICAgdmFyIF92YWx1ZSA9IGRlZmF1bHRWYWx1ZTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gYWRkQWN0aW9uKHYpIHtcclxuICAgICAgICAgICAgdmFyIGVudHJ5ID0ge1xyXG4gICAgICAgICAgICAgICAgJ3RpbWUnOiBuZXcgRGF0ZSgpLFxyXG4gICAgICAgICAgICAgICAgJ3ZhbHVlJzogdlxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLmFjdGlvbkxpc3QucHVzaChlbnRyeSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBzZXRWKHYpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuYm91bmRBdWRpb1BhcmFtKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJvdW5kQXVkaW9QYXJhbS52YWx1ZSA9IHRoaXMudXBkYXRlKHYpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGFkZEFjdGlvbi5jYWxsKHRoaXMsIHYpO1xyXG4gICAgICAgICAgICBpZiAoX3ZhbHVlICE9PSB2KSB7XHJcbiAgICAgICAgICAgICAgICBfdmFsdWUgPSB2O1xyXG4gICAgICAgICAgICAgICAgdmFyIGUgPSBuZXcgRXZlbnQoXCJwYXJhbWV0ZXJzZXRcIik7XHJcbiAgICAgICAgICAgICAgICBldmVudFRhcmdldC5kaXNwYXRjaEV2ZW50KGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcigpO1xyXG4gICAgICAgICAgICByZXR1cm4gdjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMsIHtcclxuICAgICAgICAgICAgXCJkZXN0cm95XCI6IHtcclxuICAgICAgICAgICAgICAgIFwidmFsdWVcIjogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG93bmVyID0gbmFtZSA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgXCJkZWZhdWx0VmFsdWVcIjoge1xyXG4gICAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiBkZWZhdWx0VmFsdWVcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgXCJtaW5TdGF0ZVwiOiB7XHJcbiAgICAgICAgICAgICAgICBcInZhbHVlXCI6IG1pblN0YXRlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIFwibWF4U3RhdGVcIjoge1xyXG4gICAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiBtYXhTdGF0ZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBcInZhbHVlXCI6IHtcclxuICAgICAgICAgICAgICAgIFwiZ2V0XCI6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5ib3VuZEF1ZGlvUGFyYW0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudHJhbnNsYXRlKHRoaXMuYm91bmRBdWRpb1BhcmFtLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92YWx1ZTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBcInNldFwiOiBmdW5jdGlvbiAodikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh2IDwgbWluU3RhdGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgKFwiU2V0IHZhbHVlIGlzIGxlc3MgdGhhbiBcIiArIG1pblN0YXRlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHYgPiBtYXhTdGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyAoXCJTZXQgdmFsdWUgaXMgZ3JlYXRlciB0aGFuIFwiICsgbWF4U3RhdGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2V0Vi5jYWxsKHRoaXMsIHYpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBcImluY3JlbWVudFwiOiB7XHJcbiAgICAgICAgICAgICAgICBcInZhbHVlXCI6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdiA9IF92YWx1ZSArIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHYgPiBtYXhTdGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2ID0gbWluU3RhdGU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzZXRWLmNhbGwodGhpcywgdik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIFwiZGVjcmVtZW50XCI6IHtcclxuICAgICAgICAgICAgICAgIFwidmFsdWVcIjogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB2ID0gX3ZhbHVlIC0gMTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodiA8IG1pblN0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHYgPSBtYXhTdGF0ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNldFYuY2FsbCh0aGlzLCB2KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgU3dpdGNoUGFyYW1ldGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoUGx1Z2luUGFyYW1ldGVyLnByb3RvdHlwZSk7XHJcbiAgICBTd2l0Y2hQYXJhbWV0ZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gU3dpdGNoUGFyYW1ldGVyO1xyXG5cclxuICAgIGZ1bmN0aW9uIExpc3RQYXJhbWV0ZXIob3duZXIsIG5hbWUsIGRlZmF1bHRWYWx1ZSwgbGlzdE9mVmFsdWVzKSB7XHJcbiAgICAgICAgUGx1Z2luUGFyYW1ldGVyLmNhbGwodGhpcywgb3duZXIsIG5hbWUsIFwiQnV0dG9uXCIpO1xyXG4gICAgICAgIHZhciBvbmNsaWNrID0gZnVuY3Rpb24gKCkge307XHJcbiAgICAgICAgdmFyIF9pbmRleCA9IGxpc3RPZlZhbHVlcy5pbmRleE9mKGRlZmF1bHRWYWx1ZSk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGFkZEFjdGlvbih2KSB7XHJcbiAgICAgICAgICAgIHZhciBlbnRyeSA9IHtcclxuICAgICAgICAgICAgICAgICd0aW1lJzogbmV3IERhdGUoKSxcclxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IHZcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdGhpcy5hY3Rpb25MaXN0LnB1c2goZW50cnkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gc2V0Vih2KSB7XHJcbiAgICAgICAgICAgIHZhciBpID0gbGlzdE9mVmFsdWVzLmluZGV4T2Yodik7XHJcbiAgICAgICAgICAgIGlmIChpID09PSB1bmRlZmluZWQgfHwgaSA8IDApIHtcclxuICAgICAgICAgICAgICAgIHRocm93KFwiTm90IGluIGxpc3QgcmFuZ2VcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMuYm91bmRBdWRpb1BhcmFtKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJvdW5kQXVkaW9QYXJhbS52YWx1ZSA9IHRoaXMudXBkYXRlKHYpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGFkZEFjdGlvbi5jYWxsKHRoaXMsIHYpO1xyXG4gICAgICAgICAgICBpZiAoX2luZGV4ICE9PSBpKSB7XHJcbiAgICAgICAgICAgICAgICBfaW5kZXggPSBpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGUgPSBuZXcgRXZlbnQoXCJwYXJhbWV0ZXJzZXRcIik7XHJcbiAgICAgICAgICAgICAgICBldmVudFRhcmdldC5kaXNwYXRjaEV2ZW50KGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcigpO1xyXG4gICAgICAgICAgICByZXR1cm4gbGlzdE9mVmFsdWVzW19pbmRleF07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLCB7XHJcbiAgICAgICAgICAgIFwiZGVzdHJveVwiOiB7XHJcbiAgICAgICAgICAgICAgICBcInZhbHVlXCI6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBvd25lciA9IG5hbWUgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIFwiZGVmYXVsdFZhbHVlXCI6IHtcclxuICAgICAgICAgICAgICAgIFwidmFsdWVcIjogZGVmYXVsdFZhbHVlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIFwibGlzdFZhbHVlc1wiOiB7XHJcbiAgICAgICAgICAgICAgICBcImdldFwiOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbCA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIGxpc3RPZlZhbHVlcy5mb3JFYWNoKGZ1bmN0aW9uKHYpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbC5wdXNoKHYpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBcInZhbHVlXCI6IHtcclxuICAgICAgICAgICAgICAgIFwiZ2V0XCI6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5ib3VuZEF1ZGlvUGFyYW0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudHJhbnNsYXRlKHRoaXMuYm91bmRBdWRpb1BhcmFtLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxpc3RPZlZhbHVlc1tfaW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIFwic2V0XCI6IGZ1bmN0aW9uICh2KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHYgPCBtaW5TdGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyAoXCJTZXQgdmFsdWUgaXMgbGVzcyB0aGFuIFwiICsgbWluU3RhdGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAodiA+IG1heFN0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IChcIlNldCB2YWx1ZSBpcyBncmVhdGVyIHRoYW4gXCIgKyBtYXhTdGF0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzZXRWLmNhbGwodGhpcywgdik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIFwiaW5jcmVtZW50XCI6IHtcclxuICAgICAgICAgICAgICAgIFwidmFsdWVcIjogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB2ID0gX3ZhbHVlICsgMTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodiA+IG1heFN0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHYgPSBtaW5TdGF0ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNldFYuY2FsbCh0aGlzLCB2KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgXCJkZWNyZW1lbnRcIjoge1xyXG4gICAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHYgPSBfdmFsdWUgLSAxO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh2IDwgbWluU3RhdGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdiA9IG1heFN0YXRlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2V0Vi5jYWxsKHRoaXMsIHYpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBMaXN0UGFyYW1ldGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoUGx1Z2luUGFyYW1ldGVyLnByb3RvdHlwZSk7XHJcbiAgICBMaXN0UGFyYW1ldGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IExpc3RQYXJhbWV0ZXI7XHJcblxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcywge1xyXG4gICAgICAgICdjcmVhdGVOdW1iZXJQYXJhbWV0ZXInOiB7XHJcbiAgICAgICAgICAgIFwidmFsdWVcIjogZnVuY3Rpb24gKG5hbWUsIGRlZmF1bHRWYWx1ZSwgbWluaW11bSwgbWF4aW11bSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBuYW1lICE9PSBcInN0cmluZ1wiIHx8IHR5cGVvZiBkZWZhdWx0VmFsdWUgIT09IFwibnVtYmVyXCIgfHwgKG1pbmltdW0gIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgbWluaW11bSAhPT0gXCJudW1iZXJcIikgfHwgKG1heGltdW0gIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgbWF4aW11bSAhPT0gXCJudW1iZXJcIikpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyAoXCJJbnZsaWQgY29uc3RydWN0b3JcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoZmluZFBhcmFtZXRlckluZGV4KG5hbWUpICE9PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IChcIlBhcmFtZXRlciB3aXRoIG5hbWUgJ1wiICsgbmFtZSArIFwiJyBhbHJlYWR5IGV4aXN0c1wiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhciBwYXJhbSA9IG5ldyBOdW1iZXJQYXJhbWV0ZXIob3duZXIsIG5hbWUsIGRlZmF1bHRWYWx1ZSwgbWluaW11bSwgbWF4aW11bSk7XHJcbiAgICAgICAgICAgICAgICBhZGRQYXJhbWV0ZXIocGFyYW0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcmFtO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICAnY3JlYXRlU3RyaW5nUGFyYW1ldGVyJzoge1xyXG4gICAgICAgICAgICBcInZhbHVlXCI6IGZ1bmN0aW9uIChuYW1lLCBkZWZhdWx0VmFsdWUsIG1heExlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBuYW1lICE9PSBcInN0cmluZ1wiIHx8IHR5cGVvZiBkZWZhdWx0VmFsdWUgIT09IFwic3RyaW5nXCIgfHwgKG1heExlbmd0aCAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBtYXhMZW5ndGggIT09IFwibnVtYmVyXCIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgKFwiSW52bGlkIGNvbnN0cnVjdG9yXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGZpbmRQYXJhbWV0ZXJJbmRleChuYW1lKSAhPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyAoXCJQYXJhbWV0ZXIgd2l0aCBuYW1lICdcIiArIG5hbWUgKyBcIicgYWxyZWFkeSBleGlzdHNcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFyYW0gPSBuZXcgU3RyaW5nUGFyYW1ldGVyKG93bmVyLCBuYW1lLCBkZWZhdWx0VmFsdWUsIG1heExlbmd0aCk7XHJcbiAgICAgICAgICAgICAgICBhZGRQYXJhbWV0ZXIocGFyYW0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcmFtO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICAnY3JlYXRlQnV0dG9uUGFyYW1ldGVyJzoge1xyXG4gICAgICAgICAgICBcInZhbHVlXCI6IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG5hbWUgIT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyAoXCJJbnZhbGlkIGNvbnN0cnVjdG9yXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGZpbmRQYXJhbWV0ZXJJbmRleChuYW1lKSAhPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyAoXCJQYXJhbWV0ZXIgd2l0aCBuYW1lICdcIiArIG5hbWUgKyBcIicgYWxyZWFkeSBleGlzdHNcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFyYW0gPSBuZXcgQnV0dG9uUGFyYW1ldGVyKG93bmVyLCBuYW1lKTtcclxuICAgICAgICAgICAgICAgIGFkZFBhcmFtZXRlcihwYXJhbSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyYW07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgICdjcmVhdGVTd2l0Y2hQYXJhbWV0ZXInOiB7XHJcbiAgICAgICAgICAgIFwidmFsdWVcIjogZnVuY3Rpb24gKG5hbWUsIGRlZmF1bHRWYWx1ZSwgbWluU3RhdGUsIG1heFN0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG5hbWUgIT09IFwic3RyaW5nXCIgfHwgdHlwZW9mIGRlZmF1bHRWYWx1ZSAhPT0gXCJudW1iZXJcIiB8fCB0eXBlb2YgbWluU3RhdGUgIT09IFwibnVtYmVyXCIgfHwgdHlwZW9mIG1heFN0YXRlICE9PSBcIm51bWJlclwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgKFwiSW52bGlkIGNvbnN0cnVjdG9yXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGZpbmRQYXJhbWV0ZXJJbmRleChuYW1lKSAhPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyAoXCJQYXJhbWV0ZXIgd2l0aCBuYW1lICdcIiArIG5hbWUgKyBcIicgYWxyZWFkeSBleGlzdHNcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFyYW0gPSBuZXcgU3dpdGNoUGFyYW1ldGVyKG93bmVyLCBuYW1lLCBkZWZhdWx0VmFsdWUsIG1pblN0YXRlLCBtYXhTdGF0ZSk7XHJcbiAgICAgICAgICAgICAgICBhZGRQYXJhbWV0ZXIocGFyYW0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcmFtO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICAnY3JlYXRlUGFyYW1ldGVyJzoge1xyXG4gICAgICAgICAgICAndmFsdWUnOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyAoXCJUaGlzIGZ1bmN0aW9uIGlzIG5vdyBkZXByZWNhdGVkXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICAnZ2V0UGFyYW1ldGVyTmFtZSc6IHtcclxuICAgICAgICAgICAgJ3ZhbHVlJzogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG5hbWVzID0gW10sXHJcbiAgICAgICAgICAgICAgICAgICAgaTtcclxuICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBwYXJhbWV0ZXJMaXN0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZXMucHVzaChwYXJhbWV0ZXJMaXN0W2ldLm5hbWUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5hbWVzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICAnZ2V0UGFyYW1ldGVyQnlOYW1lJzoge1xyXG4gICAgICAgICAgICAndmFsdWUnOiBmdW5jdGlvbiAobmFtZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZpbmRQYXJhbWV0ZXIobmFtZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgICdnZXRQYXJhbWV0ZXJPYmplY3QnOiB7XHJcbiAgICAgICAgICAgICd2YWx1ZSc6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBidWlsZFBhcmFtZXRlck9iamVjdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICAnZ2V0UGFyYW1ldGVyTmFtZXMnOiB7XHJcbiAgICAgICAgICAgICd2YWx1ZSc6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHZhciBsID0gW107XHJcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJMaXN0LmZvckVhY2goZnVuY3Rpb24gKGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBsLnB1c2goYS5uYW1lKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgICdzZXRQYXJhbWV0ZXJCeU5hbWUnOiB7XHJcbiAgICAgICAgICAgICd2YWx1ZSc6IGZ1bmN0aW9uIChuLCB2KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFyYW1ldGVyID0gZmluZFBhcmFtZXRlcihuKTtcclxuICAgICAgICAgICAgICAgIGlmICghcGFyYW1ldGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcGFyYW1ldGVyLnZhbHVlID0gdjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgJ2RlbGV0ZVBhcmFtZXRlcic6IHtcclxuICAgICAgICAgICAgJ3ZhbHVlJzogZnVuY3Rpb24gKG8pIHtcclxuICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHBhcmFtZXRlckxpc3QuZmluZEluZGV4KGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUgPT09IG87XHJcbiAgICAgICAgICAgICAgICB9LCBvKTtcclxuICAgICAgICAgICAgICAgIGlmIChpbmRleCA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gRG9lcyBleGlzdFxyXG4gICAgICAgICAgICAgICAgICAgIHBhcmFtZXRlckxpc3Quc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICAgICAgICAgICAgICBvLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgJ2RlbGV0ZUFsbFBhcmFtZXRlcnMnOiB7XHJcbiAgICAgICAgICAgICd2YWx1ZSc6IGZ1bmN0aW9uIChvKSB7XHJcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJMaXN0LmZvckVhY2goZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBlLmRlc3Ryb3koKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgcGFyYW1ldGVyTGlzdCA9IFtdO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgICdzZXRQYXJhbWV0ZXJzQnlPYmplY3QnOiB7XHJcbiAgICAgICAgICAgICd2YWx1ZSc6IGZ1bmN0aW9uIChvYmplY3QpIHtcclxuICAgICAgICAgICAgICAgIHZhciBrZXk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGtleSBpbiBvYmplY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob2JqZWN0Lmhhc093blByb3BlcnR5KGtleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmplY3Rba2V5XSA9PSBcIm9iamVjdFwiKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRQYXJhbWV0ZXJCeU5hbWUoa2V5LCBvYmplY3Rba2V5XS52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIG9iamVjdFtrZXldID09IFwibnVtYmVyXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0UGFyYW1ldGVyQnlOYW1lKGtleSwgb2JqZWN0W2tleV0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgKFwiQ2Fubm90IHNldCBcIiArIGtleSArIFwiOiBOb3QgYSB2YWxpZCBvYmplY3RcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgICdwYXJhbWV0ZXJzJzoge1xyXG4gICAgICAgICAgICAnZ2V0JzogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGJ1aWxkUGFyYW1ldGVyT2JqZWN0KCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdzZXQnOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyAoXCJDYW5ub3Qgc2V0LCB1c2UgLnNldFBhcmFtZXRlckJ5Li4uKClcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufTtcclxuXHJcbnZhciBQbHVnaW5GZWF0dXJlSW50ZXJmYWNlID0gZnVuY3Rpb24gKEJhc2VQbHVnaW5JbnN0YW5jZSkge1xyXG4gICAgdGhpcy5wbHVnaW4gPSBCYXNlUGx1Z2luSW5zdGFuY2U7XHJcbiAgICB0aGlzLlJlY2VpdmVyID0gbmV3IFBsdWdpbkZlYXR1cmVJbnRlcmZhY2VSZWNlaXZlcih0aGlzLCBCYXNlUGx1Z2luSW5zdGFuY2UuZmFjdG9yeS5GZWF0dXJlTWFwKTtcclxuICAgIHRoaXMuU2VuZGVyID0gbmV3IFBsdWdpbkZlYXR1cmVJbnRlcmZhY2VTZW5kZXIodGhpcywgQmFzZVBsdWdpbkluc3RhbmNlLmZhY3RvcnkuRmVhdHVyZU1hcCk7XHJcblxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwib25mZWF0dXJlc1wiLCB7XHJcbiAgICAgICAgJ2dldCc6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuUmVjZWl2ZXIub25mZWF0dXJlcztcclxuICAgICAgICB9LFxyXG4gICAgICAgICdzZXQnOiBmdW5jdGlvbiAoZnVuYykge1xyXG4gICAgICAgICAgICB0aGlzLlJlY2VpdmVyLm9uZmVhdHVyZXMgPSBmdW5jO1xyXG4gICAgICAgICAgICByZXR1cm4gZnVuYztcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufTtcclxudmFyIFBsdWdpbkZlYXR1cmVJbnRlcmZhY2VSZWNlaXZlciA9IGZ1bmN0aW9uIChGZWF0dXJlSW50ZXJmYWNlSW5zdGFuY2UsIEZhY3RvcnlGZWF0dXJlTWFwKSB7XHJcbiAgICBmdW5jdGlvbiBjaGVja0ZlYXR1cmVBcmdzKHNvdXJjZSwgZmVhdHVyZU9iamVjdCkge1xyXG4gICAgICAgIGlmIChzb3VyY2UgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aHJvdyAoXCJTb3VyY2UgcGx1Z2luIG11c3QgYmUgZGVmaW5lZFwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGZlYXR1cmVPYmplY3QgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aHJvdyAoXCJGZWF0dXJlT2JqZWN0IG11c3QgYmUgZGVmaW5lZFwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHR5cGVvZiBmZWF0dXJlT2JqZWN0Lm91dHB1dEluZGV4ICE9PSBcIm51bWJlclwiIHx8IHR5cGVvZiBmZWF0dXJlT2JqZWN0LmZyYW1lU2l6ZSAhPT0gXCJudW1iZXJcIiB8fCB0eXBlb2YgZmVhdHVyZU9iamVjdC5mZWF0dXJlcyAhPT0gXCJvYmplY3RcIikge1xyXG4gICAgICAgICAgICB0aHJvdyAoXCJNYWxmb3JtZWQgZmVhdHVyZU9iamVjdFwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICB2YXIgY19mZWF0dXJlcyA9IGZ1bmN0aW9uICgpIHt9O1xyXG4gICAgdGhpcy5yZXF1ZXN0RmVhdHVyZXMgPSBmdW5jdGlvbiAoZmVhdHVyZUxpc3QpIHtcclxuICAgICAgICB2YXIgaTtcclxuICAgICAgICBmb3IgKGkgPSAwOyBpIDwgZmVhdHVyZUxpc3QubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0RmVhdHVyZXNGcm9tUGx1Z2luKGZlYXR1cmVMaXN0W2ldLnBsdWdpbiwge1xyXG4gICAgICAgICAgICAgICAgJ291dHB1dEluZGV4JzogZmVhdHVyZUxpc3RbaV0ub3V0cHV0SW5kZXgsXHJcbiAgICAgICAgICAgICAgICAnZnJhbWVTaXplJzogZmVhdHVyZUxpc3RbaV0uZnJhbWVTaXplLFxyXG4gICAgICAgICAgICAgICAgJ2ZlYXR1cmVzJzogZmVhdHVyZUxpc3RbaV0uZmVhdHVyZXNcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHRoaXMucmVxdWVzdEZlYXR1cmVzRnJvbVBsdWdpbiA9IGZ1bmN0aW9uIChzb3VyY2UsIGZlYXR1cmVPYmplY3QpIHtcclxuICAgICAgICBjaGVja0ZlYXR1cmVBcmdzKHNvdXJjZSwgZmVhdHVyZU9iamVjdCk7XHJcbiAgICAgICAgRmFjdG9yeUZlYXR1cmVNYXAucmVxdWVzdEZlYXR1cmVzKEZlYXR1cmVJbnRlcmZhY2VJbnN0YW5jZS5wbHVnaW4sIHNvdXJjZSwgZmVhdHVyZU9iamVjdCk7XHJcbiAgICB9O1xyXG4gICAgdGhpcy5jYW5jZWxGZWF0dXJlc0Zyb21QbHVnaW4gPSBmdW5jdGlvbiAoc291cmNlLCBmZWF0dXJlT2JqZWN0KSB7XHJcbiAgICAgICAgY2hlY2tGZWF0dXJlQXJncyhzb3VyY2UsIGZlYXR1cmVPYmplY3QpO1xyXG4gICAgICAgIEZhY3RvcnlGZWF0dXJlTWFwLmRlbGV0ZUZlYXR1cmVzKEZlYXR1cmVJbnRlcmZhY2VJbnN0YW5jZS5wbHVnaW4sIHNvdXJjZSwgZmVhdHVyZU9iamVjdCk7XHJcbiAgICB9O1xyXG4gICAgdGhpcy5jYW5jZWxBbGxGZWF0dXJlc0Zyb21QbHVnaW4gPSBmdW5jdGlvbiAoc291cmNlKSB7XHJcbiAgICAgICAgaWYgKHNvdXJjZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IChcIlNvdXJjZSBwbHVnaW4gbXVzdCBiZSBkZWZpbmVkXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBGYWN0b3J5RmVhdHVyZU1hcC5kZWxldGVGZWF0dXJlcyhGZWF0dXJlSW50ZXJmYWNlSW5zdGFuY2UucGx1Z2luLCBzb3VyY2UpO1xyXG4gICAgfTtcclxuICAgIHRoaXMuY2FuY2VsQWxsRmVhdHVyZXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgRmFjdG9yeUZlYXR1cmVNYXAuZGVsZXRlRmVhdHVyZXMoRmVhdHVyZUludGVyZmFjZUluc3RhbmNlLnBsdWdpbik7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMucG9zdEZlYXR1cmVzID0gZnVuY3Rpb24gKE1lc3NhZ2UpIHtcclxuICAgICAgICAvKlxyXG4gICAgICAgICAgICBDYWxsZWQgYnkgdGhlIFBsdWdpbiBGYWN0b3J5IHdpdGggdGhlIGZlYXR1cmUgbWVzc2FnZVxyXG4gICAgICAgICAgICBtZXNzYWdlID0ge1xyXG4gICAgICAgICAgICAgICAgJ3BsdWdpbic6IHNvdXJjZVBsdWdpbkluc3RhbmNlLFxyXG4gICAgICAgICAgICAgICAgJ291dHB1dEluZGV4Jzogb3V0cHV0SW5kZXgsXHJcbiAgICAgICAgICAgICAgICAnZnJhbWVTaXplJzogZnJhbWVTaXplLFxyXG4gICAgICAgICAgICAgICAgJ2ZlYXR1cmVzJzoge30gSlMtWHRyYWN0IGZlYXR1cmUgcmVzdWx0cyBvYmplY3RcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICovXHJcbiAgICAgICAgaWYgKHR5cGVvZiBjX2ZlYXR1cmVzID09PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgICAgICAgY19mZWF0dXJlcyhNZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm9uZmVhdHVyZXNcIiwge1xyXG4gICAgICAgICdnZXQnOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBjX2ZlYXR1cmVzO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgJ3NldCc6IGZ1bmN0aW9uIChmdW5jKSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZnVuYyA9PT0gXCJmdW5jdGlvblwiKSB7XHJcbiAgICAgICAgICAgICAgICBjX2ZlYXR1cmVzID0gZnVuYztcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbn07XHJcbnZhciBQbHVnaW5GZWF0dXJlSW50ZXJmYWNlU2VuZGVyID0gZnVuY3Rpb24gKEZlYXR1cmVJbnRlcmZhY2VJbnN0YW5jZSwgRmFjdG9yeUZlYXR1cmVNYXApIHtcclxuICAgIHZhciBPdXRwdXROb2RlID0gZnVuY3Rpb24gKHBhcmVudCwgb3V0cHV0LCBpbmRleCkge1xyXG4gICAgICAgIHZhciBleHRyYWN0b3JzID0gW107XHJcbiAgICAgICAgdmFyIEV4dHJhY3RvciA9IGZ1bmN0aW9uIChvdXRwdXQsIGZyYW1lU2l6ZSkge1xyXG4gICAgICAgICAgICB0aGlzLmV4dHJhY3RvciA9IEZlYXR1cmVJbnRlcmZhY2VJbnN0YW5jZS5wbHVnaW4uZmFjdG9yeS5jb250ZXh0LmNyZWF0ZUFuYWx5c2VyKCk7XHJcbiAgICAgICAgICAgIHRoaXMuZXh0cmFjdG9yLmZmdFNpemUgPSBmcmFtZVNpemU7XHJcbiAgICAgICAgICAgIG91dHB1dC5jb25uZWN0KHRoaXMuZXh0cmFjdG9yKTtcclxuICAgICAgICAgICAgdGhpcy5mZWF0dXJlcyA9IFtdO1xyXG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJmcmFtZVNpemVcIiwge1xyXG4gICAgICAgICAgICAgICAgJ3ZhbHVlJzogZnJhbWVTaXplXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAvKlxyXG4gICAgICAgICAgICBmdW5jdGlvbiByZWN1cnNpdmVQcm9jZXNzaW5nKGJhc2UsIGxpc3QpIHtcclxuICAgICAgICAgICAgICAgIHZhciBsID0gbGlzdC5sZW5ndGgsXHJcbiAgICAgICAgICAgICAgICAgICAgaSwgZW50cnk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZW50cnkgPSBsaXN0W2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIGJhc2VbZW50cnkubmFtZV0uYXBwbHkoYmFzZSwgZW50cnkucGFyYW1ldGVycyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVudHJ5LmZlYXR1cmVzICYmIGVudHJ5LmZlYXR1cmVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVjdXJzaXZlUHJvY2Vzc2luZyhiYXNlLnJlc3VsdFtlbnRyeS5uYW1lXSwgZW50cnkuZmVhdHVyZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICB2YXIgcmVjdXJzaXZlUHJvY2Vzc2luZyA9IHRoaXMuZmFjdG9yeS5yZWN1cnNpdmVQcm9jZXNzaW5nO1xyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gb25hdWRpb2NhbGxiYWNrKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIC8vdGhpcyA9PT0gRXh0cmFjdG9yXHJcbiAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAnbnVtYmVyT2ZDaGFubmVscyc6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgJ3Jlc3VsdHMnOiBbXVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHJlY3Vyc2l2ZVByb2Nlc3NpbmcoZGF0YSwgdGhpcy5mZWF0dXJlcyk7XHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnJlc3VsdHNbMF0gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ2NoYW5uZWwnOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICdyZXN1bHRzJzogSlNPTi5wYXJzZShkYXRhLnRvSlNPTigpKVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHRoaXMucG9zdEZlYXR1cmVzKGRhdGEubGVuZ3RoLCBtZXNzYWdlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5zZXRGZWF0dXJlcyA9IGZ1bmN0aW9uIChmZWF0dXJlTGlzdCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5mZWF0dXJlcyA9IGZlYXR1cmVMaXN0O1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZmVhdHVyZXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5leHRyYWN0b3IuY2xlYXJDYWxsYmFjaygpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4dHJhY3Rvci5mcmFtZUNhbGxiYWNrKG9uYXVkaW9jYWxsYmFjaywgdGhpcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfTtcclxuICAgICAgICB2YXIgV29ya2VyRXh0cmFjdG9yID0gZnVuY3Rpb24gKG91dHB1dCwgZnJhbWVTaXplKSB7XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIG9uYXVkaW9jYWxsYmFjayhlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYywgZnJhbWVzID0gW107XHJcbiAgICAgICAgICAgICAgICBmb3IgKGMgPSAwOyBjIDwgZS5pbnB1dEJ1ZmZlci5udW1iZXJPZkNoYW5uZWxzOyBjKyspIHtcclxuICAgICAgICAgICAgICAgICAgICBmcmFtZXNbY10gPSBlLmlucHV0QnVmZmVyLmdldENoYW5uZWxEYXRhKGMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKHtcclxuICAgICAgICAgICAgICAgICAgICAnc3RhdGUnOiAyLFxyXG4gICAgICAgICAgICAgICAgICAgICdmcmFtZXMnOiBmcmFtZXNcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiByZXNwb25zZShtc2cpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucG9zdEZlYXR1cmVzKGZyYW1lU2l6ZSwgbXNnLmRhdGEucmVzcG9uc2UpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgd29ya2VyID0gbmV3IFdvcmtlcihcImpzYXAvZmVhdHVyZS13b3JrZXIuanNcIik7XHJcbiAgICAgICAgICAgIHdvcmtlci5vbmVycm9yID0gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNldEZlYXR1cmVzID0gZnVuY3Rpb24gKGZlYXR1cmVMaXN0KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICB2YXIgY29uZmlnTWVzc2FnZSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAnc3RhdGUnOiAxLFxyXG4gICAgICAgICAgICAgICAgICAgICdzYW1wbGVSYXRlJzogRmVhdHVyZUludGVyZmFjZUluc3RhbmNlLnBsdWdpbi5mYWN0b3J5LmNvbnRleHQuc2FtcGxlUmF0ZSxcclxuICAgICAgICAgICAgICAgICAgICAnZmVhdHVyZUxpc3QnOiBmZWF0dXJlTGlzdCxcclxuICAgICAgICAgICAgICAgICAgICAnbnVtQ2hhbm5lbHMnOiBvdXRwdXQubnVtYmVyT2ZPdXRwdXRzLFxyXG4gICAgICAgICAgICAgICAgICAgICdmcmFtZVNpemUnOiB0aGlzLmZyYW1lU2l6ZVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZmVhdHVyZXMgPSBmZWF0dXJlTGlzdDtcclxuICAgICAgICAgICAgICAgIGlmIChmZWF0dXJlTGlzdCAmJiBmZWF0dXJlTGlzdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd29ya2VyLm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLmRhdGEuc3RhdGUgPT09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdvcmtlci5vbm1lc3NhZ2UgPSByZXNwb25zZS5iaW5kKHNlbGYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5leHRyYWN0b3Iub25hdWRpb3Byb2Nlc3MgPSBvbmF1ZGlvY2FsbGJhY2suYmluZChzZWxmKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdvcmtlci5wb3N0TWVzc2FnZShjb25maWdNZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3N0YXRlJzogMFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4dHJhY3Rvci5vbmF1ZGlvcHJvY2VzcyA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV4dHJhY3RvciA9IEZlYXR1cmVJbnRlcmZhY2VJbnN0YW5jZS5wbHVnaW4uZmFjdG9yeS5jb250ZXh0LmNyZWF0ZVNjcmlwdFByb2Nlc3NvcihmcmFtZVNpemUsIG91dHB1dC5udW1iZXJPZk91dHB1dHMsIDEpO1xyXG4gICAgICAgICAgICBvdXRwdXQuY29ubmVjdCh0aGlzLmV4dHJhY3Rvcik7XHJcbiAgICAgICAgICAgIHRoaXMuZXh0cmFjdG9yLmNvbm5lY3QoRmVhdHVyZUludGVyZmFjZUluc3RhbmNlLnBsdWdpbi5mYWN0b3J5LmNvbnRleHQuZGVzdGluYXRpb24pO1xyXG5cclxuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZnJhbWVTaXplXCIsIHtcclxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IGZyYW1lU2l6ZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuYWRkRXh0cmFjdG9yID0gZnVuY3Rpb24gKGZyYW1lU2l6ZSkge1xyXG4gICAgICAgICAgICB2YXIgb2JqO1xyXG4gICAgICAgICAgICBpZiAod2luZG93Lldvcmtlcikge1xyXG4gICAgICAgICAgICAgICAgb2JqID0gbmV3IFdvcmtlckV4dHJhY3RvcihvdXRwdXQsIGZyYW1lU2l6ZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBvYmogPSBuZXcgRXh0cmFjdG9yKG91dHB1dCwgZnJhbWVTaXplKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBleHRyYWN0b3JzLnB1c2gob2JqKTtcclxuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwgXCJwb3N0RmVhdHVyZXNcIiwge1xyXG4gICAgICAgICAgICAgICAgJ3ZhbHVlJzogZnVuY3Rpb24gKGZyYW1lU2l6ZSwgcmVzdWx0c0pTT04pIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgb2JqID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnb3V0cHV0SW5kZXgnOiBpbmRleCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ2ZyYW1lU2l6ZSc6IGZyYW1lU2l6ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3Jlc3VsdHMnOiByZXN1bHRzSlNPTlxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3N0RmVhdHVyZXMob2JqKTtcclxuICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIG9iajtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuZmluZEV4dHJhY3RvciA9IGZ1bmN0aW9uIChmcmFtZVNpemUpIHtcclxuICAgICAgICAgICAgdmFyIGNoZWNrID0gZnJhbWVTaXplO1xyXG4gICAgICAgICAgICByZXR1cm4gZXh0cmFjdG9ycy5maW5kKGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBUaGlzIE1VU1QgYmUgPT09IE5PVCA9PT1cclxuICAgICAgICAgICAgICAgIHJldHVybiBlLmZyYW1lU2l6ZSA9PT0gY2hlY2s7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5kZWxldGVFeHRyYWN0b3IgPSBmdW5jdGlvbiAoZnJhbWVTaXplKSB7fTtcclxuICAgIH07XHJcbiAgICB2YXIgb3V0cHV0Tm9kZXMgPSBbXTtcclxuICAgIHRoaXMudXBkYXRlRmVhdHVyZXMgPSBmdW5jdGlvbiAoZmVhdHVyZU9iamVjdCkge1xyXG4gICAgICAgIC8vIFtdIE91dHB1dCAtPiB7fSAnZnJhbWVzaXplJyAtPiB7fSAnZmVhdHVyZXMnXHJcbiAgICAgICAgdmFyIG87XHJcbiAgICAgICAgZm9yIChvID0gMDsgbyA8IGZlYXR1cmVPYmplY3QubGVuZ3RoOyBvKyspIHtcclxuICAgICAgICAgICAgaWYgKG91dHB1dE5vZGVzW29dID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChvID4gRmVhdHVyZUludGVyZmFjZUluc3RhbmNlLnBsdWdpbi5udW1PdXRwdXRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgKFwiUmVxdWVzdGVkIGFuIG91dHB1dCB0aGF0IGRvZXMgbm90IGV4aXN0XCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgb3V0cHV0Tm9kZXNbb10gPSBuZXcgT3V0cHV0Tm9kZShGZWF0dXJlSW50ZXJmYWNlSW5zdGFuY2UucGx1Z2luLCBGZWF0dXJlSW50ZXJmYWNlSW5zdGFuY2UucGx1Z2luLm91dHB1dHNbb10sIG8pO1xyXG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG91dHB1dE5vZGVzW29dLCBcInBvc3RGZWF0dXJlc1wiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ3ZhbHVlJzogZnVuY3Rpb24gKHJlc3VsdE9iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBvc3RGZWF0dXJlcyhyZXN1bHRPYmplY3QpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIHNpO1xyXG4gICAgICAgICAgICBmb3IgKHNpID0gMDsgc2kgPCBmZWF0dXJlT2JqZWN0W29dLmxlbmd0aDsgc2krKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGV4dHJhY3RvciA9IG91dHB1dE5vZGVzW29dLmZpbmRFeHRyYWN0b3IoZmVhdHVyZU9iamVjdFtvXVtzaV0uZnJhbWVTaXplKTtcclxuICAgICAgICAgICAgICAgIGlmICghZXh0cmFjdG9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXh0cmFjdG9yID0gb3V0cHV0Tm9kZXNbb10uYWRkRXh0cmFjdG9yKGZlYXR1cmVPYmplY3Rbb11bc2ldLmZyYW1lU2l6ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBleHRyYWN0b3Iuc2V0RmVhdHVyZXMoZmVhdHVyZU9iamVjdFtvXVtzaV0uZmVhdHVyZUxpc3QpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnBvc3RGZWF0dXJlcyA9IGZ1bmN0aW9uIChmZWF0dXJlT2JqZWN0KSB7XHJcbiAgICAgICAgLypcclxuICAgICAgICAgICAgQ2FsbGVkIGJ5IHRoZSBpbmRpdmlkdWFsIGV4dHJhY3RvciBpbnN0YW5jZXM6XHJcbiAgICAgICAgICAgIGZlYXR1cmVPYmplY3QgPSB7J2ZyYW1lU2l6ZSc6IGZyYW1lU2l6ZSxcclxuICAgICAgICAgICAgJ291dHB1dEluZGV4Jzogb3V0cHV0SW5kZXgsXHJcbiAgICAgICAgICAgICdyZXN1bHRzJzpbXX1cclxuICAgICAgICAqL1xyXG4gICAgICAgIEZlYXR1cmVJbnRlcmZhY2VJbnN0YW5jZS5wbHVnaW4uZmFjdG9yeS5GZWF0dXJlTWFwLnBvc3RGZWF0dXJlcyh7XHJcbiAgICAgICAgICAgICdwbHVnaW4nOiBGZWF0dXJlSW50ZXJmYWNlSW5zdGFuY2UucGx1Z2luLnBsdWdpbkluc3RhbmNlLFxyXG4gICAgICAgICAgICAnb3V0cHV0SW5kZXgnOiBmZWF0dXJlT2JqZWN0Lm91dHB1dEluZGV4LFxyXG4gICAgICAgICAgICAnZnJhbWVTaXplJzogZmVhdHVyZU9iamVjdC5mcmFtZVNpemUsXHJcbiAgICAgICAgICAgICdyZXN1bHRzJzogZmVhdHVyZU9iamVjdC5yZXN1bHRzXHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIFNlbmQgdG8gRmFjdG9yeVxyXG4gICAgRmFjdG9yeUZlYXR1cmVNYXAuY3JlYXRlU291cmNlTWFwKHRoaXMsIEZlYXR1cmVJbnRlcmZhY2VJbnN0YW5jZS5wbHVnaW4ucGx1Z2luSW5zdGFuY2UpO1xyXG59O1xyXG5cclxuLypcclxuICAgIFRoaXMgaXMgYW4gb3B0aW9uYWwgbW9kdWxlIHdoaWNoIHdpbGwgYXR0ZW1wdCB0byBjcmVhdGUgYSBncmFwaGljYWwgaW1wbGVtZW50YXRpb24uXHJcbiAgICBBcyB3aXRoIG90aGVyIGF1ZGlvIHBsdWdpbnMgZm9yIERBV3MsIHRoZSBHVUkgaXMgYW4gb3B0aW9uYWwgZWxlbWVudCB3aGljaCBjYW4gYmUgYWNjZXB0ZWQgb3IgcmVqZWN0ZWQgYnkgdGhlIGhvc3QuXHJcblxyXG4gICAgVGhlIGFjdHVhbCBHVUkgaXMgbGF1bmNoZWQgYXMgYW4gPGlmcmFtZT4gZWxlbWVudCBpbiB0aGUgYnJvd3NlciB0byBrZWVwIGVhY2ggcGx1Z2luIGlzb2xhdGVkIGZyb20gdGhlIHJlc3RcclxuKi9cclxuXHJcbnZhciBQbHVnaW5Vc2VySW50ZXJmYWNlID0gZnVuY3Rpb24gKEJhc2VQbHVnaW5JbnN0YW5jZSwgd2lkdGgsIGhlaWdodCkge1xyXG4gICAgY29uc29sZS5sb2coXCJERVBSRUNBVEVEISFcIik7XHJcbiAgICBjb25zb2xlLmxvZyhcIlRoZSBjbGFzcyBQbHVnaW5Vc2VySW50ZXJmYWNlIGhhcyBiZWVuIGRlcHJlY2F0ZWRcIik7XHJcbiAgICBjb25zb2xlLmxvZyhcIlBsZWFzZSBsb29rIGF0IHRoZSBkb2N1bWVudHMgZm9yIHRoZSBuZXcgbWV0aG9kcyBmb3IgYnVpbGRpbmcgcGx1Z2luc1wiKTtcclxuICAgIHRoaXMucHJvY2Vzc29yID0gQmFzZVBsdWdpbkluc3RhbmNlO1xyXG4gICAgdGhpcy5yb290ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuICAgIGlmICh3aWR0aCA+IDApIHtcclxuICAgICAgICB0aGlzLnJvb3Quc3R5bGUud2lkdGggPSB3aWR0aCArIFwicHhcIjtcclxuICAgIH1cclxuICAgIGlmIChoZWlnaHQgPiAwKSB7XHJcbiAgICAgICAgdGhpcy5yb290LnN0eWxlLmhlaWdodCA9IGhlaWdodCArIFwicHhcIjtcclxuICAgIH1cclxuICAgIHRoaXMuZGltID0ge1xyXG4gICAgICAgIHdpZHRoOiB3aWR0aCxcclxuICAgICAgICBoZWlnaHQ6IGhlaWdodFxyXG4gICAgfTtcclxuICAgIHRoaXMuaW50ZXJ2YWxGdW5jdGlvbiA9IG51bGw7XHJcbiAgICB0aGlzLnVwZGF0ZUludGVydmFsID0gbnVsbDtcclxuICAgIHRoaXMuUGx1Z2luUGFyYW1ldGVySW50ZXJmYWNlcyA9IFtdO1xyXG5cclxuICAgIHZhciBQbHVnaW5QYXJhbWV0ZXJJbnRlcmZhY2VOb2RlID0gZnVuY3Rpb24gKERPTSwgUGx1Z2luUGFyYW1ldGVySW5zdGFuY2UsIHByb2Nlc3NvciwgZ3VpKSB7XHJcbiAgICAgICAgdGhpcy5pbnB1dCA9IERPTTtcclxuICAgICAgICB0aGlzLnByb2Nlc3NvciA9IHByb2Nlc3NvcjtcclxuICAgICAgICB0aGlzLkdVSSA9IGd1aTtcclxuICAgICAgICB0aGlzLkF1ZGlvUGFyYW0gPSBQbHVnaW5QYXJhbWV0ZXJJbnN0YW5jZTtcclxuICAgICAgICB0aGlzLmhhbmRsZUV2ZW50ID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHRoaXMuQXVkaW9QYXJhbS52YWx1ZSA9IHRoaXMuaW5wdXQudmFsdWU7XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgdGhpcyk7XHJcbiAgICAgICAgdGhpcy5pbnB1dC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIHRoaXMpO1xyXG4gICAgICAgIHRoaXMuaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMpO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmNyZWF0ZVBsdWdpblBhcmFtZXRlckludGVyZmFjZU5vZGUgPSBmdW5jdGlvbiAoRE9NLCBQbHVnaW5QYXJhbWV0ZXJJbnN0YW5jZSkge1xyXG4gICAgICAgIHZhciBub2RlID0gbmV3IFBsdWdpblBhcmFtZXRlckludGVyZmFjZU5vZGUoRE9NLCBQbHVnaW5QYXJhbWV0ZXJJbnN0YW5jZSwgdGhpcy5wcm9jZXNzb3IsIHRoaXMpO1xyXG4gICAgICAgIHRoaXMuUGx1Z2luUGFyYW1ldGVySW50ZXJmYWNlcy5wdXNoKG5vZGUpO1xyXG4gICAgICAgIHJldHVybiBub2RlO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLnVwZGF0ZSA9IGZ1bmN0aW9uICgpIHt9O1xyXG5cclxufTtcclxuXHJcblBsdWdpblVzZXJJbnRlcmZhY2UucHJvdG90eXBlLmdldFJvb3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5yb290O1xyXG59O1xyXG5QbHVnaW5Vc2VySW50ZXJmYWNlLnByb3RvdHlwZS5nZXREaW1lbnNpb25zID0gZnVuY3Rpb24gKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuZGltO1xyXG59O1xyXG5QbHVnaW5Vc2VySW50ZXJmYWNlLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIHJldHVybiB0aGlzLmRpbS53aWR0aDtcclxufTtcclxuUGx1Z2luVXNlckludGVyZmFjZS5wcm90b3R5cGUuZ2V0SGVpZ2h0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuZGltLmhlaWdodDtcclxufTtcclxuUGx1Z2luVXNlckludGVyZmFjZS5wcm90b3R5cGUuYmVnaW5DYWxsYmFja3MgPSBmdW5jdGlvbiAobXMpIHtcclxuICAgIC8vIEFueSByZWdpc3RlcmVkIGNhbGxiYWNrcyBhcmUgc3RhcnRlZCBieSB0aGUgaG9zdFxyXG4gICAgaWYgKG1zID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBtcyA9IDI1MDtcclxuICAgIH0gLy9EZWZhdWx0IG9mIDI1MG1zIHVwZGF0ZSBwZXJpb2RcclxuICAgIGlmICh0aGlzLmludGVydmFsRnVuY3Rpb24gPT09IG51bGwpIHtcclxuICAgICAgICB0aGlzLnVwZGF0ZUludGVydmFsID0gbXM7XHJcbiAgICAgICAgdGhpcy5pbnRlcnZhbEZ1bmN0aW9uID0gd2luZG93LnNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGUoKTtcclxuICAgICAgICB9LmJpbmQodGhpcyksIDI1MCk7XHJcbiAgICB9XHJcbn07XHJcblBsdWdpblVzZXJJbnRlcmZhY2UucHJvdG90eXBlLnN0b3BDYWxsYmFja3MgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAvLyBBbnkgcmVnaXN0ZXJlZCBjYWxsYmFja3MgYXJlIHN0b3BwZWQgYnkgdGhlIGhvc3RcclxuICAgIGlmICh0aGlzLmludGVydmFsRnVuY3Rpb24gIT09IG51bGwpIHtcclxuICAgICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsRnVuY3Rpb24pO1xyXG4gICAgICAgIHRoaXMudXBkYXRlSW50ZXJ2YWwgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuaW50ZXJ2YWxGdW5jdGlvbiA9IG51bGw7XHJcbiAgICB9XHJcbn07XHJcblBsdWdpblVzZXJJbnRlcmZhY2UucHJvdG90eXBlLmxvYWRSZXNvdXJjZSA9IGZ1bmN0aW9uICh1cmwpIHtcclxuICAgIHZhciBwID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIHZhciByZXEgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgICAgICByZXEub3BlbignR0VUJywgdXJsKTtcclxuICAgICAgICByZXEub25sb2FkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAocmVxLnN0YXR1cyA9PT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKHJlcS5yZXNwb25zZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZWplY3QoRXJyb3IocmVxLnN0YXR1c1RleHQpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmVxLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJlamVjdChFcnJvcihcIk5ldHdvcmsgRXJyb3JcIikpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcmVxLnNlbmQoKTtcclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHA7XHJcbn07XHJcblBsdWdpblVzZXJJbnRlcmZhY2UucHJvdG90eXBlLmNsZWFyR1VJID0gZnVuY3Rpb24gKCkge1xyXG4gICAgdGhpcy5zdG9wQ2FsbGJhY2tzKCk7XHJcbiAgICB0aGlzLnJvb3QuaW5uZXJIVE1MID0gXCJcIjtcclxufTtcclxuXHJcbnZhciBQbHVnaW5JbnRlcmZhY2VNZXNzYWdlSHViID0gZnVuY3Rpb24ob3duZXIpIHtcclxuICAgIGZ1bmN0aW9uIGJ1aWxkUGx1Z2luUGFyYW1ldGVySlNPTihwbHVnaW4pIHtcclxuICAgICAgICB2YXIgbmFtZXMgPSBvd25lci5wYXJhbWV0ZXJzLmdldFBhcmFtZXRlck5hbWVzKCk7XHJcbiAgICAgICAgdmFyIE8gPSB7fTtcclxuICAgICAgICBuYW1lcy5mb3JFYWNoKGZ1bmN0aW9uKG5hbWUpIHtcclxuICAgICAgICAgICAgdmFyIHBhcmFtID0gb3duZXIucGFyYW1ldGVycy5nZXRQYXJhbWV0ZXJCeU5hbWUobmFtZSk7XHJcbiAgICAgICAgICAgIE9bbmFtZV0gPSB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogcGFyYW0udmFsdWUsXHJcbiAgICAgICAgICAgICAgICBtYXhpbXVtOiBwYXJhbS5tYXhpbXVtLFxyXG4gICAgICAgICAgICAgICAgbWluaW11bTogcGFyYW0ubWluaW11bSxcclxuICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogcGFyYW0uZGVmYXVsdFZhbHVlLFxyXG4gICAgICAgICAgICAgICAgdHlwZTogcGFyYW0uY29uc3RydWN0b3IubmFtZSxcclxuICAgICAgICAgICAgICAgIG5hbWU6IG5hbWVcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gTztcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBidWlsZFBhcmFtZXRlclVwZGF0ZVBheWxvYWQoc2VuZGVyX2lkKSB7XHJcbiAgICAgICAgdmFyIG1zZyA9IHtcclxuICAgICAgICAgICAgbWVzc2FnZTogXCJ1cGRhdGVQYXJhbWV0ZXJzXCIsXHJcbiAgICAgICAgICAgIHBhcmFtZXRlcnM6IGJ1aWxkUGx1Z2luUGFyYW1ldGVySlNPTihvd25lcilcclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmIChzZW5kZXJfaWQpIHtcclxuICAgICAgICAgICAgbXNnLnNlbmRlcl9pZCA9IHNlbmRlcl9pZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG1zZztcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzZW5kUGFyYW1ldGVyVXBkYXRlcyhjaGFubmVsKSB7XHJcbiAgICAgICAgY2hhbm5lbC5wb3N0TWVzc2FnZShidWlsZFBhcmFtZXRlclVwZGF0ZVBheWxvYWQoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gYnJvYWRjYXN0UGFyYW1ldGVyVXBkYXRlcyhzZW5kZXJfaWQpIHtcclxuICAgICAgICB2YXIgbXNnID0gYnVpbGRQYXJhbWV0ZXJVcGRhdGVQYXlsb2FkKHNlbmRlcl9pZCk7XHJcbiAgICAgICAgd2luZG93TWVzc2FnZUxpc3QuZm9yRWFjaChmdW5jdGlvbih3KSB7XHJcbiAgICAgICAgICAgIHcucG9zdE1lc3NhZ2UobXNnKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBzZXRQYXJhbWV0ZXJNZXNzYWdlKGUpIHtcclxuICAgICAgICB2YXIgcGFyYW1ldGVycyA9IEpTT04ucGFyc2UoZS5tZXNzYWdlLnBhcmFtZXRlcnMpO1xyXG4gICAgICAgIE9iamVjdC5rZXlzKHBhcmFtZXRlcnMpLmZvckVhY2goZnVuY3Rpb24obmFtZSkge1xyXG4gICAgICAgICAgICBvd25lci5wYXJhbWV0ZXJzLnNldFBhcmFtZXRlckJ5TmFtZShuYW1lLHBhcmFtZXRlcnNbbmFtZV0udmFsdWUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciB3aW5kb3dNZXNzYWdlTGlzdCA9IFtdO1xyXG4gICAgdmFyIHN0YXRlID0gMDtcclxuXHJcbiAgICB3aW5kb3cub25tZXNzYWdlID0gZnVuY3Rpb24oZSkge1xyXG4gICAgICAgIHN3aXRjaChlLmRhdGEubWVzc2FnZSkge1xyXG4gICAgICAgICAgICBjYXNlIFwic2V0UGFyYW1ldGVyQnlOYW1lXCI6XHJcbiAgICAgICAgICAgICAgICBpZiAoZS5kYXRhLnBhcmFtZXRlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlLmRhdGEucGFyYW1ldGVyLm5hbWUgJiYgZS5kYXRhLnBhcmFtZXRlci52YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvd25lci5wYXJhbWV0ZXJzLnNldFBhcmFtZXRlckJ5TmFtZShlLmRhdGEucGFyYW1ldGVyLm5hbWUsIGUuZGF0YS5wYXJhbWV0ZXIudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicm9hZGNhc3RQYXJhbWV0ZXJVcGRhdGVzKGUuZGF0YS5zZW5kZXJfaWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJzZXRQYXJhbWV0ZXJzQnlPYmplY3RcIjpcclxuICAgICAgICAgICAgICAgIGlmIChlLmRhdGEucGFyYW1ldGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0UGFyYW1ldGVyTWVzc2FnZShlKTtcclxuICAgICAgICAgICAgICAgICAgICBicm9hZGNhc3RQYXJhbWV0ZXJVcGRhdGVzKGUuZGF0YS5zZW5kZXJfaWQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgXCJyZXF1ZXN0UGFyYW1ldGVyc1wiOlxyXG4gICAgICAgICAgICAgICAgc2VuZFBhcmFtZXRlclVwZGF0ZXMoZS5zb3VyY2UpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICB0aHJvdyhcIlVua25vd24gbWVzc2FnZSB0eXBlIFxcXCJcIitlLmRhdGEubWVzc2FnZStcIlxcXCJcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLCB7XHJcbiAgICAgICAgXCJ1cGRhdGVJbnRlcmZhY2VzXCI6IHtcclxuICAgICAgICAgICAgXCJ2YWx1ZVwiOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGJyb2FkY2FzdFBhcmFtZXRlclVwZGF0ZXMoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgXCJjbG9zZVdpbmRvd3NcIjoge1xyXG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3RhdGUgPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICB3aGlsZSh3aW5kb3dNZXNzYWdlTGlzdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB3ID0gd2luZG93TWVzc2FnZUxpc3QucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHcuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93KFwiQ2FubmVsIGFscmVhZHkgY2xvc2VkXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBcInJlZ2lzdGVyV2luZG93XCI6IHtcclxuICAgICAgICAgICAgXCJ2YWx1ZVwiOiBmdW5jdGlvbih3KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAod2luZG93TWVzc2FnZUxpc3QuaW5jbHVkZXModykpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvd01lc3NhZ2VMaXN0LnB1c2godyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufTtcclxuXHJcbmlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICB3aW5kb3cuQmFzZVBsdWdpbiA9IEJhc2VQbHVnaW47XHJcbn1cclxuXHJcbmV4cG9ydCB7QmFzZVBsdWdpbn07XHJcbiIsIi8qIGpzaGludCBlc3ZlcnNpb246IDYgKi9cclxuaW1wb3J0IHtCYXNlUGx1Z2lufSBmcm9tIFwiLi9iYXNlX3BsdWdpblwiO1xyXG5cclxudmFyIFN5bnRoZXNpc2VyQmFzZVBsdWdpbiA9IGZ1bmN0aW9uKGZhY3RvcnksIG93bmVyKVxyXG57XHJcbiAgICB2YXIgaGFzV2FybmVkU2NoZWR1bGVOb3RTZXQgPSBmYWxzZTtcclxuICAgIHZhciBoYXNXYXJuZWRDYW5jZWxOb3RTZXQgPSBmYWxzZTtcclxuICAgIEJhc2VQbHVnaW4uY2FsbCh0aGlzLCBmYWN0b3J5LCBvd25lcik7XHJcblxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcywge1xyXG4gICAgICAgIFwiYWRkSW5wdXRcIjoge1xyXG4gICAgICAgICAgICBcInZhbHVlXCI6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3coXCJDYW5ub3QgYWRkIGlucHV0IHRvIHR5cGUgXFxcIlN5bnRoZXNpc2VyQmFzZVBsdWdpblxcXCJcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIFwiZGVsZXRlSW5wdXRcIjoge1xyXG4gICAgICAgICAgICBcInZhbHVlXCI6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3coXCJDYW5ub3QgZGVsZXRlIGlucHV0IHRvIHR5cGUgXFxcIlN5bnRoZXNpc2VyQmFzZVBsdWdpblxcXCJcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIFwic2NoZWR1bGVFdmVudFwiOiB7XHJcbiAgICAgICAgICAgIFwidmFsdWVcIjogZnVuY3Rpb24gKG1zZywgY29udGV4dFRpbWUpIHtcclxuICAgICAgICAgICAgICAgIGlmICghaGFzV2FybmVkU2NoZWR1bGVOb3RTZXQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm5pbmcoXCJXQVJOSU5HIC0gLnNjaGVkdWxlRXZlbnQgaXMgbm90IG92ZXJyaWRkZW5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgaGFzV2FybmVkU2NoZWR1bGVOb3RTZXQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBcIndyaXRhYmxlXCI6IHRydWVcclxuICAgICAgICB9LFxyXG4gICAgICAgIFwiY2FuY2VsQWxsRXZlbnRzXCI6IHtcclxuICAgICAgICAgICAgXCJ2YWx1ZVwiOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGlmICghaGFzV2FybmVkQ2FuY2VsTm90U2V0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuaW5nKFwiV0FSTklORyAtIC5jYW5jZWxBbGxFdmVudHMgaXMgbm90IG92ZXJyaWRkZW5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgaGFzV2FybmVkQ2FuY2VsTm90U2V0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgXCJ3cml0YWJsZVwiOiB0cnVlXHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn07XHJcblN5bnRoZXNpc2VyQmFzZVBsdWdpbi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEJhc2VQbHVnaW4ucHJvdG90eXBlKTtcclxuU3ludGhlc2lzZXJCYXNlUGx1Z2luLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFN5bnRoZXNpc2VyQmFzZVBsdWdpbjtcclxuXHJcbmV4cG9ydCB7U3ludGhlc2lzZXJCYXNlUGx1Z2lufTtcclxuIiwiLy8gVGhpcyBkZWZpbmVzIGEgbWFzdGVyIG9iamVjdCBmb3IgaG9sZGluZyBhbGwgdGhlIHBsdWdpbnMgYW5kIGNvbW11bmljYXRpbmdcclxuLy8gVGhpcyBvYmplY3Qgd2lsbCBhbHNvIGhhbmRsZSBjcmVhdGlvbiBhbmQgZGVzdHJ1Y3Rpb24gb2YgcGx1Z2luc1xyXG4vKmdsb2JhbHMgUHJvbWlzZSwgZG9jdW1lbnQsIGNvbnNvbGUsIExpbmtlZFN0b3JlLCBXb3JrZXIsIHdpbmRvdywgWE1MSHR0cFJlcXVlc3QgKi9cclxuLyplc2xpbnQtZW52IGJyb3dzZXIgKi9cclxuLyoganNoaW50IGVzdmVyc2lvbjo2ICovXHJcblxyXG4vLyBMb2FkIGpzWHRyYWN0XHJcbihmdW5jdGlvbigpIHtcclxuICAgIGlmICh3aW5kb3cuanNYdHJhY3QgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHZhciBzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcclxuICAgICAgICBzLnNyYyA9IFwiaHR0cHM6Ly9naXRjZG4ueHl6L3JlcG8vbmlja2ppbGxpbmdzL2pzLXh0cmFjdC9tYXN0ZXIvanNYdHJhY3QuanNcIjtcclxuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF0uYXBwZW5kQ2hpbGQocyk7XHJcbiAgICB9XHJcbn0pKCk7XHJcblxyXG5pbXBvcnQgTGlua2VkU3RvcmUgZnJvbSAnLi9MaW5rZWRTdG9yZSc7XHJcbmV4cG9ydCB7QmFzZVBsdWdpbn0gZnJvbSAnLi9iYXNlX3BsdWdpbic7XHJcbmV4cG9ydCB7U3ludGhlc2lzZXJCYXNlUGx1Z2lufSBmcm9tICcuL3N5bnRoX2Jhc2UnO1xyXG5cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBQbHVnaW5GYWN0b3J5KGF1ZGlvX2NvbnRleHQsIHJvb3RVUkwpIHtcclxuICAgICAgICB2YXIgc3ViRmFjdG9yaWVzID0gW10sXHJcbiAgICAgICAgc3ludGhlc2lzZXJIb3N0cyA9IFtdLFxyXG4gICAgICAgIHBsdWdpbl9wcm90b3R5cGVzID0gW10sXHJcbiAgICAgICAgcGx1Z2luc0xpc3QgPSBbXSxcclxuICAgICAgICBjdXJyZW50UGx1Z2luSWQgPSAwLFxyXG4gICAgICAgIGF1ZGlvU3RhcnRlZCA9IGZhbHNlO1xyXG5cclxuICAgIC8qXHJcbiAgICAgICAgdGhpcy5sb2FkUmVzb3VyY2UuIExvYWQgYSByZXNvdXJjZSBpbnRvIHRoZSBnbG9iYWwgbmFtZXNwYWNlXHJcblxyXG4gICAgICAgIEBwYXJhbSByZXNvdXJjZU9iamVjdDogYSBKUyBvYmplY3QgaG9sZGluZyB0aGUgZm9sbG93aW5nIHBhcmFtZXRlcnM6XHJcbiAgICAgICAgICAgIC51cmw6IFVSTCBvZiB0aGUgcmVzb3VyY2VcclxuICAgICAgICAgICAgLnRlc3Q6IGZ1bmN0aW9uIHRvIGNhbGwsIHJldHVybnMgdHJ1ZSBpZiByZXNvdXJjZSBhbHJlYWR5IGxvYWRlZCwgZmFsc2UgaWYgbm90XHJcbiAgICAqL1xyXG4gICAgdGhpcy5sb2FkUmVzb3VyY2UgPSBmdW5jdGlvbiAocmVzb3VyY2VPYmplY3QpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgcmVzb3VyY2VPYmplY3QgIT09IFwib2JqZWN0XCIpIHtcclxuICAgICAgICAgICAgICAgIHJlamVjdChcIkVycm9yXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiByZXNvdXJjZU9iamVjdC51cmwgIT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICAgICAgICAgIHJlamVjdChcInJlc291cmNlT2JqZWN0LnVybCBtdXN0IGJlIGEgc3RyaW5nXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiByZXNvdXJjZU9iamVjdC50ZXN0ICE9PSBcImZ1bmN0aW9uXCIpIHtcclxuICAgICAgICAgICAgICAgIHJlamVjdChcInJlc291cmNlT2JqZWN0LnRlc3QgbXVzdCBiZSBhIGZ1bmN0aW9uXCIpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShyZXNvdXJjZU9iamVjdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKHJlc291cmNlT2JqZWN0KXtcclxuICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0gcmVzb3VyY2VPYmplY3QudGVzdCgpO1xyXG4gICAgICAgICAgICBpZiAocmVzcG9uc2UgIT09IGZhbHNlICYmIHJlc3BvbnNlICE9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyAoXCJyZXNvdXJjZU9iamVjdC50ZXN0IG11c3QgcmV0dXJuIHRydWUgb3IgZmFsc2VcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCFyZXNvdXJjZU9iamVjdC50eXBlKSB7XHJcbiAgICAgICAgICAgICAgICByZXNvdXJjZU9iamVjdC50eXBlID0gXCJqYXZhc2NyaXB0XCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmVzb3VyY2VPYmplY3QudHlwZSA9IHJlc291cmNlT2JqZWN0LnR5cGUudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgc3dpdGNoIChyZXNvdXJjZU9iamVjdC50eXBlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiamF2YXNjcmlwdFwiOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxvYWRSZXNvdXJjZShyZXNvdXJjZU9iamVjdCkudGhlbihmdW5jdGlvbiAocmVzb3VyY2VPYmplY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVzb3VyY2VPYmplY3QucmV0dXJuT2JqZWN0ID09PSBcInN0cmluZ1wiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJldHVybk9iamVjdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAod2luZG93Lmhhc093blByb3BlcnR5KHJlc291cmNlT2JqZWN0LnJldHVybk9iamVjdCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdpbmRvd1tyZXNvdXJjZU9iamVjdC5yZXR1cm5PYmplY3RdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZXNvdXJjZU9iamVjdC5yZXR1cm5PYmplY3QgPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAod2luZG93Lmhhc093blByb3BlcnR5KHJlc291cmNlT2JqZWN0LnJldHVybk9iamVjdCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh3aW5kb3dbcmVzb3VyY2VPYmplY3QucmV0dXJuT2JqZWN0XSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgKFwiSW52YWxpZCB0eXBlIFwiICsgU3RyaW5nKHJlc291cmNlT2JqZWN0LnR5cGUpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmxvYWRQbHVnaW5TY3JpcHQgPSBmdW5jdGlvbiAocmVzb3VyY2VPYmplY3QpIHtcclxuICAgICAgICBpZiAocmVzb3VyY2VPYmplY3QpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiByZXNvdXJjZU9iamVjdC5yZXR1cm5PYmplY3QgIT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IChcInJlc291cmNlT2JqZWN0LnJldHVybk9iamVjdCBtdXN0IGJlIHRoZSBuYW1lIG9mIHRoZSBwcm90b3R5cGUgZnVuY3Rpb25cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubG9hZFJlc291cmNlKHJlc291cmNlT2JqZWN0KS50aGVuKGZ1bmN0aW9uIChwbHVnaW4pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmFkZFByb3RvdHlwZShwbHVnaW4pO1xyXG4gICAgICAgICAgICB9LmJpbmQodGhpcykpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgZnVuY3Rpb24gbG9hZFJlc291cmNlKHJlc291cmNlT2JqZWN0KSB7XHJcbiAgICAgICAgaWYgKHJlc291cmNlT2JqZWN0LnVybC5zdGFydHNXaXRoKFwiaHR0cFwiKSA9PT0gZmFsc2UgJiYgcm9vdFVSTCAhPT0gdW5kZWZpbmVkICYmIHJvb3RVUkwuc3RhcnRzV2l0aChcImh0dHBcIikpIHtcclxuICAgICAgICAgICAgcmVzb3VyY2VPYmplY3QudXJsID0gcm9vdFVSTCArIHJlc291cmNlT2JqZWN0LnVybDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgICAgICAgICB4aHIub3BlbihcIkdFVFwiLCByZXNvdXJjZU9iamVjdC51cmwpO1xyXG4gICAgICAgICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHhoci5yZWFkeVN0YXRlID09IDQpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcclxuICAgICAgICAgICAgICAgICAgICBzY3JpcHQudGV4dENvbnRlbnQgPSB4aHIucmVzcG9uc2VUZXh0O1xyXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXS5hcHBlbmRDaGlsZChzY3JpcHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzb3VyY2VPYmplY3QpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgeGhyLnNlbmQoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBjb3B5RmFjdG9yeShuZXdjb250ZXh0KSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICBpZiAobmV3Y29udGV4dC5zYW1wbGVSYXRlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIC8vTWF5YmUgbm90IGEgcmVhbCBBdWRpb0NvbnRleHRcclxuICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoXCJJbnZhbGlkIGF1ZGlvIGNvbnRleHQgcHJvdmlkZWRcIikpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShuZXdjb250ZXh0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pLnRoZW4oZnVuY3Rpb24obmV3Y29udGV4dCkge1xyXG4gICAgICAgICAgICB2YXIgQkZhY3RvcnkgPSBuZXcgUGx1Z2luRmFjdG9yeShuZXdjb250ZXh0KTtcclxuICAgICAgICAgICAgdmFyIHByb21pc2VzID0gW107XHJcbiAgICAgICAgICAgIHBsdWdpbl9wcm90b3R5cGVzLmZvckVhY2goZnVuY3Rpb24gKHByb3RvKSB7XHJcbiAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKEJGYWN0b3J5LmFkZFByb3RvdHlwZShwcm90by5wcm90bykpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEJGYWN0b3J5O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKG5ld0ZhY3RvcnkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ld0ZhY3Rvcnk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIFBsdWdpbkluc3RhbmNlID0gZnVuY3Rpb24gKGlkLCBwbHVnaW5fbm9kZSkge1xyXG4gICAgICAgIHRoaXMubmV4dF9ub2RlID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHZhciBfYnlwYXNzZWQgPSBmYWxzZTtcclxuICAgICAgICB2YXIgX2luID0gYXVkaW9fY29udGV4dC5jcmVhdGVHYWluKCksXHJcbiAgICAgICAgICAgIF9vdXQgPSBhdWRpb19jb250ZXh0LmNyZWF0ZUdhaW4oKTtcclxuXHJcbiAgICAgICAgX2luLmNvbm5lY3QocGx1Z2luX25vZGUuZ2V0SW5wdXRzKClbMF0pO1xyXG4gICAgICAgIHBsdWdpbl9ub2RlLmdldE91dHB1dHMoKVswXS5jb25uZWN0KF9vdXQpO1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBieXBhc3NFbmFibGUoKSB7XHJcbiAgICAgICAgICAgIF9pbi5kaXNjb25uZWN0KCk7XHJcbiAgICAgICAgICAgIF9pbi5jb25uZWN0KF9vdXQpO1xyXG4gICAgICAgICAgICBfYnlwYXNzZWQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gYnlwYXNzRGlzYWJsZSgpIHtcclxuICAgICAgICAgICAgX2luLmRpc2Nvbm5lY3QoKTtcclxuICAgICAgICAgICAgX2luLmNvbm5lY3QocGx1Z2luX25vZGUuZ2V0SW5wdXRzKClbMF0pO1xyXG4gICAgICAgICAgICBfYnlwYXNzZWQgPSBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuYnlwYXNzID0gZnVuY3Rpb24gKHN0YXRlKSB7XHJcbiAgICAgICAgICAgIHN0YXRlID0gKHN0YXRlID09PSB0cnVlKTtcclxuICAgICAgICAgICAgaWYgKHN0YXRlID09PSBfYnlwYXNzZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfYnlwYXNzZWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHN0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICBieXBhc3NFbmFibGUoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGJ5cGFzc0Rpc2FibGUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gX2J5cGFzc2VkO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuaXNCeXBhc3NlZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIF9ieXBhc3NlZDtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLnJlY29ubmVjdCA9IGZ1bmN0aW9uIChuZXdfbmV4dCkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbm5lY3QobmV3X25leHQpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuY29ubmVjdCA9IGZ1bmN0aW9uIChuZXdfbmV4dCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5uZXh0X25vZGUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kaXNjb25uZWN0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG5ld19uZXh0ICE9PSB1bmRlZmluZWQgJiYgbmV3X25leHQuaW5wdXQgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5uZXh0X25vZGUgPSBuZXdfbmV4dDtcclxuICAgICAgICAgICAgICAgIF9vdXQuY29ubmVjdCh0aGlzLm5leHRfbm9kZS5pbnB1dCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5kaXNjb25uZWN0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5uZXh0X25vZGUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgX291dC5kaXNjb25uZWN0KHRoaXMubmV4dF9ub2RlLmlucHV0KTtcclxuICAgICAgICAgICAgICAgIHRoaXMubmV4dF9ub2RlID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBwbHVnaW5fbm9kZS5kZXN0cm95KCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcywge1xyXG4gICAgICAgICAgICAnaWQnOiB7XHJcbiAgICAgICAgICAgICAgICAndmFsdWUnOiBpZFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnbm9kZSc6IHtcclxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IHBsdWdpbl9ub2RlXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdpbnB1dCc6IHtcclxuICAgICAgICAgICAgICAgICdnZXQnOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9pbjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ291dHB1dCc6IHtcclxuICAgICAgICAgICAgICAgICdnZXQnOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9vdXQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdieXBhc3NlZCc6IHtcclxuICAgICAgICAgICAgICAgICdnZXQnOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9ieXBhc3NlZDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFBsdWdpbkluc3RhbmNlLnByb3RvdHlwZS5mYWN0b3J5ID0gdGhpcztcclxuXHJcbiAgICB2YXIgTWlkaVN5bnRoZXNpc0luc3RhbmNlID0gZnVuY3Rpb24oaWQsIHN5bnRoTm9kZSkge1xyXG4gICAgICAgIHZhciBfb3V0ID0gYXVkaW9fY29udGV4dC5jcmVhdGVHYWluKCk7XHJcbiAgICAgICAgc3ludGhOb2RlLmdldE91dHB1dHMoKVswXS5jb25uZWN0KF9vdXQpO1xyXG5cclxuICAgICAgICB0aGlzLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHN5bnRoTm9kZS5kZXN0cm95KCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcywge1xyXG4gICAgICAgICAgICAnaWQnOiB7XHJcbiAgICAgICAgICAgICAgICAndmFsdWUnOiBpZFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnbm9kZSc6IHtcclxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IHN5bnRoTm9kZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnb3V0cHV0Jzoge1xyXG4gICAgICAgICAgICAgICAgJ2dldCc6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX291dDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgdmFyIFBsdWdpblByb3RvdHlwZSA9IGZ1bmN0aW9uIChwcm90bywgZmFjdG9yeSkge1xyXG5cdCAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcywge1xyXG4gICAgICAgICAgICAnbmFtZSc6IHtcclxuICAgICAgICAgICAgICAgIHZhbHVlOiBwcm90by5wcm90b3R5cGUubmFtZVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAncHJvdG8nOiB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogcHJvdG9cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3ZlcnNpb24nOiB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogcHJvdG8ucHJvdG90eXBlLnZlcnNpb25cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ3VuaXF1ZUlEJzoge1xyXG4gICAgICAgICAgICAgICAgdmFsdWU6IHByb3RvLnByb3RvdHlwZS51bmlxdWVJRFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAnaGFzTWlkaUlucHV0Jzoge1xyXG4gICAgICAgICAgICAgICAgdmFsdWU6IHByb3RvLnByb3RvdHlwZS5oYXNNaWRpSW5wdXQgfHwgZmFsc2VcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ2hhc01pZGlPdXRwdXQnOiB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogcHJvdG8ucHJvdG90eXBlLmhhc01pZGlPdXRwdXQgfHwgZmFsc2VcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmNyZWF0ZVBsdWdpbkluc3RhbmNlID0gYXN5bmMgZnVuY3Rpb24ob3duZXIsIGFzeW5jKSB7XHJcbiAgICAgICAgICAgIHZhciBwID0gY3JlYXRlUGx1Z2luSW5zdGFuY2Uob3duZXIpO1xyXG4gICAgICAgICAgICBpZiAoYXN5bmMgPT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBwO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgcDtcclxuICAgICAgICAgICAgICAgIHJldHVybiBwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlUGx1Z2luSW5zdGFuY2Uob3duZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHdhaXRVbnRpbFJlYWR5KCkudGhlbihmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWNoZWNrSXNSZWFkeSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoXCJQbHVnaW4gbm90IHJlYWR5XCIpKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKG5ldyBwcm90byhmYWN0b3J5LCBvd25lcikpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24ocGx1Z2luKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocGx1Z2luLmluaXRpYWxpc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBsdWdpbi5pbml0aWFsaXNlKCkudGhlbihmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocGx1Z2luKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShwbHVnaW4pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKHBsdWdpbikge1xyXG4gICAgICAgICAgICAgICAgdmFyIG5vZGU7XHJcbiAgICAgICAgICAgICAgICBpZiAocGx1Z2luLmhhc01pZGlJbnB1dCAhPT0gdHJ1ZSAmJiBwbHVnaW4uaGFzTWlkaU91dHB1dCAhPT0gdHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5vZGUgPSBuZXcgUGx1Z2luSW5zdGFuY2UoY3VycmVudFBsdWdpbklkKyssIHBsdWdpbik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBsdWdpbi5oYXNNaWRpSW5wdXQgPT09IHRydWUgJiYgcGx1Z2luLmhhc01pZGlPdXRwdXQgIT09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBub2RlID0gbmV3IE1pZGlTeW50aGVzaXNJbnN0YW5jZShjdXJyZW50UGx1Z2luSWQrKywgcGx1Z2luKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3coXCJObyBJbnN0YW5jZSBIb2xkZXIgQXZhaWxhYmxlIVwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHBsdWdpbiwge1xyXG4gICAgICAgICAgICAgICAgICAgICdwbHVnaW5JbnN0YW5jZSc6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3ZhbHVlJzogbm9kZVxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgJ3Byb3RvdHlwZU9iamVjdCc6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3ZhbHVlJzogc2VsZlxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgJ25hbWUnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBwcm90by5wcm90b3R5cGUubmFtZVxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgJ3ZlcnNpb24nOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBwcm90by5wcm90b3R5cGUudmVyc2lvblxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgJ3VuaXF1ZUlEJzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcHJvdG8ucHJvdG90eXBlLnVuaXF1ZUlEXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAnU2VzaW9uRGF0YSc6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZhY3RvcnkuU2Vzc2lvbkRhdGFcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICdVc2VyRGF0YSc6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGZhY3RvcnkuVXNlckRhdGFcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKG5vZGUsIHtcclxuICAgICAgICAgICAgICAgICAgICBcInByb3RvdHlwZU9iamVjdFwiOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICd2YWx1ZSc6IHNlbGZcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIFwiZXh0ZXJuYWxJbnRlcmZhY2VcIjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAndmFsdWUnOiBwbHVnaW4uZXh0ZXJuYWxJbnRlcmZhY2VcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGZhY3RvcnkucmVnaXN0ZXJQbHVnaW5JbnN0YW5jZShub2RlKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBub2RlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGxvYWRSZXNvdXJjZUNoYWluKHJlc291cmNlT2JqZWN0LCBwKSB7XHJcbiAgICAgICAgICAgIGlmICghcCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGsgPSBsb2FkUmVzb3VyY2UocmVzb3VyY2VPYmplY3QpO1xyXG4gICAgICAgICAgICAgICAgay50aGVuKGZ1bmN0aW9uIChyZXNvdXJjZU9iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXNvdXJjZU9iamVjdC5yZXNvdXJjZXMgIT09IHVuZGVmaW5lZCAmJiByZXNvdXJjZU9iamVjdC5yZXNvdXJjZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlc291cmNlT2JqZWN0LnJlc291cmNlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgayA9IGxvYWRSZXNvdXJjZUNoYWluKHJlc291cmNlT2JqZWN0LnJlc291cmNlc1tpXSwgayk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBrO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHAudGhlbihsb2FkUmVzb3VyY2UocmVzb3VyY2VPYmplY3QpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gbG9hZFN0eWxlc2hlZXQodXJsKSB7XHJcbiAgICAgICAgICAgIHZhciBjc3MgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlua1wiKTtcclxuICAgICAgICAgICAgY3NzLnNldEF0dHJpYnV0ZShcInJlbFwiLCBcInN0eWxlc2hlZXRcIik7XHJcbiAgICAgICAgICAgIGNzcy5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwidGV4dC9jc3NcIik7XHJcbiAgICAgICAgICAgIGNzcy5zZXRBdHRyaWJ1dGUoXCJocmVmXCIsIHVybCk7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXS5hcHBlbmRDaGlsZChjc3MpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcmVjdXJzaXZlR2V0VGVzdChyZXNvdXJjZU9iamVjdCkge1xyXG4gICAgICAgICAgICBpZiAocmVzb3VyY2VPYmplY3QuaGFzT3duUHJvcGVydHkoXCJsZW5ndGhcIikgJiYgcmVzb3VyY2VPYmplY3QubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlY3Vyc2l2ZUdldFRlc3QocmVzb3VyY2VPYmplY3RbcmVzb3VyY2VPYmplY3QubGVuZ3RoIC0gMV0pO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJlc291cmNlT2JqZWN0Lmhhc093blByb3BlcnR5KFwicmVzb3VyY2VzXCIpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVjdXJzaXZlR2V0VGVzdChyZXNvdXJjZU9iamVjdC5yZXNvdXJjZXMpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc291cmNlT2JqZWN0LnRlc3Q7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciByZXNvdXJjZVByb21pc2VzID0gW107XHJcbiAgICAgICAgaWYgKHByb3RvLnByb3RvdHlwZS5yZXNvdXJjZXMpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm90by5wcm90b3R5cGUucmVzb3VyY2VzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVzb3VyY2UgPSBwcm90by5wcm90b3R5cGUucmVzb3VyY2VzW2ldO1xyXG4gICAgICAgICAgICAgICAgcmVzb3VyY2UudHlwZSA9IHJlc291cmNlLnR5cGUudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgICAgIHN3aXRjaCAocmVzb3VyY2UudHlwZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJjc3NcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgbG9hZFN0eWxlc2hlZXQocmVzb3VyY2UudXJsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImphdmFzY3JpcHRcIjpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9iamVjdCA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdwcm9taXNlJzogbG9hZFJlc291cmNlQ2hhaW4ocmVzb3VyY2UpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3N0YXRlJzogMCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdjb21wbGV0ZSc6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID0gMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAndGVzdCc6IHJlY3Vyc2l2ZUdldFRlc3QocmVzb3VyY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdC5wcm9taXNlLnRoZW4ob2JqZWN0LmNvbXBsZXRlLmJpbmQob2JqZWN0KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc291cmNlUHJvbWlzZXMucHVzaChvYmplY3QpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyAoXCJDb3VsZCBub3QgbG9hZCBcIiArIHJlc291cmNlLnVybCArIFwiLCBpbnZhbGlkIHJlc291cmNlLnR5cGVcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuZ2V0UmVzb3VyY2VQcm9taXNlcyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc291cmNlUHJvbWlzZXM7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBmdW5jdGlvbiBjaGVja0lzUmVhZHkoKSB7XHJcbiAgICAgICAgICAgIHZhciBzdGF0ZSA9IHRydWU7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVzb3VyY2VQcm9taXNlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc291cmNlUHJvbWlzZXNbaV0uc3RhdGUgIT09IDEgfHwgIXJlc291cmNlUHJvbWlzZXNbaV0udGVzdCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gc3RhdGU7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBmdW5jdGlvbiB3YWl0VW50aWxSZWFkeSgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHJlc291cmNlUHJvbWlzZXMpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5hZGRQcm90b3R5cGUgPSBmdW5jdGlvbiAocGx1Z2luX3Byb3RvKSB7XHJcbiAgICAgICAgdmFyIGZhY3RvcnkgPSB0aGlzO1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBwbHVnaW5fcHJvdG8gIT09IFwiZnVuY3Rpb25cIikge1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KFwiVGhlIFByb3RvdHlwZSBtdXN0IGJlIGEgZnVuY3Rpb24hXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBwbHVnaW5fcHJvdG8ucHJvdG90eXBlLm5hbWUgIT09IFwic3RyaW5nXCIgfHwgcGx1Z2luX3Byb3RvLnByb3RvdHlwZS5uYW1lLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KFwiTWFsZm9ybWVkIHBsdWdpbi4gTmFtZSBub3QgZGVmaW5lZFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgcGx1Z2luX3Byb3RvLnByb3RvdHlwZS52ZXJzaW9uICE9PSBcInN0cmluZ1wiIHx8IHBsdWdpbl9wcm90by5wcm90b3R5cGUudmVyc2lvbi5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHJlamVjdChcIk1hbGZvcm1lZCBwbHVnaW4uIFZlcnNpb24gbm90IGRlZmluZWRcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHBsdWdpbl9wcm90by5wcm90b3R5cGUudW5pcXVlSUQgIT09IFwic3RyaW5nXCIgfHwgcGx1Z2luX3Byb3RvLnByb3RvdHlwZS51bmlxdWVJRC5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHJlamVjdChcIk1hbGZvcm1lZCBwbHVnaW4uIHVuaXF1ZUlEIG5vdCBkZWZpbmVkXCIpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShwbHVnaW5fcHJvdG8pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkudGhlbihmdW5jdGlvbihwbHVnaW5fcHJvdG8pIHtcclxuICAgICAgICAgICAgdmFyIHRlc3RPYmogPSB7XHJcbiAgICAgICAgICAgICAgICAncHJvdG8nOiBwbHVnaW5fcHJvdG8sXHJcbiAgICAgICAgICAgICAgICAnbmFtZSc6IHBsdWdpbl9wcm90by5wcm90b3R5cGUubmFtZSxcclxuICAgICAgICAgICAgICAgICd2ZXJzaW9uJzogcGx1Z2luX3Byb3RvLnByb3RvdHlwZS52ZXJzaW9uLFxyXG4gICAgICAgICAgICAgICAgJ3VuaXF1ZUlEJzogcGx1Z2luX3Byb3RvLnByb3RvdHlwZS51bmlxdWVJRFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB2YXIgb2JqID0gcGx1Z2luX3Byb3RvdHlwZXMuZmluZChmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcmFtO1xyXG4gICAgICAgICAgICAgICAgdmFyIG1hdGNoID0gMDtcclxuICAgICAgICAgICAgICAgIGZvciAocGFyYW0gaW4gdGhpcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlW3BhcmFtXSA9PT0gdGhpc1twYXJhbV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2grKztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbWF0Y2ggPT09IDQ7XHJcbiAgICAgICAgICAgIH0sIHRlc3RPYmopO1xyXG4gICAgICAgICAgICBpZiAob2JqKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyAoXCJUaGUgcGx1Z2luIG11c3QgYmUgdW5pcXVlIVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvYmogPSBuZXcgUGx1Z2luUHJvdG90eXBlKHBsdWdpbl9wcm90bywgZmFjdG9yeSk7XHJcbiAgICAgICAgICAgIHBsdWdpbl9wcm90b3R5cGVzLnB1c2gob2JqKTtcclxuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMob2JqLCB7XHJcbiAgICAgICAgICAgICAgICAnZmFjdG9yeSc6IHtcclxuICAgICAgICAgICAgICAgICAgICAndmFsdWUnOiBmYWN0b3J5XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gb2JqO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmdldFByb3RvdHlwZXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHBsdWdpbl9wcm90b3R5cGVzO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmdldEF1ZGlvUGx1Z2luUHJvdG90eXBlcyA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHJldHVybiBwbHVnaW5fcHJvdG90eXBlcy5maWx0ZXIoZnVuY3Rpb24ocHJvdG8pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHByb3RvLmhhc01pZGlJbnB1dCA9PSBmYWxzZSAmJiBwcm90by5oYXNNaWRpT3V0cHV0ID09IGZhbHNlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmdldE1pZGlTeW50aFByb3RvdHlwZXMgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICByZXR1cm4gcGx1Z2luX3Byb3RvdHlwZXMuZmlsdGVyKGZ1bmN0aW9uKHByb3RvKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBwcm90by5oYXNNaWRpSW5wdXQgPT0gdHJ1ZSAmJiBwcm90by5oYXNNaWRpT3V0cHV0ID09IGZhbHNlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmdldE1pZGlQbHVnaW5Qcm90b3R5cGVzID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHBsdWdpbl9wcm90b3R5cGVzLmZpbHRlcihmdW5jdGlvbihwcm90bykge1xyXG4gICAgICAgICAgICByZXR1cm4gcHJvdG8uaGFzTWlkaUlucHV0ID09IHRydWUgJiYgcHJvdG8uaGFzTWlkaU91dHB1dCA9PSB0cnVlO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmdldEFsbFBsdWdpbnMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHBsdWdpbnNMaXN0O1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmdldEFsbFBsdWdpbnNPYmplY3QgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIG9iaiA9IHtcclxuICAgICAgICAgICAgICAgICdmYWN0b3J5JzogdGhpcyxcclxuICAgICAgICAgICAgICAgICdzdWJGYWN0b3JpZXMnOiBbXVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBpO1xyXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBzdWJGYWN0b3JpZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgb2JqLnN1YkZhY3Rvcmllcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICdzdWJGYWN0b3J5Jzogc3ViRmFjdG9yaWVzW2ldLFxyXG4gICAgICAgICAgICAgICAgJ3BsdWdpbnMnOiBzdWJGYWN0b3JpZXNbaV0uZ2V0UGx1Z2lucygpXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb2JqO1xyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmNyZWF0ZVN1YkZhY3RvcnkgPSBmdW5jdGlvbihjaGFpblN0YXJ0LCBjaGFpblN0b3ApIHtcclxuICAgICAgICBjb25zb2xlLndhcm4oXCJERVBSRUNBVEVEIC0gVGhpcyBmdW5jdGlvbiB3aWxsIGJlIGRlcHJlY2F0ZWQgaW4gZmF2b3VyIG9mIFxcXCJjcmVhdGVBdWRpb1BsdWdpbkNoYWluTWFuYWdlclxcXCJcIik7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlQXVkaW9QbHVnaW5DaGFpbk1hbmFnZXIoY2hhaW5TdGFydCwgY2hhaW5TdG9wKTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5kZXN0cm95U3ViRmFjdG9yeSA9IGZ1bmN0aW9uKGNoYWluU3RhcnQsIGNoYWluU3RvcCkge1xyXG4gICAgICAgIGNvbnNvbGUud2FybihcIkRFUFJFQ0FURUQgLSBUaGlzIGZ1bmN0aW9uIHdpbGwgYmUgZGVwcmVjYXRlZCBpbiBmYXZvdXIgb2YgXFxcImRlc3Ryb3lBdWRpb1BsdWdpbkNoYWluTWFuYWdlclxcXCJcIik7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVzdHJveUF1ZGlvUGx1Z2luQ2hhaW5NYW5hZ2VyKGNoYWluU3RhcnQsIGNoYWluU3RvcCk7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuY3JlYXRlQXVkaW9QbHVnaW5DaGFpbk1hbmFnZXIgPSBmdW5jdGlvbiAoY2hhaW5TdGFydCwgY2hhaW5TdG9wKSB7XHJcbiAgICAgICAgdmFyIG5vZGUgPSBuZXcgQXVkaW9QbHVnaW5DaGFpbk1hbmFnZXIodGhpcywgY2hhaW5TdGFydCwgY2hhaW5TdG9wKTtcclxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhub2RlLCB7XHJcbiAgICAgICAgICAgICdTZXNzaW9uRGF0YSc6IHtcclxuICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLlNlc3Npb25EYXRhXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdVc2VyRGF0YSc6IHtcclxuICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLlVzZXJEYXRhXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBzdWJGYWN0b3JpZXMucHVzaChub2RlKTtcclxuICAgICAgICByZXR1cm4gbm9kZTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5kZXN0cm95QXVkaW9QbHVnaW5DaGFpbk1hbmFnZXIgPSBmdW5jdGlvbiAoU3ViRmFjdG9yeSkge1xyXG4gICAgICAgIHZhciBpbmRleCA9IHN1YkZhY3Rvcmllcy5maW5kSW5kZXgoZnVuY3Rpb24gKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgaWYgKGVsZW1lbnQgPT09IHRoaXMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9LCBTdWJGYWN0b3J5KTtcclxuICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xyXG4gICAgICAgICAgICBzdWJGYWN0b3JpZXMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICAgICAgU3ViRmFjdG9yeS5kZXN0cm95KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB0aGlzLmNyZWF0ZU1pZGlTeW50aGVzaXNlckhvc3QgPSBmdW5jdGlvbihmYWN0b3J5KSB7XHJcbiAgICAgICAgdmFyIGhvc3QgPSBuZXcgTWlkaVN5bnRoZXNpc2VySG9zdChmYWN0b3J5KTtcclxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhob3N0LCB7XHJcbiAgICAgICAgICAgICdTZXNzaW9uRGF0YSc6IHtcclxuICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLlNlc3Npb25EYXRhXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdVc2VyRGF0YSc6IHtcclxuICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLlVzZXJEYXRhXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBzeW50aGVzaXNlckhvc3RzLnB1c2goaG9zdCk7XHJcbiAgICAgICAgcmV0dXJuIGhvc3Q7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuZGVzdHJveU1pZGlTeW50aGVzaXNlckhvc3QgPSBmdW5jdGlvbiAoaG9zdCkge1xyXG4gICAgICAgIHZhciBpbmRleCA9IHN5bnRoZXNpc2VySG9zdHMuZmluZEluZGV4KGZ1bmN0aW9uIChlbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGlmIChlbGVtZW50ID09PSB0aGlzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfSwgaG9zdCk7XHJcbiAgICAgICAgaWYgKGluZGV4ID49IDApIHtcclxuICAgICAgICAgICAgc3ludGhlc2lzZXJIb3N0cy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgICAgICBob3N0LmRlc3Ryb3koKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMucmVnaXN0ZXJQbHVnaW5JbnN0YW5jZSA9IGZ1bmN0aW9uIChpbnN0YW5jZSkge1xyXG4gICAgICAgIGlmIChwbHVnaW5zTGlzdC5maW5kKGZ1bmN0aW9uIChwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcCA9PT0gdGhpcztcclxuICAgICAgICAgICAgfSwgaW5zdGFuY2UpKSB7XHJcbiAgICAgICAgICAgIHRocm93IChcIlBsdWdpbiBJbnN0YW5jZSBub3QgdW5pcXVlXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwbHVnaW5zTGlzdC5wdXNoKGluc3RhbmNlKTtcclxuICAgICAgICBpZiAoYXVkaW9TdGFydGVkKSB7XHJcbiAgICAgICAgICAgIGluc3RhbmNlLm5vZGUuc3RhcnQuY2FsbChpbnN0YW5jZS5ub2RlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9O1xyXG5cclxuICAgIHRoaXMuZGVsZXRlUGx1Z2luID0gZnVuY3Rpb24gKGlkKSB7XHJcbiAgICAgICAgdmFyIGluZGV4ID0gcGx1Z2luc0xpc3QuZmluZEluZGV4KGZ1bmN0aW9uIChwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBwLmlkID09PSBpZDtcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xyXG4gICAgICAgICAgICB2YXIgcCA9IHBsdWdpbnNMaXN0LnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgICAgIHBbMF0ubm9kZS5leHRlcm5hbEludGVyZmFjZS5jbG9zZVdpbmRvd3MoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIGZ1bmN0aW9uIHRyaWdnZXJBdWRpb1N0YXJ0KCkge1xyXG4gICAgICAgIHBsdWdpbnNMaXN0LmZvckVhY2goZnVuY3Rpb24gKG4pIHtcclxuICAgICAgICAgICAgbi5ub2RlLnN0YXJ0LmNhbGwobi5ub2RlKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiB0cmlnZ2VyQXVkaW9TdG9wKCkge1xyXG4gICAgICAgIHBsdWdpbnNMaXN0LmZvckVhY2goZnVuY3Rpb24gKG4pIHtcclxuICAgICAgICAgICAgbi5ub2RlLnN0b3AuY2FsbChuLm5vZGUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHRoaXMuYXVkaW9TdGFydCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoIWF1ZGlvU3RhcnRlZCkge1xyXG4gICAgICAgICAgICB0cmlnZ2VyQXVkaW9TdGFydCgpO1xyXG4gICAgICAgICAgICBhdWRpb1N0YXJ0ZWQgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICB0aGlzLmF1ZGlvU3RvcCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoYXVkaW9TdGFydGVkKSB7XHJcbiAgICAgICAgICAgIHRyaWdnZXJBdWRpb1N0b3AoKTtcclxuICAgICAgICAgICAgYXVkaW9TdGFydGVkID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgRmVhdHVyZU1hcCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgTWFwcGluZ3MgPSBbXTtcclxuXHJcbiAgICAgICAgdmFyIEZlYXR1cmVOb2RlID0gZnVuY3Rpb24gKG5vZGUpIHtcclxuICAgICAgICAgICAgdGhpcy5uYW1lID0gbm9kZS5uYW1lO1xyXG4gICAgICAgICAgICB0aGlzLnBhcmFtZXRlcnMgPSB0aGlzLnBhcmFtZXRlcnM7XHJcbiAgICAgICAgICAgIHRoaXMuZmVhdHVyZXMgPSBbXTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBnZXRGZWF0dXJlTm9kZShsaXN0LCBjaGVjaykge1xyXG4gICAgICAgICAgICByZXR1cm4gbGlzdC5maW5kKGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZS5uYW1lID09PSB0aGlzLm5hbWU7XHJcbiAgICAgICAgICAgIH0sIGNoZWNrKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGFkZEZlYXR1cmVOb2RlKGZlYXR1cmVOb2RlLCBsaXN0KSB7XHJcbiAgICAgICAgICAgIHZhciBub2RlID0gbmV3IEZlYXR1cmVOb2RlKGZlYXR1cmVOb2RlKTtcclxuICAgICAgICAgICAgbGlzdC5wdXNoKG5vZGUpO1xyXG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZhciBTb3VyY2VNYXAgPSBmdW5jdGlvbiAoU2VuZGVyLCBwbHVnaW5JbnN0YWNlKSB7XHJcbiAgICAgICAgICAgIHZhciBNYXBwaW5ncyA9IFtdO1xyXG4gICAgICAgICAgICB0aGlzLmdldFNvdXJjZUluc3RhbmNlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBsdWdpbkluc3RhY2U7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMuZ2V0U2VuZGVyID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFNlbmRlcjtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGZpbmRGZWF0dXJlT2JqZWN0KGZlYXR1cmVPYmplY3QpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBNYXBwaW5ncy5maW5kKGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChlLm91dHB1dEluZGV4ID09PSB0aGlzLm91dHB1dEluZGV4ICYmIGUuZnJhbWVTaXplID09PSB0aGlzLmZyYW1lU2l6ZSk7XHJcbiAgICAgICAgICAgICAgICB9LCBmZWF0dXJlT2JqZWN0KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gdXBkYXRlU2VuZGVyKCkge1xyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gcmVjdXJzaXZlRmluZChmZWF0dXJlTGlzdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBmLCBsaXN0ID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChmID0gMDsgZiA8IGZlYXR1cmVMaXN0Lmxlbmd0aDsgZisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmZWF0dXJlTm9kZSA9IGdldEZlYXR1cmVOb2RlKGxpc3QsIGZlYXR1cmVMaXN0W2ZdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFmZWF0dXJlTm9kZSB8fCAoZmVhdHVyZUxpc3QucGFyYW1ldGVycyAmJiBmZWF0dXJlTGlzdFtmXS5wYXJhbWV0ZXJzLmxlbmd0aCAhPT0gMCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmVOb2RlID0gYWRkRmVhdHVyZU5vZGUoZmVhdHVyZUxpc3RbZl0sIGxpc3QpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmZWF0dXJlTGlzdFtmXS5mZWF0dXJlcyAmJiBmZWF0dXJlTGlzdFtmXS5mZWF0dXJlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZWF0dXJlTm9kZS5mZWF0dXJlcyA9IHJlY3Vyc2l2ZUZpbmQoZmVhdHVyZUxpc3RbZl0uZmVhdHVyZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBsaXN0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdmFyIGksIG91dHB1dExpc3QgPSBbXTtcclxuICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBNYXBwaW5ncy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvdXRwdXRMaXN0W01hcHBpbmdzW2ldLm91dHB1dEluZGV4XSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dExpc3RbTWFwcGluZ3NbaV0ub3V0cHV0SW5kZXhdID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBmcmFtZUxpc3QgPSBvdXRwdXRMaXN0W01hcHBpbmdzW2ldLm91dHB1dEluZGV4XS5maW5kKGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmZyYW1lU2l6ZSA9PT0gdGhpcy5mcmFtZVNpemU7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgTWFwcGluZ3NbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghZnJhbWVMaXN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZyYW1lTGlzdCA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdmcmFtZVNpemUnOiBNYXBwaW5nc1tpXS5mcmFtZVNpemUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZmVhdHVyZUxpc3QnOiB1bmRlZmluZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0TGlzdFtNYXBwaW5nc1tpXS5vdXRwdXRJbmRleF0ucHVzaChmcmFtZUxpc3QpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBmcmFtZUxpc3QuZmVhdHVyZUxpc3QgPSByZWN1cnNpdmVGaW5kKE1hcHBpbmdzW2ldLmdldEZlYXR1cmVMaXN0KCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgU2VuZGVyLnVwZGF0ZUZlYXR1cmVzKG91dHB1dExpc3QpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLnJlcXVlc3RGZWF0dXJlcyA9IGZ1bmN0aW9uIChyZXF1ZXN0b3JJbnN0YW5jZSwgZmVhdHVyZU9iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1hcCA9IGZpbmRGZWF0dXJlT2JqZWN0KGZlYXR1cmVPYmplY3QpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFtYXApIHtcclxuICAgICAgICAgICAgICAgICAgICBtYXAgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdvdXRwdXRJbmRleCc6IGZlYXR1cmVPYmplY3Qub3V0cHV0SW5kZXgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdmcmFtZVNpemUnOiBmZWF0dXJlT2JqZWN0LmZyYW1lU2l6ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ3JlcXVlc3RvcnMnOiBbXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ2dldEZlYXR1cmVMaXN0JzogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIEYgPSBbXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHRoaXMucmVxdWVzdG9ycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEYgPSBGLmNvbmNhdCh0aGlzLnJlcXVlc3RvcnNbaV0uZ2V0RmVhdHVyZUxpc3QoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gRjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgTWFwcGluZ3MucHVzaChtYXApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdmFyIHJlcXVlc3RvciA9IG1hcC5yZXF1ZXN0b3JzLmZpbmQoZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5nZXRSZXF1ZXN0b3JJbnN0YW5jZSgpID09PSB0aGlzO1xyXG4gICAgICAgICAgICAgICAgfSwgcmVxdWVzdG9ySW5zdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFyZXF1ZXN0b3IpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0b3IgPSBuZXcgUmVxdWVzdG9yTWFwKHJlcXVlc3Rvckluc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgICAgICBtYXAucmVxdWVzdG9ycy5wdXNoKHJlcXVlc3Rvcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0b3IuYWRkRmVhdHVyZXMoZmVhdHVyZU9iamVjdCk7XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVTZW5kZXIoKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZmluZEZyYW1lTWFwID0gZnVuY3Rpb24gKG91dHB1dEluZGV4LCBmcmFtZVNpemUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBNYXBwaW5ncy5maW5kKGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChlLm91dHB1dEluZGV4ID09PSBvdXRwdXRJbmRleCAmJiBlLmZyYW1lU2l6ZSA9PT0gZnJhbWVTaXplKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jYW5jZWxGZWF0dXJlcyA9IGZ1bmN0aW9uIChyZXF1ZXN0b3JJbnN0YW5jZSwgZmVhdHVyZU9iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGZlYXR1cmVPYmplY3QgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIE1hcHBpbmdzLmZvckVhY2goZnVuY3Rpb24gKG1hcCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVxdWVzdG9ySW5kZXggPSBtYXAucmVxdWVzdG9ycy5maW5kSW5kZXgoZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmdldFJlcXVlc3Rvckluc3RhbmNlKCkgPT09IHJlcXVlc3Rvckluc3RhbmNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcXVlc3RvckluZGV4ID49IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcC5yZXF1ZXN0b3JzLnNwbGljZShyZXF1ZXN0b3JJbmRleCwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1hcCA9IGZpbmRGZWF0dXJlT2JqZWN0KGZlYXR1cmVPYmplY3QpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghbWFwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlcXVlc3RvciA9IG1hcC5yZXF1ZXN0b3JzLmZpbmQoZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuZ2V0UmVxdWVzdG9ySW5zdGFuY2UoKSA9PT0gdGhpcztcclxuICAgICAgICAgICAgICAgICAgICB9LCByZXF1ZXN0b3JJbnN0YW5jZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXF1ZXN0b3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0b3IuZGVsZXRlRmVhdHVyZXMoZmVhdHVyZU9iamVjdCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVTZW5kZXIoKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBSZXF1ZXN0b3JNYXAgPSBmdW5jdGlvbiAocGx1Z2luSW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgdmFyIEZlYXR1cmVzID0gW107XHJcbiAgICAgICAgICAgIHZhciBSZWNlaXZlciA9IHBsdWdpbkluc3RhbmNlLm5vZGUuZmVhdHVyZU1hcC5SZWNlaXZlcjtcclxuICAgICAgICAgICAgdGhpcy5nZXRSZXF1ZXN0b3JJbnN0YW5jZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBwbHVnaW5JbnN0YW5jZTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHJlY3Vyc2l2ZWx5QWRkRmVhdHVyZXMocm9vdEFycmF5LCBmZWF0dXJlT2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaTtcclxuICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBmZWF0dXJlT2JqZWN0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgd2UgaGF2ZSBub3QgYWxyZWFkeSBsaXN0ZWQgdGhlIGZlYXR1cmVcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZmVhdHVyZU5vZGUgPSBnZXRGZWF0dXJlTm9kZShyb290QXJyYXksIGZlYXR1cmVPYmplY3RbaV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghZmVhdHVyZU5vZGUgfHwgKGZlYXR1cmVPYmplY3RbaV0ucGFyYW1ldGVycyAmJiBmZWF0dXJlT2JqZWN0W2ldLnBhcmFtZXRlcnMubGVuZ3RoICE9PSAwKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmZWF0dXJlTm9kZSA9IGFkZEZlYXR1cmVOb2RlKGZlYXR1cmVPYmplY3RbaV0sIHJvb3RBcnJheSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChmZWF0dXJlT2JqZWN0W2ldLmZlYXR1cmVzICE9PSB1bmRlZmluZWQgJiYgZmVhdHVyZU9iamVjdFtpXS5mZWF0dXJlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY3Vyc2l2ZWx5QWRkRmVhdHVyZXMoZmVhdHVyZU5vZGUuZmVhdHVyZXMsIGZlYXR1cmVPYmplY3RbaV0uZmVhdHVyZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gcmVjdXJzaXZlbHlEZWxldGVGZWF0dXJlcyhyb290QXJyYXksIGZlYXR1cmVPYmplY3QpIHtcclxuICAgICAgICAgICAgICAgIHZhciBsID0gZmVhdHVyZU9iamVjdC5sZW5ndGgsXHJcbiAgICAgICAgICAgICAgICAgICAgaTtcclxuICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBsOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBGaW5kIHRoZSBmZWF0dXJlXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gZ2V0RmVhdHVyZU5vZGUocm9vdEFycmF5LCBmZWF0dXJlT2JqZWN0W2ldKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmVhdHVyZU9iamVjdFtpbmRleF0uZmVhdHVyZXMgJiYgZmVhdHVyZU9iamVjdFtpbmRleF0uZmVhdHVyZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjdXJzaXZlbHlEZWxldGVGZWF0dXJlcyhyb290QXJyYXlbaW5kZXhdLmZlYXR1cmVzLCBmZWF0dXJlT2JqZWN0W2luZGV4XS5mZWF0dXJlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBGZWF0dXJlcy5zcGxpY2UoaW5kZXgsIDApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5hZGRGZWF0dXJlcyA9IGZ1bmN0aW9uIChmZWF0dXJlT2JqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICByZWN1cnNpdmVseUFkZEZlYXR1cmVzKEZlYXR1cmVzLCBmZWF0dXJlT2JqZWN0LmZlYXR1cmVzKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZGVsZXRlRmVhdHVyZXMgPSBmdW5jdGlvbiAoZmVhdHVyZU9iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgcmVjdXJzaXZlbHlEZWxldGVGZWF0dXJlcyhGZWF0dXJlcywgZmVhdHVyZU9iamVjdC5mZWF0dXJlcyk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICB0aGlzLmdldEZlYXR1cmVMaXN0ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIEZlYXR1cmVzO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgdGhpcy5wb3N0RmVhdHVyZXMgPSBmdW5jdGlvbiAoZmVhdHVyZU9iamVjdCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdwbHVnaW4nOiBmZWF0dXJlT2JqZWN0LnBsdWdpbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ291dHB1dEluZGV4JzogZmVhdHVyZU9iamVjdC5vdXRwdXRJbmRleCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ2ZyYW1lU2l6ZSc6IGZlYXR1cmVPYmplY3QuZnJhbWVTaXplLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnZmVhdHVyZXMnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbnVtYmVyT2ZDaGFubmVscyc6IGZlYXR1cmVPYmplY3QucmVzdWx0cy5udW1iZXJPZkNoYW5uZWxzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3Jlc3VsdHMnOiBbXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHJlY3Vyc2l2ZVBvc3RGZWF0dXJlcyhyb290Tm9kZSwgcmVzdWx0c0xpc3QsIEZlYXR1cmVMaXN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQWRkIHRoZSByZXN1bHRzIHRyZWUgd2hlcmUgbmVjZXNzYXJ5XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGksIHBhcmFtO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiBhbyhlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLm5hbWUgPT09IHBhcmFtO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBmb3IgKHBhcmFtIGluIHJlc3VsdHNMaXN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHRzTGlzdC5oYXNPd25Qcm9wZXJ0eShwYXJhbSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBub2RlID0gRmVhdHVyZUxpc3QuZmluZChhbyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobm9kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHRzTGlzdFtwYXJhbV0uY29uc3RydWN0b3IgPT09IE9iamVjdCAmJiBub2RlLnJlc3VsdHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9vdE5vZGVbcGFyYW1dID0ge307XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY3Vyc2l2ZVBvc3RGZWF0dXJlcyhyb290Tm9kZVtwYXJhbV0sIHJlc3VsdHNMaXN0W3BhcmFtXSwgbm9kZS5yZXN1bHRzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb290Tm9kZVtwYXJhbV0gPSByZXN1bHRzTGlzdFtwYXJhbV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gUGVyZm9ybSByZWN1cnNpdmUgbWFwIGZvciBlYWNoIGNoYW5uZWxcclxuICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBmZWF0dXJlT2JqZWN0LnJlc3VsdHMubnVtYmVyT2ZDaGFubmVsczsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5mZWF0dXJlcy5yZXN1bHRzW2ldID0ge307XHJcbiAgICAgICAgICAgICAgICAgICAgcmVjdXJzaXZlUG9zdEZlYXR1cmVzKG1lc3NhZ2UuZmVhdHVyZXMucmVzdWx0c1tpXSwgZmVhdHVyZU9iamVjdC5yZXN1bHRzLnJlc3VsdHNbaV0ucmVzdWx0cywgRmVhdHVyZXMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcGx1Z2luSW5zdGFuY2Uubm9kZS5mZWF0dXJlTWFwLlJlY2VpdmVyLnBvc3RGZWF0dXJlcyhtZXNzYWdlKTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBmdW5jdGlvbiBmaW5kU291cmNlSW5kZXgoU2VuZGVyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBNYXBwaW5ncy5maW5kSW5kZXgoZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlLmdldFNlbmRlcigpID09PSB0aGlzO1xyXG4gICAgICAgICAgICB9LCBTZW5kZXIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gZmluZFNvdXJjZU1hcChNYXBwaW5ncywgc291cmNlLCBwbHVnaW5TZW5kZXIpIHtcclxuICAgICAgICAgICAgdmFyIHNvdXJjZU1hcCA9IE1hcHBpbmdzW2ZpbmRTb3VyY2VJbmRleChzb3VyY2UpXTtcclxuICAgICAgICAgICAgaWYgKCFzb3VyY2VNYXApIHtcclxuICAgICAgICAgICAgICAgIHNvdXJjZU1hcCA9IE1hcHBpbmdzW2ZpbmRTb3VyY2VJbmRleChwbHVnaW5TZW5kZXIpXTtcclxuICAgICAgICAgICAgICAgIGlmICghc291cmNlTWFwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgKFwiQ291bGQgbm90IGxvY2F0ZSBzb3VyY2UgbWFwXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBzb3VyY2VNYXA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBHRU5FUkFMIElOVEVSRkFDRVxyXG4gICAgICAgIHRoaXMuY3JlYXRlU291cmNlTWFwID0gZnVuY3Rpb24gKFNlbmRlciwgcGx1Z2luSW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgdmFyIG5vZGUgPSBuZXcgU291cmNlTWFwKFNlbmRlciwgcGx1Z2luSW5zdGFuY2UpO1xyXG4gICAgICAgICAgICBNYXBwaW5ncy5wdXNoKG5vZGUpO1xyXG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuZGVsZXRlU291cmNlTWFwID0gZnVuY3Rpb24gKFNlbmRlcikge1xyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSBmaW5kU291cmNlSW5kZXgoU2VuZGVyKTtcclxuICAgICAgICAgICAgaWYgKGluZGV4ID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgKFwiQ291bGQgbm90IGZpbmQgdGhlIHNvdXJjZSBtYXAgZm9yIHRoZSBwbHVnaW5cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgTWFwcGluZ3Muc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLmdldFBsdWdpblNlbmRlciA9IGZ1bmN0aW9uIChwbHVnaW4pIHtcclxuICAgICAgICAgICAgaWYgKHBsdWdpbi5jb25zdHJ1Y3RvciA9PT0gUGx1Z2luSW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgIHBsdWdpbiA9IHBsdWdpbi5ub2RlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBwbHVnaW4uZmVhdHVyZU1hcC5TZW5kZXI7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5yZXF1ZXN0RmVhdHVyZXMgPSBmdW5jdGlvbiAocmVxdWVzdG9yLCBzb3VyY2UsIGZlYXR1cmVPYmplY3QpIHtcclxuICAgICAgICAgICAgaWYgKHJlcXVlc3Rvci5jb25zdHJ1Y3RvciAhPT0gUGx1Z2luSW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3RvciA9IHJlcXVlc3Rvci5wbHVnaW5JbnN0YW5jZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBHZXQgdGhlIHNvdXJjZSBtYXBcclxuICAgICAgICAgICAgdmFyIHBsdWdpblNlbmRlciA9IHRoaXMuZ2V0UGx1Z2luU2VuZGVyKHNvdXJjZSk7XHJcbiAgICAgICAgICAgIHZhciBzb3VyY2VNYXAgPSBmaW5kU291cmNlTWFwKE1hcHBpbmdzLCBzb3VyY2UsIHBsdWdpblNlbmRlcik7XHJcbiAgICAgICAgICAgIHNvdXJjZU1hcC5yZXF1ZXN0RmVhdHVyZXMocmVxdWVzdG9yLCBmZWF0dXJlT2JqZWN0KTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuZGVsZXRlRmVhdHVyZXMgPSBmdW5jdGlvbiAocmVxdWVzdG9yLCBzb3VyY2UsIGZlYXR1cmVPYmplY3QpIHtcclxuICAgICAgICAgICAgaWYgKHJlcXVlc3Rvci5jb25zdHJ1Y3RvciAhPT0gUGx1Z2luSW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3RvciA9IHJlcXVlc3Rvci5wbHVnaW5JbnN0YW5jZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoc291cmNlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIE1hcHBpbmdzLmZvckVhY2goZnVuY3Rpb24gKHNvdXJjZU1hcCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZU1hcC5jYW5jZWxGZWF0dXJlcyhyZXF1ZXN0b3IpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBHZXQgdGhlIHNvdXJjZSBtYXBcclxuICAgICAgICAgICAgICAgIHZhciBwbHVnaW5TZW5kZXIgPSB0aGlzLmdldFBsdWdpblNlbmRlcihzb3VyY2UpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHNvdXJjZU1hcCA9IGZpbmRTb3VyY2VNYXAoTWFwcGluZ3MsIHNvdXJjZSwgcGx1Z2luU2VuZGVyKTtcclxuICAgICAgICAgICAgICAgIHNvdXJjZU1hcC5jYW5jZWxGZWF0dXJlcyhyZXF1ZXN0b3IsIGZlYXR1cmVPYmplY3QpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICB0aGlzLmdldEZlYXR1cmVMaXN0ID0gZnVuY3Rpb24gKHJlcXVlc3Rvciwgc291cmNlKSB7fTtcclxuICAgICAgICB0aGlzLnBvc3RGZWF0dXJlcyA9IGZ1bmN0aW9uIChmZWF0dXJlT2JqZWN0KSB7XHJcbiAgICAgICAgICAgIC8vIFJlY2VpdmUgZnJvbSB0aGUgU2VuZGVyIG9iamVjdHNcclxuICAgICAgICAgICAgLy8gVHJpZ2dlciBkaXN0cmlidXRlZCBzZWFyY2ggZm9yIHJlc3VsdHMgdHJhbnNtaXNzaW9uXHJcblxyXG4gICAgICAgICAgICAvLyBGaXJzdCBnZXQgdGhlIGluc3RhbmNlIG1hcHBpbmcgZm9yIG91dHB1dC9mcmFtZVxyXG4gICAgICAgICAgICB2YXIgc291cmNlID0gTWFwcGluZ3NbZmluZFNvdXJjZUluZGV4KGZlYXR1cmVPYmplY3QucGx1Z2luKV07XHJcbiAgICAgICAgICAgIGlmICghc291cmNlKSB7XHJcbiAgICAgICAgICAgICAgICBzb3VyY2UgPSBNYXBwaW5nc1tmaW5kU291cmNlSW5kZXgodGhpcy5nZXRQbHVnaW5TZW5kZXIoZmVhdHVyZU9iamVjdC5wbHVnaW4pKV07XHJcbiAgICAgICAgICAgICAgICBpZiAoIXNvdXJjZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IChcIlBsdWdpbiBJbnN0YW5jZSBub3QgbG9hZGVkIVwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgZnJhbWVNYXAgPSBzb3VyY2UuZmluZEZyYW1lTWFwKGZlYXR1cmVPYmplY3Qub3V0cHV0SW5kZXgsIGZlYXR1cmVPYmplY3QuZnJhbWVTaXplKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFNlbmQgdGhlIGZlYXR1cmUgb2JqZWN0IHRvIHRoZSBSZXF1ZXN0b3JNYXAgb2JqZWN0IHRvIGhhbmRsZSBjb21tc1xyXG4gICAgICAgICAgICBmcmFtZU1hcC5yZXF1ZXN0b3JzLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgICAgIGUucG9zdEZlYXR1cmVzKHRoaXMpO1xyXG4gICAgICAgICAgICB9LCBmZWF0dXJlT2JqZWN0KTtcclxuXHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5GZWF0dXJlTWFwID0gbmV3IEZlYXR1cmVNYXAoKTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLkZlYXR1cmVNYXAsIFwiZmFjdG9yeVwiLCB7XHJcbiAgICAgICAgJ3ZhbHVlJzogdGhpc1xyXG4gICAgfSk7XHJcblxyXG4gICAgdmFyIHN0b3JlcyA9IFtdO1xyXG5cclxuICAgIHRoaXMuY3JlYXRlU3RvcmUgPSBmdW5jdGlvbiAoc3RvcmVOYW1lKSB7XHJcbiAgICAgICAgdmFyIG5vZGUgPSBuZXcgTGlua2VkU3RvcmUuTGlua2VkU3RvcmUoc3RvcmVOYW1lKTtcclxuICAgICAgICBzdG9yZXMucHVzaChub2RlKTtcclxuICAgICAgICByZXR1cm4gbm9kZTtcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5nZXRTdG9yZXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHN0b3JlcztcclxuICAgIH07XHJcblxyXG4gICAgdGhpcy5maW5kU3RvcmUgPSBmdW5jdGlvbiAoc3RvcmVOYW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIHN0b3Jlcy5maW5kKGZ1bmN0aW9uIChhKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhLm5hbWUgPT09IHN0b3JlTmFtZTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgLy8gQnVpbGQgdGhlIGRlZmF1bHQgU3RvcmVzXHJcbiAgICB0aGlzLlNlc3Npb25EYXRhID0gbmV3IExpbmtlZFN0b3JlLkxpbmtlZFN0b3JlKFwiU2Vzc2lvblwiKTtcclxuICAgIHRoaXMuVXNlckRhdGEgPSBuZXcgTGlua2VkU3RvcmUuTGlua2VkU3RvcmUoXCJVc2VyXCIpO1xyXG5cclxuICAgIC8vIENyZWF0ZWQgZm9yIHRoZSBpbnB1dCBvZiBlYWNoIFN1YkZhY3RvcnkgcGx1Z2luIGNoYWluXHJcbiAgICB2YXIgU3ViRmFjdG9yeUZlYXR1cmVTZW5kZXIgPSBmdW5jdGlvbiAob3duZXIsIEZhY3RvcnlGZWF0dXJlTWFwKSB7XHJcbiAgICAgICAgdmFyIE91dHB1dE5vZGUgPSBmdW5jdGlvbiAocGFyZW50LCBvdXRwdXQpIHtcclxuICAgICAgICAgICAgdmFyIGV4dHJhY3RvcnMgPSBbXTtcclxuICAgICAgICAgICAgdmFyIEV4dHJhY3RvciA9IGZ1bmN0aW9uIChvdXRwdXQsIGZyYW1lU2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5leHRyYWN0b3IgPSBvdXRwdXQuY29udGV4dC5jcmVhdGVBbmFseXNlcigpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5leHRyYWN0b3IuZmZ0U2l6ZSA9IGZyYW1lU2l6ZTtcclxuICAgICAgICAgICAgICAgIG91dHB1dC5jb25uZWN0KHRoaXMuZXh0cmFjdG9yKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZmVhdHVyZXMgPSBbXTtcclxuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImZyYW1lU2l6ZVwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ3ZhbHVlJzogZnJhbWVTaXplXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgcmVjdXJzaXZlUHJvY2Vzc2luZyA9IG93bmVyLnJlY3Vyc2l2ZVByb2Nlc3Npbmc7XHJcbiAgICAgICAgICAgICAgICAvKlxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gcmVjdXJzaXZlUHJvY2Vzc2luZyhiYXNlLCBsaXN0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGwgPSBsaXN0Lmxlbmd0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaSwgZW50cnk7XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGw7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbnRyeSA9IGxpc3RbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VbZW50cnkubmFtZV0uYXBwbHkoYmFzZSwgZW50cnkucGFyYW1ldGVycyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlbnRyeS5mZWF0dXJlcyAmJiBlbnRyeS5mZWF0dXJlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWN1cnNpdmVQcm9jZXNzaW5nKGJhc2UucmVzdWx0W2VudHJ5Lm5hbWVdLCBlbnRyeS5mZWF0dXJlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gb25hdWRpb2NhbGxiYWNrKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAvL3RoaXMgPT09IEV4dHJhY3RvclxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnbnVtYmVyT2ZDaGFubmVscyc6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdyZXN1bHRzJzogW11cclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIHJlY3Vyc2l2ZVByb2Nlc3NpbmcoZGF0YSwgdGhpcy5mZWF0dXJlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5yZXN1bHRzWzBdID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnY2hhbm5lbCc6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdyZXN1bHRzJzogSlNPTi5wYXJzZShkYXRhLnRvSlNPTigpKVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3N0RmVhdHVyZXMoZGF0YS5sZW5ndGgsIG1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0RmVhdHVyZXMgPSBmdW5jdGlvbiAoZmVhdHVyZUxpc3QpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZlYXR1cmVzID0gZmVhdHVyZUxpc3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZmVhdHVyZXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXh0cmFjdG9yLmNsZWFyQ2FsbGJhY2soKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmV4dHJhY3Rvci5mcmFtZUNhbGxiYWNrKG9uYXVkaW9jYWxsYmFjaywgdGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVqb2luRXh0cmFjdG9yID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dC5jb25uZWN0KHRoaXMuZXh0cmFjdG9yKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHZhciBXb3JrZXJFeHRyYWN0b3IgPSBmdW5jdGlvbiAob3V0cHV0LCBmcmFtZVNpemUpIHtcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG9uYXVkaW9jYWxsYmFjayhlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGMsIGZyYW1lcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoYyA9IDA7IGMgPCBlLmlucHV0QnVmZmVyLm51bWJlck9mQ2hhbm5lbHM7IGMrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmcmFtZXNbY10gPSBlLmlucHV0QnVmZmVyLmdldENoYW5uZWxEYXRhKGMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB3b3JrZXIucG9zdE1lc3NhZ2Uoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnc3RhdGUnOiAyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnZnJhbWVzJzogZnJhbWVzXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gcmVzcG9uc2UobXNnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3N0RmVhdHVyZXMoZnJhbWVTaXplLCBtc2cuZGF0YS5yZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHdvcmtlciA9IG5ldyBXb3JrZXIoXCJqc2FwL2ZlYXR1cmUtd29ya2VyLmpzXCIpO1xyXG4gICAgICAgICAgICAgICAgd29ya2VyLm9uZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0RmVhdHVyZXMgPSBmdW5jdGlvbiAoZmVhdHVyZUxpc3QpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbmZpZ01lc3NhZ2UgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdzdGF0ZSc6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdzYW1wbGVSYXRlJzogb3V0cHV0LmNvbnRleHQuc2FtcGxlUmF0ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ2ZlYXR1cmVMaXN0JzogZmVhdHVyZUxpc3QsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdudW1DaGFubmVscyc6IG91dHB1dC5udW1iZXJPZk91dHB1dHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdmcmFtZVNpemUnOiB0aGlzLmZyYW1lU2l6ZVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mZWF0dXJlcyA9IGZlYXR1cmVMaXN0O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChmZWF0dXJlTGlzdCAmJiBmZWF0dXJlTGlzdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdvcmtlci5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUuZGF0YS5zdGF0ZSA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdvcmtlci5vbm1lc3NhZ2UgPSByZXNwb25zZS5iaW5kKHNlbGYpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZXh0cmFjdG9yLm9uYXVkaW9wcm9jZXNzID0gb25hdWRpb2NhbGxiYWNrLmJpbmQoc2VsZik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdvcmtlci5wb3N0TWVzc2FnZShjb25maWdNZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzdGF0ZSc6IDBcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5leHRyYWN0b3Iub25hdWRpb3Byb2Nlc3MgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWpvaW5FeHRyYWN0b3IgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0LmNvbm5lY3QodGhpcy5leHRyYWN0b3IpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmV4dHJhY3RvciA9IG91dHB1dC5jb250ZXh0LmNyZWF0ZVNjcmlwdFByb2Nlc3NvcihmcmFtZVNpemUsIG91dHB1dC5udW1iZXJPZk91dHB1dHMsIDEpO1xyXG4gICAgICAgICAgICAgICAgb3V0cHV0LmNvbm5lY3QodGhpcy5leHRyYWN0b3IpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5leHRyYWN0b3IuY29ubmVjdChvdXRwdXQuY29udGV4dC5kZXN0aW5hdGlvbik7XHJcblxyXG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZnJhbWVTaXplXCIsIHtcclxuICAgICAgICAgICAgICAgICAgICAndmFsdWUnOiBmcmFtZVNpemVcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLmFkZEV4dHJhY3RvciA9IGZ1bmN0aW9uIChmcmFtZVNpemUpIHtcclxuICAgICAgICAgICAgICAgIHZhciBvYmo7XHJcbiAgICAgICAgICAgICAgICBpZiAod2luZG93Lldvcmtlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIG9iaiA9IG5ldyBXb3JrZXJFeHRyYWN0b3Iob3V0cHV0LCBmcmFtZVNpemUpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBvYmogPSBuZXcgRXh0cmFjdG9yKG91dHB1dCwgZnJhbWVTaXplKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGV4dHJhY3RvcnMucHVzaChvYmopO1xyXG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwgXCJwb3N0RmVhdHVyZXNcIiwge1xyXG4gICAgICAgICAgICAgICAgICAgICd2YWx1ZSc6IGZ1bmN0aW9uIChmcmFtZVNpemUsIHJlc3VsdHNKU09OKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvYmogPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnb3V0cHV0SW5kZXgnOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2ZyYW1lU2l6ZSc6IGZyYW1lU2l6ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdyZXN1bHRzJzogcmVzdWx0c0pTT05cclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3N0RmVhdHVyZXMob2JqKTtcclxuICAgICAgICAgICAgICAgICAgICB9LmJpbmQodGhpcylcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9iajtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdGhpcy5maW5kRXh0cmFjdG9yID0gZnVuY3Rpb24gKGZyYW1lU2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNoZWNrID0gZnJhbWVTaXplO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGV4dHJhY3RvcnMuZmluZChmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgTVVTVCBiZSA9PSBOT1QgPT09XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE51bWJlcihlLmZyYW1lU2l6ZSkgPT09IE51bWJlcihjaGVjayk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdGhpcy5yZWpvaW5FeHRyYWN0b3JzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgZXh0cmFjdG9ycy5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZS5yZWpvaW5FeHRyYWN0b3IoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLmRlbGV0ZUV4dHJhY3RvciA9IGZ1bmN0aW9uIChmcmFtZVNpemUpIHt9O1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgdmFyIG91dHB1dE5vZGVzO1xyXG4gICAgICAgIHRoaXMudXBkYXRlRmVhdHVyZXMgPSBmdW5jdGlvbiAoZmVhdHVyZU9iamVjdCkge1xyXG4gICAgICAgICAgICB2YXIgbztcclxuICAgICAgICAgICAgZm9yIChvID0gMDsgbyA8IGZlYXR1cmVPYmplY3QubGVuZ3RoOyBvKyspIHtcclxuICAgICAgICAgICAgICAgIGlmIChvdXRwdXROb2RlcyA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG8gPiAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IChcIlJlcXVlc3RlZCBhbiBvdXRwdXQgdGhhdCBkb2VzIG5vdCBleGlzdFwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0Tm9kZXMgPSBuZXcgT3V0cHV0Tm9kZShvd25lciwgb3duZXIuY2hhaW5TdGFydCk7XHJcbiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG91dHB1dE5vZGVzLCBcInBvc3RGZWF0dXJlc1wiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICd2YWx1ZSc6IGZ1bmN0aW9uIChyZXN1bHRPYmplY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucG9zdEZlYXR1cmVzKHJlc3VsdE9iamVjdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdmFyIHNpO1xyXG4gICAgICAgICAgICAgICAgZm9yIChzaSA9IDA7IHNpIDwgZmVhdHVyZU9iamVjdFtvXS5sZW5ndGg7IHNpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZXh0cmFjdG9yID0gb3V0cHV0Tm9kZXMuZmluZEV4dHJhY3RvcihmZWF0dXJlT2JqZWN0W29dW3NpXS5mcmFtZVNpemUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghZXh0cmFjdG9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4dHJhY3RvciA9IG91dHB1dE5vZGVzLmFkZEV4dHJhY3RvcihmZWF0dXJlT2JqZWN0W29dW3NpXS5mcmFtZVNpemUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBleHRyYWN0b3Iuc2V0RmVhdHVyZXMoZmVhdHVyZU9iamVjdFtvXVtzaV0uZmVhdHVyZUxpc3QpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5yZWpvaW5FeHRyYWN0b3JzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAob3V0cHV0Tm9kZXMpIHtcclxuICAgICAgICAgICAgICAgIG91dHB1dE5vZGVzLnJlam9pbkV4dHJhY3RvcnMoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMucG9zdEZlYXR1cmVzID0gZnVuY3Rpb24gKGZlYXR1cmVPYmplY3QpIHtcclxuICAgICAgICAgICAgLypcclxuICAgICAgICAgICAgICAgIENhbGxlZCBieSB0aGUgaW5kaXZpZHVhbCBleHRyYWN0b3IgaW5zdGFuY2VzOlxyXG4gICAgICAgICAgICAgICAgZmVhdHVyZU9iamVjdCA9IHsnZnJhbWVTaXplJzogZnJhbWVTaXplLFxyXG4gICAgICAgICAgICAgICAgJ291dHB1dEluZGV4Jzogb3V0cHV0SW5kZXgsXHJcbiAgICAgICAgICAgICAgICAncmVzdWx0cyc6W119XHJcbiAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgIEZhY3RvcnlGZWF0dXJlTWFwLnBvc3RGZWF0dXJlcyh7XHJcbiAgICAgICAgICAgICAgICAncGx1Z2luJzogdGhpcyxcclxuICAgICAgICAgICAgICAgICdvdXRwdXRJbmRleCc6IGZlYXR1cmVPYmplY3Qub3V0cHV0SW5kZXgsXHJcbiAgICAgICAgICAgICAgICAnZnJhbWVTaXplJzogZmVhdHVyZU9iamVjdC5mcmFtZVNpemUsXHJcbiAgICAgICAgICAgICAgICAncmVzdWx0cyc6IGZlYXR1cmVPYmplY3QucmVzdWx0c1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBTZW5kIHRvIEZhY3RvcnlcclxuICAgICAgICBGYWN0b3J5RmVhdHVyZU1hcC5jcmVhdGVTb3VyY2VNYXAodGhpcywgdW5kZWZpbmVkKTtcclxuICAgIH07XHJcblxyXG4gICAgdmFyIEF1ZGlvUGx1Z2luQ2hhaW5NYW5hZ2VyID0gZnVuY3Rpb24gKFBsdWdpbkZhY3RvcnksIGNoYWluU3RhcnQsIGNoYWluU3RvcCkge1xyXG5cclxuICAgICAgICB2YXIgcGx1Z2luX2xpc3QgPSBbXSxcclxuICAgICAgICAgICAgcGx1Z2luQ2hhaW5TdGFydCA9IGNoYWluU3RhcnQsXHJcbiAgICAgICAgICAgIHBsdWdpbkNoYWluU3RvcCA9IGNoYWluU3RvcCxcclxuICAgICAgICAgICAgZmFjdG9yeU5hbWUgPSBcIlwiLFxyXG4gICAgICAgICAgICBzdGF0ZSA9IDEsXHJcbiAgICAgICAgICAgIGNoYWluU3RhcnRGZWF0dXJlID0gbmV3IFN1YkZhY3RvcnlGZWF0dXJlU2VuZGVyKHRoaXMsIFBsdWdpbkZhY3RvcnkuRmVhdHVyZU1hcCksXHJcbiAgICAgICAgICAgIHNlbWFudGljU3RvcmVzID0gW107XHJcbiAgICAgICAgdGhpcy5wYXJlbnQgPSBQbHVnaW5GYWN0b3J5O1xyXG4gICAgICAgIHBsdWdpbkNoYWluU3RhcnQuZGlzY29ubmVjdCgpO1xyXG4gICAgICAgIHBsdWdpbkNoYWluU3RhcnQuY29ubmVjdChjaGFpblN0b3ApO1xyXG5cclxuICAgICAgICB0aGlzLlRyYWNrRGF0YSA9IG5ldyBMaW5rZWRTdG9yZS5MaW5rZWRTdG9yZShcIlRyYWNrXCIpO1xyXG4gICAgICAgIHRoaXMuUGx1Z2luRGF0YSA9IG5ldyBMaW5rZWRTdG9yZS5MaW5rZWRTdG9yZShcIlBsdWdpblwiKTtcclxuXHJcbiAgICAgICAgdGhpcy5mZWF0dXJlU2VuZGVyID0gY2hhaW5TdGFydEZlYXR1cmU7XHJcblxyXG4gICAgICAgIHRoaXMuZ2V0RmVhdHVyZUNoYWluID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBmdW5jdGlvbiByZWJ1aWxkKCkge1xyXG4gICAgICAgICAgICB2YXIgaSA9IDAsXHJcbiAgICAgICAgICAgICAgICBsID0gcGx1Z2luX2xpc3QubGVuZ3RoIC0gMTtcclxuICAgICAgICAgICAgd2hpbGUgKGkgPCBsKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudE5vZGUgPSBwbHVnaW5fbGlzdFtpKytdO1xyXG4gICAgICAgICAgICAgICAgdmFyIG5leHROb2RlID0gcGx1Z2luX2xpc3RbaV07XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50Tm9kZS5yZWNvbm5lY3QobmV4dE5vZGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBpc29sYXRlKCkge1xyXG4gICAgICAgICAgICBwbHVnaW5fbGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICBlLmRpc2Nvbm5lY3QoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBjdXRDaGFpbigpIHtcclxuICAgICAgICAgICAgaWYgKHBsdWdpbl9saXN0Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHBsdWdpbkNoYWluU3RhcnQuZGlzY29ubmVjdChwbHVnaW5fbGlzdFswXS5pbnB1dCk7XHJcbiAgICAgICAgICAgICAgICBwbHVnaW5fbGlzdFtwbHVnaW5fbGlzdC5sZW5ndGggLSAxXS5vdXRwdXQuZGlzY29ubmVjdChwbHVnaW5DaGFpblN0b3ApO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcGx1Z2luQ2hhaW5TdGFydC5kaXNjb25uZWN0KHBsdWdpbkNoYWluU3RvcCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmdW5jdGlvbiBqb2luQ2hhaW4oKSB7XHJcbiAgICAgICAgICAgIGlmIChwbHVnaW5fbGlzdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBwbHVnaW5DaGFpblN0YXJ0LmNvbm5lY3QocGx1Z2luX2xpc3RbMF0uaW5wdXQpO1xyXG4gICAgICAgICAgICAgICAgcGx1Z2luX2xpc3RbcGx1Z2luX2xpc3QubGVuZ3RoIC0gMV0ub3V0cHV0LmNvbm5lY3QocGx1Z2luQ2hhaW5TdG9wKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHBsdWdpbkNoYWluU3RhcnQuY29ubmVjdChwbHVnaW5DaGFpblN0b3ApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNoYWluU3RhcnRGZWF0dXJlLnJlam9pbkV4dHJhY3RvcnMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuYnlwYXNzUGx1Z2luID0gZnVuY3Rpb24gKHBsdWdpbl9pbnN0YW5jZSwgc3RhdGUpIHtcclxuICAgICAgICAgICAgLy8gQ2hlY2sgaXMgYSBtZW1iZXIgb2YgdGhpcyBjaGFpblxyXG4gICAgICAgICAgICBpZiAocGx1Z2luX2xpc3QuaW5jbHVkZXMocGx1Z2luX2luc3RhbmNlKSA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBwbHVnaW5faW5zdGFuY2UuYnlwYXNzKHN0YXRlKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLmdldFByb3RvdHlwZXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcmVudC5nZXRQcm90b3R5cGVzKCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5nZXRGYWN0b3J5ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQ7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5kZXN0cm95ID0gZnVuY3Rpb24gKHJlY29ubmVjdCkge1xyXG4gICAgICAgICAgICB2YXIgaTtcclxuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHBsdWdpbl9saXN0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRlc3Ryb3lQbHVnaW4ocGx1Z2luX2xpc3RbaV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHBsdWdpbkNoYWluU3RhcnQuZGlzY29ubmVjdCgpO1xyXG4gICAgICAgICAgICBpZiAocmVjb25uZWN0ID09PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICBwbHVnaW5DaGFpblN0YXJ0LmNvbm5lY3QocGx1Z2luQ2hhaW5TdG9wKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIFBsdWdpbiBjcmVhdGlvbiAvIGRlc3RydWN0aW9uXHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIGJ1aWxkTmV3UGx1Z2luKHByb3RvdHlwZU9iamVjdCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3RhdGUgPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QgKFwiU3ViRmFjdG9yeSBoYXMgYmVlbiBkZXN0cm95ZWQhIENhbm5vdCBhZGQgbmV3IHBsdWdpbnNcIik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUocHJvdG90eXBlT2JqZWN0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBwcm90b3R5cGVPYmplY3QuY3JlYXRlUGx1Z2luSW5zdGFuY2Uoc2VsZiwgZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihub2RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMobm9kZSwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnVHJhY2tEYXRhJzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHNlbGYuVHJhY2tEYXRhXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbm9kZTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuY3JlYXRlUGx1Z2luID0gZnVuY3Rpb24gKHByb3RvdHlwZU9iamVjdCkge1xyXG4gICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgICAgIHJldHVybiBidWlsZE5ld1BsdWdpbihwcm90b3R5cGVPYmplY3QpLmNhdGNoKGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgICAgICAgICAgdGhyb3coXCJQbHVnaW4gZGlkIG5vdCBnZXQgY3JlYXRlZCEgQWJvcnRpbmdcIik7XHJcbiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24obm9kZSkge1xyXG4gICAgICAgICAgICAgICAgY3V0Q2hhaW4oKTtcclxuICAgICAgICAgICAgICAgIHBsdWdpbl9saXN0LnB1c2gobm9kZSk7XHJcbiAgICAgICAgICAgICAgICBpc29sYXRlKCk7XHJcbiAgICAgICAgICAgICAgICByZWJ1aWxkKCk7XHJcbiAgICAgICAgICAgICAgICBqb2luQ2hhaW4oKTtcclxuICAgICAgICAgICAgICAgIG5vZGUubm9kZS5vbmxvYWRlZC5jYWxsKG5vZGUubm9kZSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5kZXN0cm95UGx1Z2luID0gZnVuY3Rpb24gKHBsdWdpbl9vYmplY3QpIHtcclxuICAgICAgICAgICAgaWYgKHN0YXRlID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5nZXRQbHVnaW5JbmRleChwbHVnaW5fb2JqZWN0KTtcclxuICAgICAgICAgICAgaWYgKGluZGV4ID49IDApIHtcclxuICAgICAgICAgICAgICAgIGN1dENoYWluKCk7XHJcbiAgICAgICAgICAgICAgICBwbHVnaW5fb2JqZWN0Lm5vZGUuc3RvcC5jYWxsKHBsdWdpbl9vYmplY3Qubm9kZSk7XHJcbiAgICAgICAgICAgICAgICBwbHVnaW5fb2JqZWN0Lm5vZGUub251bmxvYWRlZC5jYWxsKHBsdWdpbl9vYmplY3Qubm9kZSk7XHJcbiAgICAgICAgICAgICAgICBwbHVnaW5fb2JqZWN0Lm5vZGUuZGVjb25zdHJ1Y3QuY2FsbChwbHVnaW5fb2JqZWN0Lm5vZGUpO1xyXG4gICAgICAgICAgICAgICAgcGx1Z2luX2xpc3Quc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucGFyZW50LmRlbGV0ZVBsdWdpbihwbHVnaW5fb2JqZWN0LmlkKTtcclxuICAgICAgICAgICAgICAgIGlzb2xhdGUoKTtcclxuICAgICAgICAgICAgICAgIHJlYnVpbGQoKTtcclxuICAgICAgICAgICAgICAgIGpvaW5DaGFpbigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5nZXRQbHVnaW5zID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gcGx1Z2luX2xpc3Q7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgdGhpcy5nZXRBbGxQbHVnaW5zID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQuZ2V0QWxsUGx1Z2luc09iamVjdCgpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuZ2V0UGx1Z2luSW5kZXggPSBmdW5jdGlvbiAocGx1Z2luX29iamVjdCkge1xyXG4gICAgICAgICAgICBpZiAoc3RhdGUgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSBwbHVnaW5fbGlzdC5maW5kSW5kZXgoZnVuY3Rpb24gKGVsZW1lbnQsIGluZGV4LCBhcnJheSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQgPT09IHRoaXMpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfSwgcGx1Z2luX29iamVjdCk7XHJcbiAgICAgICAgICAgIHJldHVybiBpbmRleDtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICB0aGlzLm1vdmVQbHVnaW4gPSBmdW5jdGlvbiAocGx1Z2luX29iamVjdCwgbmV3X2luZGV4KSB7XHJcbiAgICAgICAgICAgIGlmIChzdGF0ZSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBvYmosIGluZGV4ID0gdGhpcy5nZXRQbHVnaW5JbmRleChwbHVnaW5fb2JqZWN0KSxcclxuICAgICAgICAgICAgICAgIGhvbGRMb3csIGhvbGRIaWdoLCBpO1xyXG4gICAgICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgY3V0Q2hhaW4oKTtcclxuICAgICAgICAgICAgICAgIGlzb2xhdGUoKTtcclxuICAgICAgICAgICAgICAgIG9iaiA9IHBsdWdpbl9saXN0LnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgICAgICAgICBwbHVnaW5fb2JqZWN0Lm5vZGUub251bmxvYWRlZC5jYWxsKHBsdWdpbl9vYmplY3Qubm9kZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAobmV3X2luZGV4ID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGx1Z2luX2xpc3QgPSBvYmouY29uY2F0KHBsdWdpbl9saXN0KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobmV3X2luZGV4ID49IHBsdWdpbl9saXN0Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBsdWdpbl9saXN0ID0gcGx1Z2luX2xpc3QuY29uY2F0KG9iaik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGhvbGRMb3cgPSBwbHVnaW5fbGlzdC5zbGljZSgwLCBuZXdfaW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGhvbGRIaWdoID0gcGx1Z2luX2xpc3Quc2xpY2UobmV3X2luZGV4KTtcclxuICAgICAgICAgICAgICAgICAgICBwbHVnaW5fbGlzdCA9IGhvbGRMb3cuY29uY2F0KG9iai5jb25jYXQoaG9sZEhpZ2gpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJlYnVpbGQoKTtcclxuICAgICAgICAgICAgICAgIGpvaW5DaGFpbigpO1xyXG4gICAgICAgICAgICAgICAgcGx1Z2luX29iamVjdC5ub2RlLm9ubG9hZGVkLmNhbGwocGx1Z2luX29iamVjdC5ub2RlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHRoaXMuY29weVBsdWdpbiA9IGZ1bmN0aW9uKHBsdWdpbl9vYmplY3QsIGNvcHlfaW5kZXgpIHtcclxuICAgICAgICAgICAgaWYgKGNvcHlfaW5kZXggPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgY29weV9pbmRleCA9IHBsdWdpbl9saXN0Lmxlbmd0aDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGNvcHlfaW5kZXggIT0gXCJudW1iZXJcIiB8fCBjb3B5X2luZGV4IDwgMCB8fCBjb3B5X2luZGV4ID4gcGx1Z2luX2xpc3QubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyhcIlBsdWdpbiBjb3B5IGluZGV4IG91dHNpZGUgb2YgdGhlIGNoYWluIHNjb3BlLlwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gYnVpbGROZXdQbHVnaW4ocGx1Z2luX29iamVjdC5wcm90b3R5cGVPYmplY3QpXHJcbiAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbihlKXtcclxuICAgICAgICAgICAgICAgIHRocm93KFwiUGx1Z2luIGRpZCBub3QgZ2V0IGNyZWF0ZWQhIEFib3J0aW5nXCIpO1xyXG4gICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKG5vZGUpIHtcclxuICAgICAgICAgICAgICAgIG5vZGUubm9kZS5wYXJhbWV0ZXJzLnNldFBhcmFtZXRlcnNCeU9iamVjdChwbHVnaW5fb2JqZWN0Lm5vZGUucGFyYW1ldGVycy5nZXRQYXJhbWV0ZXJPYmplY3QoKSk7XHJcbiAgICAgICAgICAgICAgICBjdXRDaGFpbigpO1xyXG4gICAgICAgICAgICAgICAgaXNvbGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgcGx1Z2luX2xpc3Quc3BsaWNlKGNvcHlfaW5kZXgsIDAsIG5vZGUpO1xyXG4gICAgICAgICAgICAgICAgcmVidWlsZCgpO1xyXG4gICAgICAgICAgICAgICAgam9pbkNoYWluKCk7XHJcbiAgICAgICAgICAgICAgICBub2RlLm5vZGUub25sb2FkZWQuY2FsbChub2RlLm5vZGUpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vZGU7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBmdW5jdGlvbiByZWN1cnNpdmVQcm9jZXNzaW5nKGJhc2UsIGxpc3QpIHtcclxuICAgICAgICAgICAgdmFyIGwgPSBsaXN0Lmxlbmd0aCxcclxuICAgICAgICAgICAgICAgIGksIGVudHJ5O1xyXG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBlbnRyeSA9IGxpc3RbaV07XHJcbiAgICAgICAgICAgICAgICBiYXNlW2VudHJ5Lm5hbWVdLmFwcGx5KGJhc2UsIGVudHJ5LnBhcmFtZXRlcnMpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGVudHJ5LmZlYXR1cmVzICYmIGVudHJ5LmZlYXR1cmVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICByZWN1cnNpdmVQcm9jZXNzaW5nKGJhc2UucmVzdWx0W2VudHJ5Lm5hbWVdLCBlbnRyeS5mZWF0dXJlcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMsIHtcclxuICAgICAgICAgICAgJ2NoYWluU3RhcnQnOiB7XHJcbiAgICAgICAgICAgICAgICAndmFsdWUnOiBjaGFpblN0YXJ0XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdjaGFpblN0b3AnOiB7XHJcbiAgICAgICAgICAgICAgICAndmFsdWUnOiBjaGFpblN0b3BcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgJ25hbWUnOiB7XHJcbiAgICAgICAgICAgICAgICAnZ2V0JzogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWN0b3J5TmFtZTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAnc2V0JzogZnVuY3Rpb24gKG5hbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG5hbWUgPT09IFwic3RyaW5nXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmFjdG9yeU5hbWUgPSBuYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFjdG9yeU5hbWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICdyZWN1cnNpdmVQcm9jZXNzaW5nJzoge1xyXG4gICAgICAgICAgICAgICAgJ2dldCc6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVjdXJzaXZlUHJvY2Vzc2luZztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICB2YXIgTWlkaVN5bnRoZXNpc2VySG9zdCA9IGZ1bmN0aW9uKGZhY3RvcnkpIHtcclxuICAgICAgICBmdW5jdGlvbiBidWlsZE5ld1N5bnRoZXNpc2VyT2JqZWN0KHByb3RvdHlwZU9iamVjdCkge1xyXG4gICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgIGlmIChwcm90b3R5cGVPYmplY3QuaGFzTWlkaUlucHV0ID09IGZhbHNlIHx8IHByb3RvdHlwZU9iamVjdC5oYXNNaWRpT3V0cHV0ID09IHRydWUpIHtcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QgKFwiUHJvdG90eXBlIGlzIG5vdCBhIE1pZGlTeW50aGVzaXMgdHlwZS4gaGFzTWlkaUlucHV0IG11c3QgYmUgdHJ1ZSBhbmQgaGFzTWlkaU91dHB1dCBtdXN0IGJlIGZhbHNlXCIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHByb3RvdHlwZU9iamVjdCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJvdG90eXBlT2JqZWN0LmNyZWF0ZVBsdWdpbkluc3RhbmNlKHNlbGYsIGZhbHNlKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24obm9kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKG5vZGUsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ1RyYWNrRGF0YSc6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBzZWxmLlRyYWNrRGF0YVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5vZGU7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgbWlkaVN5bnRoU2xvdDtcclxuICAgICAgICB2YXIgY29ubmVjdGlvbnMgPSBbXTtcclxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLCB7XHJcbiAgICAgICAgICAgIFwiY29ubmVjdFwiOiB7XHJcbiAgICAgICAgICAgICAgICBcInZhbHVlXCI6IGZ1bmN0aW9uKGRlc3RpbmF0aW9uTm9kZSwgb3V0cHV0LCBpbnB1dCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkZXN0aW5hdGlvbk5vZGUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyAoXCJNdXN0IGRlZmluZSBhbiBBdWRpb05vZGUgb2JqZWN0XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB2YXIgZXhpc3RzID0gY29ubmVjdGlvbnMuZmluZChmdW5jdGlvbihjb25uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb25uLmRlc3RpbmF0aW9uTm9kZSA9PSBkZXN0aW5hdGlvbk5vZGUgJiYgY29ubi5vdXRwdXQgPT0gb3V0cHV0ICYmIGNvbm4uaW5wdXQgPT0gaW5wdXQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGV4aXN0cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbnMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbk5vZGU6ZGVzdGluYXRpb25Ob2RlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0Om91dHB1dCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0OmlucHV0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAobWlkaVN5bnRoU2xvdCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIk1JREkgU3ludGhlc2lzZXIgaXMgbm90IGxvYWRlZCwgY29ubmVjdGlvbnMgd2lsbCBiZSB2YWxpZGF0ZWQgb24gbG9hZFwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtaWRpU3ludGhTbG90Lm5vZGUuY29ubmVjdChkZXN0aW5hdGlvbk5vZGUsIG91dHB1dCwgaW5wdXQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgXCJkaXNjb25uZWN0XCI6IHtcclxuICAgICAgICAgICAgICAgIFwidmFsdWVcIjogZnVuY3Rpb24oZGVzdGluYXRpb25Ob2RlLCBvdXRwdXQsIGlucHV0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRlc3RpbmF0aW9uTm9kZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtaWRpU3ludGhTbG90KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaWRpU3ludGhTbG90LmRpc2Nvbm5lY3QoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9ucyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgZGVzdGluYXRpb25Ob2RlID09IFwibnVtYmVyXCIgJiYgdHlwZW9mIG91dHB1dCA9PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dCA9IGRlc3RpbmF0aW9uTm9kZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVzdGluYXRpb25Ob2RlID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9ucyA9IGNvbm5lY3Rpb25zLmZpbHRlcihmdW5jdGlvbihjb25uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29ubi5vdXRwdXQgPT0gb3V0cHV0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1pZGlTeW50aFNsb3QpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWlkaVN5bnRoU2xvdC5ub2RlLmRpc2Nvbm5lY3QoY29ubi5kZXN0aW5hdGlvbk5vZGUsIGNvbm4ub3V0cHV0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZGVzdGluYXRpb25Ob2RlID09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG91dHB1dCA9PSBcInVuZGVmaW5lZFwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb25zID0gY29ubmVjdGlvbnMuZmlsdGVyKGZ1bmN0aW9uKGNvbm4pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb25uLmRlc3RpbmF0aW9uTm9kZSA9PSBkZXN0aW5hdGlvbk5vZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWlkaVN5bnRoU2xvdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaWRpU3ludGhTbG90Lm5vZGUuZGlzY29ubmVjdChjb25uLmRlc3RpbmF0aW9uTm9kZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGRlc3RpbmF0aW9uTm9kZSA9PSBcIm9iamVjdFwiICYmIHR5cGVvZiBvdXRwdXQgPT0gXCJudW1iZXJcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9ucyA9IGNvbm5lY3Rpb25zLmZpbHRlcihmdW5jdGlvbihjb25uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29ubi5kZXN0aW5hdGlvbk5vZGUgPT0gZGVzdGluYXRpb25Ob2RlICYmIGNvbm4ub3V0cHV0ID09IG91dHB1dCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtaWRpU3ludGhTbG90KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pZGlTeW50aFNsb3Qubm9kZS5kaXNjb25uZWN0KGNvbm4uZGVzdGluYXRpb25Ob2RlLCBjb25uLm91dHB1dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGRlc3RpbmF0aW9uTm9kZSA9PSBcIm9iamVjdFwiICYmIHR5cGVvZiBvdXRwdXQgPT0gXCJudW1iZXJcIiAmJiB0eXBlb2YgaW5wdXQgPT0gXCJudW1iZXJcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9ucyA9IGNvbm5lY3Rpb25zLmZpbHRlcihmdW5jdGlvbihjb25uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29ubi5kZXN0aW5hdGlvbk5vZGUgPT0gZGVzdGluYXRpb25Ob2RlICYmIGNvbm4ub3V0cHV0ID09IG91dHB1dCAmJiBjb25uLmlucHV0ID09IGlucHV0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1pZGlTeW50aFNsb3QpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWlkaVN5bnRoU2xvdC5ub2RlLmRpc2Nvbm5lY3QoY29ubi5kZXN0aW5hdGlvbk5vZGUsIGNvbm4ub3V0cHV0LCBjb25uLmlucHV0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBcInNjaGVkdWxlRXZlbnRcIjoge1xyXG4gICAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiBmdW5jdGlvbihtc2csIHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobWlkaVN5bnRoU2xvdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtaWRpU3ludGhTbG90Lm5vZGUuc2NoZWR1bGVFdmVudChtc2csIHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93KFwiTUlESSBTeW50aGVzaXNlciBub3QgbG9hZGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgXCJjYW5jZWxBbGxFdmVudHNcIjoge1xyXG4gICAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiBmdW5jdGlvbihtc2csIHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobWlkaVN5bnRoU2xvdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtaWRpU3ludGhTbG90Lm5vZGUuY2FuY2VsQWxsRXZlbnRzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3coXCJNSURJIFN5bnRoZXNpc2VyIG5vdCBsb2FkZWRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBcIm1pZGlTeW50aGVzaXNlclwiOiB7XHJcbiAgICAgICAgICAgICAgICBcImdldFwiOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1pZGlTeW50aFNsb3Q7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgXCJzZXRcIjogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3coXCJDYW5ub3Qgc2V0IHJlYWQtb25seSBhdHRyaWJ1dGUuXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBcImxvYWRNaWRpU3ludGhlc2lzZXJNb2R1bGVcIjoge1xyXG4gICAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiBmdW5jdGlvbihwcm90b3R5cGUpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvdG90eXBlLmhhc01pZGlJbnB1dCA9PSBmYWxzZSB8fCBwcm90b3R5cGUuaGFzTWlkaU91dHB1dCA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QgKFwiUHJvdG90eXBlIGlzIG5vdCBhIE1pZGlTeW50aGVzaXMgdHlwZS4gaGFzTWlkaUlucHV0IG11c3QgYmUgdHJ1ZSBhbmQgaGFzTWlkaU91dHB1dCBtdXN0IGJlIGZhbHNlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShwcm90b3R5cGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbihwcm90b3R5cGVPYmplY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJ1aWxkTmV3U3ludGhlc2lzZXJPYmplY3QuY2FsbChzZWxmLCBwcm90b3R5cGVPYmplY3QpLmNhdGNoKGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3coXCJQbHVnaW4gZGlkIG5vdCBnZXQgY3JlYXRlZCEgQWJvcnRpbmdcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24obm9kZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtaWRpU3ludGhTbG90ID0gbm9kZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29ubmVjdGlvbnMuZm9yRWFjaChmdW5jdGlvbihjb25uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaWRpU3ludGhTbG90Lm5vZGUuY29ubmVjdChjb25uLmRlc3RpbmF0aW9uTm9kZSwgY29ubi5vdXRwdXQsIGNvbm4uaW5wdXQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1pZGlTeW50aFNsb3Q7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHZhciBQbHVnaW5Vc2VySW50ZXJmYWNlTWVzc2FnZUh1YiA9IChmdW5jdGlvbihmYWN0b3J5KXtcclxuICAgICAgICBmdW5jdGlvbiBidWlsZFBsdWdpbkludGVyZmFjZShwbHVnaW5fb2JqZWN0LCBpbnRlcmZhY2Vfb2JqZWN0KSB7XHJcbiAgICAgICAgICAgIHZhciBpZnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaWZyYW1lXCIpO1xyXG4gICAgICAgICAgICBpZnJhbWUuc3JjID0gaW50ZXJmYWNlX29iamVjdC5zcmM7XHJcbiAgICAgICAgICAgIGlmIChpbnRlcmZhY2Vfb2JqZWN0LndpZHRoKSB7XHJcbiAgICAgICAgICAgICAgICBpZnJhbWUud2lkdGggPSBpbnRlcmZhY2Vfb2JqZWN0LndpZHRoO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChpbnRlcmZhY2Vfb2JqZWN0LmhlaWdodCkge1xyXG4gICAgICAgICAgICAgICAgaWZyYW1lLmhlaWdodCA9IGludGVyZmFjZV9vYmplY3QuaGVpZ2h0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmcmFtZS5zdHlsZS5ib3JkZXIgPSBcIjBcIjtcclxuICAgICAgICAgICAgcmV0dXJuIGlmcmFtZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZnVuY3Rpb24gc2V0RGVmYXVsdEludGVyZmFjZSh1cmwsIHdpZHRoLCBoZWlnaHQpIHtcclxuICAgICAgICAgICAgZGVmYXVsdF9pbnRlcmZhY2UgPSB7XHJcbiAgICAgICAgICAgICAgICB1cmw6IHVybCxcclxuICAgICAgICAgICAgICAgIHdpZHRoOiB3aWR0aCxcclxuICAgICAgICAgICAgICAgIGhlaWdodDogaGVpZ2h0XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJldHVybiBkZWZhdWx0X2ludGVyZmFjZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZnVuY3Rpb24gcG9sbEFsbFBsdWdpbnMoKSB7XHJcbiAgICAgICAgICAgIGZhY3RvcnkuZ2V0QWxsUGx1Z2lucygpLmZvckVhY2goZnVuY3Rpb24ocGx1Z2luKSB7XHJcbiAgICAgICAgICAgICAgICBwbHVnaW4ubm9kZS5leHRlcm5hbEludGVyZmFjZS51cGRhdGVJbnRlcmZhY2VzKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZGVmYXVsdF9pbnRlcmZhY2UgPSB7XHJcbiAgICAgICAgICAgIHNyYzogXCJqc2FwX2RlZmF1bHQuaHRtbFwiXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcmV0dXJuIE9iamVjdC5jcmVhdGUoe1xyXG4gICAgICAgICAgICBcInNldERlZmF1bHRJbnRlcmZhY2VcIjogc2V0RGVmYXVsdEludGVyZmFjZSxcclxuICAgICAgICAgICAgXCJidWlsZFBsdWdpbkludGVyZmFjZVwiOmJ1aWxkUGx1Z2luSW50ZXJmYWNlLFxyXG4gICAgICAgICAgICBcInBvbGxBbGxQbHVnaW5zXCI6IHBvbGxBbGxQbHVnaW5zXHJcbiAgICAgICAgfSk7XHJcbiAgICB9KSh0aGlzKTtcclxuXHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLCB7XHJcbiAgICAgICAgXCJjb250ZXh0XCI6IHtcclxuICAgICAgICAgICAgXCJ2YWx1ZVwiOiBhdWRpb19jb250ZXh0XHJcbiAgICAgICAgfSxcclxuICAgICAgICBcInBsdWdpblJvb3RVUkxcIjoge1xyXG4gICAgICAgICAgICBcImdldFwiOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcm9vdFVSTDtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgXCJzZXRcIjogZnVuY3Rpb24gKHQpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdCA9PT0gXCJzdHJpbmdcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJvb3RVUkwgPSB0O1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByb290VVJMO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhyb3cgKFwiQ2Fubm90IHNldCByb290IFVSTCB3aXRob3V0IGEgc3RyaW5nXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBcImNyZWF0ZUZhY3RvcnlDb3B5XCI6IHtcclxuICAgICAgICAgICAgXCJ2YWx1ZVwiOiBmdW5jdGlvbiAoY29udGV4dCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvcHlGYWN0b3J5KGNvbnRleHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBcIlBsdWdpbkdVSVwiOiB7XHJcbiAgICAgICAgICAgIFwidmFsdWVcIjogUGx1Z2luVXNlckludGVyZmFjZU1lc3NhZ2VIdWJcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufTtcclxuIl0sInNvdXJjZVJvb3QiOiIifQ==