var JSAP=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var r={LinkedStore:function(t){var e={};function n(t,e,i){var o;for(o in t){var u;t.hasOwnProperty(o)&&("object"==typeof t[o]?(t[o].toXML?u=t[o].toXML(i):(u=i.createElement(o),e.appendChild(u),t[o].length?r(t[o],u,i):n(t[o],u,i)),e.appendChild(u)):e.setAttribute(o,t[o]))}}function r(t,e,r){var i,o;t.length,i=t.every(function(t){return"number"==typeof t}),o=t.every(function(t){return"string"==typeof t}),i||o?t.forEach(function(t,n){e.setAttribute("index-"+n,t)}):t.forEach(function(t,i){var o=document.createElement("value");o.setAttribute("index",i),n(t,o,r),e.appendChild(o)})}Object.defineProperties(this,{name:{get:function(){return t},set:function(e){if(void 0!==t)throw"Name is already set"}},addTerm:{value:function(t,n){if("string"!=typeof t&&0===t.length)throw"term must be a string";e[t]=n}},addTerms:{value:function(t){if("object"!=typeof t)throw"addTerms takes an object of term/value pairs";var e;for(e in t)t.hasOwnProperty(e)&&this.addTerm(e,t[e])}},deleteTerm:{value:function(t){this.addTerm(t,void 0)}},getTerm:{value:function(t){if("string"!=typeof t&&0===t.length)throw"term must be a string";return e[t]}},hasTerm:{value:function(t){if("string"!=typeof t&&0===t.length)throw"term must be a string";return e.hasOwnProperty(t)}},toJSON:{value:function(){return JSON.parse(JSON.stringify(e))}},toXML:{value:function(r){var i;return i=r?r.createElement(t):(r=document.implementation.createDocument(null,t,null)).firstElementChild,n(e,i,r),i}}})}};"function"==typeof AudioNode&&void 0===window.importScripts&&(AudioNode.prototype.getInputs=function(){return[this]});var i=function(t,e){var n=[],r=[],i=e,a=new EventTarget;function s(t,e){var n=e.findIndex(function(t){return t===this},t);return-1!==n&&(e.splice(n,1),!0)}this.context=t.context,this.factory=t,this.featureMap=new u(this),this.externalInterface=new f(this),this.parameters=new o(this,this.externalInterface,a),this.addInput=function(t){return n.push(t),n},this.deleteInput=function(t){return s(t,n)},this.addOutput=function(t){return r.push(t),this.outputs},this.deleteOutput=function(t){return s(t,r)},this.start=this.stop=this.onloaded=this.onunloaded=this.deconstruct=function(){},Object.defineProperties(this,{numInputs:{get:function(){return n.length},set:function(){throw"Cannot set the number of inputs of BasePlugin"}},numOutputs:{get:function(){return r.length},set:function(){throw"Cannot set the number of outputs of BasePlugin"}},numParameters:{get:function(){return this.parameters.parameters.length},set:function(){throw"Cannot set the number of parameters of BasePlugin"}},owner:{get:function(){return i},set:function(t){return"object"==typeof t&&(i=t),i}},inputs:{get:function(t){return n},set:function(){throw"Illegal attempt to modify BasePlugin"}},outputs:{get:function(t){return r},set:function(){throw"Illegal attempt to modify BasePlugin"}},connect:{value:function(t){this.outputs[0].connect(t.inpt?t.input:t)}},disconnect:{value:function(t){void 0===t?this.outputs[0].disconnect():this.outputs[0].disconnect(t.input?t.input:t)}},getInputs:{value:function(){return this.inputs}},getOutputs:{value:function(){return this.outputs}},getParameterName:{value:function(){return this.parameters.getParameterNames()}},getParameterByName:{value:function(){return this.parameters.getParameterByName()}},getParameterObject:{value:function(){return this.parameters.getParameterObject()}},setParameterByName:{value:function(t,e){return this.parameters.setParameterByName(t,e)}},setParametersByObject:{value:function(t){return this.parameters.setParametersByObject(t)}},addEventListener:{value:function(t,e){return a.addEventListener(t,e)}},removeEventListener:{value:function(t,e){return a.addEventListener(t,e)}}})},o=function(t,e,n){var r=[];function i(t){return r.find(function(e){return e.name.toLowerCase()===t.toLowerCase()})}function o(t){return r.findIndex(function(e){return e.name.toLowerCase()===t.toLowerCase()})}function u(){var t={};return r.forEach(function(e){t[e.name]=e}),t}function a(t){return-1===r.findIndex(function(e){return e===t},t)&&r.push(t),t}function s(t,e,n){var r,i,o,u;r=i=function(t){return t},o=function(){},Object.defineProperties(this,{name:{value:e},owner:{value:t},update:{get:function(){return r},set:function(t){if("function"!=typeof t)throw"Must be a callback function";if(void 0===t(0))throw"Function must return a value";r=t}},translate:{get:function(){return i},set:function(t){if("function"!=typeof t)throw"Must be a callback function";if(void 0===t(0))throw"Function must return a value";i=t}},trigger:{get:function(){return o},set:function(t){if("function"!=typeof t)throw"Must be a callback function";o=t}},bindToAudioParam:{value:function(t){if("object"!=typeof t||void 0===t.value)throw"Must be an AudioParam object from an AudioNode";var e=this.update(this.value);(u=t).value=e}},boundAudioParam:{get:function(){return u}},actionList:{value:[]}})}function c(t,e,r,i,o){s.call(this,t,e,"Number");var u,a=r;Object.defineProperties(this,{destroy:{value:function(){t=e=r=i=o=a=u=void 0}},minimum:{value:i},maximum:{value:o},defaultValue:{value:r},value:{get:function(){return this.boundAudioParam?this.translate(this.boundAudioParam.value):a},set:function(t){if(this.minimum&&(t=Math.max(t,this.minimum)),this.maximum&&(t=Math.min(t,this.maximum)),u&&(t=Math.round(t/u),t*=u),this.boundAudioParam&&(this.boundAudioParam.value=this.update(t)),a!==t){a=t;var e=new Event("parameterset");n.dispatchEvent(e)}this.trigger()}},stepSize:{get:function(){return u},set:function(t){if(!isFinite(t)||t<0)throw"Invalid step size";u=t}}})}function f(t,e,r,i){s.call(this,t,e,"String");var o=r;Object.defineProperties(this,{destroy:{value:function(){t=e=r=i=o=void 0}},maxLength:{value:i},defaultValue:{value:r},value:{get:function(){return this.boundAudioParam?this.translate(this.boundAudioParam.value):o},set:function(t){if(i&&t.length>i)throw"String longer than "+i+" characters";if(this.boundAudioParam&&(this.boundAudioParam.value=this.update(t)),o!==t){o=t;var e=new Event("parameterset");n.dispatchEvent(e)}this.trigger()}}})}function l(t,e){s.call(this,t,e,"Button");var n=function(){};Object.defineProperties(this,{destroy:{value:function(){t=e=void 0}},onclick:{get:function(){return n},set:function(t){if("function"!=typeof t)throw"onclick must be a function";n=t}}})}function h(t,e,r,i,o){s.call(this,t,e,"Button");var u=r;function a(t){if(this.boundAudioParam&&(this.boundAudioParam.value=this.update(t)),function(t){var e={time:new Date,value:t};this.actionList.push(e)}.call(this,t),u!==t){u=t;var e=new Event("parameterset");n.dispatchEvent(e)}return this.trigger(),t}Object.defineProperties(this,{destroy:{value:function(){t=e=void 0}},defaultValue:{value:r},minState:{value:i},maxState:{value:o},value:{get:function(){return this.boundAudioParam?this.translate(this.boundAudioParam.value):u},set:function(t){if(t<i)throw"Set value is less than "+i;if(t>o)throw"Set value is greater than "+o;return a.call(this,t)}},increment:{value:function(){var t=u+1;return t>o&&(t=i),a.call(this,t)}},decrement:{value:function(){var t=u-1;return t<i&&(t=o),a.call(this,t)}}})}function d(t,e,r,i){s.call(this,t,e,"Button");var o=i.indexOf(r);function u(t){var e=i.indexOf(t);if(void 0===e||e<0)throw"Not in list range";if(this.boundAudioParam&&(this.boundAudioParam.value=this.update(t)),function(t){var e={time:new Date,value:t};this.actionList.push(e)}.call(this,t),o!==e){o=e;var r=new Event("parameterset");n.dispatchEvent(r)}return this.trigger(),i[o]}Object.defineProperties(this,{destroy:{value:function(){t=e=void 0}},defaultValue:{value:r},listValues:{get:function(){var t=[];return i.forEach(function(e){t.push(e)}),v}},value:{get:function(){return this.boundAudioParam?this.translate(this.boundAudioParam.value):i[o]},set:function(t){if(t<minState)throw"Set value is less than "+minState;if(t>maxState)throw"Set value is greater than "+maxState;return u.call(this,t)}},increment:{value:function(){var t=_value+1;return t>maxState&&(t=minState),u.call(this,t)}},decrement:{value:function(){var t=_value-1;return t<minState&&(t=maxState),u.call(this,t)}}})}c.prototype=Object.create(s.prototype),c.prototype.constructor=c,f.prototype=Object.create(s.prototype),f.prototype.constructor=f,l.prototype=Object.create(s.prototype),l.prototype.constructor=l,h.prototype=Object.create(s.prototype),h.prototype.constructor=h,d.prototype=Object.create(s.prototype),d.prototype.constructor=d,Object.defineProperties(this,{createNumberParameter:{value:function(e,n,r,i){if("string"!=typeof e||"number"!=typeof n||void 0!==r&&"number"!=typeof r||void 0!==i&&"number"!=typeof i)throw"Invlid constructor";if(-1!==o(e))throw"Parameter with name '"+e+"' already exists";var u=new c(t,e,n,r,i);return a(u),u}},createStringParameter:{value:function(e,n,r){if("string"!=typeof e||"string"!=typeof n||void 0!==r&&"number"!=typeof r)throw"Invlid constructor";if(-1!==o(e))throw"Parameter with name '"+e+"' already exists";var i=new f(t,e,n,r);return a(i),i}},createButtonParameter:{value:function(e){if("string"!=typeof e)throw"Invalid constructor";if(-1!==o(e))throw"Parameter with name '"+e+"' already exists";var n=new l(t,e);return a(n),n}},createSwitchParameter:{value:function(e,n,r,i){if("string"!=typeof e||"number"!=typeof n||"number"!=typeof r||"number"!=typeof i)throw"Invlid constructor";if(-1!==o(e))throw"Parameter with name '"+e+"' already exists";var u=new h(t,e,n,r,i);return a(u),u}},createParameter:{value:function(){throw"This function is now deprecated"}},getParameterName:{value:function(){var t,e=[];for(t=0;t<r.length;t++)e.push(r[t].name);return e}},getParameterByName:{value:function(t){return i(t)}},getParameterObject:{value:function(){return u()}},getParameterNames:{value:function(){var t=[];return r.forEach(function(e){t.push(e.name)}),t}},setParameterByName:{value:function(t,e){var n=i(t);n&&(n.value=e)}},deleteParameter:{value:function(t){var e=r.findIndex(function(e){return e===t},t);return e>=0&&(r.splice(e,1),t.destroy(),!0)}},deleteAllParameters:{value:function(t){return r.forEach(function(t){t.destroy()}),r=[],!0}},setParametersByObject:{value:function(t){var e;for(e in t)if(t.hasOwnProperty(e))if("object"==typeof t[e])this.setParameterByName(e,t[e].value);else{if("number"!=typeof t[e])throw"Cannot set "+e+": Not a valid object";this.setParameterByName(e,t[e])}}},parameters:{get:function(){return u()},set:function(){throw"Cannot set, use .setParameterBy...()"}}})},u=function(t){this.plugin=t,this.Receiver=new a(this,t.factory.FeatureMap),this.Sender=new s(this,t.factory.FeatureMap),Object.defineProperty(this,"onfeatures",{get:function(){return this.Receiver.onfeatures},set:function(t){return this.Receiver.onfeatures=t,t}})},a=function(t,e){function n(t,e){if(void 0===t)throw"Source plugin must be defined";if(void 0===e)throw"FeatureObject must be defined";if("number"!=typeof e.outputIndex||"number"!=typeof e.frameSize||"object"!=typeof e.features)throw"Malformed featureObject";return!0}var r=function(){};this.requestFeatures=function(t){var e;for(e=0;e<t.length;e++)this.requestFeaturesFromPlugin(t[e].plugin,{outputIndex:t[e].outputIndex,frameSize:t[e].frameSize,features:t[e].features})},this.requestFeaturesFromPlugin=function(r,i){n(r,i),e.requestFeatures(t.plugin,r,i)},this.cancelFeaturesFromPlugin=function(r,i){n(r,i),e.deleteFeatures(t.plugin,r,i)},this.cancelAllFeaturesFromPlugin=function(n){if(void 0===n)throw"Source plugin must be defined";e.deleteFeatures(t.plugin,n)},this.cancelAllFeatures=function(){e.deleteFeatures(t.plugin)},this.postFeatures=function(t){"function"==typeof r&&r(t)},Object.defineProperty(this,"onfeatures",{get:function(){return r},set:function(t){return"function"==typeof t&&(r=t,!0)}})},s=function(t,e){var n=function(e,n,r){var i=[],o=function(e,n){this.extractor=t.plugin.factory.context.createAnalyser(),this.extractor.fftSize=n,e.connect(this.extractor),this.features=[],Object.defineProperty(this,"frameSize",{value:n});var r=this.factory.recursiveProcessing;function i(t){var e={numberOfChannels:1,results:[]};r(t,this.features),e.results[0]={channel:0,results:JSON.parse(t.toJSON())},this.postFeatures(t.length,e)}this.setFeatures=function(t){this.features=t,0===this.features.length?this.extractor.clearCallback():this.extractor.frameCallback(i,this)}},u=function(e,n){var r=new Worker("jsap/feature-worker.js");r.onerror=function(t){console.error(t)},this.setFeatures=function(i){var o=this,u={state:1,sampleRate:t.plugin.factory.context.sampleRate,featureList:i,numChannels:e.numberOfOutputs,frameSize:this.frameSize};this.features=i,i&&i.length>0?(r.onmessage=function(t){1===t.data.state?(r.onmessage=function(t){this.postFeatures(n,t.data.response)}.bind(o),o.extractor.onaudioprocess=function(t){var e,n=[];for(e=0;e<t.inputBuffer.numberOfChannels;e++)n[e]=t.inputBuffer.getChannelData(e);r.postMessage({state:2,frames:n})}.bind(o)):r.postMessage(u)},r.postMessage({state:0})):this.extractor.onaudioprocess=void 0},this.extractor=t.plugin.factory.context.createScriptProcessor(n,e.numberOfOutputs,1),e.connect(this.extractor),this.extractor.connect(t.plugin.factory.context.destination),Object.defineProperty(this,"frameSize",{value:n})};this.addExtractor=function(t){var e;return e=window.Worker?new u(n,t):new o(n,t),i.push(e),Object.defineProperty(e,"postFeatures",{value:function(t,e){var n={outputIndex:r,frameSize:t,results:e};this.postFeatures(n)}.bind(this)}),e},this.findExtractor=function(t){var e=t;return i.find(function(t){return t.frameSize===e})},this.deleteExtractor=function(t){}},r=[];this.updateFeatures=function(e){var i;for(i=0;i<e.length;i++){if(void 0===r[i]){if(i>t.plugin.numOutputs)throw"Requested an output that does not exist";r[i]=new n(t.plugin,t.plugin.outputs[i],i),Object.defineProperty(r[i],"postFeatures",{value:function(t){this.postFeatures(t)}.bind(this)})}var o;for(o=0;o<e[i].length;o++){var u=r[i].findExtractor(e[i][o].frameSize);u||(u=r[i].addExtractor(e[i][o].frameSize)),u.setFeatures(e[i][o].featureList)}}},this.postFeatures=function(e){t.plugin.factory.FeatureMap.postFeatures({plugin:t.plugin.pluginInstance,outputIndex:e.outputIndex,frameSize:e.frameSize,results:e.results})},e.createSourceMap(this,t.plugin.pluginInstance)},c=function(t,e,n){console.log("DEPRECATED!!"),console.log("The class PluginUserInterface has been deprecated"),console.log("Please look at the documents for the new methods for building plugins"),this.processor=t,this.root=document.createElement("div"),e>0&&(this.root.style.width=e+"px"),n>0&&(this.root.style.height=n+"px"),this.dim={width:e,height:n},this.intervalFunction=null,this.updateInterval=null,this.PluginParameterInterfaces=[];var r=function(t,e,n,r){this.input=t,this.processor=n,this.GUI=r,this.AudioParam=e,this.handleEvent=function(t){this.AudioParam.value=this.input.value},this.input.addEventListener("change",this),this.input.addEventListener("mousemove",this),this.input.addEventListener("click",this)};this.createPluginParameterInterfaceNode=function(t,e){var n=new r(t,e,this.processor,this);return this.PluginParameterInterfaces.push(n),n},this.update=function(){}};c.prototype.getRoot=function(){return this.root},c.prototype.getDimensions=function(){return this.dim},c.prototype.getWidth=function(){return this.dim.width},c.prototype.getHeight=function(){return this.dim.height},c.prototype.beginCallbacks=function(t){void 0===t&&(t=250),null===this.intervalFunction&&(this.updateInterval=t,this.intervalFunction=window.setInterval(function(){this.update()}.bind(this),250))},c.prototype.stopCallbacks=function(){null!==this.intervalFunction&&(window.clearInterval(this.intervalFunction),this.updateInterval=null,this.intervalFunction=null)},c.prototype.loadResource=function(t){return new Promise(function(e,n){var r=new XMLHttpRequest;r.open("GET",t),r.onload=function(){200===r.status?e(r.response):n(Error(r.statusText))},r.onerror=function(){n(Error("Network Error"))},r.send()})},c.prototype.clearGUI=function(){this.stopCallbacks(),this.root.innerHTML=""};var f=function(t){function e(e){var n,r,i={message:"updateParameters",parameters:(n=t.parameters.getParameterNames(),r={},n.forEach(function(e){var n=t.parameters.getParameterByName(e);r[e]={value:n.value,maximum:n.maximum,minimum:n.minimum,defaultValue:n.defaultValue,type:n.constructor.name,name:e}}),r)};return e&&(i.sender_id=e),i}function n(t){var n=e(t);r.forEach(function(t){t.postMessage(n)})}var r=[];window.onmessage=function(r){switch(r.data.message){case"setParameterByName":r.data.parameter&&(r.data.parameter.name&&r.data.parameter.value&&t.parameters.setParameterByName(r.data.parameter.name,r.data.parameter.value),n(r.data.sender_id));break;case"setParametersByObject":r.data.parameter&&(!function(e){var n=JSON.parse(e.message.parameters);Object.keys(n).forEach(function(e){t.parameters.setParameterByName(e,n[e].value)})}(r),n(r.data.sender_id));break;case"requestParameters":r.source.postMessage(e());break;default:throw'Unknown message type "'+r.data.message+'"'}},Object.defineProperties(this,{updateInterfaces:{value:function(){n()}},closeWindows:{value:function(){for(1;r.length>0;){r.pop().close()}}},registerWindow:{value:function(t){return!r.includes(t)&&(r.push(t),!0)}}})};function l(t,e){var n=[],i=[],o=[],u=0,a=!1;function s(t){return!1===t.url.startsWith("http")&&void 0!==e&&e.startsWith("http")&&(t.url=e+t.url),new Promise(function(e,n){var r=new XMLHttpRequest;r.open("GET",t.url),r.onreadystatechange=function(){if(4==r.readyState){var n=document.createElement("script");n.textContent=r.responseText,document.getElementsByTagName("head")[0].appendChild(n),e(t)}},r.send()})}this.loadResource=function(t){return new Promise(function(e,n){"object"!=typeof t?n("Error"):"string"!=typeof t.url?n("resourceObject.url must be a string"):"function"!=typeof t.test?n("resourceObject.test must be a function"):e(t)}).then(function(t){var e=t.test();if(!1!==e&&!0!==e)throw"resourceObject.test must return true or false";switch(t.type||(t.type="javascript"),t.type=t.type.toLowerCase(),t.type){case"javascript":return e?new Promise(function(e,n){"string"==typeof t.returnObject?window.hasOwnProperty(t.returnObject)?e(window[t.returnObject]):n(!1):e(!0)}):s(t).then(function(t){return"string"!=typeof t.returnObject||!!window.hasOwnProperty(t.returnObject)&&window[t.returnObject]});default:throw"Invalid type "+String(t.type)}})},this.loadPluginScript=function(t){if(t){if("string"!=typeof t.returnObject)throw"resourceObject.returnObject must be the name of the prototype function";return this.loadResource(t).then(function(t){return this.addPrototype(t)}.bind(this))}};var c=function(e,n){this.next_node=void 0;var r=!1,i=t.createGain(),o=t.createGain();i.connect(n.getInputs()[0]),n.getOutputs()[0].connect(o),this.bypass=function(t){return(t=!0===t)===r?r:(t?(i.disconnect(),i.connect(o),r=!0):(i.disconnect(),i.connect(n.getInputs()[0]),r=!1),r)},this.isBypassed=function(){return r},this.reconnect=function(t){this.connect(t)},this.connect=function(t){return void 0!==this.next_node&&this.disconnect(),void 0!==t&&void 0!==t.input&&(this.next_node=t,o.connect(this.next_node.input),!0)},this.disconnect=function(){void 0!==this.next_node&&(o.disconnect(this.next_node.input),this.next_node=void 0)},this.destroy=function(){n.destroy()},Object.defineProperties(this,{id:{value:e},node:{value:n},input:{get:function(){return i}},output:{get:function(){return o}},bypassed:{get:function(){return r}}})};c.prototype.factory=this;var f=function(t,e){var n=this;function r(t,e){if(e)return e.then(s(t));var n=s(t);return n.then(function(t){if(void 0!==t.resources&&t.resources.length>0)for(var e=0;e<t.resources.length;e++)n=r(t.resources[e],n)}),n}function i(t){return t.hasOwnProperty("length")&&t.length>0?i(t[t.length-1]):t.hasOwnProperty("resources")?i(t.resources):t.test}Object.defineProperties(this,{name:{value:t.prototype.name},proto:{value:t},version:{value:t.prototype.version},uniqueID:{value:t.prototype.uniqueID}}),this.createPluginInstance=async function(r,i){var o=function(r){return Promise.all(f).then(function(){return new Promise(function(n,i){!function(){for(var t=!0,e=0;e<f.length;e++)if(1!==f[e].state||!f[e].test()){t=!1;break}return t}()?i(new Error("Plugin not ready")):n(new t(e,r))})}).then(function(t){return new Promise(function(e,n){if(t.initialise)return t.initialise().then(function(){e(t)});e(t)})}).then(function(r){var i=new c(u++,r);return Object.defineProperties(r,{pluginInstance:{value:i},prototypeObject:{value:n},name:{value:t.prototype.name},version:{value:t.prototype.version},uniqueID:{value:t.prototype.uniqueID},SesionData:{value:e.SessionData},UserData:{value:e.UserData}}),Object.defineProperties(i,{prototypeObject:{value:n},externalInterface:{value:r.externalInterface}}),e.registerPluginInstance(i),i})}(r);return!0===i?o:(await o,o)};var o,a,f=[];if(t.prototype.resources)for(var l=0;l<t.prototype.resources.length;l++){var h=t.prototype.resources[l];switch(h.type=h.type.toLowerCase(),h.type){case"css":o=h.url,a=void 0,(a=document.createElement("link")).setAttribute("rel","stylesheet"),a.setAttribute("type","text/css"),a.setAttribute("href",o),document.getElementsByTagName("head")[0].appendChild(a);break;case"javascript":var d={promise:r(h),state:0,complete:function(){this.state=1},test:i(h)};d.promise.then(d.complete.bind(d)),f.push(d);break;default:throw"Could not load "+h.url+", invalid resource.type"}}this.getResourcePromises=function(){return f}};this.addPrototype=function(t){var e=this;return new Promise(function(e,n){"function"!=typeof t?n("The Prototype must be a function!"):"string"!=typeof t.prototype.name||0===t.prototype.name.length?n("Malformed plugin. Name not defined"):"string"!=typeof t.prototype.version||0===t.prototype.version.length?n("Malformed plugin. Version not defined"):"string"!=typeof t.prototype.uniqueID||0===t.prototype.uniqueID.length?n("Malformed plugin. uniqueID not defined"):e(t)}).then(function(t){var n={proto:t,name:t.prototype.name,version:t.prototype.version,uniqueID:t.prototype.uniqueID},r=i.find(function(t){var e,n=0;for(e in this)t[e]===this[e]&&n++;return 4===n},n);if(r)throw"The plugin must be unique!";return r=new f(t,e),i.push(r),Object.defineProperties(r,{factory:{value:e}}),r})},this.getPrototypes=function(){return i},this.getAllPlugins=function(){return o},this.getAllPluginsObject=function(){var t,e={factory:this,subFactories:[]};for(t=0;t<n.length;t++)e.subFactories.push({subFactory:n[t],plugins:n[t].getPlugins()});return e},this.createSubFactory=function(t,e){var r=new p(this,t,e);return Object.defineProperties(r,{SessionData:{value:this.SessionData},UserData:{value:this.UserData}}),n.push(r),r},this.destroySubFactory=function(t){var e=n.findIndex(function(t){return t===this},t);e>=0&&(n.splice(e,1),t.destroy())},this.registerPluginInstance=function(t){if(o.find(function(t){return t===this},t))throw"Plugin Instance not unique";return o.push(t),a&&t.node.start.call(t.node),!0},this.createPluginInstance=function(t){throw"DEPRECATED - Use PluginPrototype.createPluginInstance(owner);"},this.deletePlugin=function(t){var e=o.findIndex(function(e){return e.id===t});e>=0&&o.splice(e,1)[0].node.externalInterface.closeWindows()},this.audioStart=function(){a||(o.forEach(function(t){t.node.start.call(t.node)}),a=!0)},this.audioStop=function(){a&&(o.forEach(function(t){t.node.stop.call(t.node)}),a=!1)};this.FeatureMap=new function(){var t=[],e=function(t){this.name=t.name,this.parameters=this.parameters,this.features=[]};function n(t,e){return t.find(function(t){return t.name===this.name},e)}function r(t,n){var r=new e(t);return n.push(r),r}var i=function(t,e){var i=[];function u(t){return i.find(function(t){return t.outputIndex===this.outputIndex&&t.frameSize===this.frameSize},t)}function a(){function e(t){var i,o=[];for(i=0;i<t.length;i++){var u=n(o,t[i]);(!u||t.parameters&&0!==t[i].parameters.length)&&(u=r(t[i],o)),t[i].features&&t[i].features.length>0&&(u.features=e(t[i].features))}return o}var o,u=[];for(o=0;o<i.length;o++){void 0===u[i[o].outputIndex]&&(u[i[o].outputIndex]=[]);var a=u[i[o].outputIndex].find(function(t){return t.frameSize===this.frameSize},i[o]);a||(a={frameSize:i[o].frameSize,featureList:void 0},u[i[o].outputIndex].push(a)),a.featureList=e(i[o].getFeatureList())}t.updateFeatures(u)}this.getSourceInstance=function(){return e},this.getSender=function(){return t},this.requestFeatures=function(t,e){var n=u(e);n||(n={outputIndex:e.outputIndex,frameSize:e.frameSize,requestors:[],getFeatureList:function(){var t,e=[];for(t=0;t<this.requestors.length;t++)e=e.concat(this.requestors[t].getFeatureList());return e}},i.push(n));var r=n.requestors.find(function(t){return t.getRequestorInstance()===this},t);r||(r=new o(t),n.requestors.push(r)),r.addFeatures(e),a()},this.findFrameMap=function(t,e){return i.find(function(n){return n.outputIndex===t&&n.frameSize===e})},this.cancelFeatures=function(t,e){if(void 0===e)i.forEach(function(e){var n=e.requestors.findIndex(function(e){return e.getRequestorInstance()===t});n>=0&&e.requestors.splice(n,1)});else{var n=u(e);if(!n)return;var r=n.requestors.find(function(t){return t.getRequestorInstance()===this},t);if(!r)return;r.deleteFeatures(e)}a()}},o=function(t){var e=[];t.node.featureMap.Receiver,this.getRequestorInstance=function(){return t},this.addFeatures=function(t){!function t(e,i){var o;for(o=0;o<i.length;o++){var u=n(e,i[o]);(!u||i[o].parameters&&0!==i[o].parameters.length)&&(u=r(i[o],e)),void 0!==i[o].features&&i[o].features.length>0&&t(u.features,i[o].features)}}(e,t.features)},this.deleteFeatures=function(t){!function t(r,i){var o,u=i.length;for(o=0;o<u;o++){var a=n(r,i[o]);a>=0&&(i[a].features&&i[a].features.length>0?t(r[a].features,i[a].features):e.splice(a,0))}}(e,t.features)},this.getFeatureList=function(){return e},this.postFeatures=function(n){var r,i={plugin:n.plugin,outputIndex:n.outputIndex,frameSize:n.frameSize,features:{numberOfChannels:n.results.numberOfChannels,results:[]}};function o(t,e,n){var r;function i(t){return t.name===r}for(r in e)if(e.hasOwnProperty(r)){var u=n.find(i);u&&(e[r].constructor===Object&&u.results?(t[r]={},o(t[r],e[r],u.results)):t[r]=e[r])}}for(r=0;r<n.results.numberOfChannels;r++)i.features.results[r]={},o(i.features.results[r],n.results.results[r].results,e);t.node.featureMap.Receiver.postFeatures(i)}};function u(e){return t.findIndex(function(t){return t.getSender()===this},e)}function a(t,e,n){var r=t[u(e)];if(!r&&!(r=t[u(n)]))throw"Could not locate source map";return r}this.createSourceMap=function(e,n){var r=new i(e,n);return t.push(r),r},this.deleteSourceMap=function(e){var n=u(e);if(-1===n)throw"Could not find the source map for the plugin";t.splice(n,1)},this.getPluginSender=function(t){return t.constructor===c&&(t=t.node),t.featureMap.Sender},this.requestFeatures=function(e,n,r){e.constructor!==c&&(e=e.pluginInstance);var i=this.getPluginSender(n);a(t,n,i).requestFeatures(e,r)},this.deleteFeatures=function(e,n,r){if(e.constructor!==c&&(e=e.pluginInstance),void 0===n)t.forEach(function(t){t.cancelFeatures(e)});else{var i=this.getPluginSender(n);a(t,n,i).cancelFeatures(e,r)}},this.getFeatureList=function(t,e){},this.postFeatures=function(e){var n=t[u(e.plugin)];if(!n&&!(n=t[u(this.getPluginSender(e.plugin))]))throw"Plugin Instance not loaded!";n.findFrameMap(e.outputIndex,e.frameSize).requestors.forEach(function(t){t.postFeatures(this)},e)}},Object.defineProperty(this.FeatureMap,"factory",{value:this});var h=[];this.createStore=function(t){var e=new r.LinkedStore(t);return h.push(e),e},this.getStores=function(){return h},this.findStore=function(t){return h.find(function(e){return e.name===t})},this.SessionData=new r.LinkedStore("Session"),this.UserData=new r.LinkedStore("User");var d=function(t,e){var n,r=function(e,n){var r=[],i=function(e,n){this.extractor=e.context.createAnalyser(),this.extractor.fftSize=n,e.connect(this.extractor),this.features=[],Object.defineProperty(this,"frameSize",{value:n});var r=t.recursiveProcessing;function i(t){var e={numberOfChannels:1,results:[]};r(t,this.features),e.results[0]={channel:0,results:JSON.parse(t.toJSON())},this.postFeatures(t.length,e)}this.setFeatures=function(t){this.features=t,0===this.features.length?this.extractor.clearCallback():this.extractor.frameCallback(i,this)},this.rejoinExtractor=function(){e.connect(this.extractor)}},o=function(t,e){var n=new Worker("jsap/feature-worker.js");n.onerror=function(t){console.error(t)},this.setFeatures=function(r){var i=this,o={state:1,sampleRate:t.context.sampleRate,featureList:r,numChannels:t.numberOfOutputs,frameSize:this.frameSize};this.features=r,r&&r.length>0?(n.onmessage=function(t){1===t.data.state?(n.onmessage=function(t){this.postFeatures(e,t.data.response)}.bind(i),i.extractor.onaudioprocess=function(t){var e,r=[];for(e=0;e<t.inputBuffer.numberOfChannels;e++)r[e]=t.inputBuffer.getChannelData(e);n.postMessage({state:2,frames:r})}.bind(i)):n.postMessage(o)},n.postMessage({state:0})):this.extractor.onaudioprocess=void 0},this.rejoinExtractor=function(){t.connect(this.extractor)},this.extractor=t.context.createScriptProcessor(e,t.numberOfOutputs,1),t.connect(this.extractor),this.extractor.connect(t.context.destination),Object.defineProperty(this,"frameSize",{value:e})};this.addExtractor=function(t){var e;return e=window.Worker?new o(n,t):new i(n,t),r.push(e),Object.defineProperty(e,"postFeatures",{value:function(t,e){var n={outputIndex:0,frameSize:t,results:e};this.postFeatures(n)}.bind(this)}),e},this.findExtractor=function(t){var e=t;return r.find(function(t){return Number(t.frameSize)===Number(e)})},this.rejoinExtractors=function(){r.forEach(function(t){t.rejoinExtractor()})},this.deleteExtractor=function(t){}};this.updateFeatures=function(e){var i;for(i=0;i<e.length;i++){if(void 0===n){if(i>1)throw"Requested an output that does not exist";n=new r(t,t.chainStart),Object.defineProperty(n,"postFeatures",{value:function(t){this.postFeatures(t)}.bind(this)})}var o;for(o=0;o<e[i].length;o++){var u=n.findExtractor(e[i][o].frameSize);u||(u=n.addExtractor(e[i][o].frameSize)),u.setFeatures(e[i][o].featureList)}}},this.rejoinExtractors=function(){n&&n.rejoinExtractors()},this.postFeatures=function(t){e.postFeatures({plugin:this,outputIndex:t.outputIndex,frameSize:t.frameSize,results:t.results})},e.createSourceMap(this,void 0)},p=function(t,e,n){var i=[],o=e,u=n,a="",s=1,c=new d(this,t.FeatureMap);function f(){for(var t=0,e=i.length-1;t<e;){var n=i[t++],r=i[t];n.reconnect(r)}}function l(){i.forEach(function(t){t.disconnect()})}function h(){return i.length>0?(o.disconnect(i[0].input),i[i.length-1].output.disconnect(u)):o.disconnect(u),!0}function p(){i.length>0?(o.connect(i[0].input),i[i.length-1].output.connect(u)):o.connect(u),c.rejoinExtractors()}function m(t){return new Promise(function(e,n){0===s?n("SubFactory has been destroyed! Cannot add new plugins"):e(t)}).then(function(){return t.createPluginInstance(self,!1).then(function(t){return Object.defineProperties(t,{TrackData:{value:self.TrackData}}),t})})}function v(t,e){var n,r,i=e.length;for(n=0;n<i;n++)t[(r=e[n]).name].apply(t,r.parameters),r.features&&r.features.length>0&&v(t.result[r.name],r.features)}this.parent=t,o.disconnect(),o.connect(n),this.TrackData=new r.LinkedStore("Track"),this.PluginData=new r.LinkedStore("Plugin"),this.featureSender=c,this.getFeatureChain=function(){},this.bypassPlugin=function(t,e){!1!==i.includes(t)&&t.bypass(e)},this.getPrototypes=function(){return this.parent.getPrototypes()},this.getFactory=function(){return this.parent},this.destroy=function(t){var e;for(e=0;e<i.length;e++)this.destroyPlugin(i[e]);o.disconnect(),!0===t&&o.connect(u)},this.createPlugin=function(t){return m(t).catch(function(t){throw"Plugin did not get created! Aborting"}).then(function(t){return h(),i.push(t),l(),f(),p(),t.node.onloaded.call(t.node),t})},this.destroyPlugin=function(t){if(0!==s){var e=this.getPluginIndex(t);e>=0&&(h(),t.node.stop.call(t.node),t.node.onunloaded.call(t.node),t.node.deconstruct.call(t.node),i.splice(e,1),this.parent.deletePlugin(t.id),l(),f(),p())}},this.getPlugins=function(){return i},this.getAllPlugins=function(){return this.parent.getAllPluginsObject()},this.getPluginIndex=function(t){if(0!==s)return i.findIndex(function(t,e,n){return t===this},t)},this.movePlugin=function(t,e){if(0!==s){var n,r,o,u=this.getPluginIndex(t);u>=0&&(h(),l(),n=i.splice(u,1),t.node.onunloaded.call(t.node),0===e?i=n.concat(i):e>=i.length?i=i.concat(n):(r=i.slice(0,e),o=i.slice(e),i=r.concat(n.concat(o))),f(),p(),t.node.onloaded.call(t.node))}},this.copyPlugin=function(t,e){if(void 0===e&&(e=i.length),"number"!=typeof e||e<0||e>i.length)throw"Plugin copy index outside of the chain scope.";return m(t.prototypeObject).catch(function(t){throw"Plugin did not get created! Aborting"}).then(function(n){return n.node.parameters.setParametersByObject(t.node.parameters.getParameterObject()),h(),l(),i.splice(e,0,n),f(),p(),n.node.onloaded.call(n.node),n})},Object.defineProperties(this,{chainStart:{value:e},chainStop:{value:n},name:{get:function(){return a},set:function(t){return"string"==typeof t&&(a=t),a}},recursiveProcessing:{get:function(){return v}}})},m=function(t){return Object.create({setDefaultInterface:function(t,e,n){return{url:t,width:e,height:n}},buildPluginInterface:function(t,e){var n=document.createElement("iframe");return n.src=e.src,e.width&&(n.width=e.width),e.height&&(n.height=e.height),n.style.border="0",n},pollAllPlugins:function(){t.getAllPlugins().forEach(function(t){t.node.externalInterface.updateInterfaces()})}})}(this);Object.defineProperties(this,{context:{value:t},pluginRootURL:{get:function(){return e},set:function(t){if("string"==typeof t)return e=t;throw"Cannot set root URL without a string"}},createFactoryCopy:{value:function(t){return e=t,new Promise(function(t,n){void 0===e.sampleRate?n(new Error("Invalid audio context provided")):t(e)}).then(function(t){var e=new l(t),n=[];return i.forEach(function(t){n.push(e.addPrototype(t.proto))}),new Promise.all(n).then(function(){return e})}).then(function(t){return t});var e}},PluginGUI:{value:m}})}"undefined"!=typeof window&&(window.BasePlugin=i),n.d(e,"PluginFactory",function(){return l}),n.d(e,"BasePlugin",function(){return i}),function(){if(void 0===window.jsXtract){var t=document.createElement("script");t.src="https://gitcdn.xyz/repo/nickjillings/js-xtract/master/jsXtract.js",document.getElementsByTagName("head")[0].appendChild(t)}}()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9KU0FQL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL0pTQVAvLi9zcmMvaGVhZC5qcyIsIndlYnBhY2s6Ly9KU0FQLy4vc3JjL2Jhc2VfcGx1Z2luLmpzIiwid2VicGFjazovL0pTQVAvLi9zcmMvcGx1Z2luLWZhY3RvcnkuanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJoZWFkIiwiTGlua2VkU3RvcmUiLCJzdG9yZU5hbWUiLCJyb290Iiwib2JqZWN0VG9YTUwiLCJvYmoiLCJkb2MiLCJ0ZXJtIiwiZG9jTm9kZSIsInRvWE1MIiwiY3JlYXRlRWxlbWVudCIsImFwcGVuZENoaWxkIiwibGVuZ3RoIiwiYXJyYXlUb1hNTCIsInNldEF0dHJpYnV0ZSIsImFyciIsImFsbF9udW1iZXJzIiwiYWxsX3N0cmluZ3MiLCJldmVyeSIsImEiLCJmb3JFYWNoIiwibm9kZSIsImRvY3VtZW50IiwiZGVmaW5lUHJvcGVydGllcyIsInRoaXMiLCJzZXQiLCJ1bmRlZmluZWQiLCJhZGRUZXJtIiwiYWRkVGVybXMiLCJ0ZXJtc09iamVjdCIsImRlbGV0ZVRlcm0iLCJnZXRUZXJtIiwiaGFzVGVybSIsInRvSlNPTiIsIkpTT04iLCJwYXJzZSIsInN0cmluZ2lmeSIsImltcGxlbWVudGF0aW9uIiwiY3JlYXRlRG9jdW1lbnQiLCJmaXJzdEVsZW1lbnRDaGlsZCIsIkF1ZGlvTm9kZSIsIndpbmRvdyIsImltcG9ydFNjcmlwdHMiLCJnZXRJbnB1dHMiLCJCYXNlUGx1Z2luIiwiZmFjdG9yeSIsIm93bmVyIiwiaW5wdXRMaXN0Iiwib3V0cHV0TGlzdCIsInBPd25lciIsImV2ZW50VGFyZ2V0IiwiRXZlbnRUYXJnZXQiLCJkZWxldGVJTyIsImxpc3QiLCJmaW5kSW5kZXgiLCJlIiwic3BsaWNlIiwiY29udGV4dCIsImZlYXR1cmVNYXAiLCJQbHVnaW5GZWF0dXJlSW50ZXJmYWNlIiwiZXh0ZXJuYWxJbnRlcmZhY2UiLCJQbHVnaW5JbnRlcmZhY2VNZXNzYWdlSHViIiwicGFyYW1ldGVycyIsIlBhcmFtZXRlck1hbmFnZXIiLCJhZGRJbnB1dCIsInB1c2giLCJkZWxldGVJbnB1dCIsImFkZE91dHB1dCIsIm91dHB1dHMiLCJkZWxldGVPdXRwdXQiLCJzdGFydCIsInN0b3AiLCJvbmxvYWRlZCIsIm9udW5sb2FkZWQiLCJkZWNvbnN0cnVjdCIsIm51bUlucHV0cyIsIm51bU91dHB1dHMiLCJudW1QYXJhbWV0ZXJzIiwiaW5wdXRzIiwiaW5kZXgiLCJjb25uZWN0IiwiZGVzdCIsImlucHQiLCJpbnB1dCIsImRpc2Nvbm5lY3QiLCJnZXRPdXRwdXRzIiwiZ2V0UGFyYW1ldGVyTmFtZSIsImdldFBhcmFtZXRlck5hbWVzIiwiZ2V0UGFyYW1ldGVyQnlOYW1lIiwiZ2V0UGFyYW1ldGVyT2JqZWN0Iiwic2V0UGFyYW1ldGVyQnlOYW1lIiwic2V0UGFyYW1ldGVyc0J5T2JqZWN0IiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJwbHVnaW5FeHRlcm5hbEludGVyZmFjZSIsInBhcmFtZXRlckxpc3QiLCJmaW5kUGFyYW1ldGVyIiwiZmluZCIsInRvTG93ZXJDYXNlIiwiZmluZFBhcmFtZXRlckluZGV4IiwiYnVpbGRQYXJhbWV0ZXJPYmplY3QiLCJhZGRQYXJhbWV0ZXIiLCJwYXJhbSIsIlBsdWdpblBhcmFtZXRlciIsImRhdGFUeXBlIiwidXBkYXRlIiwidHJhbnNsYXRlIiwidHJpZ2dlciIsImF1ZGlvUGFyYW0iLCJ2IiwiZiIsImJpbmRUb0F1ZGlvUGFyYW0iLCJhcCIsImJvdW5kQXVkaW9QYXJhbSIsImFjdGlvbkxpc3QiLCJOdW1iZXJQYXJhbWV0ZXIiLCJkZWZhdWx0VmFsdWUiLCJtaW5pbXVtIiwibWF4aW11bSIsIl9zdGVwU2l6ZSIsIl92YWx1ZSIsImRlc3Ryb3kiLCJNYXRoIiwibWF4IiwibWluIiwicm91bmQiLCJFdmVudCIsImRpc3BhdGNoRXZlbnQiLCJzdGVwU2l6ZSIsImlzRmluaXRlIiwiU3RyaW5nUGFyYW1ldGVyIiwibWF4TGVuZ3RoIiwiQnV0dG9uUGFyYW1ldGVyIiwib25jbGljayIsIlN3aXRjaFBhcmFtZXRlciIsIm1pblN0YXRlIiwibWF4U3RhdGUiLCJzZXRWIiwiZW50cnkiLCJ0aW1lIiwiRGF0ZSIsImluY3JlbWVudCIsImRlY3JlbWVudCIsIkxpc3RQYXJhbWV0ZXIiLCJsaXN0T2ZWYWx1ZXMiLCJfaW5kZXgiLCJpbmRleE9mIiwibGlzdFZhbHVlcyIsImNvbnN0cnVjdG9yIiwiY3JlYXRlTnVtYmVyUGFyYW1ldGVyIiwiY3JlYXRlU3RyaW5nUGFyYW1ldGVyIiwiY3JlYXRlQnV0dG9uUGFyYW1ldGVyIiwiY3JlYXRlU3dpdGNoUGFyYW1ldGVyIiwiY3JlYXRlUGFyYW1ldGVyIiwibmFtZXMiLCJwYXJhbWV0ZXIiLCJkZWxldGVQYXJhbWV0ZXIiLCJkZWxldGVBbGxQYXJhbWV0ZXJzIiwiQmFzZVBsdWdpbkluc3RhbmNlIiwicGx1Z2luIiwiUmVjZWl2ZXIiLCJQbHVnaW5GZWF0dXJlSW50ZXJmYWNlUmVjZWl2ZXIiLCJGZWF0dXJlTWFwIiwiU2VuZGVyIiwiUGx1Z2luRmVhdHVyZUludGVyZmFjZVNlbmRlciIsIm9uZmVhdHVyZXMiLCJmdW5jIiwiRmVhdHVyZUludGVyZmFjZUluc3RhbmNlIiwiRmFjdG9yeUZlYXR1cmVNYXAiLCJjaGVja0ZlYXR1cmVBcmdzIiwic291cmNlIiwiZmVhdHVyZU9iamVjdCIsIm91dHB1dEluZGV4IiwiZnJhbWVTaXplIiwiZmVhdHVyZXMiLCJjX2ZlYXR1cmVzIiwicmVxdWVzdEZlYXR1cmVzIiwiZmVhdHVyZUxpc3QiLCJyZXF1ZXN0RmVhdHVyZXNGcm9tUGx1Z2luIiwiY2FuY2VsRmVhdHVyZXNGcm9tUGx1Z2luIiwiZGVsZXRlRmVhdHVyZXMiLCJjYW5jZWxBbGxGZWF0dXJlc0Zyb21QbHVnaW4iLCJjYW5jZWxBbGxGZWF0dXJlcyIsInBvc3RGZWF0dXJlcyIsIk1lc3NhZ2UiLCJPdXRwdXROb2RlIiwicGFyZW50Iiwib3V0cHV0IiwiZXh0cmFjdG9ycyIsIkV4dHJhY3RvciIsImV4dHJhY3RvciIsImNyZWF0ZUFuYWx5c2VyIiwiZmZ0U2l6ZSIsInJlY3Vyc2l2ZVByb2Nlc3NpbmciLCJvbmF1ZGlvY2FsbGJhY2siLCJkYXRhIiwibWVzc2FnZSIsIm51bWJlck9mQ2hhbm5lbHMiLCJyZXN1bHRzIiwiY2hhbm5lbCIsInNldEZlYXR1cmVzIiwiY2xlYXJDYWxsYmFjayIsImZyYW1lQ2FsbGJhY2siLCJXb3JrZXJFeHRyYWN0b3IiLCJ3b3JrZXIiLCJXb3JrZXIiLCJvbmVycm9yIiwiY29uc29sZSIsImVycm9yIiwic2VsZiIsImNvbmZpZ01lc3NhZ2UiLCJzdGF0ZSIsInNhbXBsZVJhdGUiLCJudW1DaGFubmVscyIsIm51bWJlck9mT3V0cHV0cyIsIm9ubWVzc2FnZSIsIm1zZyIsInJlc3BvbnNlIiwib25hdWRpb3Byb2Nlc3MiLCJmcmFtZXMiLCJpbnB1dEJ1ZmZlciIsImdldENoYW5uZWxEYXRhIiwicG9zdE1lc3NhZ2UiLCJjcmVhdGVTY3JpcHRQcm9jZXNzb3IiLCJkZXN0aW5hdGlvbiIsImFkZEV4dHJhY3RvciIsInJlc3VsdHNKU09OIiwiZmluZEV4dHJhY3RvciIsImNoZWNrIiwiZGVsZXRlRXh0cmFjdG9yIiwib3V0cHV0Tm9kZXMiLCJ1cGRhdGVGZWF0dXJlcyIsInJlc3VsdE9iamVjdCIsInNpIiwicGx1Z2luSW5zdGFuY2UiLCJjcmVhdGVTb3VyY2VNYXAiLCJQbHVnaW5Vc2VySW50ZXJmYWNlIiwid2lkdGgiLCJoZWlnaHQiLCJsb2ciLCJwcm9jZXNzb3IiLCJzdHlsZSIsImRpbSIsImludGVydmFsRnVuY3Rpb24iLCJ1cGRhdGVJbnRlcnZhbCIsIlBsdWdpblBhcmFtZXRlckludGVyZmFjZXMiLCJQbHVnaW5QYXJhbWV0ZXJJbnRlcmZhY2VOb2RlIiwiRE9NIiwiUGx1Z2luUGFyYW1ldGVySW5zdGFuY2UiLCJndWkiLCJHVUkiLCJBdWRpb1BhcmFtIiwiaGFuZGxlRXZlbnQiLCJldmVudCIsImNyZWF0ZVBsdWdpblBhcmFtZXRlckludGVyZmFjZU5vZGUiLCJnZXRSb290IiwiZ2V0RGltZW5zaW9ucyIsImdldFdpZHRoIiwiZ2V0SGVpZ2h0IiwiYmVnaW5DYWxsYmFja3MiLCJtcyIsInNldEludGVydmFsIiwic3RvcENhbGxiYWNrcyIsImNsZWFySW50ZXJ2YWwiLCJsb2FkUmVzb3VyY2UiLCJ1cmwiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsInJlcSIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsIm9ubG9hZCIsInN0YXR1cyIsIkVycm9yIiwic3RhdHVzVGV4dCIsInNlbmQiLCJjbGVhckdVSSIsImlubmVySFRNTCIsImJ1aWxkUGFyYW1ldGVyVXBkYXRlUGF5bG9hZCIsInNlbmRlcl9pZCIsIk8iLCJ0eXBlIiwiYnJvYWRjYXN0UGFyYW1ldGVyVXBkYXRlcyIsIndpbmRvd01lc3NhZ2VMaXN0IiwidyIsImtleXMiLCJzZXRQYXJhbWV0ZXJNZXNzYWdlIiwidXBkYXRlSW50ZXJmYWNlcyIsImNsb3NlV2luZG93cyIsInBvcCIsImNsb3NlIiwicmVnaXN0ZXJXaW5kb3ciLCJpbmNsdWRlcyIsInBsdWdpbl9mYWN0b3J5X1BsdWdpbkZhY3RvcnkiLCJhdWRpb19jb250ZXh0Iiwicm9vdFVSTCIsInN1YkZhY3RvcmllcyIsInBsdWdpbl9wcm90b3R5cGVzIiwicGx1Z2luc0xpc3QiLCJjdXJyZW50UGx1Z2luSWQiLCJhdWRpb1N0YXJ0ZWQiLCJyZXNvdXJjZU9iamVjdCIsInN0YXJ0c1dpdGgiLCJ4aHIiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZWFkeVN0YXRlIiwic2NyaXB0IiwidGV4dENvbnRlbnQiLCJyZXNwb25zZVRleHQiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInRlc3QiLCJ0aGVuIiwicmV0dXJuT2JqZWN0IiwiU3RyaW5nIiwibG9hZFBsdWdpblNjcmlwdCIsImFkZFByb3RvdHlwZSIsIlBsdWdpbkluc3RhbmNlIiwiaWQiLCJwbHVnaW5fbm9kZSIsIm5leHRfbm9kZSIsIl9ieXBhc3NlZCIsIl9pbiIsImNyZWF0ZUdhaW4iLCJfb3V0IiwiYnlwYXNzIiwiaXNCeXBhc3NlZCIsInJlY29ubmVjdCIsIm5ld19uZXh0IiwiYnlwYXNzZWQiLCJQbHVnaW5Qcm90b3R5cGUiLCJwcm90byIsImxvYWRSZXNvdXJjZUNoYWluIiwiayIsInJlc291cmNlcyIsInJlY3Vyc2l2ZUdldFRlc3QiLCJ2ZXJzaW9uIiwidW5pcXVlSUQiLCJjcmVhdGVQbHVnaW5JbnN0YW5jZSIsImFzeW5jIiwiYWxsIiwicmVzb3VyY2VQcm9taXNlcyIsImNoZWNrSXNSZWFkeSIsImluaXRpYWxpc2UiLCJwcm90b3R5cGVPYmplY3QiLCJTZXNpb25EYXRhIiwiU2Vzc2lvbkRhdGEiLCJVc2VyRGF0YSIsInJlZ2lzdGVyUGx1Z2luSW5zdGFuY2UiLCJjc3MiLCJyZXNvdXJjZSIsInByb21pc2UiLCJjb21wbGV0ZSIsImdldFJlc291cmNlUHJvbWlzZXMiLCJwbHVnaW5fcHJvdG8iLCJ0ZXN0T2JqIiwibWF0Y2giLCJnZXRQcm90b3R5cGVzIiwiZ2V0QWxsUGx1Z2lucyIsImdldEFsbFBsdWdpbnNPYmplY3QiLCJzdWJGYWN0b3J5IiwicGx1Z2lucyIsImdldFBsdWdpbnMiLCJjcmVhdGVTdWJGYWN0b3J5IiwiY2hhaW5TdGFydCIsImNoYWluU3RvcCIsIlBsdWdpblN1YkZhY3RvcnkiLCJkZXN0cm95U3ViRmFjdG9yeSIsIlN1YkZhY3RvcnkiLCJlbGVtZW50IiwiaW5zdGFuY2UiLCJkZWxldGVQbHVnaW4iLCJhdWRpb1N0YXJ0IiwiYXVkaW9TdG9wIiwiTWFwcGluZ3MiLCJGZWF0dXJlTm9kZSIsImdldEZlYXR1cmVOb2RlIiwiYWRkRmVhdHVyZU5vZGUiLCJmZWF0dXJlTm9kZSIsIlNvdXJjZU1hcCIsInBsdWdpbkluc3RhY2UiLCJmaW5kRmVhdHVyZU9iamVjdCIsInVwZGF0ZVNlbmRlciIsInJlY3Vyc2l2ZUZpbmQiLCJmcmFtZUxpc3QiLCJnZXRGZWF0dXJlTGlzdCIsImdldFNvdXJjZUluc3RhbmNlIiwiZ2V0U2VuZGVyIiwicmVxdWVzdG9ySW5zdGFuY2UiLCJtYXAiLCJyZXF1ZXN0b3JzIiwiRiIsImNvbmNhdCIsInJlcXVlc3RvciIsImdldFJlcXVlc3Rvckluc3RhbmNlIiwiUmVxdWVzdG9yTWFwIiwiYWRkRmVhdHVyZXMiLCJmaW5kRnJhbWVNYXAiLCJjYW5jZWxGZWF0dXJlcyIsInJlcXVlc3RvckluZGV4IiwiRmVhdHVyZXMiLCJyZWN1cnNpdmVseUFkZEZlYXR1cmVzIiwicm9vdEFycmF5IiwicmVjdXJzaXZlbHlEZWxldGVGZWF0dXJlcyIsInJlY3Vyc2l2ZVBvc3RGZWF0dXJlcyIsInJvb3ROb2RlIiwicmVzdWx0c0xpc3QiLCJGZWF0dXJlTGlzdCIsImFvIiwiZmluZFNvdXJjZUluZGV4IiwiZmluZFNvdXJjZU1hcCIsInBsdWdpblNlbmRlciIsInNvdXJjZU1hcCIsImRlbGV0ZVNvdXJjZU1hcCIsImdldFBsdWdpblNlbmRlciIsInN0b3JlcyIsImNyZWF0ZVN0b3JlIiwiZ2V0U3RvcmVzIiwiZmluZFN0b3JlIiwiU3ViRmFjdG9yeUZlYXR1cmVTZW5kZXIiLCJyZWpvaW5FeHRyYWN0b3IiLCJOdW1iZXIiLCJyZWpvaW5FeHRyYWN0b3JzIiwiUGx1Z2luRmFjdG9yeSIsInBsdWdpbl9saXN0IiwicGx1Z2luQ2hhaW5TdGFydCIsInBsdWdpbkNoYWluU3RvcCIsImZhY3RvcnlOYW1lIiwiY2hhaW5TdGFydEZlYXR1cmUiLCJyZWJ1aWxkIiwiY3VycmVudE5vZGUiLCJuZXh0Tm9kZSIsImlzb2xhdGUiLCJjdXRDaGFpbiIsImpvaW5DaGFpbiIsImJ1aWxkTmV3UGx1Z2luIiwiVHJhY2tEYXRhIiwiYmFzZSIsImFwcGx5IiwicmVzdWx0IiwiUGx1Z2luRGF0YSIsImZlYXR1cmVTZW5kZXIiLCJnZXRGZWF0dXJlQ2hhaW4iLCJieXBhc3NQbHVnaW4iLCJwbHVnaW5faW5zdGFuY2UiLCJnZXRGYWN0b3J5IiwiZGVzdHJveVBsdWdpbiIsImNyZWF0ZVBsdWdpbiIsImNhdGNoIiwicGx1Z2luX29iamVjdCIsImdldFBsdWdpbkluZGV4IiwiYXJyYXkiLCJtb3ZlUGx1Z2luIiwibmV3X2luZGV4IiwiaG9sZExvdyIsImhvbGRIaWdoIiwic2xpY2UiLCJjb3B5UGx1Z2luIiwiY29weV9pbmRleCIsIlBsdWdpblVzZXJJbnRlcmZhY2VNZXNzYWdlSHViIiwic2V0RGVmYXVsdEludGVyZmFjZSIsImJ1aWxkUGx1Z2luSW50ZXJmYWNlIiwiaW50ZXJmYWNlX29iamVjdCIsImlmcmFtZSIsInNyYyIsImJvcmRlciIsInBvbGxBbGxQbHVnaW5zIiwicGx1Z2luUm9vdFVSTCIsImNyZWF0ZUZhY3RvcnlDb3B5IiwibmV3Y29udGV4dCIsIkJGYWN0b3J5IiwicHJvbWlzZXMiLCJuZXdGYWN0b3J5IiwiUGx1Z2luR1VJIiwiX193ZWJwYWNrX2V4cG9ydHNfXyIsImpzWHRyYWN0Il0sIm1hcHBpbmdzIjoicUJBQ0EsSUFBQUEsRUFBQSxHQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLEdBQUEsQ0FDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxRQUFBLElBVUEsT0FOQUksRUFBQUwsR0FBQU0sS0FBQUosRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUYsR0FHQUcsRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxRQTBEQSxPQXJE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ZCxJQUFBLG9FQUNBMWIsU0FBQWdTLHFCQUFBLFdBQUEzUyxZQUFBWixJQUpBIiwiZmlsZSI6ImpzYXAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCIvKmdsb2JhbHMgZG9jdW1lbnQgKi9cbi8qZXNsaW50LWVudiBicm93c2VyICovXG5cbnZhciBMaW5rZWRTdG9yZSA9IGZ1bmN0aW9uIChzdG9yZU5hbWUpIHtcbiAgICAvLyBTdG9yZSBmb3IgdGhlIHNlbWFudGljIHRlcm1zLCBlYWNoIHN0b3JlIGhvbGRzIGl0cyBvd24gZGF0YSB0cmVlXG4gICAgLy8gVGVybXMgYXJlIGFkZGVkIGFzIGtleS92YWx1ZSBwYXJpcyB0byBhIHJvb3Qgbm9kZVxuICAgIHZhciByb290ID0ge307XG5cbiAgICBmdW5jdGlvbiBvYmplY3RUb1hNTChvYmosIHJvb3QsIGRvYykge1xuICAgICAgICAvLyBVc2VkIGlmIGFuIG9iamVjdCB3YXMgcGFzc2VkIGFzIGEgdGVybSB2YWx1ZVxuICAgICAgICB2YXIgdGVybTtcbiAgICAgICAgZm9yICh0ZXJtIGluIG9iaikge1xuICAgICAgICAgICAgaWYgKG9iai5oYXNPd25Qcm9wZXJ0eSh0ZXJtKSkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb2JqW3Rlcm1dID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkb2NOb2RlO1xuICAgICAgICAgICAgICAgICAgICBpZiAob2JqW3Rlcm1dLnRvWE1MKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkb2NOb2RlID0gb2JqW3Rlcm1dLnRvWE1MKGRvYyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkb2NOb2RlID0gZG9jLmNyZWF0ZUVsZW1lbnQodGVybSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByb290LmFwcGVuZENoaWxkKGRvY05vZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9ialt0ZXJtXS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcnJheVRvWE1MKG9ialt0ZXJtXSwgZG9jTm9kZSwgZG9jKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0VG9YTUwob2JqW3Rlcm1dLCBkb2NOb2RlLCBkb2MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJvb3QuYXBwZW5kQ2hpbGQoZG9jTm9kZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcm9vdC5zZXRBdHRyaWJ1dGUodGVybSwgb2JqW3Rlcm1dKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhcnJheVRvWE1MKGFyciwgcm9vdCwgZG9jKSB7XG4gICAgICAgIC8vIFVzZWQgdG8gY29udmVydCBhbiBhcnJheSB0byBhIGxpc3Qgb2YgWE1MIGVudHJpZXNcbiAgICAgICAgdmFyIGFsbF9udW1iZXJzID0gdHJ1ZSxcbiAgICAgICAgICAgIGFsbF9zdHJpbmdzID0gdHJ1ZSxcbiAgICAgICAgICAgIGksIGwgPSBhcnIubGVuZ3RoO1xuICAgICAgICBhbGxfbnVtYmVycyA9IGFyci5ldmVyeShmdW5jdGlvbiAoYSkge1xuICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBhID09PSBcIm51bWJlclwiO1xuICAgICAgICB9KTtcbiAgICAgICAgYWxsX3N0cmluZ3MgPSBhcnIuZXZlcnkoZnVuY3Rpb24gKGEpIHtcbiAgICAgICAgICAgIHJldHVybiB0eXBlb2YgYSA9PT0gXCJzdHJpbmdcIjtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChhbGxfbnVtYmVycyB8fCBhbGxfc3RyaW5ncykge1xuICAgICAgICAgICAgLy8gQW4gYXJyYXkgb2YgbnVtYmVycyBvciBzdHJpbmdzXG4gICAgICAgICAgICBhcnIuZm9yRWFjaChmdW5jdGlvbiAoYSwgaSkge1xuICAgICAgICAgICAgICAgIHJvb3Quc2V0QXR0cmlidXRlKFwiaW5kZXgtXCIgKyBpLCBhKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gQW4gYXJyYXkgb2Ygb2JqZWN0c1xuICAgICAgICAgICAgYXJyLmZvckVhY2goZnVuY3Rpb24gKGEsIGkpIHtcbiAgICAgICAgICAgICAgICB2YXIgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ2YWx1ZVwiKTtcbiAgICAgICAgICAgICAgICBub2RlLnNldEF0dHJpYnV0ZShcImluZGV4XCIsIGkpO1xuICAgICAgICAgICAgICAgIG9iamVjdFRvWE1MKGEsIG5vZGUsIGRvYyk7XG4gICAgICAgICAgICAgICAgcm9vdC5hcHBlbmRDaGlsZChub2RlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcywge1xuICAgICAgICAnbmFtZSc6IHtcbiAgICAgICAgICAgICdnZXQnOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0b3JlTmFtZTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnc2V0JzogZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3RvcmVOYW1lID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZSA9IHN0b3JlTmFtZTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyAoXCJOYW1lIGlzIGFscmVhZHkgc2V0XCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgJ2FkZFRlcm0nOiB7XG4gICAgICAgICAgICAndmFsdWUnOiBmdW5jdGlvbiAodGVybSwgdmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRlcm0gIT09IFwic3RyaW5nXCIgJiYgdGVybS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgKFwidGVybSBtdXN0IGJlIGEgc3RyaW5nXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByb290W3Rlcm1dID0gdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgICdhZGRUZXJtcyc6IHtcbiAgICAgICAgICAgICd2YWx1ZSc6IGZ1bmN0aW9uICh0ZXJtc09iamVjdCkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGVybXNPYmplY3QgIT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgKFwiYWRkVGVybXMgdGFrZXMgYW4gb2JqZWN0IG9mIHRlcm0vdmFsdWUgcGFpcnNcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciB0ZXJtO1xuICAgICAgICAgICAgICAgIGZvciAodGVybSBpbiB0ZXJtc09iamVjdCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGVybXNPYmplY3QuaGFzT3duUHJvcGVydHkodGVybSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkVGVybSh0ZXJtLCB0ZXJtc09iamVjdFt0ZXJtXSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgICdkZWxldGVUZXJtJzoge1xuICAgICAgICAgICAgJ3ZhbHVlJzogZnVuY3Rpb24gKHRlcm0pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFkZFRlcm0odGVybSwgdW5kZWZpbmVkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgJ2dldFRlcm0nOiB7XG4gICAgICAgICAgICAndmFsdWUnOiBmdW5jdGlvbiAodGVybSkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGVybSAhPT0gXCJzdHJpbmdcIiAmJiB0ZXJtLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyAoXCJ0ZXJtIG11c3QgYmUgYSBzdHJpbmdcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiByb290W3Rlcm1dO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICAnaGFzVGVybSc6IHtcbiAgICAgICAgICAgICd2YWx1ZSc6IGZ1bmN0aW9uICh0ZXJtKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0ZXJtICE9PSBcInN0cmluZ1wiICYmIHRlcm0ubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IChcInRlcm0gbXVzdCBiZSBhIHN0cmluZ1wiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJvb3QuaGFzT3duUHJvcGVydHkodGVybSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgICd0b0pTT04nOiB7XG4gICAgICAgICAgICAndmFsdWUnOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocm9vdCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICAndG9YTUwnOiB7XG4gICAgICAgICAgICAndmFsdWUnOiBmdW5jdGlvbiAoZG9jKSB7XG4gICAgICAgICAgICAgICAgdmFyIG5vZGU7XG4gICAgICAgICAgICAgICAgaWYgKCFkb2MpIHtcbiAgICAgICAgICAgICAgICAgICAgZG9jID0gZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlRG9jdW1lbnQobnVsbCwgc3RvcmVOYW1lLCBudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgbm9kZSA9IGRvYy5maXJzdEVsZW1lbnRDaGlsZDtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBub2RlID0gZG9jLmNyZWF0ZUVsZW1lbnQoc3RvcmVOYW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgb2JqZWN0VG9YTUwocm9vdCwgbm9kZSwgZG9jKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xufTtcblxuZXhwb3J0IGRlZmF1bHQge0xpbmtlZFN0b3JlfTtcbiIsIi8vIEFkZCBnZXRJbnB1dHMgdG8gYWxsIEF1ZGlvTm9kZXMgdG8gZWFzZSBkZXBsb3ltZW50XG4vKmdsb2JhbHMgQXVkaW9Ob2RlLCBXb3JrZXIsIGNvbnNvbGUsIHdpbmRvdywgZG9jdW1lbnQsIFByb21pc2UsIFhNTEh0dHBSZXF1ZXN0ICovXG4vKmVzbGludC1lbnYgYnJvd3NlciAqL1xuaWYgKHR5cGVvZiBBdWRpb05vZGUgPT09IFwiZnVuY3Rpb25cIiAmJiB3aW5kb3cuaW1wb3J0U2NyaXB0cyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgQXVkaW9Ob2RlLnByb3RvdHlwZS5nZXRJbnB1dHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBbdGhpc107XG4gICAgfTtcbn1cblxuLy8gVGhpcyBzaG91bGQgc2ltcGx5IGRlZmluZSB0aGUgQmFzZVBsdWdpbiBmcm9tIHdoaWNoIGN1c3RvbSBwbHVnaW5zIGNhbiBiZSBidWlsdCBmcm9tXG52YXIgQmFzZVBsdWdpbiA9IGZ1bmN0aW9uKGZhY3RvcnksIG93bmVyKSB7XG4gICAgdmFyIGlucHV0TGlzdCA9IFtdLFxuICAgICAgICBvdXRwdXRMaXN0ID0gW10sXG4gICAgICAgIHBPd25lciA9IG93bmVyLFxuICAgICAgICBldmVudFRhcmdldCA9IG5ldyBFdmVudFRhcmdldCgpO1xuICAgIHRoaXMuY29udGV4dCA9IGZhY3RvcnkuY29udGV4dDtcbiAgICB0aGlzLmZhY3RvcnkgPSBmYWN0b3J5O1xuICAgIHRoaXMuZmVhdHVyZU1hcCA9IG5ldyBQbHVnaW5GZWF0dXJlSW50ZXJmYWNlKHRoaXMpO1xuICAgIHRoaXMuZXh0ZXJuYWxJbnRlcmZhY2UgPSBuZXcgUGx1Z2luSW50ZXJmYWNlTWVzc2FnZUh1Yih0aGlzKTtcbiAgICB0aGlzLnBhcmFtZXRlcnMgPSBuZXcgUGFyYW1ldGVyTWFuYWdlcih0aGlzLCB0aGlzLmV4dGVybmFsSW50ZXJmYWNlLCBldmVudFRhcmdldCk7XG5cbiAgICBmdW5jdGlvbiBkZWxldGVJTyhub2RlLCBsaXN0KSB7XG4gICAgICAgIHZhciBpID0gbGlzdC5maW5kSW5kZXgoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBlID09PSB0aGlzO1xuICAgICAgICB9LCBub2RlKTtcbiAgICAgICAgaWYgKGkgPT09IC0xKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgbGlzdC5zcGxpY2UoaSwgMSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHRoaXMuYWRkSW5wdXQgPSBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICBpbnB1dExpc3QucHVzaChub2RlKTtcbiAgICAgICAgcmV0dXJuIGlucHV0TGlzdDtcbiAgICB9O1xuICAgIHRoaXMuZGVsZXRlSW5wdXQgPSBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICByZXR1cm4gZGVsZXRlSU8obm9kZSwgaW5wdXRMaXN0KTtcbiAgICB9O1xuICAgIHRoaXMuYWRkT3V0cHV0ID0gZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgb3V0cHV0TGlzdC5wdXNoKG5vZGUpO1xuICAgICAgICByZXR1cm4gdGhpcy5vdXRwdXRzO1xuICAgIH07XG4gICAgdGhpcy5kZWxldGVPdXRwdXQgPSBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICByZXR1cm4gZGVsZXRlSU8obm9kZSwgb3V0cHV0TGlzdCk7XG4gICAgfTtcblxuICAgIHRoaXMuc3RhcnQgPSB0aGlzLnN0b3AgPSB0aGlzLm9ubG9hZGVkID0gdGhpcy5vbnVubG9hZGVkID0gdGhpcy5kZWNvbnN0cnVjdCA9IGZ1bmN0aW9uICgpIHt9O1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcywge1xuICAgICAgICBcIm51bUlucHV0c1wiOiB7XG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaW5wdXRMaXN0Lmxlbmd0aDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyAoXCJDYW5ub3Qgc2V0IHRoZSBudW1iZXIgb2YgaW5wdXRzIG9mIEJhc2VQbHVnaW5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFwibnVtT3V0cHV0c1wiOiB7XG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gb3V0cHV0TGlzdC5sZW5ndGg7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgKFwiQ2Fubm90IHNldCB0aGUgbnVtYmVyIG9mIG91dHB1dHMgb2YgQmFzZVBsdWdpblwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJudW1QYXJhbWV0ZXJzXCI6IHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcmFtZXRlcnMucGFyYW1ldGVycy5sZW5ndGg7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgKFwiQ2Fubm90IHNldCB0aGUgbnVtYmVyIG9mIHBhcmFtZXRlcnMgb2YgQmFzZVBsdWdpblwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJvd25lclwiOiB7XG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcE93bmVyO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKG93bmVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvd25lciA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgICAgICAgICBwT3duZXIgPSBvd25lcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBPd25lcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJpbnB1dHNcIjoge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaW5wdXRMaXN0O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHRocm93IChcIklsbGVnYWwgYXR0ZW1wdCB0byBtb2RpZnkgQmFzZVBsdWdpblwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJvdXRwdXRzXCI6IHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG91dHB1dExpc3Q7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgKFwiSWxsZWdhbCBhdHRlbXB0IHRvIG1vZGlmeSBCYXNlUGx1Z2luXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcImNvbm5lY3RcIjoge1xuICAgICAgICAgICAgXCJ2YWx1ZVwiOiBmdW5jdGlvbiAoZGVzdCkge1xuICAgICAgICAgICAgICAgIHRoaXMub3V0cHV0c1swXS5jb25uZWN0KGRlc3QuaW5wdCA/IGRlc3QuaW5wdXQgOiBkZXN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJkaXNjb25uZWN0XCI6IHtcbiAgICAgICAgICAgIFwidmFsdWVcIjogZnVuY3Rpb24gKGRlc3QpIHtcbiAgICAgICAgICAgICAgICBpZiAoZGVzdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3V0cHV0c1swXS5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vdXRwdXRzWzBdLmRpc2Nvbm5lY3QoZGVzdC5pbnB1dCA/IGRlc3QuaW5wdXQgOiBkZXN0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFwiZ2V0SW5wdXRzXCI6IHtcbiAgICAgICAgICAgIFwidmFsdWVcIjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmlucHV0cztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJnZXRPdXRwdXRzXCI6IHtcbiAgICAgICAgICAgIFwidmFsdWVcIjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm91dHB1dHM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFwiZ2V0UGFyYW1ldGVyTmFtZVwiOiB7XG4gICAgICAgICAgICBcInZhbHVlXCI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJhbWV0ZXJzLmdldFBhcmFtZXRlck5hbWVzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFwiZ2V0UGFyYW1ldGVyQnlOYW1lXCI6IHtcbiAgICAgICAgICAgIFwidmFsdWVcIjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcmFtZXRlcnMuZ2V0UGFyYW1ldGVyQnlOYW1lKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFwiZ2V0UGFyYW1ldGVyT2JqZWN0XCI6IHtcbiAgICAgICAgICAgIFwidmFsdWVcIjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcmFtZXRlcnMuZ2V0UGFyYW1ldGVyT2JqZWN0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFwic2V0UGFyYW1ldGVyQnlOYW1lXCI6IHtcbiAgICAgICAgICAgIFwidmFsdWVcIjogZnVuY3Rpb24gKG5hbWUsIHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyYW1ldGVycy5zZXRQYXJhbWV0ZXJCeU5hbWUobmFtZSwgdmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcInNldFBhcmFtZXRlcnNCeU9iamVjdFwiOiB7XG4gICAgICAgICAgICBcInZhbHVlXCI6IGZ1bmN0aW9uIChvYmplY3QpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJhbWV0ZXJzLnNldFBhcmFtZXRlcnNCeU9iamVjdChvYmplY3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcImFkZEV2ZW50TGlzdGVuZXJcIjoge1xuICAgICAgICAgICAgXCJ2YWx1ZVwiOiBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGV2ZW50VGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoa2V5LCB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFwicmVtb3ZlRXZlbnRMaXN0ZW5lclwiOiB7XG4gICAgICAgICAgICBcInZhbHVlXCI6IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZXZlbnRUYXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihrZXksIHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xufTtcblxudmFyIFBhcmFtZXRlck1hbmFnZXIgPSBmdW5jdGlvbiAob3duZXIsIHBsdWdpbkV4dGVybmFsSW50ZXJmYWNlLCBldmVudFRhcmdldCkge1xuICAgIHZhciBwYXJhbWV0ZXJMaXN0ID0gW107XG5cbiAgICBmdW5jdGlvbiBmaW5kUGFyYW1ldGVyKG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHBhcmFtZXRlckxpc3QuZmluZChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIGUubmFtZS50b0xvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGZpbmRQYXJhbWV0ZXJJbmRleChuYW1lKSB7XG4gICAgICAgIHJldHVybiBwYXJhbWV0ZXJMaXN0LmZpbmRJbmRleChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIGUubmFtZS50b0xvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGJ1aWxkUGFyYW1ldGVyT2JqZWN0KCkge1xuICAgICAgICB2YXIgb2JqID0ge307XG4gICAgICAgIHBhcmFtZXRlckxpc3QuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgb2JqW2UubmFtZV0gPSBlO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhZGRQYXJhbWV0ZXIocGFyYW0pIHtcbiAgICAgICAgdmFyIGV4aXN0cyA9IHBhcmFtZXRlckxpc3QuZmluZEluZGV4KGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICByZXR1cm4gZSA9PT0gcGFyYW07XG4gICAgICAgIH0sIHBhcmFtKTtcbiAgICAgICAgaWYgKGV4aXN0cyA9PT0gLTEpIHtcbiAgICAgICAgICAgIHBhcmFtZXRlckxpc3QucHVzaChwYXJhbSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhcmFtO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIFBsdWdpblBhcmFtZXRlcihvd25lciwgbmFtZSwgZGF0YVR5cGUpIHtcbiAgICAgICAgdmFyIHVwZGF0ZSwgdHJhbnNsYXRlLCB0cmlnZ2VyLCBhdWRpb1BhcmFtLCBfQWN0aW9uTGlzdCA9IFtdO1xuICAgICAgICB1cGRhdGUgPSB0cmFuc2xhdGUgPSBmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgcmV0dXJuIHY7XG4gICAgICAgIH07XG4gICAgICAgIHRyaWdnZXIgPSBmdW5jdGlvbiAoKSB7fTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcywge1xuICAgICAgICAgICAgXCJuYW1lXCI6IHtcbiAgICAgICAgICAgICAgICBcInZhbHVlXCI6IG5hbWVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcIm93bmVyXCI6IHtcbiAgICAgICAgICAgICAgICBcInZhbHVlXCI6IG93bmVyXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJ1cGRhdGVcIjoge1xuICAgICAgICAgICAgICAgIFwiZ2V0XCI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIFwic2V0XCI6IGZ1bmN0aW9uIChmKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZiAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyAoXCJNdXN0IGJlIGEgY2FsbGJhY2sgZnVuY3Rpb25cIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGYoMCkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgKFwiRnVuY3Rpb24gbXVzdCByZXR1cm4gYSB2YWx1ZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB1cGRhdGUgPSBmO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcInRyYW5zbGF0ZVwiOiB7XG4gICAgICAgICAgICAgICAgXCJnZXRcIjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNsYXRlO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXCJzZXRcIjogZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBmICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IChcIk11c3QgYmUgYSBjYWxsYmFjayBmdW5jdGlvblwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZigwKSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyAoXCJGdW5jdGlvbiBtdXN0IHJldHVybiBhIHZhbHVlXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRyYW5zbGF0ZSA9IGY7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwidHJpZ2dlclwiOiB7XG4gICAgICAgICAgICAgICAgXCJnZXRcIjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJpZ2dlcjtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIFwic2V0XCI6IGZ1bmN0aW9uIChmKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZiAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyAoXCJNdXN0IGJlIGEgY2FsbGJhY2sgZnVuY3Rpb25cIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdHJpZ2dlciA9IGY7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwiYmluZFRvQXVkaW9QYXJhbVwiOiB7XG4gICAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiBmdW5jdGlvbiAoYXApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBhcCAhPT0gXCJvYmplY3RcIiB8fCBhcC52YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyAoXCJNdXN0IGJlIGFuIEF1ZGlvUGFyYW0gb2JqZWN0IGZyb20gYW4gQXVkaW9Ob2RlXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciB2ID0gdGhpcy51cGRhdGUodGhpcy52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGF1ZGlvUGFyYW0gPSBhcDtcbiAgICAgICAgICAgICAgICAgICAgYXVkaW9QYXJhbS52YWx1ZSA9IHY7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwiYm91bmRBdWRpb1BhcmFtXCI6IHtcbiAgICAgICAgICAgICAgICBcImdldFwiOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhdWRpb1BhcmFtO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcImFjdGlvbkxpc3RcIjoge1xuICAgICAgICAgICAgICAgIFwidmFsdWVcIjogX0FjdGlvbkxpc3RcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gTnVtYmVyUGFyYW1ldGVyKG93bmVyLCBuYW1lLCBkZWZhdWx0VmFsdWUsIG1pbmltdW0sIG1heGltdW0pIHtcbiAgICAgICAgUGx1Z2luUGFyYW1ldGVyLmNhbGwodGhpcywgb3duZXIsIG5hbWUsIFwiTnVtYmVyXCIpO1xuICAgICAgICB2YXIgX3ZhbHVlID0gZGVmYXVsdFZhbHVlLFxuICAgICAgICAgICAgX3N0ZXBTaXplO1xuXG4gICAgICAgIGZ1bmN0aW9uIGFkZEFjdGlvbih2KSB7XG4gICAgICAgICAgICB2YXIgZW50cnkgPSB7XG4gICAgICAgICAgICAgICAgJ3RpbWUnOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IHZcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmFjdGlvbkxpc3QucHVzaChlbnRyeSk7XG4gICAgICAgIH1cblxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLCB7XG4gICAgICAgICAgICBcImRlc3Ryb3lcIjoge1xuICAgICAgICAgICAgICAgIFwidmFsdWVcIjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBvd25lciA9IG5hbWUgPSBkZWZhdWx0VmFsdWUgPSBtaW5pbXVtID0gbWF4aW11bSA9IF92YWx1ZSA9IF9zdGVwU2l6ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJtaW5pbXVtXCI6IHtcbiAgICAgICAgICAgICAgICBcInZhbHVlXCI6IG1pbmltdW1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcIm1heGltdW1cIjoge1xuICAgICAgICAgICAgICAgIFwidmFsdWVcIjogbWF4aW11bVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwiZGVmYXVsdFZhbHVlXCI6IHtcbiAgICAgICAgICAgICAgICBcInZhbHVlXCI6IGRlZmF1bHRWYWx1ZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwidmFsdWVcIjoge1xuICAgICAgICAgICAgICAgIFwiZ2V0XCI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYm91bmRBdWRpb1BhcmFtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50cmFuc2xhdGUodGhpcy5ib3VuZEF1ZGlvUGFyYW0udmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfdmFsdWU7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBcInNldFwiOiBmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5taW5pbXVtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2ID0gTWF0aC5tYXgodiwgdGhpcy5taW5pbXVtKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5tYXhpbXVtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2ID0gTWF0aC5taW4odiwgdGhpcy5tYXhpbXVtKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoX3N0ZXBTaXplKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2ID0gTWF0aC5yb3VuZCh2IC8gX3N0ZXBTaXplKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHYgPSB2ICogX3N0ZXBTaXplO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmJvdW5kQXVkaW9QYXJhbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ib3VuZEF1ZGlvUGFyYW0udmFsdWUgPSB0aGlzLnVwZGF0ZSh2KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoX3ZhbHVlICE9PSB2KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdmFsdWUgPSB2O1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSBuZXcgRXZlbnQoXCJwYXJhbWV0ZXJzZXRcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudFRhcmdldC5kaXNwYXRjaEV2ZW50KGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcInN0ZXBTaXplXCI6IHtcbiAgICAgICAgICAgICAgICBcImdldFwiOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfc3RlcFNpemU7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBcInNldFwiOiBmdW5jdGlvbiAobikge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWlzRmluaXRlKG4pIHx8IG4gPCAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyAoXCJJbnZhbGlkIHN0ZXAgc2l6ZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBfc3RlcFNpemUgPSBuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIE51bWJlclBhcmFtZXRlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFBsdWdpblBhcmFtZXRlci5wcm90b3R5cGUpO1xuICAgIE51bWJlclBhcmFtZXRlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBOdW1iZXJQYXJhbWV0ZXI7XG5cbiAgICBmdW5jdGlvbiBTdHJpbmdQYXJhbWV0ZXIob3duZXIsIG5hbWUsIGRlZmF1bHRWYWx1ZSwgbWF4TGVuZ3RoKSB7XG4gICAgICAgIFBsdWdpblBhcmFtZXRlci5jYWxsKHRoaXMsIG93bmVyLCBuYW1lLCBcIlN0cmluZ1wiKTtcbiAgICAgICAgdmFyIF92YWx1ZSA9IGRlZmF1bHRWYWx1ZTtcblxuICAgICAgICBmdW5jdGlvbiBhZGRBY3Rpb24odikge1xuICAgICAgICAgICAgdmFyIGVudHJ5ID0ge1xuICAgICAgICAgICAgICAgICd0aW1lJzogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgICAndmFsdWUnOiB2XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5hY3Rpb25MaXN0LnB1c2goZW50cnkpO1xuICAgICAgICB9XG5cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcywge1xuICAgICAgICAgICAgXCJkZXN0cm95XCI6IHtcbiAgICAgICAgICAgICAgICBcInZhbHVlXCI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgb3duZXIgPSBuYW1lID0gZGVmYXVsdFZhbHVlID0gbWF4TGVuZ3RoID0gX3ZhbHVlID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcIm1heExlbmd0aFwiOiB7XG4gICAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiBtYXhMZW5ndGhcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcImRlZmF1bHRWYWx1ZVwiOiB7XG4gICAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiBkZWZhdWx0VmFsdWVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcInZhbHVlXCI6IHtcbiAgICAgICAgICAgICAgICBcImdldFwiOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmJvdW5kQXVkaW9QYXJhbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudHJhbnNsYXRlKHRoaXMuYm91bmRBdWRpb1BhcmFtLnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZhbHVlO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXCJzZXRcIjogZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1heExlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHYubGVuZ3RoID4gbWF4TGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgKFwiU3RyaW5nIGxvbmdlciB0aGFuIFwiICsgbWF4TGVuZ3RoICsgXCIgY2hhcmFjdGVyc1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5ib3VuZEF1ZGlvUGFyYW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYm91bmRBdWRpb1BhcmFtLnZhbHVlID0gdGhpcy51cGRhdGUodik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKF92YWx1ZSAhPT0gdikge1xuICAgICAgICAgICAgICAgICAgICAgICAgX3ZhbHVlID0gdjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlID0gbmV3IEV2ZW50KFwicGFyYW1ldGVyc2V0XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRUYXJnZXQuZGlzcGF0Y2hFdmVudChlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXIoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBTdHJpbmdQYXJhbWV0ZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShQbHVnaW5QYXJhbWV0ZXIucHJvdG90eXBlKTtcbiAgICBTdHJpbmdQYXJhbWV0ZXIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gU3RyaW5nUGFyYW1ldGVyO1xuXG4gICAgZnVuY3Rpb24gQnV0dG9uUGFyYW1ldGVyKG93bmVyLCBuYW1lKSB7XG4gICAgICAgIFBsdWdpblBhcmFtZXRlci5jYWxsKHRoaXMsIG93bmVyLCBuYW1lLCBcIkJ1dHRvblwiKTtcbiAgICAgICAgdmFyIG9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7fTtcblxuICAgICAgICBmdW5jdGlvbiBhZGRBY3Rpb24odikge1xuICAgICAgICAgICAgdmFyIGVudHJ5ID0ge1xuICAgICAgICAgICAgICAgICd0aW1lJzogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgICAndmFsdWUnOiBcImNsaWNrZWRcIlxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uTGlzdC5wdXNoKGVudHJ5KTtcbiAgICAgICAgfVxuXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMsIHtcbiAgICAgICAgICAgIFwiZGVzdHJveVwiOiB7XG4gICAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIG93bmVyID0gbmFtZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJvbmNsaWNrXCI6IHtcbiAgICAgICAgICAgICAgICBcImdldFwiOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvbmNsaWNrO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXCJzZXRcIjogZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBmICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IChcIm9uY2xpY2sgbXVzdCBiZSBhIGZ1bmN0aW9uXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG9uY2xpY2sgPSBmO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIEJ1dHRvblBhcmFtZXRlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFBsdWdpblBhcmFtZXRlci5wcm90b3R5cGUpO1xuICAgIEJ1dHRvblBhcmFtZXRlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBCdXR0b25QYXJhbWV0ZXI7XG5cbiAgICBmdW5jdGlvbiBTd2l0Y2hQYXJhbWV0ZXIob3duZXIsIG5hbWUsIGRlZmF1bHRWYWx1ZSwgbWluU3RhdGUsIG1heFN0YXRlKSB7XG4gICAgICAgIFBsdWdpblBhcmFtZXRlci5jYWxsKHRoaXMsIG93bmVyLCBuYW1lLCBcIkJ1dHRvblwiKTtcbiAgICAgICAgdmFyIG9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7fTtcbiAgICAgICAgdmFyIF92YWx1ZSA9IGRlZmF1bHRWYWx1ZTtcblxuICAgICAgICBmdW5jdGlvbiBhZGRBY3Rpb24odikge1xuICAgICAgICAgICAgdmFyIGVudHJ5ID0ge1xuICAgICAgICAgICAgICAgICd0aW1lJzogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgICAndmFsdWUnOiB2XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5hY3Rpb25MaXN0LnB1c2goZW50cnkpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc2V0Vih2KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5ib3VuZEF1ZGlvUGFyYW0pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmJvdW5kQXVkaW9QYXJhbS52YWx1ZSA9IHRoaXMudXBkYXRlKHYpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYWRkQWN0aW9uLmNhbGwodGhpcywgdik7XG4gICAgICAgICAgICBpZiAoX3ZhbHVlICE9PSB2KSB7XG4gICAgICAgICAgICAgICAgX3ZhbHVlID0gdjtcbiAgICAgICAgICAgICAgICB2YXIgZSA9IG5ldyBFdmVudChcInBhcmFtZXRlcnNldFwiKTtcbiAgICAgICAgICAgICAgICBldmVudFRhcmdldC5kaXNwYXRjaEV2ZW50KGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCk7XG4gICAgICAgICAgICByZXR1cm4gdjtcbiAgICAgICAgfVxuXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMsIHtcbiAgICAgICAgICAgIFwiZGVzdHJveVwiOiB7XG4gICAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIG93bmVyID0gbmFtZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJkZWZhdWx0VmFsdWVcIjoge1xuICAgICAgICAgICAgICAgIFwidmFsdWVcIjogZGVmYXVsdFZhbHVlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJtaW5TdGF0ZVwiOiB7XG4gICAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiBtaW5TdGF0ZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwibWF4U3RhdGVcIjoge1xuICAgICAgICAgICAgICAgIFwidmFsdWVcIjogbWF4U3RhdGVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcInZhbHVlXCI6IHtcbiAgICAgICAgICAgICAgICBcImdldFwiOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmJvdW5kQXVkaW9QYXJhbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudHJhbnNsYXRlKHRoaXMuYm91bmRBdWRpb1BhcmFtLnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3ZhbHVlO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXCJzZXRcIjogZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHYgPCBtaW5TdGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgKFwiU2V0IHZhbHVlIGlzIGxlc3MgdGhhbiBcIiArIG1pblN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodiA+IG1heFN0YXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyAoXCJTZXQgdmFsdWUgaXMgZ3JlYXRlciB0aGFuIFwiICsgbWF4U3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzZXRWLmNhbGwodGhpcywgdik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwiaW5jcmVtZW50XCI6IHtcbiAgICAgICAgICAgICAgICBcInZhbHVlXCI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHYgPSBfdmFsdWUgKyAxO1xuICAgICAgICAgICAgICAgICAgICBpZiAodiA+IG1heFN0YXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2ID0gbWluU3RhdGU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNldFYuY2FsbCh0aGlzLCB2KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJkZWNyZW1lbnRcIjoge1xuICAgICAgICAgICAgICAgIFwidmFsdWVcIjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdiA9IF92YWx1ZSAtIDE7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2IDwgbWluU3RhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHYgPSBtYXhTdGF0ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2V0Vi5jYWxsKHRoaXMsIHYpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIFN3aXRjaFBhcmFtZXRlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFBsdWdpblBhcmFtZXRlci5wcm90b3R5cGUpO1xuICAgIFN3aXRjaFBhcmFtZXRlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBTd2l0Y2hQYXJhbWV0ZXI7XG5cbiAgICBmdW5jdGlvbiBMaXN0UGFyYW1ldGVyKG93bmVyLCBuYW1lLCBkZWZhdWx0VmFsdWUsIGxpc3RPZlZhbHVlcykge1xuICAgICAgICBQbHVnaW5QYXJhbWV0ZXIuY2FsbCh0aGlzLCBvd25lciwgbmFtZSwgXCJCdXR0b25cIik7XG4gICAgICAgIHZhciBvbmNsaWNrID0gZnVuY3Rpb24gKCkge307XG4gICAgICAgIHZhciBfaW5kZXggPSBsaXN0T2ZWYWx1ZXMuaW5kZXhPZihkZWZhdWx0VmFsdWUpO1xuXG4gICAgICAgIGZ1bmN0aW9uIGFkZEFjdGlvbih2KSB7XG4gICAgICAgICAgICB2YXIgZW50cnkgPSB7XG4gICAgICAgICAgICAgICAgJ3RpbWUnOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IHZcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmFjdGlvbkxpc3QucHVzaChlbnRyeSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZXRWKHYpIHtcbiAgICAgICAgICAgIHZhciBpID0gbGlzdE9mVmFsdWVzLmluZGV4T2Yodik7XG4gICAgICAgICAgICBpZiAoaSA9PT0gdW5kZWZpbmVkIHx8IGkgPCAwKSB7XG4gICAgICAgICAgICAgICAgdGhyb3coXCJOb3QgaW4gbGlzdCByYW5nZVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLmJvdW5kQXVkaW9QYXJhbSkge1xuICAgICAgICAgICAgICAgIHRoaXMuYm91bmRBdWRpb1BhcmFtLnZhbHVlID0gdGhpcy51cGRhdGUodik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhZGRBY3Rpb24uY2FsbCh0aGlzLCB2KTtcbiAgICAgICAgICAgIGlmIChfaW5kZXggIT09IGkpIHtcbiAgICAgICAgICAgICAgICBfaW5kZXggPSBpO1xuICAgICAgICAgICAgICAgIHZhciBlID0gbmV3IEV2ZW50KFwicGFyYW1ldGVyc2V0XCIpO1xuICAgICAgICAgICAgICAgIGV2ZW50VGFyZ2V0LmRpc3BhdGNoRXZlbnQoZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoKTtcbiAgICAgICAgICAgIHJldHVybiBsaXN0T2ZWYWx1ZXNbX2luZGV4XTtcbiAgICAgICAgfVxuXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMsIHtcbiAgICAgICAgICAgIFwiZGVzdHJveVwiOiB7XG4gICAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIG93bmVyID0gbmFtZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJkZWZhdWx0VmFsdWVcIjoge1xuICAgICAgICAgICAgICAgIFwidmFsdWVcIjogZGVmYXVsdFZhbHVlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJsaXN0VmFsdWVzXCI6IHtcbiAgICAgICAgICAgICAgICBcImdldFwiOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGwgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgbGlzdE9mVmFsdWVzLmZvckVhY2goZnVuY3Rpb24odikge1xuICAgICAgICAgICAgICAgICAgICAgICAgbC5wdXNoKHYpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHY7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwidmFsdWVcIjoge1xuICAgICAgICAgICAgICAgIFwiZ2V0XCI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYm91bmRBdWRpb1BhcmFtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50cmFuc2xhdGUodGhpcy5ib3VuZEF1ZGlvUGFyYW0udmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBsaXN0T2ZWYWx1ZXNbX2luZGV4XTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIFwic2V0XCI6IGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2IDwgbWluU3RhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IChcIlNldCB2YWx1ZSBpcyBsZXNzIHRoYW4gXCIgKyBtaW5TdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHYgPiBtYXhTdGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgKFwiU2V0IHZhbHVlIGlzIGdyZWF0ZXIgdGhhbiBcIiArIG1heFN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2V0Vi5jYWxsKHRoaXMsIHYpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcImluY3JlbWVudFwiOiB7XG4gICAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB2ID0gX3ZhbHVlICsgMTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHYgPiBtYXhTdGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdiA9IG1pblN0YXRlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzZXRWLmNhbGwodGhpcywgdik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwiZGVjcmVtZW50XCI6IHtcbiAgICAgICAgICAgICAgICBcInZhbHVlXCI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHYgPSBfdmFsdWUgLSAxO1xuICAgICAgICAgICAgICAgICAgICBpZiAodiA8IG1pblN0YXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2ID0gbWF4U3RhdGU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNldFYuY2FsbCh0aGlzLCB2KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBMaXN0UGFyYW1ldGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoUGx1Z2luUGFyYW1ldGVyLnByb3RvdHlwZSk7XG4gICAgTGlzdFBhcmFtZXRlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBMaXN0UGFyYW1ldGVyO1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcywge1xuICAgICAgICAnY3JlYXRlTnVtYmVyUGFyYW1ldGVyJzoge1xuICAgICAgICAgICAgXCJ2YWx1ZVwiOiBmdW5jdGlvbiAobmFtZSwgZGVmYXVsdFZhbHVlLCBtaW5pbXVtLCBtYXhpbXVtKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBuYW1lICE9PSBcInN0cmluZ1wiIHx8IHR5cGVvZiBkZWZhdWx0VmFsdWUgIT09IFwibnVtYmVyXCIgfHwgKG1pbmltdW0gIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgbWluaW11bSAhPT0gXCJudW1iZXJcIikgfHwgKG1heGltdW0gIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgbWF4aW11bSAhPT0gXCJudW1iZXJcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgKFwiSW52bGlkIGNvbnN0cnVjdG9yXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZmluZFBhcmFtZXRlckluZGV4KG5hbWUpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyAoXCJQYXJhbWV0ZXIgd2l0aCBuYW1lICdcIiArIG5hbWUgKyBcIicgYWxyZWFkeSBleGlzdHNcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBwYXJhbSA9IG5ldyBOdW1iZXJQYXJhbWV0ZXIob3duZXIsIG5hbWUsIGRlZmF1bHRWYWx1ZSwgbWluaW11bSwgbWF4aW11bSk7XG4gICAgICAgICAgICAgICAgYWRkUGFyYW1ldGVyKHBhcmFtKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyYW07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgICdjcmVhdGVTdHJpbmdQYXJhbWV0ZXInOiB7XG4gICAgICAgICAgICBcInZhbHVlXCI6IGZ1bmN0aW9uIChuYW1lLCBkZWZhdWx0VmFsdWUsIG1heExlbmd0aCkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbmFtZSAhPT0gXCJzdHJpbmdcIiB8fCB0eXBlb2YgZGVmYXVsdFZhbHVlICE9PSBcInN0cmluZ1wiIHx8IChtYXhMZW5ndGggIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgbWF4TGVuZ3RoICE9PSBcIm51bWJlclwiKSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyAoXCJJbnZsaWQgY29uc3RydWN0b3JcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChmaW5kUGFyYW1ldGVySW5kZXgobmFtZSkgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IChcIlBhcmFtZXRlciB3aXRoIG5hbWUgJ1wiICsgbmFtZSArIFwiJyBhbHJlYWR5IGV4aXN0c1wiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHBhcmFtID0gbmV3IFN0cmluZ1BhcmFtZXRlcihvd25lciwgbmFtZSwgZGVmYXVsdFZhbHVlLCBtYXhMZW5ndGgpO1xuICAgICAgICAgICAgICAgIGFkZFBhcmFtZXRlcihwYXJhbSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcmFtO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICAnY3JlYXRlQnV0dG9uUGFyYW1ldGVyJzoge1xuICAgICAgICAgICAgXCJ2YWx1ZVwiOiBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbmFtZSAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyAoXCJJbnZhbGlkIGNvbnN0cnVjdG9yXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZmluZFBhcmFtZXRlckluZGV4KG5hbWUpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyAoXCJQYXJhbWV0ZXIgd2l0aCBuYW1lICdcIiArIG5hbWUgKyBcIicgYWxyZWFkeSBleGlzdHNcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBwYXJhbSA9IG5ldyBCdXR0b25QYXJhbWV0ZXIob3duZXIsIG5hbWUpO1xuICAgICAgICAgICAgICAgIGFkZFBhcmFtZXRlcihwYXJhbSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcmFtO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICAnY3JlYXRlU3dpdGNoUGFyYW1ldGVyJzoge1xuICAgICAgICAgICAgXCJ2YWx1ZVwiOiBmdW5jdGlvbiAobmFtZSwgZGVmYXVsdFZhbHVlLCBtaW5TdGF0ZSwgbWF4U3RhdGUpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG5hbWUgIT09IFwic3RyaW5nXCIgfHwgdHlwZW9mIGRlZmF1bHRWYWx1ZSAhPT0gXCJudW1iZXJcIiB8fCB0eXBlb2YgbWluU3RhdGUgIT09IFwibnVtYmVyXCIgfHwgdHlwZW9mIG1heFN0YXRlICE9PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IChcIkludmxpZCBjb25zdHJ1Y3RvclwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGZpbmRQYXJhbWV0ZXJJbmRleChuYW1lKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgKFwiUGFyYW1ldGVyIHdpdGggbmFtZSAnXCIgKyBuYW1lICsgXCInIGFscmVhZHkgZXhpc3RzXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgcGFyYW0gPSBuZXcgU3dpdGNoUGFyYW1ldGVyKG93bmVyLCBuYW1lLCBkZWZhdWx0VmFsdWUsIG1pblN0YXRlLCBtYXhTdGF0ZSk7XG4gICAgICAgICAgICAgICAgYWRkUGFyYW1ldGVyKHBhcmFtKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyYW07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgICdjcmVhdGVQYXJhbWV0ZXInOiB7XG4gICAgICAgICAgICAndmFsdWUnOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgKFwiVGhpcyBmdW5jdGlvbiBpcyBub3cgZGVwcmVjYXRlZFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgJ2dldFBhcmFtZXRlck5hbWUnOiB7XG4gICAgICAgICAgICAndmFsdWUnOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIG5hbWVzID0gW10sXG4gICAgICAgICAgICAgICAgICAgIGk7XG4gICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHBhcmFtZXRlckxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZXMucHVzaChwYXJhbWV0ZXJMaXN0W2ldLm5hbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbmFtZXM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgICdnZXRQYXJhbWV0ZXJCeU5hbWUnOiB7XG4gICAgICAgICAgICAndmFsdWUnOiBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmaW5kUGFyYW1ldGVyKG5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICAnZ2V0UGFyYW1ldGVyT2JqZWN0Jzoge1xuICAgICAgICAgICAgJ3ZhbHVlJzogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBidWlsZFBhcmFtZXRlck9iamVjdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICAnZ2V0UGFyYW1ldGVyTmFtZXMnOiB7XG4gICAgICAgICAgICAndmFsdWUnOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGwgPSBbXTtcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJMaXN0LmZvckVhY2goZnVuY3Rpb24gKGEpIHtcbiAgICAgICAgICAgICAgICAgICAgbC5wdXNoKGEubmFtZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgICdzZXRQYXJhbWV0ZXJCeU5hbWUnOiB7XG4gICAgICAgICAgICAndmFsdWUnOiBmdW5jdGlvbiAobiwgdikge1xuICAgICAgICAgICAgICAgIHZhciBwYXJhbWV0ZXIgPSBmaW5kUGFyYW1ldGVyKG4pO1xuICAgICAgICAgICAgICAgIGlmICghcGFyYW1ldGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcGFyYW1ldGVyLnZhbHVlID0gdjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgJ2RlbGV0ZVBhcmFtZXRlcic6IHtcbiAgICAgICAgICAgICd2YWx1ZSc6IGZ1bmN0aW9uIChvKSB7XG4gICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gcGFyYW1ldGVyTGlzdC5maW5kSW5kZXgoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUgPT09IG87XG4gICAgICAgICAgICAgICAgfSwgbyk7XG4gICAgICAgICAgICAgICAgaWYgKGluZGV4ID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRG9lcyBleGlzdFxuICAgICAgICAgICAgICAgICAgICBwYXJhbWV0ZXJMaXN0LnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgICAgIG8uZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICAnZGVsZXRlQWxsUGFyYW1ldGVycyc6IHtcbiAgICAgICAgICAgICd2YWx1ZSc6IGZ1bmN0aW9uIChvKSB7XG4gICAgICAgICAgICAgICAgcGFyYW1ldGVyTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGUuZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHBhcmFtZXRlckxpc3QgPSBbXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgJ3NldFBhcmFtZXRlcnNCeU9iamVjdCc6IHtcbiAgICAgICAgICAgICd2YWx1ZSc6IGZ1bmN0aW9uIChvYmplY3QpIHtcbiAgICAgICAgICAgICAgICB2YXIga2V5O1xuICAgICAgICAgICAgICAgIGZvciAoa2V5IGluIG9iamVjdCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAob2JqZWN0Lmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb2JqZWN0W2tleV0gPT0gXCJvYmplY3RcIikge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRQYXJhbWV0ZXJCeU5hbWUoa2V5LCBvYmplY3Rba2V5XS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBvYmplY3Rba2V5XSA9PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRQYXJhbWV0ZXJCeU5hbWUoa2V5LCBvYmplY3Rba2V5XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IChcIkNhbm5vdCBzZXQgXCIgKyBrZXkgKyBcIjogTm90IGEgdmFsaWQgb2JqZWN0XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICAncGFyYW1ldGVycyc6IHtcbiAgICAgICAgICAgICdnZXQnOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGJ1aWxkUGFyYW1ldGVyT2JqZWN0KCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ3NldCc6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyAoXCJDYW5ub3Qgc2V0LCB1c2UgLnNldFBhcmFtZXRlckJ5Li4uKClcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbn07XG5cbnZhciBQbHVnaW5GZWF0dXJlSW50ZXJmYWNlID0gZnVuY3Rpb24gKEJhc2VQbHVnaW5JbnN0YW5jZSkge1xuICAgIHRoaXMucGx1Z2luID0gQmFzZVBsdWdpbkluc3RhbmNlO1xuICAgIHRoaXMuUmVjZWl2ZXIgPSBuZXcgUGx1Z2luRmVhdHVyZUludGVyZmFjZVJlY2VpdmVyKHRoaXMsIEJhc2VQbHVnaW5JbnN0YW5jZS5mYWN0b3J5LkZlYXR1cmVNYXApO1xuICAgIHRoaXMuU2VuZGVyID0gbmV3IFBsdWdpbkZlYXR1cmVJbnRlcmZhY2VTZW5kZXIodGhpcywgQmFzZVBsdWdpbkluc3RhbmNlLmZhY3RvcnkuRmVhdHVyZU1hcCk7XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJvbmZlYXR1cmVzXCIsIHtcbiAgICAgICAgJ2dldCc6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLlJlY2VpdmVyLm9uZmVhdHVyZXM7XG4gICAgICAgIH0sXG4gICAgICAgICdzZXQnOiBmdW5jdGlvbiAoZnVuYykge1xuICAgICAgICAgICAgdGhpcy5SZWNlaXZlci5vbmZlYXR1cmVzID0gZnVuYztcbiAgICAgICAgICAgIHJldHVybiBmdW5jO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xudmFyIFBsdWdpbkZlYXR1cmVJbnRlcmZhY2VSZWNlaXZlciA9IGZ1bmN0aW9uIChGZWF0dXJlSW50ZXJmYWNlSW5zdGFuY2UsIEZhY3RvcnlGZWF0dXJlTWFwKSB7XG4gICAgZnVuY3Rpb24gY2hlY2tGZWF0dXJlQXJncyhzb3VyY2UsIGZlYXR1cmVPYmplY3QpIHtcbiAgICAgICAgaWYgKHNvdXJjZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyAoXCJTb3VyY2UgcGx1Z2luIG11c3QgYmUgZGVmaW5lZFwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZmVhdHVyZU9iamVjdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyAoXCJGZWF0dXJlT2JqZWN0IG11c3QgYmUgZGVmaW5lZFwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIGZlYXR1cmVPYmplY3Qub3V0cHV0SW5kZXggIT09IFwibnVtYmVyXCIgfHwgdHlwZW9mIGZlYXR1cmVPYmplY3QuZnJhbWVTaXplICE9PSBcIm51bWJlclwiIHx8IHR5cGVvZiBmZWF0dXJlT2JqZWN0LmZlYXR1cmVzICE9PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICB0aHJvdyAoXCJNYWxmb3JtZWQgZmVhdHVyZU9iamVjdFwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgdmFyIGNfZmVhdHVyZXMgPSBmdW5jdGlvbiAoKSB7fTtcbiAgICB0aGlzLnJlcXVlc3RGZWF0dXJlcyA9IGZ1bmN0aW9uIChmZWF0dXJlTGlzdCkge1xuICAgICAgICB2YXIgaTtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGZlYXR1cmVMaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLnJlcXVlc3RGZWF0dXJlc0Zyb21QbHVnaW4oZmVhdHVyZUxpc3RbaV0ucGx1Z2luLCB7XG4gICAgICAgICAgICAgICAgJ291dHB1dEluZGV4JzogZmVhdHVyZUxpc3RbaV0ub3V0cHV0SW5kZXgsXG4gICAgICAgICAgICAgICAgJ2ZyYW1lU2l6ZSc6IGZlYXR1cmVMaXN0W2ldLmZyYW1lU2l6ZSxcbiAgICAgICAgICAgICAgICAnZmVhdHVyZXMnOiBmZWF0dXJlTGlzdFtpXS5mZWF0dXJlc1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHRoaXMucmVxdWVzdEZlYXR1cmVzRnJvbVBsdWdpbiA9IGZ1bmN0aW9uIChzb3VyY2UsIGZlYXR1cmVPYmplY3QpIHtcbiAgICAgICAgY2hlY2tGZWF0dXJlQXJncyhzb3VyY2UsIGZlYXR1cmVPYmplY3QpO1xuICAgICAgICBGYWN0b3J5RmVhdHVyZU1hcC5yZXF1ZXN0RmVhdHVyZXMoRmVhdHVyZUludGVyZmFjZUluc3RhbmNlLnBsdWdpbiwgc291cmNlLCBmZWF0dXJlT2JqZWN0KTtcbiAgICB9O1xuICAgIHRoaXMuY2FuY2VsRmVhdHVyZXNGcm9tUGx1Z2luID0gZnVuY3Rpb24gKHNvdXJjZSwgZmVhdHVyZU9iamVjdCkge1xuICAgICAgICBjaGVja0ZlYXR1cmVBcmdzKHNvdXJjZSwgZmVhdHVyZU9iamVjdCk7XG4gICAgICAgIEZhY3RvcnlGZWF0dXJlTWFwLmRlbGV0ZUZlYXR1cmVzKEZlYXR1cmVJbnRlcmZhY2VJbnN0YW5jZS5wbHVnaW4sIHNvdXJjZSwgZmVhdHVyZU9iamVjdCk7XG4gICAgfTtcbiAgICB0aGlzLmNhbmNlbEFsbEZlYXR1cmVzRnJvbVBsdWdpbiA9IGZ1bmN0aW9uIChzb3VyY2UpIHtcbiAgICAgICAgaWYgKHNvdXJjZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyAoXCJTb3VyY2UgcGx1Z2luIG11c3QgYmUgZGVmaW5lZFwiKTtcbiAgICAgICAgfVxuICAgICAgICBGYWN0b3J5RmVhdHVyZU1hcC5kZWxldGVGZWF0dXJlcyhGZWF0dXJlSW50ZXJmYWNlSW5zdGFuY2UucGx1Z2luLCBzb3VyY2UpO1xuICAgIH07XG4gICAgdGhpcy5jYW5jZWxBbGxGZWF0dXJlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgRmFjdG9yeUZlYXR1cmVNYXAuZGVsZXRlRmVhdHVyZXMoRmVhdHVyZUludGVyZmFjZUluc3RhbmNlLnBsdWdpbik7XG4gICAgfTtcblxuICAgIHRoaXMucG9zdEZlYXR1cmVzID0gZnVuY3Rpb24gKE1lc3NhZ2UpIHtcbiAgICAgICAgLypcbiAgICAgICAgICAgIENhbGxlZCBieSB0aGUgUGx1Z2luIEZhY3Rvcnkgd2l0aCB0aGUgZmVhdHVyZSBtZXNzYWdlXG4gICAgICAgICAgICBtZXNzYWdlID0ge1xuICAgICAgICAgICAgICAgICdwbHVnaW4nOiBzb3VyY2VQbHVnaW5JbnN0YW5jZSxcbiAgICAgICAgICAgICAgICAnb3V0cHV0SW5kZXgnOiBvdXRwdXRJbmRleCxcbiAgICAgICAgICAgICAgICAnZnJhbWVTaXplJzogZnJhbWVTaXplLFxuICAgICAgICAgICAgICAgICdmZWF0dXJlcyc6IHt9IEpTLVh0cmFjdCBmZWF0dXJlIHJlc3VsdHMgb2JqZWN0XG4gICAgICAgICAgICB9XG4gICAgICAgICovXG4gICAgICAgIGlmICh0eXBlb2YgY19mZWF0dXJlcyA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICBjX2ZlYXR1cmVzKE1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm9uZmVhdHVyZXNcIiwge1xuICAgICAgICAnZ2V0JzogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGNfZmVhdHVyZXM7XG4gICAgICAgIH0sXG4gICAgICAgICdzZXQnOiBmdW5jdGlvbiAoZnVuYykge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBmdW5jID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICBjX2ZlYXR1cmVzID0gZnVuYztcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG59O1xudmFyIFBsdWdpbkZlYXR1cmVJbnRlcmZhY2VTZW5kZXIgPSBmdW5jdGlvbiAoRmVhdHVyZUludGVyZmFjZUluc3RhbmNlLCBGYWN0b3J5RmVhdHVyZU1hcCkge1xuICAgIHZhciBPdXRwdXROb2RlID0gZnVuY3Rpb24gKHBhcmVudCwgb3V0cHV0LCBpbmRleCkge1xuICAgICAgICB2YXIgZXh0cmFjdG9ycyA9IFtdO1xuICAgICAgICB2YXIgRXh0cmFjdG9yID0gZnVuY3Rpb24gKG91dHB1dCwgZnJhbWVTaXplKSB7XG4gICAgICAgICAgICB0aGlzLmV4dHJhY3RvciA9IEZlYXR1cmVJbnRlcmZhY2VJbnN0YW5jZS5wbHVnaW4uZmFjdG9yeS5jb250ZXh0LmNyZWF0ZUFuYWx5c2VyKCk7XG4gICAgICAgICAgICB0aGlzLmV4dHJhY3Rvci5mZnRTaXplID0gZnJhbWVTaXplO1xuICAgICAgICAgICAgb3V0cHV0LmNvbm5lY3QodGhpcy5leHRyYWN0b3IpO1xuICAgICAgICAgICAgdGhpcy5mZWF0dXJlcyA9IFtdO1xuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZnJhbWVTaXplXCIsIHtcbiAgICAgICAgICAgICAgICAndmFsdWUnOiBmcmFtZVNpemVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLypcbiAgICAgICAgICAgIGZ1bmN0aW9uIHJlY3Vyc2l2ZVByb2Nlc3NpbmcoYmFzZSwgbGlzdCkge1xuICAgICAgICAgICAgICAgIHZhciBsID0gbGlzdC5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgIGksIGVudHJ5O1xuICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgZW50cnkgPSBsaXN0W2ldO1xuICAgICAgICAgICAgICAgICAgICBiYXNlW2VudHJ5Lm5hbWVdLmFwcGx5KGJhc2UsIGVudHJ5LnBhcmFtZXRlcnMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZW50cnkuZmVhdHVyZXMgJiYgZW50cnkuZmVhdHVyZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVjdXJzaXZlUHJvY2Vzc2luZyhiYXNlLnJlc3VsdFtlbnRyeS5uYW1lXSwgZW50cnkuZmVhdHVyZXMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHZhciByZWN1cnNpdmVQcm9jZXNzaW5nID0gdGhpcy5mYWN0b3J5LnJlY3Vyc2l2ZVByb2Nlc3Npbmc7XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIG9uYXVkaW9jYWxsYmFjayhkYXRhKSB7XG4gICAgICAgICAgICAgICAgLy90aGlzID09PSBFeHRyYWN0b3JcbiAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgJ251bWJlck9mQ2hhbm5lbHMnOiAxLFxuICAgICAgICAgICAgICAgICAgICAncmVzdWx0cyc6IFtdXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICByZWN1cnNpdmVQcm9jZXNzaW5nKGRhdGEsIHRoaXMuZmVhdHVyZXMpO1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UucmVzdWx0c1swXSA9IHtcbiAgICAgICAgICAgICAgICAgICAgJ2NoYW5uZWwnOiAwLFxuICAgICAgICAgICAgICAgICAgICAncmVzdWx0cyc6IEpTT04ucGFyc2UoZGF0YS50b0pTT04oKSlcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoaXMucG9zdEZlYXR1cmVzKGRhdGEubGVuZ3RoLCBtZXNzYWdlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5zZXRGZWF0dXJlcyA9IGZ1bmN0aW9uIChmZWF0dXJlTGlzdCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZmVhdHVyZXMgPSBmZWF0dXJlTGlzdDtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5mZWF0dXJlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5leHRyYWN0b3IuY2xlYXJDYWxsYmFjaygpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXh0cmFjdG9yLmZyYW1lQ2FsbGJhY2sob25hdWRpb2NhbGxiYWNrLCB0aGlzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICB2YXIgV29ya2VyRXh0cmFjdG9yID0gZnVuY3Rpb24gKG91dHB1dCwgZnJhbWVTaXplKSB7XG4gICAgICAgICAgICBmdW5jdGlvbiBvbmF1ZGlvY2FsbGJhY2soZSkge1xuICAgICAgICAgICAgICAgIHZhciBjLCBmcmFtZXMgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKGMgPSAwOyBjIDwgZS5pbnB1dEJ1ZmZlci5udW1iZXJPZkNoYW5uZWxzOyBjKyspIHtcbiAgICAgICAgICAgICAgICAgICAgZnJhbWVzW2NdID0gZS5pbnB1dEJ1ZmZlci5nZXRDaGFubmVsRGF0YShjKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKHtcbiAgICAgICAgICAgICAgICAgICAgJ3N0YXRlJzogMixcbiAgICAgICAgICAgICAgICAgICAgJ2ZyYW1lcyc6IGZyYW1lc1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiByZXNwb25zZShtc2cpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBvc3RGZWF0dXJlcyhmcmFtZVNpemUsIG1zZy5kYXRhLnJlc3BvbnNlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHdvcmtlciA9IG5ldyBXb3JrZXIoXCJqc2FwL2ZlYXR1cmUtd29ya2VyLmpzXCIpO1xuICAgICAgICAgICAgd29ya2VyLm9uZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB0aGlzLnNldEZlYXR1cmVzID0gZnVuY3Rpb24gKGZlYXR1cmVMaXN0KSB7XG4gICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICAgICAgICAgIHZhciBjb25maWdNZXNzYWdlID0ge1xuICAgICAgICAgICAgICAgICAgICAnc3RhdGUnOiAxLFxuICAgICAgICAgICAgICAgICAgICAnc2FtcGxlUmF0ZSc6IEZlYXR1cmVJbnRlcmZhY2VJbnN0YW5jZS5wbHVnaW4uZmFjdG9yeS5jb250ZXh0LnNhbXBsZVJhdGUsXG4gICAgICAgICAgICAgICAgICAgICdmZWF0dXJlTGlzdCc6IGZlYXR1cmVMaXN0LFxuICAgICAgICAgICAgICAgICAgICAnbnVtQ2hhbm5lbHMnOiBvdXRwdXQubnVtYmVyT2ZPdXRwdXRzLFxuICAgICAgICAgICAgICAgICAgICAnZnJhbWVTaXplJzogdGhpcy5mcmFtZVNpemVcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoaXMuZmVhdHVyZXMgPSBmZWF0dXJlTGlzdDtcbiAgICAgICAgICAgICAgICBpZiAoZmVhdHVyZUxpc3QgJiYgZmVhdHVyZUxpc3QubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICB3b3JrZXIub25tZXNzYWdlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLmRhdGEuc3RhdGUgPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3b3JrZXIub25tZXNzYWdlID0gcmVzcG9uc2UuYmluZChzZWxmKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmV4dHJhY3Rvci5vbmF1ZGlvcHJvY2VzcyA9IG9uYXVkaW9jYWxsYmFjay5iaW5kKHNlbGYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3b3JrZXIucG9zdE1lc3NhZ2UoY29uZmlnTWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAnc3RhdGUnOiAwXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXh0cmFjdG9yLm9uYXVkaW9wcm9jZXNzID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdGhpcy5leHRyYWN0b3IgPSBGZWF0dXJlSW50ZXJmYWNlSW5zdGFuY2UucGx1Z2luLmZhY3RvcnkuY29udGV4dC5jcmVhdGVTY3JpcHRQcm9jZXNzb3IoZnJhbWVTaXplLCBvdXRwdXQubnVtYmVyT2ZPdXRwdXRzLCAxKTtcbiAgICAgICAgICAgIG91dHB1dC5jb25uZWN0KHRoaXMuZXh0cmFjdG9yKTtcbiAgICAgICAgICAgIHRoaXMuZXh0cmFjdG9yLmNvbm5lY3QoRmVhdHVyZUludGVyZmFjZUluc3RhbmNlLnBsdWdpbi5mYWN0b3J5LmNvbnRleHQuZGVzdGluYXRpb24pO1xuXG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJmcmFtZVNpemVcIiwge1xuICAgICAgICAgICAgICAgICd2YWx1ZSc6IGZyYW1lU2l6ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuYWRkRXh0cmFjdG9yID0gZnVuY3Rpb24gKGZyYW1lU2l6ZSkge1xuICAgICAgICAgICAgdmFyIG9iajtcbiAgICAgICAgICAgIGlmICh3aW5kb3cuV29ya2VyKSB7XG4gICAgICAgICAgICAgICAgb2JqID0gbmV3IFdvcmtlckV4dHJhY3RvcihvdXRwdXQsIGZyYW1lU2l6ZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG9iaiA9IG5ldyBFeHRyYWN0b3Iob3V0cHV0LCBmcmFtZVNpemUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZXh0cmFjdG9ycy5wdXNoKG9iaik7XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBcInBvc3RGZWF0dXJlc1wiLCB7XG4gICAgICAgICAgICAgICAgJ3ZhbHVlJzogZnVuY3Rpb24gKGZyYW1lU2l6ZSwgcmVzdWx0c0pTT04pIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9iaiA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdvdXRwdXRJbmRleCc6IGluZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2ZyYW1lU2l6ZSc6IGZyYW1lU2l6ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdyZXN1bHRzJzogcmVzdWx0c0pTT05cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3N0RmVhdHVyZXMob2JqKTtcbiAgICAgICAgICAgICAgICB9LmJpbmQodGhpcylcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIG9iajtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5maW5kRXh0cmFjdG9yID0gZnVuY3Rpb24gKGZyYW1lU2l6ZSkge1xuICAgICAgICAgICAgdmFyIGNoZWNrID0gZnJhbWVTaXplO1xuICAgICAgICAgICAgcmV0dXJuIGV4dHJhY3RvcnMuZmluZChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIC8vIFRoaXMgTVVTVCBiZSA9PT0gTk9UID09PVxuICAgICAgICAgICAgICAgIHJldHVybiBlLmZyYW1lU2l6ZSA9PT0gY2hlY2s7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5kZWxldGVFeHRyYWN0b3IgPSBmdW5jdGlvbiAoZnJhbWVTaXplKSB7fTtcbiAgICB9O1xuICAgIHZhciBvdXRwdXROb2RlcyA9IFtdO1xuICAgIHRoaXMudXBkYXRlRmVhdHVyZXMgPSBmdW5jdGlvbiAoZmVhdHVyZU9iamVjdCkge1xuICAgICAgICAvLyBbXSBPdXRwdXQgLT4ge30gJ2ZyYW1lc2l6ZScgLT4ge30gJ2ZlYXR1cmVzJ1xuICAgICAgICB2YXIgbztcbiAgICAgICAgZm9yIChvID0gMDsgbyA8IGZlYXR1cmVPYmplY3QubGVuZ3RoOyBvKyspIHtcbiAgICAgICAgICAgIGlmIChvdXRwdXROb2Rlc1tvXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKG8gPiBGZWF0dXJlSW50ZXJmYWNlSW5zdGFuY2UucGx1Z2luLm51bU91dHB1dHMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgKFwiUmVxdWVzdGVkIGFuIG91dHB1dCB0aGF0IGRvZXMgbm90IGV4aXN0XCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBvdXRwdXROb2Rlc1tvXSA9IG5ldyBPdXRwdXROb2RlKEZlYXR1cmVJbnRlcmZhY2VJbnN0YW5jZS5wbHVnaW4sIEZlYXR1cmVJbnRlcmZhY2VJbnN0YW5jZS5wbHVnaW4ub3V0cHV0c1tvXSwgbyk7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG91dHB1dE5vZGVzW29dLCBcInBvc3RGZWF0dXJlc1wiLCB7XG4gICAgICAgICAgICAgICAgICAgICd2YWx1ZSc6IGZ1bmN0aW9uIChyZXN1bHRPYmplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucG9zdEZlYXR1cmVzKHJlc3VsdE9iamVjdCk7XG4gICAgICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHNpO1xuICAgICAgICAgICAgZm9yIChzaSA9IDA7IHNpIDwgZmVhdHVyZU9iamVjdFtvXS5sZW5ndGg7IHNpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgZXh0cmFjdG9yID0gb3V0cHV0Tm9kZXNbb10uZmluZEV4dHJhY3RvcihmZWF0dXJlT2JqZWN0W29dW3NpXS5mcmFtZVNpemUpO1xuICAgICAgICAgICAgICAgIGlmICghZXh0cmFjdG9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGV4dHJhY3RvciA9IG91dHB1dE5vZGVzW29dLmFkZEV4dHJhY3RvcihmZWF0dXJlT2JqZWN0W29dW3NpXS5mcmFtZVNpemUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBleHRyYWN0b3Iuc2V0RmVhdHVyZXMoZmVhdHVyZU9iamVjdFtvXVtzaV0uZmVhdHVyZUxpc3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMucG9zdEZlYXR1cmVzID0gZnVuY3Rpb24gKGZlYXR1cmVPYmplY3QpIHtcbiAgICAgICAgLypcbiAgICAgICAgICAgIENhbGxlZCBieSB0aGUgaW5kaXZpZHVhbCBleHRyYWN0b3IgaW5zdGFuY2VzOlxuICAgICAgICAgICAgZmVhdHVyZU9iamVjdCA9IHsnZnJhbWVTaXplJzogZnJhbWVTaXplLFxuICAgICAgICAgICAgJ291dHB1dEluZGV4Jzogb3V0cHV0SW5kZXgsXG4gICAgICAgICAgICAncmVzdWx0cyc6W119XG4gICAgICAgICovXG4gICAgICAgIEZlYXR1cmVJbnRlcmZhY2VJbnN0YW5jZS5wbHVnaW4uZmFjdG9yeS5GZWF0dXJlTWFwLnBvc3RGZWF0dXJlcyh7XG4gICAgICAgICAgICAncGx1Z2luJzogRmVhdHVyZUludGVyZmFjZUluc3RhbmNlLnBsdWdpbi5wbHVnaW5JbnN0YW5jZSxcbiAgICAgICAgICAgICdvdXRwdXRJbmRleCc6IGZlYXR1cmVPYmplY3Qub3V0cHV0SW5kZXgsXG4gICAgICAgICAgICAnZnJhbWVTaXplJzogZmVhdHVyZU9iamVjdC5mcmFtZVNpemUsXG4gICAgICAgICAgICAncmVzdWx0cyc6IGZlYXR1cmVPYmplY3QucmVzdWx0c1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgLy8gU2VuZCB0byBGYWN0b3J5XG4gICAgRmFjdG9yeUZlYXR1cmVNYXAuY3JlYXRlU291cmNlTWFwKHRoaXMsIEZlYXR1cmVJbnRlcmZhY2VJbnN0YW5jZS5wbHVnaW4ucGx1Z2luSW5zdGFuY2UpO1xufTtcblxuLypcbiAgICBUaGlzIGlzIGFuIG9wdGlvbmFsIG1vZHVsZSB3aGljaCB3aWxsIGF0dGVtcHQgdG8gY3JlYXRlIGEgZ3JhcGhpY2FsIGltcGxlbWVudGF0aW9uLlxuICAgIEFzIHdpdGggb3RoZXIgYXVkaW8gcGx1Z2lucyBmb3IgREFXcywgdGhlIEdVSSBpcyBhbiBvcHRpb25hbCBlbGVtZW50IHdoaWNoIGNhbiBiZSBhY2NlcHRlZCBvciByZWplY3RlZCBieSB0aGUgaG9zdC5cblxuICAgIFRoZSBhY3R1YWwgR1VJIGlzIGxhdW5jaGVkIGFzIGFuIDxpZnJhbWU+IGVsZW1lbnQgaW4gdGhlIGJyb3dzZXIgdG8ga2VlcCBlYWNoIHBsdWdpbiBpc29sYXRlZCBmcm9tIHRoZSByZXN0XG4qL1xuXG52YXIgUGx1Z2luVXNlckludGVyZmFjZSA9IGZ1bmN0aW9uIChCYXNlUGx1Z2luSW5zdGFuY2UsIHdpZHRoLCBoZWlnaHQpIHtcbiAgICBjb25zb2xlLmxvZyhcIkRFUFJFQ0FURUQhIVwiKTtcbiAgICBjb25zb2xlLmxvZyhcIlRoZSBjbGFzcyBQbHVnaW5Vc2VySW50ZXJmYWNlIGhhcyBiZWVuIGRlcHJlY2F0ZWRcIik7XG4gICAgY29uc29sZS5sb2coXCJQbGVhc2UgbG9vayBhdCB0aGUgZG9jdW1lbnRzIGZvciB0aGUgbmV3IG1ldGhvZHMgZm9yIGJ1aWxkaW5nIHBsdWdpbnNcIik7XG4gICAgdGhpcy5wcm9jZXNzb3IgPSBCYXNlUGx1Z2luSW5zdGFuY2U7XG4gICAgdGhpcy5yb290ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBpZiAod2lkdGggPiAwKSB7XG4gICAgICAgIHRoaXMucm9vdC5zdHlsZS53aWR0aCA9IHdpZHRoICsgXCJweFwiO1xuICAgIH1cbiAgICBpZiAoaGVpZ2h0ID4gMCkge1xuICAgICAgICB0aGlzLnJvb3Quc3R5bGUuaGVpZ2h0ID0gaGVpZ2h0ICsgXCJweFwiO1xuICAgIH1cbiAgICB0aGlzLmRpbSA9IHtcbiAgICAgICAgd2lkdGg6IHdpZHRoLFxuICAgICAgICBoZWlnaHQ6IGhlaWdodFxuICAgIH07XG4gICAgdGhpcy5pbnRlcnZhbEZ1bmN0aW9uID0gbnVsbDtcbiAgICB0aGlzLnVwZGF0ZUludGVydmFsID0gbnVsbDtcbiAgICB0aGlzLlBsdWdpblBhcmFtZXRlckludGVyZmFjZXMgPSBbXTtcblxuICAgIHZhciBQbHVnaW5QYXJhbWV0ZXJJbnRlcmZhY2VOb2RlID0gZnVuY3Rpb24gKERPTSwgUGx1Z2luUGFyYW1ldGVySW5zdGFuY2UsIHByb2Nlc3NvciwgZ3VpKSB7XG4gICAgICAgIHRoaXMuaW5wdXQgPSBET007XG4gICAgICAgIHRoaXMucHJvY2Vzc29yID0gcHJvY2Vzc29yO1xuICAgICAgICB0aGlzLkdVSSA9IGd1aTtcbiAgICAgICAgdGhpcy5BdWRpb1BhcmFtID0gUGx1Z2luUGFyYW1ldGVySW5zdGFuY2U7XG4gICAgICAgIHRoaXMuaGFuZGxlRXZlbnQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIHRoaXMuQXVkaW9QYXJhbS52YWx1ZSA9IHRoaXMuaW5wdXQudmFsdWU7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCB0aGlzKTtcbiAgICAgICAgdGhpcy5pbnB1dC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIHRoaXMpO1xuICAgICAgICB0aGlzLmlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzKTtcbiAgICB9O1xuXG4gICAgdGhpcy5jcmVhdGVQbHVnaW5QYXJhbWV0ZXJJbnRlcmZhY2VOb2RlID0gZnVuY3Rpb24gKERPTSwgUGx1Z2luUGFyYW1ldGVySW5zdGFuY2UpIHtcbiAgICAgICAgdmFyIG5vZGUgPSBuZXcgUGx1Z2luUGFyYW1ldGVySW50ZXJmYWNlTm9kZShET00sIFBsdWdpblBhcmFtZXRlckluc3RhbmNlLCB0aGlzLnByb2Nlc3NvciwgdGhpcyk7XG4gICAgICAgIHRoaXMuUGx1Z2luUGFyYW1ldGVySW50ZXJmYWNlcy5wdXNoKG5vZGUpO1xuICAgICAgICByZXR1cm4gbm9kZTtcbiAgICB9O1xuXG4gICAgdGhpcy51cGRhdGUgPSBmdW5jdGlvbiAoKSB7fTtcblxufTtcblxuUGx1Z2luVXNlckludGVyZmFjZS5wcm90b3R5cGUuZ2V0Um9vdCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5yb290O1xufTtcblBsdWdpblVzZXJJbnRlcmZhY2UucHJvdG90eXBlLmdldERpbWVuc2lvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGltO1xufTtcblBsdWdpblVzZXJJbnRlcmZhY2UucHJvdG90eXBlLmdldFdpZHRoID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLmRpbS53aWR0aDtcbn07XG5QbHVnaW5Vc2VySW50ZXJmYWNlLnByb3RvdHlwZS5nZXRIZWlnaHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGltLmhlaWdodDtcbn07XG5QbHVnaW5Vc2VySW50ZXJmYWNlLnByb3RvdHlwZS5iZWdpbkNhbGxiYWNrcyA9IGZ1bmN0aW9uIChtcykge1xuICAgIC8vIEFueSByZWdpc3RlcmVkIGNhbGxiYWNrcyBhcmUgc3RhcnRlZCBieSB0aGUgaG9zdFxuICAgIGlmIChtcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIG1zID0gMjUwO1xuICAgIH0gLy9EZWZhdWx0IG9mIDI1MG1zIHVwZGF0ZSBwZXJpb2RcbiAgICBpZiAodGhpcy5pbnRlcnZhbEZ1bmN0aW9uID09PSBudWxsKSB7XG4gICAgICAgIHRoaXMudXBkYXRlSW50ZXJ2YWwgPSBtcztcbiAgICAgICAgdGhpcy5pbnRlcnZhbEZ1bmN0aW9uID0gd2luZG93LnNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgICAgIH0uYmluZCh0aGlzKSwgMjUwKTtcbiAgICB9XG59O1xuUGx1Z2luVXNlckludGVyZmFjZS5wcm90b3R5cGUuc3RvcENhbGxiYWNrcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAvLyBBbnkgcmVnaXN0ZXJlZCBjYWxsYmFja3MgYXJlIHN0b3BwZWQgYnkgdGhlIGhvc3RcbiAgICBpZiAodGhpcy5pbnRlcnZhbEZ1bmN0aW9uICE9PSBudWxsKSB7XG4gICAgICAgIHdpbmRvdy5jbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWxGdW5jdGlvbik7XG4gICAgICAgIHRoaXMudXBkYXRlSW50ZXJ2YWwgPSBudWxsO1xuICAgICAgICB0aGlzLmludGVydmFsRnVuY3Rpb24gPSBudWxsO1xuICAgIH1cbn07XG5QbHVnaW5Vc2VySW50ZXJmYWNlLnByb3RvdHlwZS5sb2FkUmVzb3VyY2UgPSBmdW5jdGlvbiAodXJsKSB7XG4gICAgdmFyIHAgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHZhciByZXEgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgcmVxLm9wZW4oJ0dFVCcsIHVybCk7XG4gICAgICAgIHJlcS5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAocmVxLnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShyZXEucmVzcG9uc2UpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZWplY3QoRXJyb3IocmVxLnN0YXR1c1RleHQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmVxLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZWplY3QoRXJyb3IoXCJOZXR3b3JrIEVycm9yXCIpKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmVxLnNlbmQoKTtcbiAgICB9KTtcbiAgICByZXR1cm4gcDtcbn07XG5QbHVnaW5Vc2VySW50ZXJmYWNlLnByb3RvdHlwZS5jbGVhckdVSSA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLnN0b3BDYWxsYmFja3MoKTtcbiAgICB0aGlzLnJvb3QuaW5uZXJIVE1MID0gXCJcIjtcbn07XG5cbnZhciBQbHVnaW5JbnRlcmZhY2VNZXNzYWdlSHViID0gZnVuY3Rpb24ob3duZXIpIHtcbiAgICBmdW5jdGlvbiBidWlsZFBsdWdpblBhcmFtZXRlckpTT04ocGx1Z2luKSB7XG4gICAgICAgIHZhciBuYW1lcyA9IG93bmVyLnBhcmFtZXRlcnMuZ2V0UGFyYW1ldGVyTmFtZXMoKTtcbiAgICAgICAgdmFyIE8gPSB7fTtcbiAgICAgICAgbmFtZXMuZm9yRWFjaChmdW5jdGlvbihuYW1lKSB7XG4gICAgICAgICAgICB2YXIgcGFyYW0gPSBvd25lci5wYXJhbWV0ZXJzLmdldFBhcmFtZXRlckJ5TmFtZShuYW1lKTtcbiAgICAgICAgICAgIE9bbmFtZV0gPSB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IHBhcmFtLnZhbHVlLFxuICAgICAgICAgICAgICAgIG1heGltdW06IHBhcmFtLm1heGltdW0sXG4gICAgICAgICAgICAgICAgbWluaW11bTogcGFyYW0ubWluaW11bSxcbiAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU6IHBhcmFtLmRlZmF1bHRWYWx1ZSxcbiAgICAgICAgICAgICAgICB0eXBlOiBwYXJhbS5jb25zdHJ1Y3Rvci5uYW1lLFxuICAgICAgICAgICAgICAgIG5hbWU6IG5hbWVcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gTztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBidWlsZFBhcmFtZXRlclVwZGF0ZVBheWxvYWQoc2VuZGVyX2lkKSB7XG4gICAgICAgIHZhciBtc2cgPSB7XG4gICAgICAgICAgICBtZXNzYWdlOiBcInVwZGF0ZVBhcmFtZXRlcnNcIixcbiAgICAgICAgICAgIHBhcmFtZXRlcnM6IGJ1aWxkUGx1Z2luUGFyYW1ldGVySlNPTihvd25lcilcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHNlbmRlcl9pZCkge1xuICAgICAgICAgICAgbXNnLnNlbmRlcl9pZCA9IHNlbmRlcl9pZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbXNnO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNlbmRQYXJhbWV0ZXJVcGRhdGVzKGNoYW5uZWwpIHtcbiAgICAgICAgY2hhbm5lbC5wb3N0TWVzc2FnZShidWlsZFBhcmFtZXRlclVwZGF0ZVBheWxvYWQoKSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYnJvYWRjYXN0UGFyYW1ldGVyVXBkYXRlcyhzZW5kZXJfaWQpIHtcbiAgICAgICAgdmFyIG1zZyA9IGJ1aWxkUGFyYW1ldGVyVXBkYXRlUGF5bG9hZChzZW5kZXJfaWQpO1xuICAgICAgICB3aW5kb3dNZXNzYWdlTGlzdC5mb3JFYWNoKGZ1bmN0aW9uKHcpIHtcbiAgICAgICAgICAgIHcucG9zdE1lc3NhZ2UobXNnKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2V0UGFyYW1ldGVyTWVzc2FnZShlKSB7XG4gICAgICAgIHZhciBwYXJhbWV0ZXJzID0gSlNPTi5wYXJzZShlLm1lc3NhZ2UucGFyYW1ldGVycyk7XG4gICAgICAgIE9iamVjdC5rZXlzKHBhcmFtZXRlcnMpLmZvckVhY2goZnVuY3Rpb24obmFtZSkge1xuICAgICAgICAgICAgb3duZXIucGFyYW1ldGVycy5zZXRQYXJhbWV0ZXJCeU5hbWUobmFtZSxwYXJhbWV0ZXJzW25hbWVdLnZhbHVlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgdmFyIHdpbmRvd01lc3NhZ2VMaXN0ID0gW107XG4gICAgdmFyIHN0YXRlID0gMDtcblxuICAgIHdpbmRvdy5vbm1lc3NhZ2UgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgIHN3aXRjaChlLmRhdGEubWVzc2FnZSkge1xuICAgICAgICAgICAgY2FzZSBcInNldFBhcmFtZXRlckJ5TmFtZVwiOlxuICAgICAgICAgICAgICAgIGlmIChlLmRhdGEucGFyYW1ldGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlLmRhdGEucGFyYW1ldGVyLm5hbWUgJiYgZS5kYXRhLnBhcmFtZXRlci52YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3duZXIucGFyYW1ldGVycy5zZXRQYXJhbWV0ZXJCeU5hbWUoZS5kYXRhLnBhcmFtZXRlci5uYW1lLCBlLmRhdGEucGFyYW1ldGVyLnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicm9hZGNhc3RQYXJhbWV0ZXJVcGRhdGVzKGUuZGF0YS5zZW5kZXJfaWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJzZXRQYXJhbWV0ZXJzQnlPYmplY3RcIjpcbiAgICAgICAgICAgICAgICBpZiAoZS5kYXRhLnBhcmFtZXRlcikge1xuICAgICAgICAgICAgICAgICAgICBzZXRQYXJhbWV0ZXJNZXNzYWdlKGUpO1xuICAgICAgICAgICAgICAgICAgICBicm9hZGNhc3RQYXJhbWV0ZXJVcGRhdGVzKGUuZGF0YS5zZW5kZXJfaWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJyZXF1ZXN0UGFyYW1ldGVyc1wiOlxuICAgICAgICAgICAgICAgIHNlbmRQYXJhbWV0ZXJVcGRhdGVzKGUuc291cmNlKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3coXCJVbmtub3duIG1lc3NhZ2UgdHlwZSBcXFwiXCIrZS5kYXRhLm1lc3NhZ2UrXCJcXFwiXCIpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMsIHtcbiAgICAgICAgXCJ1cGRhdGVJbnRlcmZhY2VzXCI6IHtcbiAgICAgICAgICAgIFwidmFsdWVcIjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgYnJvYWRjYXN0UGFyYW1ldGVyVXBkYXRlcygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcImNsb3NlV2luZG93c1wiOiB7XG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXRlID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlKHdpbmRvd01lc3NhZ2VMaXN0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB3ID0gd2luZG93TWVzc2FnZUxpc3QucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB3LmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyhcIkNhbm5lbCBhbHJlYWR5IGNsb3NlZFwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFwicmVnaXN0ZXJXaW5kb3dcIjoge1xuICAgICAgICAgICAgXCJ2YWx1ZVwiOiBmdW5jdGlvbih3KSB7XG4gICAgICAgICAgICAgICAgaWYgKHdpbmRvd01lc3NhZ2VMaXN0LmluY2x1ZGVzKHcpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3dNZXNzYWdlTGlzdC5wdXNoKHcpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbn07XG5cbmlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgd2luZG93LkJhc2VQbHVnaW4gPSBCYXNlUGx1Z2luO1xufVxuXG5leHBvcnQge0Jhc2VQbHVnaW59O1xuIiwiLy8gVGhpcyBkZWZpbmVzIGEgbWFzdGVyIG9iamVjdCBmb3IgaG9sZGluZyBhbGwgdGhlIHBsdWdpbnMgYW5kIGNvbW11bmljYXRpbmdcbi8vIFRoaXMgb2JqZWN0IHdpbGwgYWxzbyBoYW5kbGUgY3JlYXRpb24gYW5kIGRlc3RydWN0aW9uIG9mIHBsdWdpbnNcbi8qZ2xvYmFscyBQcm9taXNlLCBkb2N1bWVudCwgY29uc29sZSwgTGlua2VkU3RvcmUsIFdvcmtlciwgd2luZG93LCBYTUxIdHRwUmVxdWVzdCAqL1xuLyplc2xpbnQtZW52IGJyb3dzZXIgKi9cbi8qIGpzaGludCBlc3ZlcnNpb246NiAqL1xuXG4vLyBMb2FkIGpzWHRyYWN0XG4oZnVuY3Rpb24oKSB7XG4gICAgaWYgKHdpbmRvdy5qc1h0cmFjdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHZhciBzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtcbiAgICAgICAgcy5zcmMgPSBcImh0dHBzOi8vZ2l0Y2RuLnh5ei9yZXBvL25pY2tqaWxsaW5ncy9qcy14dHJhY3QvbWFzdGVyL2pzWHRyYWN0LmpzXCI7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXS5hcHBlbmRDaGlsZChzKTtcbiAgICB9XG59KSgpO1xuXG5pbXBvcnQgTGlua2VkU3RvcmUgZnJvbSAnLi9oZWFkJztcbmV4cG9ydCB7QmFzZVBsdWdpbn0gZnJvbSAnLi9iYXNlX3BsdWdpbic7XG5cblxuZXhwb3J0IGZ1bmN0aW9uIFBsdWdpbkZhY3RvcnkoYXVkaW9fY29udGV4dCwgcm9vdFVSTCkge1xuICAgICAgICB2YXIgc3ViRmFjdG9yaWVzID0gW10sXG4gICAgICAgIHBsdWdpbl9wcm90b3R5cGVzID0gW10sXG4gICAgICAgIHBsdWdpbnNMaXN0ID0gW10sXG4gICAgICAgIGN1cnJlbnRQbHVnaW5JZCA9IDAsXG4gICAgICAgIGF1ZGlvU3RhcnRlZCA9IGZhbHNlO1xuXG4gICAgLypcbiAgICAgICAgdGhpcy5sb2FkUmVzb3VyY2UuIExvYWQgYSByZXNvdXJjZSBpbnRvIHRoZSBnbG9iYWwgbmFtZXNwYWNlXG5cbiAgICAgICAgQHBhcmFtIHJlc291cmNlT2JqZWN0OiBhIEpTIG9iamVjdCBob2xkaW5nIHRoZSBmb2xsb3dpbmcgcGFyYW1ldGVyczpcbiAgICAgICAgICAgIC51cmw6IFVSTCBvZiB0aGUgcmVzb3VyY2VcbiAgICAgICAgICAgIC50ZXN0OiBmdW5jdGlvbiB0byBjYWxsLCByZXR1cm5zIHRydWUgaWYgcmVzb3VyY2UgYWxyZWFkeSBsb2FkZWQsIGZhbHNlIGlmIG5vdFxuICAgICovXG4gICAgdGhpcy5sb2FkUmVzb3VyY2UgPSBmdW5jdGlvbiAocmVzb3VyY2VPYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiByZXNvdXJjZU9iamVjdCAhPT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgICAgIHJlamVjdChcIkVycm9yXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHJlc291cmNlT2JqZWN0LnVybCAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgIHJlamVjdChcInJlc291cmNlT2JqZWN0LnVybCBtdXN0IGJlIGEgc3RyaW5nXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHJlc291cmNlT2JqZWN0LnRlc3QgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgIHJlamVjdChcInJlc291cmNlT2JqZWN0LnRlc3QgbXVzdCBiZSBhIGZ1bmN0aW9uXCIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKHJlc291cmNlT2JqZWN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkudGhlbihmdW5jdGlvbihyZXNvdXJjZU9iamVjdCl7XG4gICAgICAgICAgICB2YXIgcmVzcG9uc2UgPSByZXNvdXJjZU9iamVjdC50ZXN0KCk7XG4gICAgICAgICAgICBpZiAocmVzcG9uc2UgIT09IGZhbHNlICYmIHJlc3BvbnNlICE9PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgKFwicmVzb3VyY2VPYmplY3QudGVzdCBtdXN0IHJldHVybiB0cnVlIG9yIGZhbHNlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFyZXNvdXJjZU9iamVjdC50eXBlKSB7XG4gICAgICAgICAgICAgICAgcmVzb3VyY2VPYmplY3QudHlwZSA9IFwiamF2YXNjcmlwdFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzb3VyY2VPYmplY3QudHlwZSA9IHJlc291cmNlT2JqZWN0LnR5cGUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIHN3aXRjaCAocmVzb3VyY2VPYmplY3QudHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgXCJqYXZhc2NyaXB0XCI6XG4gICAgICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBsb2FkUmVzb3VyY2UocmVzb3VyY2VPYmplY3QpLnRoZW4oZnVuY3Rpb24gKHJlc291cmNlT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZXNvdXJjZU9iamVjdC5yZXR1cm5PYmplY3QgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJldHVybk9iamVjdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdpbmRvdy5oYXNPd25Qcm9wZXJ0eShyZXNvdXJjZU9iamVjdC5yZXR1cm5PYmplY3QpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gd2luZG93W3Jlc291cmNlT2JqZWN0LnJldHVybk9iamVjdF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlc291cmNlT2JqZWN0LnJldHVybk9iamVjdCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAod2luZG93Lmhhc093blByb3BlcnR5KHJlc291cmNlT2JqZWN0LnJldHVybk9iamVjdCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUod2luZG93W3Jlc291cmNlT2JqZWN0LnJldHVybk9iamVjdF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgKFwiSW52YWxpZCB0eXBlIFwiICsgU3RyaW5nKHJlc291cmNlT2JqZWN0LnR5cGUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHRoaXMubG9hZFBsdWdpblNjcmlwdCA9IGZ1bmN0aW9uIChyZXNvdXJjZU9iamVjdCkge1xuICAgICAgICBpZiAocmVzb3VyY2VPYmplY3QpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgcmVzb3VyY2VPYmplY3QucmV0dXJuT2JqZWN0ICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgKFwicmVzb3VyY2VPYmplY3QucmV0dXJuT2JqZWN0IG11c3QgYmUgdGhlIG5hbWUgb2YgdGhlIHByb3RvdHlwZSBmdW5jdGlvblwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxvYWRSZXNvdXJjZShyZXNvdXJjZU9iamVjdCkudGhlbihmdW5jdGlvbiAocGx1Z2luKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWRkUHJvdG90eXBlKHBsdWdpbik7XG4gICAgICAgICAgICB9LmJpbmQodGhpcykpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGxvYWRSZXNvdXJjZShyZXNvdXJjZU9iamVjdCkge1xuICAgICAgICBpZiAocmVzb3VyY2VPYmplY3QudXJsLnN0YXJ0c1dpdGgoXCJodHRwXCIpID09PSBmYWxzZSAmJiByb290VVJMICE9PSB1bmRlZmluZWQgJiYgcm9vdFVSTC5zdGFydHNXaXRoKFwiaHR0cFwiKSkge1xuICAgICAgICAgICAgcmVzb3VyY2VPYmplY3QudXJsID0gcm9vdFVSTCArIHJlc291cmNlT2JqZWN0LnVybDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICAgICAgeGhyLm9wZW4oXCJHRVRcIiwgcmVzb3VyY2VPYmplY3QudXJsKTtcbiAgICAgICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHhoci5yZWFkeVN0YXRlID09IDQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7XG4gICAgICAgICAgICAgICAgICAgIHNjcmlwdC50ZXh0Q29udGVudCA9IHhoci5yZXNwb25zZVRleHQ7XG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXS5hcHBlbmRDaGlsZChzY3JpcHQpO1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc291cmNlT2JqZWN0KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB4aHIuc2VuZCgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjb3B5RmFjdG9yeShuZXdjb250ZXh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgIGlmIChuZXdjb250ZXh0LnNhbXBsZVJhdGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIC8vTWF5YmUgbm90IGEgcmVhbCBBdWRpb0NvbnRleHRcbiAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKFwiSW52YWxpZCBhdWRpbyBjb250ZXh0IHByb3ZpZGVkXCIpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShuZXdjb250ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkudGhlbihmdW5jdGlvbihuZXdjb250ZXh0KSB7XG4gICAgICAgICAgICB2YXIgQkZhY3RvcnkgPSBuZXcgUGx1Z2luRmFjdG9yeShuZXdjb250ZXh0KTtcbiAgICAgICAgICAgIHZhciBwcm9taXNlcyA9IFtdO1xuICAgICAgICAgICAgcGx1Z2luX3Byb3RvdHlwZXMuZm9yRWFjaChmdW5jdGlvbiAocHJvdG8pIHtcbiAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKEJGYWN0b3J5LmFkZFByb3RvdHlwZShwcm90by5wcm90bykpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBCRmFjdG9yeTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pLnRoZW4oZnVuY3Rpb24obmV3RmFjdG9yeSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ld0ZhY3Rvcnk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHZhciBQbHVnaW5JbnN0YW5jZSA9IGZ1bmN0aW9uIChpZCwgcGx1Z2luX25vZGUpIHtcbiAgICAgICAgdGhpcy5uZXh0X25vZGUgPSB1bmRlZmluZWQ7XG4gICAgICAgIHZhciBfYnlwYXNzZWQgPSBmYWxzZTtcbiAgICAgICAgdmFyIF9pbiA9IGF1ZGlvX2NvbnRleHQuY3JlYXRlR2FpbigpLFxuICAgICAgICAgICAgX291dCA9IGF1ZGlvX2NvbnRleHQuY3JlYXRlR2FpbigpO1xuXG4gICAgICAgIF9pbi5jb25uZWN0KHBsdWdpbl9ub2RlLmdldElucHV0cygpWzBdKTtcbiAgICAgICAgcGx1Z2luX25vZGUuZ2V0T3V0cHV0cygpWzBdLmNvbm5lY3QoX291dCk7XG5cbiAgICAgICAgZnVuY3Rpb24gYnlwYXNzRW5hYmxlKCkge1xuICAgICAgICAgICAgX2luLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICAgIF9pbi5jb25uZWN0KF9vdXQpO1xuICAgICAgICAgICAgX2J5cGFzc2VkID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGJ5cGFzc0Rpc2FibGUoKSB7XG4gICAgICAgICAgICBfaW4uZGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgX2luLmNvbm5lY3QocGx1Z2luX25vZGUuZ2V0SW5wdXRzKClbMF0pO1xuICAgICAgICAgICAgX2J5cGFzc2VkID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmJ5cGFzcyA9IGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgICAgICAgc3RhdGUgPSAoc3RhdGUgPT09IHRydWUpO1xuICAgICAgICAgICAgaWYgKHN0YXRlID09PSBfYnlwYXNzZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX2J5cGFzc2VkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHN0YXRlKSB7XG4gICAgICAgICAgICAgICAgYnlwYXNzRW5hYmxlKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGJ5cGFzc0Rpc2FibGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBfYnlwYXNzZWQ7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5pc0J5cGFzc2VkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9ieXBhc3NlZDtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnJlY29ubmVjdCA9IGZ1bmN0aW9uIChuZXdfbmV4dCkge1xuICAgICAgICAgICAgdGhpcy5jb25uZWN0KG5ld19uZXh0KTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmNvbm5lY3QgPSBmdW5jdGlvbiAobmV3X25leHQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm5leHRfbm9kZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobmV3X25leHQgIT09IHVuZGVmaW5lZCAmJiBuZXdfbmV4dC5pbnB1dCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5uZXh0X25vZGUgPSBuZXdfbmV4dDtcbiAgICAgICAgICAgICAgICBfb3V0LmNvbm5lY3QodGhpcy5uZXh0X25vZGUuaW5wdXQpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuZGlzY29ubmVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm5leHRfbm9kZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgX291dC5kaXNjb25uZWN0KHRoaXMubmV4dF9ub2RlLmlucHV0KTtcbiAgICAgICAgICAgICAgICB0aGlzLm5leHRfbm9kZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBwbHVnaW5fbm9kZS5kZXN0cm95KCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcywge1xuICAgICAgICAgICAgJ2lkJzoge1xuICAgICAgICAgICAgICAgICd2YWx1ZSc6IGlkXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ25vZGUnOiB7XG4gICAgICAgICAgICAgICAgJ3ZhbHVlJzogcGx1Z2luX25vZGVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnaW5wdXQnOiB7XG4gICAgICAgICAgICAgICAgJ2dldCc6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9pbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ291dHB1dCc6IHtcbiAgICAgICAgICAgICAgICAnZ2V0JzogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX291dDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ2J5cGFzc2VkJzoge1xuICAgICAgICAgICAgICAgICdnZXQnOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfYnlwYXNzZWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIFBsdWdpbkluc3RhbmNlLnByb3RvdHlwZS5mYWN0b3J5ID0gdGhpcztcblxuICAgIHZhciBQbHVnaW5Qcm90b3R5cGUgPSBmdW5jdGlvbiAocHJvdG8sIGZhY3RvcnkpIHtcblx0ICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcywge1xuICAgICAgICAgICAgJ25hbWUnOiB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IHByb3RvLnByb3RvdHlwZS5uYW1lXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ3Byb3RvJzoge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBwcm90b1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICd2ZXJzaW9uJzoge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBwcm90by5wcm90b3R5cGUudmVyc2lvblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICd1bmlxdWVJRCc6IHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogcHJvdG8ucHJvdG90eXBlLnVuaXF1ZUlEXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuY3JlYXRlUGx1Z2luSW5zdGFuY2UgPSBhc3luYyBmdW5jdGlvbihvd25lciwgYXN5bmMpIHtcbiAgICAgICAgICAgIHZhciBwID0gY3JlYXRlUGx1Z2luSW5zdGFuY2Uob3duZXIpO1xuICAgICAgICAgICAgaWYgKGFzeW5jID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHA7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGF3YWl0IHA7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgZnVuY3Rpb24gY3JlYXRlUGx1Z2luSW5zdGFuY2Uob3duZXIpIHtcbiAgICAgICAgICAgIHJldHVybiB3YWl0VW50aWxSZWFkeSgpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWNoZWNrSXNSZWFkeSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKFwiUGx1Z2luIG5vdCByZWFkeVwiKSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKG5ldyBwcm90byhmYWN0b3J5LCBvd25lcikpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24ocGx1Z2luKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCl7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwbHVnaW4uaW5pdGlhbGlzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBsdWdpbi5pbml0aWFsaXNlKCkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHBsdWdpbik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUocGx1Z2luKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbihwbHVnaW4pIHtcbiAgICAgICAgICAgICAgICB2YXIgbm9kZSA9IG5ldyBQbHVnaW5JbnN0YW5jZShjdXJyZW50UGx1Z2luSWQrKywgcGx1Z2luKTtcbiAgICAgICAgICAgICAgICB2YXIgYmFzZVBsdWdpbkluc3RhbmNlID0gcGx1Z2luO1xuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHBsdWdpbiwge1xuICAgICAgICAgICAgICAgICAgICAncGx1Z2luSW5zdGFuY2UnOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAndmFsdWUnOiBub2RlXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICdwcm90b3R5cGVPYmplY3QnOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAndmFsdWUnOiBzZWxmXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICduYW1lJzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHByb3RvLnByb3RvdHlwZS5uYW1lXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICd2ZXJzaW9uJzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHByb3RvLnByb3RvdHlwZS52ZXJzaW9uXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICd1bmlxdWVJRCc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBwcm90by5wcm90b3R5cGUudW5pcXVlSURcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgJ1Nlc2lvbkRhdGEnOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZmFjdG9yeS5TZXNzaW9uRGF0YVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAnVXNlckRhdGEnOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZmFjdG9yeS5Vc2VyRGF0YVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMobm9kZSwge1xuICAgICAgICAgICAgICAgICAgICBcInByb3RvdHlwZU9iamVjdFwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAndmFsdWUnOiBzZWxmXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIFwiZXh0ZXJuYWxJbnRlcmZhY2VcIjoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ3ZhbHVlJzogcGx1Z2luLmV4dGVybmFsSW50ZXJmYWNlXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBmYWN0b3J5LnJlZ2lzdGVyUGx1Z2luSW5zdGFuY2Uobm9kZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGxvYWRSZXNvdXJjZUNoYWluKHJlc291cmNlT2JqZWN0LCBwKSB7XG4gICAgICAgICAgICBpZiAoIXApIHtcbiAgICAgICAgICAgICAgICB2YXIgayA9IGxvYWRSZXNvdXJjZShyZXNvdXJjZU9iamVjdCk7XG4gICAgICAgICAgICAgICAgay50aGVuKGZ1bmN0aW9uIChyZXNvdXJjZU9iamVjdCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmVzb3VyY2VPYmplY3QucmVzb3VyY2VzICE9PSB1bmRlZmluZWQgJiYgcmVzb3VyY2VPYmplY3QucmVzb3VyY2VzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVzb3VyY2VPYmplY3QucmVzb3VyY2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgayA9IGxvYWRSZXNvdXJjZUNoYWluKHJlc291cmNlT2JqZWN0LnJlc291cmNlc1tpXSwgayk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gaztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHAudGhlbihsb2FkUmVzb3VyY2UocmVzb3VyY2VPYmplY3QpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGxvYWRTdHlsZXNoZWV0KHVybCkge1xuICAgICAgICAgICAgdmFyIGNzcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaW5rXCIpO1xuICAgICAgICAgICAgY3NzLnNldEF0dHJpYnV0ZShcInJlbFwiLCBcInN0eWxlc2hlZXRcIik7XG4gICAgICAgICAgICBjc3Muc2V0QXR0cmlidXRlKFwidHlwZVwiLCBcInRleHQvY3NzXCIpO1xuICAgICAgICAgICAgY3NzLnNldEF0dHJpYnV0ZShcImhyZWZcIiwgdXJsKTtcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXS5hcHBlbmRDaGlsZChjc3MpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gcmVjdXJzaXZlR2V0VGVzdChyZXNvdXJjZU9iamVjdCkge1xuICAgICAgICAgICAgaWYgKHJlc291cmNlT2JqZWN0Lmhhc093blByb3BlcnR5KFwibGVuZ3RoXCIpICYmIHJlc291cmNlT2JqZWN0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVjdXJzaXZlR2V0VGVzdChyZXNvdXJjZU9iamVjdFtyZXNvdXJjZU9iamVjdC5sZW5ndGggLSAxXSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHJlc291cmNlT2JqZWN0Lmhhc093blByb3BlcnR5KFwicmVzb3VyY2VzXCIpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlY3Vyc2l2ZUdldFRlc3QocmVzb3VyY2VPYmplY3QucmVzb3VyY2VzKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc291cmNlT2JqZWN0LnRlc3Q7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcmVzb3VyY2VQcm9taXNlcyA9IFtdO1xuICAgICAgICBpZiAocHJvdG8ucHJvdG90eXBlLnJlc291cmNlcykge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm90by5wcm90b3R5cGUucmVzb3VyY2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJlc291cmNlID0gcHJvdG8ucHJvdG90eXBlLnJlc291cmNlc1tpXTtcbiAgICAgICAgICAgICAgICByZXNvdXJjZS50eXBlID0gcmVzb3VyY2UudHlwZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAocmVzb3VyY2UudHlwZSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIFwiY3NzXCI6XG4gICAgICAgICAgICAgICAgICAgICAgICBsb2FkU3R5bGVzaGVldChyZXNvdXJjZS51cmwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJqYXZhc2NyaXB0XCI6XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2JqZWN0ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdwcm9taXNlJzogbG9hZFJlc291cmNlQ2hhaW4ocmVzb3VyY2UpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzdGF0ZSc6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2NvbXBsZXRlJzogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0YXRlID0gMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICd0ZXN0JzogcmVjdXJzaXZlR2V0VGVzdChyZXNvdXJjZSlcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QucHJvbWlzZS50aGVuKG9iamVjdC5jb21wbGV0ZS5iaW5kKG9iamVjdCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb3VyY2VQcm9taXNlcy5wdXNoKG9iamVjdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IChcIkNvdWxkIG5vdCBsb2FkIFwiICsgcmVzb3VyY2UudXJsICsgXCIsIGludmFsaWQgcmVzb3VyY2UudHlwZVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmdldFJlc291cmNlUHJvbWlzZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVzb3VyY2VQcm9taXNlcztcbiAgICAgICAgfTtcbiAgICAgICAgZnVuY3Rpb24gY2hlY2tJc1JlYWR5KCkge1xuICAgICAgICAgICAgdmFyIHN0YXRlID0gdHJ1ZTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVzb3VyY2VQcm9taXNlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGlmIChyZXNvdXJjZVByb21pc2VzW2ldLnN0YXRlICE9PSAxIHx8ICFyZXNvdXJjZVByb21pc2VzW2ldLnRlc3QoKSkge1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gc3RhdGU7XG4gICAgICAgIH07XG4gICAgICAgIGZ1bmN0aW9uIHdhaXRVbnRpbFJlYWR5KCkge1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHJlc291cmNlUHJvbWlzZXMpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMuYWRkUHJvdG90eXBlID0gZnVuY3Rpb24gKHBsdWdpbl9wcm90bykge1xuICAgICAgICB2YXIgZmFjdG9yeSA9IHRoaXM7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgcGx1Z2luX3Byb3RvICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICByZWplY3QoXCJUaGUgUHJvdG90eXBlIG11c3QgYmUgYSBmdW5jdGlvbiFcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgcGx1Z2luX3Byb3RvLnByb3RvdHlwZS5uYW1lICE9PSBcInN0cmluZ1wiIHx8IHBsdWdpbl9wcm90by5wcm90b3R5cGUubmFtZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICByZWplY3QoXCJNYWxmb3JtZWQgcGx1Z2luLiBOYW1lIG5vdCBkZWZpbmVkXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHBsdWdpbl9wcm90by5wcm90b3R5cGUudmVyc2lvbiAhPT0gXCJzdHJpbmdcIiB8fCBwbHVnaW5fcHJvdG8ucHJvdG90eXBlLnZlcnNpb24ubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KFwiTWFsZm9ybWVkIHBsdWdpbi4gVmVyc2lvbiBub3QgZGVmaW5lZFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBwbHVnaW5fcHJvdG8ucHJvdG90eXBlLnVuaXF1ZUlEICE9PSBcInN0cmluZ1wiIHx8IHBsdWdpbl9wcm90by5wcm90b3R5cGUudW5pcXVlSUQubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KFwiTWFsZm9ybWVkIHBsdWdpbi4gdW5pcXVlSUQgbm90IGRlZmluZWRcIik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc29sdmUocGx1Z2luX3Byb3RvKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkudGhlbihmdW5jdGlvbihwbHVnaW5fcHJvdG8pIHtcbiAgICAgICAgICAgIHZhciB0ZXN0T2JqID0ge1xuICAgICAgICAgICAgICAgICdwcm90byc6IHBsdWdpbl9wcm90byxcbiAgICAgICAgICAgICAgICAnbmFtZSc6IHBsdWdpbl9wcm90by5wcm90b3R5cGUubmFtZSxcbiAgICAgICAgICAgICAgICAndmVyc2lvbic6IHBsdWdpbl9wcm90by5wcm90b3R5cGUudmVyc2lvbixcbiAgICAgICAgICAgICAgICAndW5pcXVlSUQnOiBwbHVnaW5fcHJvdG8ucHJvdG90eXBlLnVuaXF1ZUlEXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIG9iaiA9IHBsdWdpbl9wcm90b3R5cGVzLmZpbmQoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgcGFyYW07XG4gICAgICAgICAgICAgICAgdmFyIG1hdGNoID0gMDtcbiAgICAgICAgICAgICAgICBmb3IgKHBhcmFtIGluIHRoaXMpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVbcGFyYW1dID09PSB0aGlzW3BhcmFtXSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2grKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbWF0Y2ggPT09IDQ7XG4gICAgICAgICAgICB9LCB0ZXN0T2JqKTtcbiAgICAgICAgICAgIGlmIChvYmopIHtcbiAgICAgICAgICAgICAgICB0aHJvdyAoXCJUaGUgcGx1Z2luIG11c3QgYmUgdW5pcXVlIVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9iaiA9IG5ldyBQbHVnaW5Qcm90b3R5cGUocGx1Z2luX3Byb3RvLCBmYWN0b3J5KTtcbiAgICAgICAgICAgIHBsdWdpbl9wcm90b3R5cGVzLnB1c2gob2JqKTtcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKG9iaiwge1xuICAgICAgICAgICAgICAgICdmYWN0b3J5Jzoge1xuICAgICAgICAgICAgICAgICAgICAndmFsdWUnOiBmYWN0b3J5XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gb2JqO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgdGhpcy5nZXRQcm90b3R5cGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gcGx1Z2luX3Byb3RvdHlwZXM7XG4gICAgfTtcblxuICAgIHRoaXMuZ2V0QWxsUGx1Z2lucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHBsdWdpbnNMaXN0O1xuICAgIH07XG5cbiAgICB0aGlzLmdldEFsbFBsdWdpbnNPYmplY3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBvYmogPSB7XG4gICAgICAgICAgICAgICAgJ2ZhY3RvcnknOiB0aGlzLFxuICAgICAgICAgICAgICAgICdzdWJGYWN0b3JpZXMnOiBbXVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGk7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBzdWJGYWN0b3JpZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIG9iai5zdWJGYWN0b3JpZXMucHVzaCh7XG4gICAgICAgICAgICAgICAgJ3N1YkZhY3RvcnknOiBzdWJGYWN0b3JpZXNbaV0sXG4gICAgICAgICAgICAgICAgJ3BsdWdpbnMnOiBzdWJGYWN0b3JpZXNbaV0uZ2V0UGx1Z2lucygpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH07XG5cbiAgICB0aGlzLmNyZWF0ZVN1YkZhY3RvcnkgPSBmdW5jdGlvbiAoY2hhaW5TdGFydCwgY2hhaW5TdG9wKSB7XG4gICAgICAgIHZhciBub2RlID0gbmV3IFBsdWdpblN1YkZhY3RvcnkodGhpcywgY2hhaW5TdGFydCwgY2hhaW5TdG9wKTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMobm9kZSwge1xuICAgICAgICAgICAgJ1Nlc3Npb25EYXRhJzoge1xuICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLlNlc3Npb25EYXRhXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ1VzZXJEYXRhJzoge1xuICAgICAgICAgICAgICAgIHZhbHVlOiB0aGlzLlVzZXJEYXRhXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBzdWJGYWN0b3JpZXMucHVzaChub2RlKTtcbiAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgfTtcblxuICAgIHRoaXMuZGVzdHJveVN1YkZhY3RvcnkgPSBmdW5jdGlvbiAoU3ViRmFjdG9yeSkge1xuICAgICAgICB2YXIgaW5kZXggPSBzdWJGYWN0b3JpZXMuZmluZEluZGV4KGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICBpZiAoZWxlbWVudCA9PT0gdGhpcykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9LCBTdWJGYWN0b3J5KTtcbiAgICAgICAgaWYgKGluZGV4ID49IDApIHtcbiAgICAgICAgICAgIHN1YkZhY3Rvcmllcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgU3ViRmFjdG9yeS5kZXN0cm95KCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5yZWdpc3RlclBsdWdpbkluc3RhbmNlID0gZnVuY3Rpb24gKGluc3RhbmNlKSB7XG4gICAgICAgIGlmIChwbHVnaW5zTGlzdC5maW5kKGZ1bmN0aW9uIChwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHAgPT09IHRoaXM7XG4gICAgICAgICAgICB9LCBpbnN0YW5jZSkpIHtcbiAgICAgICAgICAgIHRocm93IChcIlBsdWdpbiBJbnN0YW5jZSBub3QgdW5pcXVlXCIpO1xuICAgICAgICB9XG4gICAgICAgIHBsdWdpbnNMaXN0LnB1c2goaW5zdGFuY2UpO1xuICAgICAgICBpZiAoYXVkaW9TdGFydGVkKSB7XG4gICAgICAgICAgICBpbnN0YW5jZS5ub2RlLnN0YXJ0LmNhbGwoaW5zdGFuY2Uubm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcblxuICAgIHRoaXMuY3JlYXRlUGx1Z2luSW5zdGFuY2UgPSBmdW5jdGlvbiAoUGx1Z2luUHJvdG90eXBlKSB7XG4gICAgICAgIHRocm93IChcIkRFUFJFQ0FURUQgLSBVc2UgUGx1Z2luUHJvdG90eXBlLmNyZWF0ZVBsdWdpbkluc3RhbmNlKG93bmVyKTtcIik7XG4gICAgfTtcblxuICAgIHRoaXMuZGVsZXRlUGx1Z2luID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgIHZhciBpbmRleCA9IHBsdWdpbnNMaXN0LmZpbmRJbmRleChmdW5jdGlvbiAocCkge1xuICAgICAgICAgICAgcmV0dXJuIHAuaWQgPT09IGlkO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGluZGV4ID49IDApIHtcbiAgICAgICAgICAgIHZhciBwID0gcGx1Z2luc0xpc3Quc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgIHBbMF0ubm9kZS5leHRlcm5hbEludGVyZmFjZS5jbG9zZVdpbmRvd3MoKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBmdW5jdGlvbiB0cmlnZ2VyQXVkaW9TdGFydCgpIHtcbiAgICAgICAgcGx1Z2luc0xpc3QuZm9yRWFjaChmdW5jdGlvbiAobikge1xuICAgICAgICAgICAgbi5ub2RlLnN0YXJ0LmNhbGwobi5ub2RlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdHJpZ2dlckF1ZGlvU3RvcCgpIHtcbiAgICAgICAgcGx1Z2luc0xpc3QuZm9yRWFjaChmdW5jdGlvbiAobikge1xuICAgICAgICAgICAgbi5ub2RlLnN0b3AuY2FsbChuLm5vZGUpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICB0aGlzLmF1ZGlvU3RhcnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICghYXVkaW9TdGFydGVkKSB7XG4gICAgICAgICAgICB0cmlnZ2VyQXVkaW9TdGFydCgpO1xuICAgICAgICAgICAgYXVkaW9TdGFydGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgdGhpcy5hdWRpb1N0b3AgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChhdWRpb1N0YXJ0ZWQpIHtcbiAgICAgICAgICAgIHRyaWdnZXJBdWRpb1N0b3AoKTtcbiAgICAgICAgICAgIGF1ZGlvU3RhcnRlZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHZhciBGZWF0dXJlTWFwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgTWFwcGluZ3MgPSBbXTtcblxuICAgICAgICB2YXIgRmVhdHVyZU5vZGUgPSBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgICAgdGhpcy5uYW1lID0gbm9kZS5uYW1lO1xuICAgICAgICAgICAgdGhpcy5wYXJhbWV0ZXJzID0gdGhpcy5wYXJhbWV0ZXJzO1xuICAgICAgICAgICAgdGhpcy5mZWF0dXJlcyA9IFtdO1xuICAgICAgICB9O1xuXG4gICAgICAgIGZ1bmN0aW9uIGdldEZlYXR1cmVOb2RlKGxpc3QsIGNoZWNrKSB7XG4gICAgICAgICAgICByZXR1cm4gbGlzdC5maW5kKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGUubmFtZSA9PT0gdGhpcy5uYW1lO1xuICAgICAgICAgICAgfSwgY2hlY2spO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gYWRkRmVhdHVyZU5vZGUoZmVhdHVyZU5vZGUsIGxpc3QpIHtcbiAgICAgICAgICAgIHZhciBub2RlID0gbmV3IEZlYXR1cmVOb2RlKGZlYXR1cmVOb2RlKTtcbiAgICAgICAgICAgIGxpc3QucHVzaChub2RlKTtcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIFNvdXJjZU1hcCA9IGZ1bmN0aW9uIChTZW5kZXIsIHBsdWdpbkluc3RhY2UpIHtcbiAgICAgICAgICAgIHZhciBNYXBwaW5ncyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5nZXRTb3VyY2VJbnN0YW5jZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGx1Z2luSW5zdGFjZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmdldFNlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gU2VuZGVyO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gZmluZEZlYXR1cmVPYmplY3QoZmVhdHVyZU9iamVjdCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBNYXBwaW5ncy5maW5kKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoZS5vdXRwdXRJbmRleCA9PT0gdGhpcy5vdXRwdXRJbmRleCAmJiBlLmZyYW1lU2l6ZSA9PT0gdGhpcy5mcmFtZVNpemUpO1xuICAgICAgICAgICAgICAgIH0sIGZlYXR1cmVPYmplY3QpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiB1cGRhdGVTZW5kZXIoKSB7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gcmVjdXJzaXZlRmluZChmZWF0dXJlTGlzdCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZiwgbGlzdCA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGYgPSAwOyBmIDwgZmVhdHVyZUxpc3QubGVuZ3RoOyBmKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmZWF0dXJlTm9kZSA9IGdldEZlYXR1cmVOb2RlKGxpc3QsIGZlYXR1cmVMaXN0W2ZdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZmVhdHVyZU5vZGUgfHwgKGZlYXR1cmVMaXN0LnBhcmFtZXRlcnMgJiYgZmVhdHVyZUxpc3RbZl0ucGFyYW1ldGVycy5sZW5ndGggIT09IDApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmVhdHVyZU5vZGUgPSBhZGRGZWF0dXJlTm9kZShmZWF0dXJlTGlzdFtmXSwgbGlzdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmVhdHVyZUxpc3RbZl0uZmVhdHVyZXMgJiYgZmVhdHVyZUxpc3RbZl0uZmVhdHVyZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmVOb2RlLmZlYXR1cmVzID0gcmVjdXJzaXZlRmluZChmZWF0dXJlTGlzdFtmXS5mZWF0dXJlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxpc3Q7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBpLCBvdXRwdXRMaXN0ID0gW107XG4gICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IE1hcHBpbmdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvdXRwdXRMaXN0W01hcHBpbmdzW2ldLm91dHB1dEluZGV4XSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRMaXN0W01hcHBpbmdzW2ldLm91dHB1dEluZGV4XSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciBmcmFtZUxpc3QgPSBvdXRwdXRMaXN0W01hcHBpbmdzW2ldLm91dHB1dEluZGV4XS5maW5kKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5mcmFtZVNpemUgPT09IHRoaXMuZnJhbWVTaXplO1xuICAgICAgICAgICAgICAgICAgICB9LCBNYXBwaW5nc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZnJhbWVMaXN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmcmFtZUxpc3QgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2ZyYW1lU2l6ZSc6IE1hcHBpbmdzW2ldLmZyYW1lU2l6ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZmVhdHVyZUxpc3QnOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRMaXN0W01hcHBpbmdzW2ldLm91dHB1dEluZGV4XS5wdXNoKGZyYW1lTGlzdCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZnJhbWVMaXN0LmZlYXR1cmVMaXN0ID0gcmVjdXJzaXZlRmluZChNYXBwaW5nc1tpXS5nZXRGZWF0dXJlTGlzdCgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgU2VuZGVyLnVwZGF0ZUZlYXR1cmVzKG91dHB1dExpc3QpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnJlcXVlc3RGZWF0dXJlcyA9IGZ1bmN0aW9uIChyZXF1ZXN0b3JJbnN0YW5jZSwgZmVhdHVyZU9iamVjdCkge1xuICAgICAgICAgICAgICAgIHZhciBtYXAgPSBmaW5kRmVhdHVyZU9iamVjdChmZWF0dXJlT2JqZWN0KTtcbiAgICAgICAgICAgICAgICBpZiAoIW1hcCkge1xuICAgICAgICAgICAgICAgICAgICBtYXAgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnb3V0cHV0SW5kZXgnOiBmZWF0dXJlT2JqZWN0Lm91dHB1dEluZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2ZyYW1lU2l6ZSc6IGZlYXR1cmVPYmplY3QuZnJhbWVTaXplLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ3JlcXVlc3RvcnMnOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdnZXRGZWF0dXJlTGlzdCc6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgRiA9IFtdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLnJlcXVlc3RvcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRiA9IEYuY29uY2F0KHRoaXMucmVxdWVzdG9yc1tpXS5nZXRGZWF0dXJlTGlzdCgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEY7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIE1hcHBpbmdzLnB1c2gobWFwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHJlcXVlc3RvciA9IG1hcC5yZXF1ZXN0b3JzLmZpbmQoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuZ2V0UmVxdWVzdG9ySW5zdGFuY2UoKSA9PT0gdGhpcztcbiAgICAgICAgICAgICAgICB9LCByZXF1ZXN0b3JJbnN0YW5jZSk7XG4gICAgICAgICAgICAgICAgaWYgKCFyZXF1ZXN0b3IpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdG9yID0gbmV3IFJlcXVlc3Rvck1hcChyZXF1ZXN0b3JJbnN0YW5jZSk7XG4gICAgICAgICAgICAgICAgICAgIG1hcC5yZXF1ZXN0b3JzLnB1c2gocmVxdWVzdG9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVxdWVzdG9yLmFkZEZlYXR1cmVzKGZlYXR1cmVPYmplY3QpO1xuICAgICAgICAgICAgICAgIHVwZGF0ZVNlbmRlcigpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdGhpcy5maW5kRnJhbWVNYXAgPSBmdW5jdGlvbiAob3V0cHV0SW5kZXgsIGZyYW1lU2l6ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBNYXBwaW5ncy5maW5kKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoZS5vdXRwdXRJbmRleCA9PT0gb3V0cHV0SW5kZXggJiYgZS5mcmFtZVNpemUgPT09IGZyYW1lU2l6ZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB0aGlzLmNhbmNlbEZlYXR1cmVzID0gZnVuY3Rpb24gKHJlcXVlc3Rvckluc3RhbmNlLCBmZWF0dXJlT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgaWYgKGZlYXR1cmVPYmplY3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBNYXBwaW5ncy5mb3JFYWNoKGZ1bmN0aW9uIChtYXApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXF1ZXN0b3JJbmRleCA9IG1hcC5yZXF1ZXN0b3JzLmZpbmRJbmRleChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmdldFJlcXVlc3Rvckluc3RhbmNlKCkgPT09IHJlcXVlc3Rvckluc3RhbmNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVxdWVzdG9ySW5kZXggPj0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcC5yZXF1ZXN0b3JzLnNwbGljZShyZXF1ZXN0b3JJbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXAgPSBmaW5kRmVhdHVyZU9iamVjdChmZWF0dXJlT2JqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFtYXApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgcmVxdWVzdG9yID0gbWFwLnJlcXVlc3RvcnMuZmluZChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuZ2V0UmVxdWVzdG9ySW5zdGFuY2UoKSA9PT0gdGhpcztcbiAgICAgICAgICAgICAgICAgICAgfSwgcmVxdWVzdG9ySW5zdGFuY2UpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXJlcXVlc3Rvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3Rvci5kZWxldGVGZWF0dXJlcyhmZWF0dXJlT2JqZWN0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdXBkYXRlU2VuZGVyKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICB2YXIgUmVxdWVzdG9yTWFwID0gZnVuY3Rpb24gKHBsdWdpbkluc3RhbmNlKSB7XG4gICAgICAgICAgICB2YXIgRmVhdHVyZXMgPSBbXTtcbiAgICAgICAgICAgIHZhciBSZWNlaXZlciA9IHBsdWdpbkluc3RhbmNlLm5vZGUuZmVhdHVyZU1hcC5SZWNlaXZlcjtcbiAgICAgICAgICAgIHRoaXMuZ2V0UmVxdWVzdG9ySW5zdGFuY2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBsdWdpbkluc3RhbmNlO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gcmVjdXJzaXZlbHlBZGRGZWF0dXJlcyhyb290QXJyYXksIGZlYXR1cmVPYmplY3QpIHtcbiAgICAgICAgICAgICAgICB2YXIgaTtcbiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgZmVhdHVyZU9iamVjdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayB3ZSBoYXZlIG5vdCBhbHJlYWR5IGxpc3RlZCB0aGUgZmVhdHVyZVxuICAgICAgICAgICAgICAgICAgICB2YXIgZmVhdHVyZU5vZGUgPSBnZXRGZWF0dXJlTm9kZShyb290QXJyYXksIGZlYXR1cmVPYmplY3RbaV0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWZlYXR1cmVOb2RlIHx8IChmZWF0dXJlT2JqZWN0W2ldLnBhcmFtZXRlcnMgJiYgZmVhdHVyZU9iamVjdFtpXS5wYXJhbWV0ZXJzLmxlbmd0aCAhPT0gMCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmVOb2RlID0gYWRkRmVhdHVyZU5vZGUoZmVhdHVyZU9iamVjdFtpXSwgcm9vdEFycmF5KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZmVhdHVyZU9iamVjdFtpXS5mZWF0dXJlcyAhPT0gdW5kZWZpbmVkICYmIGZlYXR1cmVPYmplY3RbaV0uZmVhdHVyZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVjdXJzaXZlbHlBZGRGZWF0dXJlcyhmZWF0dXJlTm9kZS5mZWF0dXJlcywgZmVhdHVyZU9iamVjdFtpXS5mZWF0dXJlcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHJlY3Vyc2l2ZWx5RGVsZXRlRmVhdHVyZXMocm9vdEFycmF5LCBmZWF0dXJlT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgdmFyIGwgPSBmZWF0dXJlT2JqZWN0Lmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgaTtcbiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEZpbmQgdGhlIGZlYXR1cmVcbiAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gZ2V0RmVhdHVyZU5vZGUocm9vdEFycmF5LCBmZWF0dXJlT2JqZWN0W2ldKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4ID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmZWF0dXJlT2JqZWN0W2luZGV4XS5mZWF0dXJlcyAmJiBmZWF0dXJlT2JqZWN0W2luZGV4XS5mZWF0dXJlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjdXJzaXZlbHlEZWxldGVGZWF0dXJlcyhyb290QXJyYXlbaW5kZXhdLmZlYXR1cmVzLCBmZWF0dXJlT2JqZWN0W2luZGV4XS5mZWF0dXJlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZlYXR1cmVzLnNwbGljZShpbmRleCwgMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5hZGRGZWF0dXJlcyA9IGZ1bmN0aW9uIChmZWF0dXJlT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgcmVjdXJzaXZlbHlBZGRGZWF0dXJlcyhGZWF0dXJlcywgZmVhdHVyZU9iamVjdC5mZWF0dXJlcyk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB0aGlzLmRlbGV0ZUZlYXR1cmVzID0gZnVuY3Rpb24gKGZlYXR1cmVPYmplY3QpIHtcbiAgICAgICAgICAgICAgICByZWN1cnNpdmVseURlbGV0ZUZlYXR1cmVzKEZlYXR1cmVzLCBmZWF0dXJlT2JqZWN0LmZlYXR1cmVzKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHRoaXMuZ2V0RmVhdHVyZUxpc3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEZlYXR1cmVzO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdGhpcy5wb3N0RmVhdHVyZXMgPSBmdW5jdGlvbiAoZmVhdHVyZU9iamVjdCkge1xuICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ3BsdWdpbic6IGZlYXR1cmVPYmplY3QucGx1Z2luLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ291dHB1dEluZGV4JzogZmVhdHVyZU9iamVjdC5vdXRwdXRJbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgICdmcmFtZVNpemUnOiBmZWF0dXJlT2JqZWN0LmZyYW1lU2l6ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdmZWF0dXJlcyc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbnVtYmVyT2ZDaGFubmVscyc6IGZlYXR1cmVPYmplY3QucmVzdWx0cy5udW1iZXJPZkNoYW5uZWxzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdyZXN1bHRzJzogW11cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgaTtcblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHJlY3Vyc2l2ZVBvc3RGZWF0dXJlcyhyb290Tm9kZSwgcmVzdWx0c0xpc3QsIEZlYXR1cmVMaXN0KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUgcmVzdWx0cyB0cmVlIHdoZXJlIG5lY2Vzc2FyeVxuICAgICAgICAgICAgICAgICAgICB2YXIgaSwgcGFyYW07XG5cbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gYW8oZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUubmFtZSA9PT0gcGFyYW07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZm9yIChwYXJhbSBpbiByZXN1bHRzTGlzdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdHNMaXN0Lmhhc093blByb3BlcnR5KHBhcmFtKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBub2RlID0gRmVhdHVyZUxpc3QuZmluZChhbyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdHNMaXN0W3BhcmFtXS5jb25zdHJ1Y3RvciA9PT0gT2JqZWN0ICYmIG5vZGUucmVzdWx0cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9vdE5vZGVbcGFyYW1dID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWN1cnNpdmVQb3N0RmVhdHVyZXMocm9vdE5vZGVbcGFyYW1dLCByZXN1bHRzTGlzdFtwYXJhbV0sIG5vZGUucmVzdWx0cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb290Tm9kZVtwYXJhbV0gPSByZXN1bHRzTGlzdFtwYXJhbV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gUGVyZm9ybSByZWN1cnNpdmUgbWFwIGZvciBlYWNoIGNoYW5uZWxcbiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgZmVhdHVyZU9iamVjdC5yZXN1bHRzLm51bWJlck9mQ2hhbm5lbHM7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmZlYXR1cmVzLnJlc3VsdHNbaV0gPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgcmVjdXJzaXZlUG9zdEZlYXR1cmVzKG1lc3NhZ2UuZmVhdHVyZXMucmVzdWx0c1tpXSwgZmVhdHVyZU9iamVjdC5yZXN1bHRzLnJlc3VsdHNbaV0ucmVzdWx0cywgRmVhdHVyZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwbHVnaW5JbnN0YW5jZS5ub2RlLmZlYXR1cmVNYXAuUmVjZWl2ZXIucG9zdEZlYXR1cmVzKG1lc3NhZ2UpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcblxuICAgICAgICBmdW5jdGlvbiBmaW5kU291cmNlSW5kZXgoU2VuZGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gTWFwcGluZ3MuZmluZEluZGV4KGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGUuZ2V0U2VuZGVyKCkgPT09IHRoaXM7XG4gICAgICAgICAgICB9LCBTZW5kZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZmluZFNvdXJjZU1hcChNYXBwaW5ncywgc291cmNlLCBwbHVnaW5TZW5kZXIpIHtcbiAgICAgICAgICAgIHZhciBzb3VyY2VNYXAgPSBNYXBwaW5nc1tmaW5kU291cmNlSW5kZXgoc291cmNlKV07XG4gICAgICAgICAgICBpZiAoIXNvdXJjZU1hcCkge1xuICAgICAgICAgICAgICAgIHNvdXJjZU1hcCA9IE1hcHBpbmdzW2ZpbmRTb3VyY2VJbmRleChwbHVnaW5TZW5kZXIpXTtcbiAgICAgICAgICAgICAgICBpZiAoIXNvdXJjZU1hcCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyAoXCJDb3VsZCBub3QgbG9jYXRlIHNvdXJjZSBtYXBcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHNvdXJjZU1hcDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEdFTkVSQUwgSU5URVJGQUNFXG4gICAgICAgIHRoaXMuY3JlYXRlU291cmNlTWFwID0gZnVuY3Rpb24gKFNlbmRlciwgcGx1Z2luSW5zdGFuY2UpIHtcbiAgICAgICAgICAgIHZhciBub2RlID0gbmV3IFNvdXJjZU1hcChTZW5kZXIsIHBsdWdpbkluc3RhbmNlKTtcbiAgICAgICAgICAgIE1hcHBpbmdzLnB1c2gobm9kZSk7XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5kZWxldGVTb3VyY2VNYXAgPSBmdW5jdGlvbiAoU2VuZGVyKSB7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSBmaW5kU291cmNlSW5kZXgoU2VuZGVyKTtcbiAgICAgICAgICAgIGlmIChpbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyAoXCJDb3VsZCBub3QgZmluZCB0aGUgc291cmNlIG1hcCBmb3IgdGhlIHBsdWdpblwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIE1hcHBpbmdzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5nZXRQbHVnaW5TZW5kZXIgPSBmdW5jdGlvbiAocGx1Z2luKSB7XG4gICAgICAgICAgICBpZiAocGx1Z2luLmNvbnN0cnVjdG9yID09PSBQbHVnaW5JbnN0YW5jZSkge1xuICAgICAgICAgICAgICAgIHBsdWdpbiA9IHBsdWdpbi5ub2RlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHBsdWdpbi5mZWF0dXJlTWFwLlNlbmRlcjtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnJlcXVlc3RGZWF0dXJlcyA9IGZ1bmN0aW9uIChyZXF1ZXN0b3IsIHNvdXJjZSwgZmVhdHVyZU9iamVjdCkge1xuICAgICAgICAgICAgaWYgKHJlcXVlc3Rvci5jb25zdHJ1Y3RvciAhPT0gUGx1Z2luSW5zdGFuY2UpIHtcbiAgICAgICAgICAgICAgICByZXF1ZXN0b3IgPSByZXF1ZXN0b3IucGx1Z2luSW5zdGFuY2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBHZXQgdGhlIHNvdXJjZSBtYXBcbiAgICAgICAgICAgIHZhciBwbHVnaW5TZW5kZXIgPSB0aGlzLmdldFBsdWdpblNlbmRlcihzb3VyY2UpO1xuICAgICAgICAgICAgdmFyIHNvdXJjZU1hcCA9IGZpbmRTb3VyY2VNYXAoTWFwcGluZ3MsIHNvdXJjZSwgcGx1Z2luU2VuZGVyKTtcbiAgICAgICAgICAgIHNvdXJjZU1hcC5yZXF1ZXN0RmVhdHVyZXMocmVxdWVzdG9yLCBmZWF0dXJlT2JqZWN0KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5kZWxldGVGZWF0dXJlcyA9IGZ1bmN0aW9uIChyZXF1ZXN0b3IsIHNvdXJjZSwgZmVhdHVyZU9iamVjdCkge1xuICAgICAgICAgICAgaWYgKHJlcXVlc3Rvci5jb25zdHJ1Y3RvciAhPT0gUGx1Z2luSW5zdGFuY2UpIHtcbiAgICAgICAgICAgICAgICByZXF1ZXN0b3IgPSByZXF1ZXN0b3IucGx1Z2luSW5zdGFuY2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc291cmNlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBNYXBwaW5ncy5mb3JFYWNoKGZ1bmN0aW9uIChzb3VyY2VNYXApIHtcbiAgICAgICAgICAgICAgICAgICAgc291cmNlTWFwLmNhbmNlbEZlYXR1cmVzKHJlcXVlc3Rvcik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIEdldCB0aGUgc291cmNlIG1hcFxuICAgICAgICAgICAgICAgIHZhciBwbHVnaW5TZW5kZXIgPSB0aGlzLmdldFBsdWdpblNlbmRlcihzb3VyY2UpO1xuICAgICAgICAgICAgICAgIHZhciBzb3VyY2VNYXAgPSBmaW5kU291cmNlTWFwKE1hcHBpbmdzLCBzb3VyY2UsIHBsdWdpblNlbmRlcik7XG4gICAgICAgICAgICAgICAgc291cmNlTWFwLmNhbmNlbEZlYXR1cmVzKHJlcXVlc3RvciwgZmVhdHVyZU9iamVjdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZ2V0RmVhdHVyZUxpc3QgPSBmdW5jdGlvbiAocmVxdWVzdG9yLCBzb3VyY2UpIHt9O1xuICAgICAgICB0aGlzLnBvc3RGZWF0dXJlcyA9IGZ1bmN0aW9uIChmZWF0dXJlT2JqZWN0KSB7XG4gICAgICAgICAgICAvLyBSZWNlaXZlIGZyb20gdGhlIFNlbmRlciBvYmplY3RzXG4gICAgICAgICAgICAvLyBUcmlnZ2VyIGRpc3RyaWJ1dGVkIHNlYXJjaCBmb3IgcmVzdWx0cyB0cmFuc21pc3Npb25cblxuICAgICAgICAgICAgLy8gRmlyc3QgZ2V0IHRoZSBpbnN0YW5jZSBtYXBwaW5nIGZvciBvdXRwdXQvZnJhbWVcbiAgICAgICAgICAgIHZhciBzb3VyY2UgPSBNYXBwaW5nc1tmaW5kU291cmNlSW5kZXgoZmVhdHVyZU9iamVjdC5wbHVnaW4pXTtcbiAgICAgICAgICAgIGlmICghc291cmNlKSB7XG4gICAgICAgICAgICAgICAgc291cmNlID0gTWFwcGluZ3NbZmluZFNvdXJjZUluZGV4KHRoaXMuZ2V0UGx1Z2luU2VuZGVyKGZlYXR1cmVPYmplY3QucGx1Z2luKSldO1xuICAgICAgICAgICAgICAgIGlmICghc291cmNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IChcIlBsdWdpbiBJbnN0YW5jZSBub3QgbG9hZGVkIVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZnJhbWVNYXAgPSBzb3VyY2UuZmluZEZyYW1lTWFwKGZlYXR1cmVPYmplY3Qub3V0cHV0SW5kZXgsIGZlYXR1cmVPYmplY3QuZnJhbWVTaXplKTtcblxuICAgICAgICAgICAgLy8gU2VuZCB0aGUgZmVhdHVyZSBvYmplY3QgdG8gdGhlIFJlcXVlc3Rvck1hcCBvYmplY3QgdG8gaGFuZGxlIGNvbW1zXG4gICAgICAgICAgICBmcmFtZU1hcC5yZXF1ZXN0b3JzLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBlLnBvc3RGZWF0dXJlcyh0aGlzKTtcbiAgICAgICAgICAgIH0sIGZlYXR1cmVPYmplY3QpO1xuXG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIHRoaXMuRmVhdHVyZU1hcCA9IG5ldyBGZWF0dXJlTWFwKCk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMuRmVhdHVyZU1hcCwgXCJmYWN0b3J5XCIsIHtcbiAgICAgICAgJ3ZhbHVlJzogdGhpc1xuICAgIH0pO1xuXG4gICAgdmFyIHN0b3JlcyA9IFtdO1xuXG4gICAgdGhpcy5jcmVhdGVTdG9yZSA9IGZ1bmN0aW9uIChzdG9yZU5hbWUpIHtcbiAgICAgICAgdmFyIG5vZGUgPSBuZXcgTGlua2VkU3RvcmUuTGlua2VkU3RvcmUoc3RvcmVOYW1lKTtcbiAgICAgICAgc3RvcmVzLnB1c2gobm9kZSk7XG4gICAgICAgIHJldHVybiBub2RlO1xuICAgIH07XG5cbiAgICB0aGlzLmdldFN0b3JlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHN0b3JlcztcbiAgICB9O1xuXG4gICAgdGhpcy5maW5kU3RvcmUgPSBmdW5jdGlvbiAoc3RvcmVOYW1lKSB7XG4gICAgICAgIHJldHVybiBzdG9yZXMuZmluZChmdW5jdGlvbiAoYSkge1xuICAgICAgICAgICAgcmV0dXJuIGEubmFtZSA9PT0gc3RvcmVOYW1lO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgLy8gQnVpbGQgdGhlIGRlZmF1bHQgU3RvcmVzXG4gICAgdGhpcy5TZXNzaW9uRGF0YSA9IG5ldyBMaW5rZWRTdG9yZS5MaW5rZWRTdG9yZShcIlNlc3Npb25cIik7XG4gICAgdGhpcy5Vc2VyRGF0YSA9IG5ldyBMaW5rZWRTdG9yZS5MaW5rZWRTdG9yZShcIlVzZXJcIik7XG5cbiAgICAvLyBDcmVhdGVkIGZvciB0aGUgaW5wdXQgb2YgZWFjaCBTdWJGYWN0b3J5IHBsdWdpbiBjaGFpblxuICAgIHZhciBTdWJGYWN0b3J5RmVhdHVyZVNlbmRlciA9IGZ1bmN0aW9uIChvd25lciwgRmFjdG9yeUZlYXR1cmVNYXApIHtcbiAgICAgICAgdmFyIE91dHB1dE5vZGUgPSBmdW5jdGlvbiAocGFyZW50LCBvdXRwdXQpIHtcbiAgICAgICAgICAgIHZhciBleHRyYWN0b3JzID0gW107XG4gICAgICAgICAgICB2YXIgRXh0cmFjdG9yID0gZnVuY3Rpb24gKG91dHB1dCwgZnJhbWVTaXplKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5leHRyYWN0b3IgPSBvdXRwdXQuY29udGV4dC5jcmVhdGVBbmFseXNlcigpO1xuICAgICAgICAgICAgICAgIHRoaXMuZXh0cmFjdG9yLmZmdFNpemUgPSBmcmFtZVNpemU7XG4gICAgICAgICAgICAgICAgb3V0cHV0LmNvbm5lY3QodGhpcy5leHRyYWN0b3IpO1xuICAgICAgICAgICAgICAgIHRoaXMuZmVhdHVyZXMgPSBbXTtcbiAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJmcmFtZVNpemVcIiwge1xuICAgICAgICAgICAgICAgICAgICAndmFsdWUnOiBmcmFtZVNpemVcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHZhciByZWN1cnNpdmVQcm9jZXNzaW5nID0gb3duZXIucmVjdXJzaXZlUHJvY2Vzc2luZztcbiAgICAgICAgICAgICAgICAvKlxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHJlY3Vyc2l2ZVByb2Nlc3NpbmcoYmFzZSwgbGlzdCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbCA9IGxpc3QubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICAgICAgaSwgZW50cnk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVudHJ5ID0gbGlzdFtpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VbZW50cnkubmFtZV0uYXBwbHkoYmFzZSwgZW50cnkucGFyYW1ldGVycyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW50cnkuZmVhdHVyZXMgJiYgZW50cnkuZmVhdHVyZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY3Vyc2l2ZVByb2Nlc3NpbmcoYmFzZS5yZXN1bHRbZW50cnkubmFtZV0sIGVudHJ5LmZlYXR1cmVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG9uYXVkaW9jYWxsYmFjayhkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vdGhpcyA9PT0gRXh0cmFjdG9yXG4gICAgICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ251bWJlck9mQ2hhbm5lbHMnOiAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ3Jlc3VsdHMnOiBbXVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICByZWN1cnNpdmVQcm9jZXNzaW5nKGRhdGEsIHRoaXMuZmVhdHVyZXMpO1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnJlc3VsdHNbMF0gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnY2hhbm5lbCc6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAncmVzdWx0cyc6IEpTT04ucGFyc2UoZGF0YS50b0pTT04oKSlcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3N0RmVhdHVyZXMoZGF0YS5sZW5ndGgsIG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMuc2V0RmVhdHVyZXMgPSBmdW5jdGlvbiAoZmVhdHVyZUxpc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mZWF0dXJlcyA9IGZlYXR1cmVMaXN0O1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5mZWF0dXJlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXh0cmFjdG9yLmNsZWFyQ2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXh0cmFjdG9yLmZyYW1lQ2FsbGJhY2sob25hdWRpb2NhbGxiYWNrLCB0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdGhpcy5yZWpvaW5FeHRyYWN0b3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIG91dHB1dC5jb25uZWN0KHRoaXMuZXh0cmFjdG9yKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBXb3JrZXJFeHRyYWN0b3IgPSBmdW5jdGlvbiAob3V0cHV0LCBmcmFtZVNpemUpIHtcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBvbmF1ZGlvY2FsbGJhY2soZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYywgZnJhbWVzID0gW107XG4gICAgICAgICAgICAgICAgICAgIGZvciAoYyA9IDA7IGMgPCBlLmlucHV0QnVmZmVyLm51bWJlck9mQ2hhbm5lbHM7IGMrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZnJhbWVzW2NdID0gZS5pbnB1dEJ1ZmZlci5nZXRDaGFubmVsRGF0YShjKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB3b3JrZXIucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgICAgICAgICAgJ3N0YXRlJzogMixcbiAgICAgICAgICAgICAgICAgICAgICAgICdmcmFtZXMnOiBmcmFtZXNcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gcmVzcG9uc2UobXNnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucG9zdEZlYXR1cmVzKGZyYW1lU2l6ZSwgbXNnLmRhdGEucmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciB3b3JrZXIgPSBuZXcgV29ya2VyKFwianNhcC9mZWF0dXJlLXdvcmtlci5qc1wiKTtcbiAgICAgICAgICAgICAgICB3b3JrZXIub25lcnJvciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHRoaXMuc2V0RmVhdHVyZXMgPSBmdW5jdGlvbiAoZmVhdHVyZUxpc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29uZmlnTWVzc2FnZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdzdGF0ZSc6IDEsXG4gICAgICAgICAgICAgICAgICAgICAgICAnc2FtcGxlUmF0ZSc6IG91dHB1dC5jb250ZXh0LnNhbXBsZVJhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAnZmVhdHVyZUxpc3QnOiBmZWF0dXJlTGlzdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICdudW1DaGFubmVscyc6IG91dHB1dC5udW1iZXJPZk91dHB1dHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAnZnJhbWVTaXplJzogdGhpcy5mcmFtZVNpemVcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mZWF0dXJlcyA9IGZlYXR1cmVMaXN0O1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmVhdHVyZUxpc3QgJiYgZmVhdHVyZUxpc3QubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgd29ya2VyLm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUuZGF0YS5zdGF0ZSA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3b3JrZXIub25tZXNzYWdlID0gcmVzcG9uc2UuYmluZChzZWxmKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5leHRyYWN0b3Iub25hdWRpb3Byb2Nlc3MgPSBvbmF1ZGlvY2FsbGJhY2suYmluZChzZWxmKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3b3JrZXIucG9zdE1lc3NhZ2UoY29uZmlnTWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3N0YXRlJzogMFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmV4dHJhY3Rvci5vbmF1ZGlvcHJvY2VzcyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHRoaXMucmVqb2luRXh0cmFjdG9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBvdXRwdXQuY29ubmVjdCh0aGlzLmV4dHJhY3Rvcik7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHRoaXMuZXh0cmFjdG9yID0gb3V0cHV0LmNvbnRleHQuY3JlYXRlU2NyaXB0UHJvY2Vzc29yKGZyYW1lU2l6ZSwgb3V0cHV0Lm51bWJlck9mT3V0cHV0cywgMSk7XG4gICAgICAgICAgICAgICAgb3V0cHV0LmNvbm5lY3QodGhpcy5leHRyYWN0b3IpO1xuICAgICAgICAgICAgICAgIHRoaXMuZXh0cmFjdG9yLmNvbm5lY3Qob3V0cHV0LmNvbnRleHQuZGVzdGluYXRpb24pO1xuXG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZnJhbWVTaXplXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgJ3ZhbHVlJzogZnJhbWVTaXplXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5hZGRFeHRyYWN0b3IgPSBmdW5jdGlvbiAoZnJhbWVTaXplKSB7XG4gICAgICAgICAgICAgICAgdmFyIG9iajtcbiAgICAgICAgICAgICAgICBpZiAod2luZG93Lldvcmtlcikge1xuICAgICAgICAgICAgICAgICAgICBvYmogPSBuZXcgV29ya2VyRXh0cmFjdG9yKG91dHB1dCwgZnJhbWVTaXplKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBvYmogPSBuZXcgRXh0cmFjdG9yKG91dHB1dCwgZnJhbWVTaXplKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZXh0cmFjdG9ycy5wdXNoKG9iaik7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwgXCJwb3N0RmVhdHVyZXNcIiwge1xuICAgICAgICAgICAgICAgICAgICAndmFsdWUnOiBmdW5jdGlvbiAoZnJhbWVTaXplLCByZXN1bHRzSlNPTikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9iaiA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnb3V0cHV0SW5kZXgnOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdmcmFtZVNpemUnOiBmcmFtZVNpemUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3Jlc3VsdHMnOiByZXN1bHRzSlNPTlxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucG9zdEZlYXR1cmVzKG9iaik7XG4gICAgICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBvYmo7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5maW5kRXh0cmFjdG9yID0gZnVuY3Rpb24gKGZyYW1lU2l6ZSkge1xuICAgICAgICAgICAgICAgIHZhciBjaGVjayA9IGZyYW1lU2l6ZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZXh0cmFjdG9ycy5maW5kKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgTVVTVCBiZSA9PSBOT1QgPT09XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBOdW1iZXIoZS5mcmFtZVNpemUpID09PSBOdW1iZXIoY2hlY2spO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMucmVqb2luRXh0cmFjdG9ycyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBleHRyYWN0b3JzLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgZS5yZWpvaW5FeHRyYWN0b3IoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmRlbGV0ZUV4dHJhY3RvciA9IGZ1bmN0aW9uIChmcmFtZVNpemUpIHt9O1xuICAgICAgICB9O1xuICAgICAgICB2YXIgb3V0cHV0Tm9kZXM7XG4gICAgICAgIHRoaXMudXBkYXRlRmVhdHVyZXMgPSBmdW5jdGlvbiAoZmVhdHVyZU9iamVjdCkge1xuICAgICAgICAgICAgdmFyIG87XG4gICAgICAgICAgICBmb3IgKG8gPSAwOyBvIDwgZmVhdHVyZU9iamVjdC5sZW5ndGg7IG8rKykge1xuICAgICAgICAgICAgICAgIGlmIChvdXRwdXROb2RlcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvID4gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgKFwiUmVxdWVzdGVkIGFuIG91dHB1dCB0aGF0IGRvZXMgbm90IGV4aXN0XCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG91dHB1dE5vZGVzID0gbmV3IE91dHB1dE5vZGUob3duZXIsIG93bmVyLmNoYWluU3RhcnQpO1xuICAgICAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob3V0cHV0Tm9kZXMsIFwicG9zdEZlYXR1cmVzXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICd2YWx1ZSc6IGZ1bmN0aW9uIChyZXN1bHRPYmplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBvc3RGZWF0dXJlcyhyZXN1bHRPYmplY3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgc2k7XG4gICAgICAgICAgICAgICAgZm9yIChzaSA9IDA7IHNpIDwgZmVhdHVyZU9iamVjdFtvXS5sZW5ndGg7IHNpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGV4dHJhY3RvciA9IG91dHB1dE5vZGVzLmZpbmRFeHRyYWN0b3IoZmVhdHVyZU9iamVjdFtvXVtzaV0uZnJhbWVTaXplKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFleHRyYWN0b3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4dHJhY3RvciA9IG91dHB1dE5vZGVzLmFkZEV4dHJhY3RvcihmZWF0dXJlT2JqZWN0W29dW3NpXS5mcmFtZVNpemUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGV4dHJhY3Rvci5zZXRGZWF0dXJlcyhmZWF0dXJlT2JqZWN0W29dW3NpXS5mZWF0dXJlTGlzdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMucmVqb2luRXh0cmFjdG9ycyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChvdXRwdXROb2Rlcykge1xuICAgICAgICAgICAgICAgIG91dHB1dE5vZGVzLnJlam9pbkV4dHJhY3RvcnMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnBvc3RGZWF0dXJlcyA9IGZ1bmN0aW9uIChmZWF0dXJlT2JqZWN0KSB7XG4gICAgICAgICAgICAvKlxuICAgICAgICAgICAgICAgIENhbGxlZCBieSB0aGUgaW5kaXZpZHVhbCBleHRyYWN0b3IgaW5zdGFuY2VzOlxuICAgICAgICAgICAgICAgIGZlYXR1cmVPYmplY3QgPSB7J2ZyYW1lU2l6ZSc6IGZyYW1lU2l6ZSxcbiAgICAgICAgICAgICAgICAnb3V0cHV0SW5kZXgnOiBvdXRwdXRJbmRleCxcbiAgICAgICAgICAgICAgICAncmVzdWx0cyc6W119XG4gICAgICAgICAgICAqL1xuICAgICAgICAgICAgRmFjdG9yeUZlYXR1cmVNYXAucG9zdEZlYXR1cmVzKHtcbiAgICAgICAgICAgICAgICAncGx1Z2luJzogdGhpcyxcbiAgICAgICAgICAgICAgICAnb3V0cHV0SW5kZXgnOiBmZWF0dXJlT2JqZWN0Lm91dHB1dEluZGV4LFxuICAgICAgICAgICAgICAgICdmcmFtZVNpemUnOiBmZWF0dXJlT2JqZWN0LmZyYW1lU2l6ZSxcbiAgICAgICAgICAgICAgICAncmVzdWx0cyc6IGZlYXR1cmVPYmplY3QucmVzdWx0c1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gU2VuZCB0byBGYWN0b3J5XG4gICAgICAgIEZhY3RvcnlGZWF0dXJlTWFwLmNyZWF0ZVNvdXJjZU1hcCh0aGlzLCB1bmRlZmluZWQpO1xuICAgIH07XG5cbiAgICB2YXIgUGx1Z2luU3ViRmFjdG9yeSA9IGZ1bmN0aW9uIChQbHVnaW5GYWN0b3J5LCBjaGFpblN0YXJ0LCBjaGFpblN0b3ApIHtcblxuICAgICAgICB2YXIgcGx1Z2luX2xpc3QgPSBbXSxcbiAgICAgICAgICAgIHBsdWdpbkNoYWluU3RhcnQgPSBjaGFpblN0YXJ0LFxuICAgICAgICAgICAgcGx1Z2luQ2hhaW5TdG9wID0gY2hhaW5TdG9wLFxuICAgICAgICAgICAgZmFjdG9yeU5hbWUgPSBcIlwiLFxuICAgICAgICAgICAgc3RhdGUgPSAxLFxuICAgICAgICAgICAgY2hhaW5TdGFydEZlYXR1cmUgPSBuZXcgU3ViRmFjdG9yeUZlYXR1cmVTZW5kZXIodGhpcywgUGx1Z2luRmFjdG9yeS5GZWF0dXJlTWFwKSxcbiAgICAgICAgICAgIHNlbWFudGljU3RvcmVzID0gW107XG4gICAgICAgIHRoaXMucGFyZW50ID0gUGx1Z2luRmFjdG9yeTtcbiAgICAgICAgcGx1Z2luQ2hhaW5TdGFydC5kaXNjb25uZWN0KCk7XG4gICAgICAgIHBsdWdpbkNoYWluU3RhcnQuY29ubmVjdChjaGFpblN0b3ApO1xuXG4gICAgICAgIHRoaXMuVHJhY2tEYXRhID0gbmV3IExpbmtlZFN0b3JlLkxpbmtlZFN0b3JlKFwiVHJhY2tcIik7XG4gICAgICAgIHRoaXMuUGx1Z2luRGF0YSA9IG5ldyBMaW5rZWRTdG9yZS5MaW5rZWRTdG9yZShcIlBsdWdpblwiKTtcblxuICAgICAgICB0aGlzLmZlYXR1cmVTZW5kZXIgPSBjaGFpblN0YXJ0RmVhdHVyZTtcblxuICAgICAgICB0aGlzLmdldEZlYXR1cmVDaGFpbiA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICB9O1xuXG4gICAgICAgIGZ1bmN0aW9uIHJlYnVpbGQoKSB7XG4gICAgICAgICAgICB2YXIgaSA9IDAsXG4gICAgICAgICAgICAgICAgbCA9IHBsdWdpbl9saXN0Lmxlbmd0aCAtIDE7XG4gICAgICAgICAgICB3aGlsZSAoaSA8IGwpIHtcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudE5vZGUgPSBwbHVnaW5fbGlzdFtpKytdO1xuICAgICAgICAgICAgICAgIHZhciBuZXh0Tm9kZSA9IHBsdWdpbl9saXN0W2ldO1xuICAgICAgICAgICAgICAgIGN1cnJlbnROb2RlLnJlY29ubmVjdChuZXh0Tm9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBpc29sYXRlKCkge1xuICAgICAgICAgICAgcGx1Z2luX2xpc3QuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIGUuZGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBjdXRDaGFpbigpIHtcbiAgICAgICAgICAgIGlmIChwbHVnaW5fbGlzdC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgcGx1Z2luQ2hhaW5TdGFydC5kaXNjb25uZWN0KHBsdWdpbl9saXN0WzBdLmlucHV0KTtcbiAgICAgICAgICAgICAgICBwbHVnaW5fbGlzdFtwbHVnaW5fbGlzdC5sZW5ndGggLSAxXS5vdXRwdXQuZGlzY29ubmVjdChwbHVnaW5DaGFpblN0b3ApO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwbHVnaW5DaGFpblN0YXJ0LmRpc2Nvbm5lY3QocGx1Z2luQ2hhaW5TdG9wKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gam9pbkNoYWluKCkge1xuICAgICAgICAgICAgaWYgKHBsdWdpbl9saXN0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBwbHVnaW5DaGFpblN0YXJ0LmNvbm5lY3QocGx1Z2luX2xpc3RbMF0uaW5wdXQpO1xuICAgICAgICAgICAgICAgIHBsdWdpbl9saXN0W3BsdWdpbl9saXN0Lmxlbmd0aCAtIDFdLm91dHB1dC5jb25uZWN0KHBsdWdpbkNoYWluU3RvcCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHBsdWdpbkNoYWluU3RhcnQuY29ubmVjdChwbHVnaW5DaGFpblN0b3ApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2hhaW5TdGFydEZlYXR1cmUucmVqb2luRXh0cmFjdG9ycygpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5ieXBhc3NQbHVnaW4gPSBmdW5jdGlvbiAocGx1Z2luX2luc3RhbmNlLCBzdGF0ZSkge1xuICAgICAgICAgICAgLy8gQ2hlY2sgaXMgYSBtZW1iZXIgb2YgdGhpcyBjaGFpblxuICAgICAgICAgICAgaWYgKHBsdWdpbl9saXN0LmluY2x1ZGVzKHBsdWdpbl9pbnN0YW5jZSkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGx1Z2luX2luc3RhbmNlLmJ5cGFzcyhzdGF0ZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5nZXRQcm90b3R5cGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50LmdldFByb3RvdHlwZXMoKTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmdldEZhY3RvcnkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQ7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5kZXN0cm95ID0gZnVuY3Rpb24gKHJlY29ubmVjdCkge1xuICAgICAgICAgICAgdmFyIGk7XG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgcGx1Z2luX2xpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRlc3Ryb3lQbHVnaW4ocGx1Z2luX2xpc3RbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGx1Z2luQ2hhaW5TdGFydC5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgICBpZiAocmVjb25uZWN0ID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgcGx1Z2luQ2hhaW5TdGFydC5jb25uZWN0KHBsdWdpbkNoYWluU3RvcCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gUGx1Z2luIGNyZWF0aW9uIC8gZGVzdHJ1Y3Rpb25cblxuICAgICAgICBmdW5jdGlvbiBidWlsZE5ld1BsdWdpbihwcm90b3R5cGVPYmplY3QpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3RhdGUgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0IChcIlN1YkZhY3RvcnkgaGFzIGJlZW4gZGVzdHJveWVkISBDYW5ub3QgYWRkIG5ldyBwbHVnaW5zXCIpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUocHJvdG90eXBlT2JqZWN0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBwcm90b3R5cGVPYmplY3QuY3JlYXRlUGx1Z2luSW5zdGFuY2Uoc2VsZiwgZmFsc2UpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24obm9kZSkge1xuICAgICAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhub2RlLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnVHJhY2tEYXRhJzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBzZWxmLlRyYWNrRGF0YVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY3JlYXRlUGx1Z2luID0gZnVuY3Rpb24gKHByb3RvdHlwZU9iamVjdCkge1xuICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIGJ1aWxkTmV3UGx1Z2luKHByb3RvdHlwZU9iamVjdCkuY2F0Y2goZnVuY3Rpb24oZSl7XG4gICAgICAgICAgICAgICAgdGhyb3coXCJQbHVnaW4gZGlkIG5vdCBnZXQgY3JlYXRlZCEgQWJvcnRpbmdcIik7XG4gICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgICAgICAgICAgICBjdXRDaGFpbigpO1xuICAgICAgICAgICAgICAgIHBsdWdpbl9saXN0LnB1c2gobm9kZSk7XG4gICAgICAgICAgICAgICAgaXNvbGF0ZSgpO1xuICAgICAgICAgICAgICAgIHJlYnVpbGQoKTtcbiAgICAgICAgICAgICAgICBqb2luQ2hhaW4oKTtcbiAgICAgICAgICAgICAgICBub2RlLm5vZGUub25sb2FkZWQuY2FsbChub2RlLm5vZGUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5kZXN0cm95UGx1Z2luID0gZnVuY3Rpb24gKHBsdWdpbl9vYmplY3QpIHtcbiAgICAgICAgICAgIGlmIChzdGF0ZSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBpbmRleCA9IHRoaXMuZ2V0UGx1Z2luSW5kZXgocGx1Z2luX29iamVjdCk7XG4gICAgICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICAgICAgICAgIGN1dENoYWluKCk7XG4gICAgICAgICAgICAgICAgcGx1Z2luX29iamVjdC5ub2RlLnN0b3AuY2FsbChwbHVnaW5fb2JqZWN0Lm5vZGUpO1xuICAgICAgICAgICAgICAgIHBsdWdpbl9vYmplY3Qubm9kZS5vbnVubG9hZGVkLmNhbGwocGx1Z2luX29iamVjdC5ub2RlKTtcbiAgICAgICAgICAgICAgICBwbHVnaW5fb2JqZWN0Lm5vZGUuZGVjb25zdHJ1Y3QuY2FsbChwbHVnaW5fb2JqZWN0Lm5vZGUpO1xuICAgICAgICAgICAgICAgIHBsdWdpbl9saXN0LnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZGVsZXRlUGx1Z2luKHBsdWdpbl9vYmplY3QuaWQpO1xuICAgICAgICAgICAgICAgIGlzb2xhdGUoKTtcbiAgICAgICAgICAgICAgICByZWJ1aWxkKCk7XG4gICAgICAgICAgICAgICAgam9pbkNoYWluKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5nZXRQbHVnaW5zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHBsdWdpbl9saXN0O1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuZ2V0QWxsUGx1Z2lucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcmVudC5nZXRBbGxQbHVnaW5zT2JqZWN0KCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5nZXRQbHVnaW5JbmRleCA9IGZ1bmN0aW9uIChwbHVnaW5fb2JqZWN0KSB7XG4gICAgICAgICAgICBpZiAoc3RhdGUgPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgaW5kZXggPSBwbHVnaW5fbGlzdC5maW5kSW5kZXgoZnVuY3Rpb24gKGVsZW1lbnQsIGluZGV4LCBhcnJheSkge1xuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50ID09PSB0aGlzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9LCBwbHVnaW5fb2JqZWN0KTtcbiAgICAgICAgICAgIHJldHVybiBpbmRleDtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLm1vdmVQbHVnaW4gPSBmdW5jdGlvbiAocGx1Z2luX29iamVjdCwgbmV3X2luZGV4KSB7XG4gICAgICAgICAgICBpZiAoc3RhdGUgPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgb2JqLCBpbmRleCA9IHRoaXMuZ2V0UGx1Z2luSW5kZXgocGx1Z2luX29iamVjdCksXG4gICAgICAgICAgICAgICAgaG9sZExvdywgaG9sZEhpZ2gsIGk7XG4gICAgICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICAgICAgICAgIGN1dENoYWluKCk7XG4gICAgICAgICAgICAgICAgaXNvbGF0ZSgpO1xuICAgICAgICAgICAgICAgIG9iaiA9IHBsdWdpbl9saXN0LnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgcGx1Z2luX29iamVjdC5ub2RlLm9udW5sb2FkZWQuY2FsbChwbHVnaW5fb2JqZWN0Lm5vZGUpO1xuICAgICAgICAgICAgICAgIGlmIChuZXdfaW5kZXggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcGx1Z2luX2xpc3QgPSBvYmouY29uY2F0KHBsdWdpbl9saXN0KTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5ld19pbmRleCA+PSBwbHVnaW5fbGlzdC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgcGx1Z2luX2xpc3QgPSBwbHVnaW5fbGlzdC5jb25jYXQob2JqKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBob2xkTG93ID0gcGx1Z2luX2xpc3Quc2xpY2UoMCwgbmV3X2luZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgaG9sZEhpZ2ggPSBwbHVnaW5fbGlzdC5zbGljZShuZXdfaW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICBwbHVnaW5fbGlzdCA9IGhvbGRMb3cuY29uY2F0KG9iai5jb25jYXQoaG9sZEhpZ2gpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVidWlsZCgpO1xuICAgICAgICAgICAgICAgIGpvaW5DaGFpbigpO1xuICAgICAgICAgICAgICAgIHBsdWdpbl9vYmplY3Qubm9kZS5vbmxvYWRlZC5jYWxsKHBsdWdpbl9vYmplY3Qubm9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5jb3B5UGx1Z2luID0gZnVuY3Rpb24ocGx1Z2luX29iamVjdCwgY29weV9pbmRleCkge1xuICAgICAgICAgICAgaWYgKGNvcHlfaW5kZXggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGNvcHlfaW5kZXggPSBwbHVnaW5fbGlzdC5sZW5ndGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIGNvcHlfaW5kZXggIT0gXCJudW1iZXJcIiB8fCBjb3B5X2luZGV4IDwgMCB8fCBjb3B5X2luZGV4ID4gcGx1Z2luX2xpc3QubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhyb3coXCJQbHVnaW4gY29weSBpbmRleCBvdXRzaWRlIG9mIHRoZSBjaGFpbiBzY29wZS5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYnVpbGROZXdQbHVnaW4ocGx1Z2luX29iamVjdC5wcm90b3R5cGVPYmplY3QpXG4gICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24oZSl7XG4gICAgICAgICAgICAgICAgdGhyb3coXCJQbHVnaW4gZGlkIG5vdCBnZXQgY3JlYXRlZCEgQWJvcnRpbmdcIik7XG4gICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgICAgICAgICAgICBub2RlLm5vZGUucGFyYW1ldGVycy5zZXRQYXJhbWV0ZXJzQnlPYmplY3QocGx1Z2luX29iamVjdC5ub2RlLnBhcmFtZXRlcnMuZ2V0UGFyYW1ldGVyT2JqZWN0KCkpO1xuICAgICAgICAgICAgICAgIGN1dENoYWluKCk7XG4gICAgICAgICAgICAgICAgaXNvbGF0ZSgpO1xuICAgICAgICAgICAgICAgIHBsdWdpbl9saXN0LnNwbGljZShjb3B5X2luZGV4LCAwLCBub2RlKTtcbiAgICAgICAgICAgICAgICByZWJ1aWxkKCk7XG4gICAgICAgICAgICAgICAgam9pbkNoYWluKCk7XG4gICAgICAgICAgICAgICAgbm9kZS5ub2RlLm9ubG9hZGVkLmNhbGwobm9kZS5ub2RlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH07XG5cbiAgICAgICAgZnVuY3Rpb24gcmVjdXJzaXZlUHJvY2Vzc2luZyhiYXNlLCBsaXN0KSB7XG4gICAgICAgICAgICB2YXIgbCA9IGxpc3QubGVuZ3RoLFxuICAgICAgICAgICAgICAgIGksIGVudHJ5O1xuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgICAgIGVudHJ5ID0gbGlzdFtpXTtcbiAgICAgICAgICAgICAgICBiYXNlW2VudHJ5Lm5hbWVdLmFwcGx5KGJhc2UsIGVudHJ5LnBhcmFtZXRlcnMpO1xuICAgICAgICAgICAgICAgIGlmIChlbnRyeS5mZWF0dXJlcyAmJiBlbnRyeS5mZWF0dXJlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlY3Vyc2l2ZVByb2Nlc3NpbmcoYmFzZS5yZXN1bHRbZW50cnkubmFtZV0sIGVudHJ5LmZlYXR1cmVzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLCB7XG4gICAgICAgICAgICAnY2hhaW5TdGFydCc6IHtcbiAgICAgICAgICAgICAgICAndmFsdWUnOiBjaGFpblN0YXJ0XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ2NoYWluU3RvcCc6IHtcbiAgICAgICAgICAgICAgICAndmFsdWUnOiBjaGFpblN0b3BcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnbmFtZSc6IHtcbiAgICAgICAgICAgICAgICAnZ2V0JzogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFjdG9yeU5hbWU7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAnc2V0JzogZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBuYW1lID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmYWN0b3J5TmFtZSA9IG5hbWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhY3RvcnlOYW1lO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAncmVjdXJzaXZlUHJvY2Vzc2luZyc6IHtcbiAgICAgICAgICAgICAgICAnZ2V0JzogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVjdXJzaXZlUHJvY2Vzc2luZztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICB2YXIgUGx1Z2luVXNlckludGVyZmFjZU1lc3NhZ2VIdWIgPSAoZnVuY3Rpb24oZmFjdG9yeSl7XG4gICAgICAgIGZ1bmN0aW9uIGJ1aWxkUGx1Z2luSW50ZXJmYWNlKHBsdWdpbl9vYmplY3QsIGludGVyZmFjZV9vYmplY3QpIHtcbiAgICAgICAgICAgIHZhciBpZnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaWZyYW1lXCIpO1xuICAgICAgICAgICAgaWZyYW1lLnNyYyA9IGludGVyZmFjZV9vYmplY3Quc3JjO1xuICAgICAgICAgICAgaWYgKGludGVyZmFjZV9vYmplY3Qud2lkdGgpIHtcbiAgICAgICAgICAgICAgICBpZnJhbWUud2lkdGggPSBpbnRlcmZhY2Vfb2JqZWN0LndpZHRoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGludGVyZmFjZV9vYmplY3QuaGVpZ2h0KSB7XG4gICAgICAgICAgICAgICAgaWZyYW1lLmhlaWdodCA9IGludGVyZmFjZV9vYmplY3QuaGVpZ2h0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWZyYW1lLnN0eWxlLmJvcmRlciA9IFwiMFwiO1xuICAgICAgICAgICAgcmV0dXJuIGlmcmFtZTtcbiAgICAgICAgfVxuICAgICAgICBmdW5jdGlvbiBzZXREZWZhdWx0SW50ZXJmYWNlKHVybCwgd2lkdGgsIGhlaWdodCkge1xuICAgICAgICAgICAgZGVmYXVsdF9pbnRlcmZhY2UgPSB7XG4gICAgICAgICAgICAgICAgdXJsOiB1cmwsXG4gICAgICAgICAgICAgICAgd2lkdGg6IHdpZHRoLFxuICAgICAgICAgICAgICAgIGhlaWdodDogaGVpZ2h0XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIGRlZmF1bHRfaW50ZXJmYWNlO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIHBvbGxBbGxQbHVnaW5zKCkge1xuICAgICAgICAgICAgZmFjdG9yeS5nZXRBbGxQbHVnaW5zKCkuZm9yRWFjaChmdW5jdGlvbihwbHVnaW4pIHtcbiAgICAgICAgICAgICAgICBwbHVnaW4ubm9kZS5leHRlcm5hbEludGVyZmFjZS51cGRhdGVJbnRlcmZhY2VzKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgZGVmYXVsdF9pbnRlcmZhY2UgPSB7XG4gICAgICAgICAgICBzcmM6IFwianNhcF9kZWZhdWx0Lmh0bWxcIlxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBPYmplY3QuY3JlYXRlKHtcbiAgICAgICAgICAgIFwic2V0RGVmYXVsdEludGVyZmFjZVwiOiBzZXREZWZhdWx0SW50ZXJmYWNlLFxuICAgICAgICAgICAgXCJidWlsZFBsdWdpbkludGVyZmFjZVwiOmJ1aWxkUGx1Z2luSW50ZXJmYWNlLFxuICAgICAgICAgICAgXCJwb2xsQWxsUGx1Z2luc1wiOiBwb2xsQWxsUGx1Z2luc1xuICAgICAgICB9KTtcbiAgICB9KSh0aGlzKTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMsIHtcbiAgICAgICAgXCJjb250ZXh0XCI6IHtcbiAgICAgICAgICAgIFwidmFsdWVcIjogYXVkaW9fY29udGV4dFxuICAgICAgICB9LFxuICAgICAgICBcInBsdWdpblJvb3RVUkxcIjoge1xuICAgICAgICAgICAgXCJnZXRcIjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiByb290VVJMO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwic2V0XCI6IGZ1bmN0aW9uICh0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0ID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIHJvb3RVUkwgPSB0O1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcm9vdFVSTDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhyb3cgKFwiQ2Fubm90IHNldCByb290IFVSTCB3aXRob3V0IGEgc3RyaW5nXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcImNyZWF0ZUZhY3RvcnlDb3B5XCI6IHtcbiAgICAgICAgICAgIFwidmFsdWVcIjogZnVuY3Rpb24gKGNvbnRleHQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY29weUZhY3RvcnkoY29udGV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFwiUGx1Z2luR1VJXCI6IHtcbiAgICAgICAgICAgIFwidmFsdWVcIjogUGx1Z2luVXNlckludGVyZmFjZU1lc3NhZ2VIdWJcbiAgICAgICAgfVxuICAgIH0pO1xufTtcbiJdLCJzb3VyY2VSb290IjoiIn0=