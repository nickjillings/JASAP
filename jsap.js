var JSAP=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=3)}([function(t,e,n){"use strict";n.d(e,"a",function(){return r}),"function"==typeof AudioNode&&void 0===window.importScripts&&(AudioNode.prototype.getInputs=function(){return[this]});var r=function(t,e){var n=[],r=[],u=e,a=new EventTarget;function s(t,e){var n=e.findIndex(function(t){return t===this},t);return-1!==n&&(e.splice(n,1),!0)}void 0===this.context&&(this.context=t.context),void 0===this.factory&&(this.factory=t),this.featureMap=new o(this),this.externalInterface=new c(this),this.parameters=new i(this,this.externalInterface,a),this.addInput=function(t){return n.push(t),n},this.deleteInput=function(t){return s(t,n)},this.addOutput=function(t){return r.push(t),this.outputs},this.deleteOutput=function(t){return s(t,r)},this.start=this.stop=this.onloaded=this.onunloaded=this.deconstruct=function(){},Object.defineProperties(this,{numInputs:{get:function(){return n.length},set:function(){throw"Cannot set the number of inputs of BasePlugin"}},numOutputs:{get:function(){return r.length},set:function(){throw"Cannot set the number of outputs of BasePlugin"}},numParameters:{get:function(){return this.parameters.parameters.length},set:function(){throw"Cannot set the number of parameters of BasePlugin"}},owner:{get:function(){return u},set:function(t){return"object"==typeof t&&(u=t),u}},inputs:{get:function(t){return n},set:function(){throw"Illegal attempt to modify BasePlugin"}},outputs:{get:function(t){return r},set:function(){throw"Illegal attempt to modify BasePlugin"}},connect:{value:function(t){this.outputs[0].connect(t.inpt?t.input:t)}},disconnect:{value:function(t){void 0===t?this.outputs[0].disconnect():this.outputs[0].disconnect(t.input?t.input:t)}},getInputs:{value:function(){return this.inputs}},getOutputs:{value:function(){return this.outputs}},getParameterName:{value:function(){return this.parameters.getParameterNames()}},getParameterByName:{value:function(){return this.parameters.getParameterByName()}},getParameterObject:{value:function(){return this.parameters.getParameterObject()}},setParameterByName:{value:function(t,e){return this.parameters.setParameterByName(t,e)}},setParametersByObject:{value:function(t){return this.parameters.setParametersByObject(t)}},addEventListener:{value:function(t,e){return a.addEventListener(t,e)}},removeEventListener:{value:function(t,e){return a.addEventListener(t,e)}}})},i=function(t,e,n){var r=[];function i(t){return r.find(function(e){return e.name.toLowerCase()===t.toLowerCase()})}function o(t){return r.findIndex(function(e){return e.name.toLowerCase()===t.toLowerCase()})}function u(){var t={};return r.forEach(function(e){t[e.name]=e}),t}function a(t){return-1===r.findIndex(function(e){return e===t},t)&&r.push(t),t}function s(t,e,n){var r,i,o,u;r=i=function(t){return t},o=function(){},Object.defineProperties(this,{name:{value:e},owner:{value:t},update:{get:function(){return r},set:function(t){if("function"!=typeof t)throw"Must be a callback function";if(void 0===t(0))throw"Function must return a value";r=t}},translate:{get:function(){return i},set:function(t){if("function"!=typeof t)throw"Must be a callback function";if(void 0===t(0))throw"Function must return a value";i=t}},trigger:{get:function(){return o},set:function(t){if("function"!=typeof t)throw"Must be a callback function";o=t}},bindToAudioParam:{value:function(t){if("object"!=typeof t||void 0===t.value)throw"Must be an AudioParam object from an AudioNode";var e=this.update(this.value);(u=t).value=e}},boundAudioParam:{get:function(){return u}},actionList:{value:[]}})}function c(t,e,r,i,o){s.call(this,t,e,"Number");var u,a=r;Object.defineProperties(this,{type:{value:"Number"},destroy:{value:function(){t=e=r=i=o=a=u=void 0}},minimum:{value:i},maximum:{value:o},defaultValue:{value:r},value:{get:function(){return this.boundAudioParam?this.translate(this.boundAudioParam.value):a},set:function(t){if(this.minimum&&(t=Math.max(t,this.minimum)),this.maximum&&(t=Math.min(t,this.maximum)),u&&(t=Math.round(t/u),t*=u),this.boundAudioParam&&(this.boundAudioParam.value=this.update(t)),a!==t){a=t;var e=new Event("parameterset");n.dispatchEvent(e)}this.trigger()}},stepSize:{get:function(){return u},set:function(t){if(!isFinite(t)||t<0)throw"Invalid step size";u=t}}})}function f(t,e,r,i){s.call(this,t,e,"String");var o=r;Object.defineProperties(this,{type:{value:"String"},destroy:{value:function(){t=e=r=i=o=void 0}},maxLength:{value:i},defaultValue:{value:r},value:{get:function(){return this.boundAudioParam?this.translate(this.boundAudioParam.value):o},set:function(t){if(i&&t.length>i)throw"String longer than "+i+" characters";if(this.boundAudioParam&&(this.boundAudioParam.value=this.update(t)),o!==t){o=t;var e=new Event("parameterset");n.dispatchEvent(e)}this.trigger()}}})}function l(t,e){s.call(this,t,e,"Button");var n=function(){};Object.defineProperties(this,{type:{value:"Button"},destroy:{value:function(){t=e=void 0}},onclick:{get:function(){return n},set:function(t){if("function"!=typeof t)throw"onclick must be a function";n=t}}})}function d(t,e,r,i,o){s.call(this,t,e,"Button");var u=r;function a(t){if(this.boundAudioParam&&(this.boundAudioParam.value=this.update(t)),function(t){var e={time:new Date,value:t};this.actionList.push(e)}.call(this,t),u!==t){u=t;var e=new Event("parameterset");n.dispatchEvent(e)}return this.trigger(),t}Object.defineProperties(this,{type:{value:"Switch"},destroy:{value:function(){t=e=void 0}},defaultValue:{value:r},minState:{value:i},maxState:{value:o},value:{get:function(){return this.boundAudioParam?this.translate(this.boundAudioParam.value):u},set:function(t){if(t<i)throw"Set value is less than "+i;if(t>o)throw"Set value is greater than "+o;return a.call(this,t)}},increment:{value:function(){var t=u+1;return t>o&&(t=i),a.call(this,t)}},decrement:{value:function(){var t=u-1;return t<i&&(t=o),a.call(this,t)}}})}function h(t,e,r,i){s.call(this,t,e,"Button");var o=i.indexOf(r);function u(t){var e=i.indexOf(t);if(void 0===e||e<0)throw"Not in list range";if(this.boundAudioParam&&(this.boundAudioParam.value=this.update(t)),function(t){var e={time:new Date,value:t};this.actionList.push(e)}.call(this,t),o!==e){o=e;var r=new Event("parameterset");n.dispatchEvent(r)}return this.trigger(),i[o]}Object.defineProperties(this,{type:{value:"List"},destroy:{value:function(){t=e=void 0}},defaultValue:{value:r},listValues:{get:function(){return i.map(function(t){return t})}},value:{get:function(){return this.boundAudioParam?this.translate(this.boundAudioParam.value):i[o]},set:function(t){return u.call(this,t)}},increment:{value:function(){var t=o+1;return t>=i.length&&(t=0),u.call(this,t)}},decrement:{value:function(){var t=o-1;return t<0&&(t=i.length-1),u.call(this,t)}}})}c.prototype=Object.create(s.prototype),c.prototype.constructor=c,f.prototype=Object.create(s.prototype),f.prototype.constructor=f,l.prototype=Object.create(s.prototype),l.prototype.constructor=l,d.prototype=Object.create(s.prototype),d.prototype.constructor=d,h.prototype=Object.create(s.prototype),h.prototype.constructor=h,Object.defineProperties(this,{createNumberParameter:{value:function(e,n,r,i){if("string"!=typeof e||"number"!=typeof n||void 0!==r&&"number"!=typeof r||void 0!==i&&"number"!=typeof i)throw"Invlid constructor";if(-1!==o(e))throw"Parameter with name '"+e+"' already exists";var u=new c(t,e,n,r,i);return a(u),u}},createStringParameter:{value:function(e,n,r){if("string"!=typeof e||"string"!=typeof n||void 0!==r&&"number"!=typeof r)throw"Invlid constructor";if(-1!==o(e))throw"Parameter with name '"+e+"' already exists";var i=new f(t,e,n,r);return a(i),i}},createButtonParameter:{value:function(e){if("string"!=typeof e)throw"Invalid constructor";if(-1!==o(e))throw"Parameter with name '"+e+"' already exists";var n=new l(t,e);return a(n),n}},createSwitchParameter:{value:function(e,n,r,i){if("string"!=typeof e||"number"!=typeof n||"number"!=typeof r||"number"!=typeof i)throw"Invlid constructor";if(-1!==o(e))throw"Parameter with name '"+e+"' already exists";var u=new d(t,e,n,r,i);return a(u),u}},createListParameter:{value:function(e,n,r){if("string"!=typeof e||void 0===n||!Array.isArray(r))throw"Invlid constructor";if(!1===r.includes(n)&&hrow("Invlid constructor - default value missing"),-1!==o(e))throw"Parameter with name '"+e+"' already exists";var i=new h(t,e,n,r);return a(i),i}},createParameter:{value:function(){throw"This function is now deprecated"}},getParameterName:{value:function(){var t,e=[];for(t=0;t<r.length;t++)e.push(r[t].name);return e}},getParameterByName:{value:function(t){return i(t)}},getParameterObject:{value:function(){return u()}},getParameterNames:{value:function(){var t=[];return r.forEach(function(e){t.push(e.name)}),t}},setParameterByName:{value:function(t,e){var n=i(t);n&&(n.value=e)}},deleteParameter:{value:function(t){var e=r.findIndex(function(e){return e===t},t);return e>=0&&(r.splice(e,1),t.destroy(),!0)}},deleteAllParameters:{value:function(t){return r.forEach(function(t){t.destroy()}),r=[],!0}},setParametersByObject:{value:function(t){var e;for(e in t)if(t.hasOwnProperty(e))if("object"==typeof t[e])this.setParameterByName(e,t[e].value);else{if("number"!=typeof t[e])throw"Cannot set "+e+": Not a valid object";this.setParameterByName(e,t[e])}}},parameters:{get:function(){return u()},set:function(){throw"Cannot set, use .setParameterBy...()"}}})},o=function(t){this.plugin=t,this.Receiver=new u(this,t.factory.FeatureMap),this.Sender=new a(this,t.factory.FeatureMap),Object.defineProperty(this,"onfeatures",{get:function(){return this.Receiver.onfeatures},set:function(t){return this.Receiver.onfeatures=t,t}})},u=function(t,e){function n(t,e){if(void 0===t)throw"Source plugin must be defined";if(void 0===e)throw"FeatureObject must be defined";if("number"!=typeof e.outputIndex||"number"!=typeof e.frameSize||"object"!=typeof e.features)throw"Malformed featureObject";return!0}var r=function(){};this.requestFeatures=function(t){var e;for(e=0;e<t.length;e++)this.requestFeaturesFromPlugin(t[e].plugin,{outputIndex:t[e].outputIndex,frameSize:t[e].frameSize,features:t[e].features})},this.requestFeaturesFromPlugin=function(r,i){n(r,i),e.requestFeatures(t.plugin,r,i)},this.cancelFeaturesFromPlugin=function(r,i){n(r,i),e.deleteFeatures(t.plugin,r,i)},this.cancelAllFeaturesFromPlugin=function(n){if(void 0===n)throw"Source plugin must be defined";e.deleteFeatures(t.plugin,n)},this.cancelAllFeatures=function(){e.deleteFeatures(t.plugin)},this.postFeatures=function(t){"function"==typeof r&&r(t)},Object.defineProperty(this,"onfeatures",{get:function(){return r},set:function(t){return"function"==typeof t&&(r=t,!0)}})},a=function(t,e){var n=function(e,n,r){var i=[],o=function(e,n){this.extractor=t.plugin.factory.context.createAnalyser(),this.extractor.fftSize=n,e.connect(this.extractor),this.features=[],Object.defineProperty(this,"frameSize",{value:n});var r=this.factory.recursiveProcessing;function i(t){var e={numberOfChannels:1,results:[]};r(t,this.features),e.results[0]={channel:0,results:JSON.parse(t.toJSON())},this.postFeatures(t.length,e)}this.setFeatures=function(t){this.features=t,0===this.features.length?this.extractor.clearCallback():this.extractor.frameCallback(i,this)}},u=function(e,n){var r=new Worker("jsap/feature-worker.js");r.onerror=function(t){console.error(t)},this.setFeatures=function(i){var o=this,u={state:1,sampleRate:t.plugin.factory.context.sampleRate,featureList:i,numChannels:e.numberOfOutputs,frameSize:this.frameSize};this.features=i,i&&i.length>0?(r.onmessage=function(t){1===t.data.state?(r.onmessage=function(t){this.postFeatures(n,t.data.response)}.bind(o),o.extractor.onaudioprocess=function(t){var e,n=[];for(e=0;e<t.inputBuffer.numberOfChannels;e++)n[e]=t.inputBuffer.getChannelData(e);r.postMessage({state:2,frames:n})}.bind(o)):r.postMessage(u)},r.postMessage({state:0})):this.extractor.onaudioprocess=void 0},this.extractor=t.plugin.factory.context.createScriptProcessor(n,e.numberOfOutputs,1),e.connect(this.extractor),this.extractor.connect(t.plugin.factory.context.destination),Object.defineProperty(this,"frameSize",{value:n})};this.addExtractor=function(t){var e;return e=window.Worker?new u(n,t):new o(n,t),i.push(e),Object.defineProperty(e,"postFeatures",{value:function(t,e){var n={outputIndex:r,frameSize:t,results:e};this.postFeatures(n)}.bind(this)}),e},this.findExtractor=function(t){var e=t;return i.find(function(t){return t.frameSize===e})},this.deleteExtractor=function(t){}},r=[];this.updateFeatures=function(e){var i;for(i=0;i<e.length;i++){if(void 0===r[i]){if(i>t.plugin.numOutputs)throw"Requested an output that does not exist";r[i]=new n(t.plugin,t.plugin.outputs[i],i),Object.defineProperty(r[i],"postFeatures",{value:function(t){this.postFeatures(t)}.bind(this)})}var o;for(o=0;o<e[i].length;o++){var u=r[i].findExtractor(e[i][o].frameSize);u||(u=r[i].addExtractor(e[i][o].frameSize)),u.setFeatures(e[i][o].featureList)}}},this.postFeatures=function(e){t.plugin.factory.FeatureMap.postFeatures({plugin:t.plugin.pluginInstance,outputIndex:e.outputIndex,frameSize:e.frameSize,results:e.results})},e.createSourceMap(this,t.plugin.pluginInstance)},s=function(t,e,n){console.log("DEPRECATED!!"),console.log("The class PluginUserInterface has been deprecated"),console.log("Please look at the documents for the new methods for building plugins"),this.processor=t,this.root=document.createElement("div"),e>0&&(this.root.style.width=e+"px"),n>0&&(this.root.style.height=n+"px"),this.dim={width:e,height:n},this.intervalFunction=null,this.updateInterval=null,this.PluginParameterInterfaces=[];var r=function(t,e,n,r){this.input=t,this.processor=n,this.GUI=r,this.AudioParam=e,this.handleEvent=function(t){this.AudioParam.value=this.input.value},this.input.addEventListener("change",this),this.input.addEventListener("mousemove",this),this.input.addEventListener("click",this)};this.createPluginParameterInterfaceNode=function(t,e){var n=new r(t,e,this.processor,this);return this.PluginParameterInterfaces.push(n),n},this.update=function(){}};s.prototype.getRoot=function(){return this.root},s.prototype.getDimensions=function(){return this.dim},s.prototype.getWidth=function(){return this.dim.width},s.prototype.getHeight=function(){return this.dim.height},s.prototype.beginCallbacks=function(t){void 0===t&&(t=250),null===this.intervalFunction&&(this.updateInterval=t,this.intervalFunction=window.setInterval(function(){this.update()}.bind(this),250))},s.prototype.stopCallbacks=function(){null!==this.intervalFunction&&(window.clearInterval(this.intervalFunction),this.updateInterval=null,this.intervalFunction=null)},s.prototype.loadResource=function(t){return new Promise(function(e,n){var r=new XMLHttpRequest;r.open("GET",t),r.onload=function(){200===r.status?e(r.response):n(Error(r.statusText))},r.onerror=function(){n(Error("Network Error"))},r.send()})},s.prototype.clearGUI=function(){this.stopCallbacks(),this.root.innerHTML=""};var c=function(t){function e(e){var n,r,i={message:"updateParameters",parameters:(n=t.parameters.getParameterNames(),r={},n.forEach(function(e){var n=t.parameters.getParameterByName(e);r[e]={value:n.value,maximum:n.maximum,minimum:n.minimum,defaultValue:n.defaultValue,type:n.constructor.name,name:e}}),r)};return e&&(i.sender_id=e),i}function n(t){var n=e(t);r.forEach(function(t){t.postMessage(n)})}var r=[];window.addEventListener("message",function(i){if(r.includes(i.source))switch(i.data.message){case"setParameterByName":i.data.parameter.name&&t.parameters.setParameterByName(i.data.parameter.name,i.data.parameter.value),n(i.data.sender_id);break;case"setParametersByObject":i.data.parameter&&(!function(e){var n=JSON.parse(e.message.parameters);Object.keys(n).forEach(function(e){t.parameters.setParameterByName(e,n[e].value)})}(i),n(i.data.sender_id));break;case"requestParameters":i.source.postMessage(e());break;default:throw'Unknown message type "'+i.data.message+'"'}}),Object.defineProperties(this,{updateInterfaces:{value:function(){n()}},closeWindows:{value:function(){for(1;r.length>0;){r.pop().close()}}},registerWindow:{value:function(t){return!r.includes(t)&&(r.push(t),!0)}}})};"undefined"!=typeof window&&(window.BasePlugin=r)},function(t,e,n){"use strict";e.a={LinkedStore:function(t){var e={};function n(t,e,i){var o;for(o in t){var u;t.hasOwnProperty(o)&&("object"==typeof t[o]?(t[o].toXML?u=t[o].toXML(i):(u=i.createElement(o),e.appendChild(u),t[o].length?r(t[o],u,i):n(t[o],u,i)),e.appendChild(u)):e.setAttribute(o,t[o]))}}function r(t,e,r){var i,o;t.length,i=t.every(function(t){return"number"==typeof t}),o=t.every(function(t){return"string"==typeof t}),i||o?t.forEach(function(t,n){e.setAttribute("index-"+n,t)}):t.forEach(function(t,i){var o=document.createElement("value");o.setAttribute("index",i),n(t,o,r),e.appendChild(o)})}Object.defineProperties(this,{name:{get:function(){return t},set:function(e){if(void 0!==t)throw"Name is already set"}},addTerm:{value:function(t,n){if("string"!=typeof t&&0===t.length)throw"term must be a string";e[t]=n}},addTerms:{value:function(t){if("object"!=typeof t)throw"addTerms takes an object of term/value pairs";var e;for(e in t)t.hasOwnProperty(e)&&this.addTerm(e,t[e])}},deleteTerm:{value:function(t){this.addTerm(t,void 0)}},getTerm:{value:function(t){if("string"!=typeof t&&0===t.length)throw"term must be a string";return e[t]}},hasTerm:{value:function(t){if("string"!=typeof t&&0===t.length)throw"term must be a string";return e.hasOwnProperty(t)}},toJSON:{value:function(){return JSON.parse(JSON.stringify(e))}},toXML:{value:function(r){var i;return i=r?r.createElement(t):(r=document.implementation.createDocument(null,t,null)).firstElementChild,n(e,i,r),i}}})}}},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(0),i=function(t,e){var n=!1,i=!1;r.a.call(this,t,e),Object.defineProperties(this,{addInput:{value:function(){throw'Cannot add input to type "SynthesiserBasePlugin"'}},deleteInput:{value:function(){throw'Cannot delete input to type "SynthesiserBasePlugin"'}},scheduleEvent:{value:function(t,e){n||(console.warning("WARNING - .scheduleEvent is not overridden"),n=!0)},writable:!0},cancelAllEvents:{value:function(){i||(console.warning("WARNING - .cancelAllEvents is not overridden"),i=!0)},writable:!0}})};i.prototype=Object.create(r.a.prototype),i.prototype.constructor=i},function(t,e,n){"use strict";n.r(e),function(t,r){n.d(e,"PluginFactory",function(){return c});var i=n(1),o=n(0);n.d(e,"BasePlugin",function(){return o.a});var u,a,s=n(2);function c(e,n){var r=[],o=[],u=[],a=[],s=0,f=!1;function l(t){return!1===t.url.startsWith("http")&&void 0!==n&&n.startsWith("http")&&(t.url=n+t.url),new Promise(function(e,n){var r=new XMLHttpRequest;r.open("GET",t.url),r.onreadystatechange=function(){if(4==r.readyState){var n=document.createElement("script");n.textContent=r.responseText,document.getElementsByTagName("head")[0].appendChild(n),e(t)}},r.send()})}this.loadPrototypeModule=function(e,n){var r=this;return new Promise(function(n,r){"function"==typeof t.define&&t.define.amd?t.require([e.url],function(t){n(t)}):"object"==typeof t.module&&t.module.exports?n(t.require(e.url)):r("Cannot load using modular systems")}).then(function(t){if("function"==typeof t)return r.addPrototype(t);reject("Is not a module plugin")}).catch(function(){if(!0!==n)return console.warn("Could not load using modular systems"),r.loadPluginScript(e);reject("Cannot load using modular systems")})},this.loadResource=function(t){return new Promise(function(e,n){"object"!=typeof t?n("Error"):"string"!=typeof t.url?n("resourceObject.url must be a string"):"function"!=typeof t.test?n("resourceObject.test must be a function"):e(t)}).then(function(t){var e=t.test();if(!1!==e&&!0!==e)throw"resourceObject.test must return true or false";switch(t.type||(t.type="javascript"),t.type=t.type.toLowerCase(),t.type){case"javascript":return e?new Promise(function(e,n){"string"==typeof t.returnObject?window.hasOwnProperty(t.returnObject)?e(window[t.returnObject]):n(!1):e(!0)}):l(t).then(function(t){return"string"!=typeof t.returnObject||!!window.hasOwnProperty(t.returnObject)&&window[t.returnObject]});default:throw"Invalid type "+String(t.type)}})},this.loadPluginScript=function(t){if(t){if("string"!=typeof t.returnObject)throw"resourceObject.returnObject must be the name of the prototype function";return this.loadResource(t).then(function(t){return this.addPrototype(t)}.bind(this))}};var d=function(t,n){this.next_node=void 0;var r=!1,i=e.createGain(),o=e.createGain();i.connect(n.getInputs()[0]),n.getOutputs()[0].connect(o),this.bypass=function(t){return(t=!0===t)===r?r:(t?(i.disconnect(),i.connect(o),r=!0):(i.disconnect(),i.connect(n.getInputs()[0]),r=!1),r)},this.isBypassed=function(){return r},this.reconnect=function(t){this.connect(t)},this.connect=function(t){return void 0!==this.next_node&&this.disconnect(),void 0!==t&&void 0!==t.input&&(this.next_node=t,o.connect(this.next_node.input),!0)},this.disconnect=function(){void 0!==this.next_node&&(o.disconnect(this.next_node.input),this.next_node=void 0)},this.destroy=function(){n.destroy()},Object.defineProperties(this,{id:{value:t},node:{value:n},input:{get:function(){return i}},output:{get:function(){return o}},bypassed:{get:function(){return r}}})};d.prototype.factory=this;var h=function(t,n){var r=e.createGain();n.getOutputs()[0].connect(r),this.destroy=function(){n.destroy()},Object.defineProperties(this,{id:{value:t},node:{value:n},output:{get:function(){return r}}})},p=function(t,e){var n=this;function r(t,e){if(e)return e.then(l(t));var n=l(t);return n.then(function(t){if(void 0!==t.resources&&t.resources.length>0)for(var e=0;e<t.resources.length;e++)n=r(t.resources[e],n)}),n}function i(t){return t.hasOwnProperty("length")&&t.length>0?i(t[t.length-1]):t.hasOwnProperty("resources")?i(t.resources):t.test}Object.defineProperties(this,{name:{value:t.prototype.name},proto:{value:t},version:{value:t.prototype.version},uniqueID:{value:t.prototype.uniqueID},hasMidiInput:{value:t.prototype.hasMidiInput||!1},hasMidiOutput:{value:t.prototype.hasMidiOutput||!1}}),this.createPluginInstance=async function(r,i){var o=function(r){return Promise.all(a).then(function(){return new Promise(function(n,i){!function(){for(var t=!0,e=0;e<a.length;e++)if(1!==a[e].state||!a[e].test()){t=!1;break}return t}()?i(new Error("Plugin not ready")):n(new t(e,r))})}).then(function(t){return new Promise(function(e,n){if(t.initialise)return t.initialise().then(function(){e(t)});e(t)})}).then(function(r){var i;if(!0!==r.hasMidiInput&&!0!==r.hasMidiOutput)i=new d(s++,r);else{if(!0!==r.hasMidiInput||!0===r.hasMidiOutput)throw"No Instance Holder Available!";i=new h(s++,r)}return Object.defineProperties(r,{pluginInstance:{value:i},prototypeObject:{value:n},name:{value:t.prototype.name},version:{value:t.prototype.version},uniqueID:{value:t.prototype.uniqueID},SesionData:{value:e.SessionData},UserData:{value:e.UserData}}),Object.defineProperties(i,{prototypeObject:{value:n},externalInterface:{value:r.externalInterface}}),e.registerPluginInstance(i),i})}(r);return!0===i?o:(await o,o)};var o,u,a=[];if(t.prototype.resources)for(var c=0;c<t.prototype.resources.length;c++){var f=t.prototype.resources[c];switch(f.type=f.type.toLowerCase(),f.type){case"css":o=f.url,u=void 0,(u=document.createElement("link")).setAttribute("rel","stylesheet"),u.setAttribute("type","text/css"),u.setAttribute("href",o),document.getElementsByTagName("head")[0].appendChild(u);break;case"javascript":var p={promise:r(f),state:0,complete:function(){this.state=1},test:i(f)};p.promise.then(p.complete.bind(p)),a.push(p);break;default:throw"Could not load "+f.url+", invalid resource.type"}}this.getResourcePromises=function(){return a}};this.addPrototype=function(t){var e=this;return new Promise(function(e,n){"function"!=typeof t?n("The Prototype must be a function!"):"string"!=typeof t.prototype.name||0===t.prototype.name.length?n("Malformed plugin. Name not defined"):"string"!=typeof t.prototype.version||0===t.prototype.version.length?n("Malformed plugin. Version not defined"):"string"!=typeof t.prototype.uniqueID||0===t.prototype.uniqueID.length?n("Malformed plugin. uniqueID not defined"):e(t)}).then(function(t){var n={proto:t,name:t.prototype.name,version:t.prototype.version,uniqueID:t.prototype.uniqueID},r=u.find(function(t){var e,n=0;for(e in this)t[e]===this[e]&&n++;return 4===n},n);if(r)throw"The plugin must be unique!";return r=new p(t,e),u.push(r),Object.defineProperties(r,{factory:{value:e}}),r})},this.getPrototypes=function(){return u},this.getAudioPluginPrototypes=function(){return u.filter(function(t){return 0==t.hasMidiInput&&0==t.hasMidiOutput})},this.getMidiSynthPrototypes=function(){return u.filter(function(t){return 1==t.hasMidiInput&&0==t.hasMidiOutput})},this.getMidiPluginPrototypes=function(){return u.filter(function(t){return 1==t.hasMidiInput&&1==t.hasMidiOutput})},this.getAllPlugins=function(){return a},this.getAllPluginsObject=function(){var t,e={factory:this,subFactories:[]};for(t=0;t<r.length;t++)e.subFactories.push({subFactory:r[t],plugins:r[t].getPlugins()});return e},this.createSubFactory=function(t,e){return console.warn('DEPRECATED - This function will be deprecated in favour of "createAudioPluginChainManager"'),this.createAudioPluginChainManager(t,e)},this.destroySubFactory=function(t,e){return console.warn('DEPRECATED - This function will be deprecated in favour of "destroyAudioPluginChainManager"'),this.destroyAudioPluginChainManager(t,e)},this.createAudioPluginChainManager=function(t,e){var n=new g(this,t,e);return Object.defineProperties(n,{SessionData:{value:this.SessionData},UserData:{value:this.UserData}}),r.push(n),n},this.destroyAudioPluginChainManager=function(t){var e=r.findIndex(function(t){return t===this},t);e>=0&&(r.splice(e,1),t.destroy())},this.createMidiSynthesiserHost=function(t){var e=new y(t);return Object.defineProperties(e,{SessionData:{value:this.SessionData},UserData:{value:this.UserData}}),o.push(e),e},this.destroyMidiSynthesiserHost=function(t){var e=o.findIndex(function(t){return t===this},t);e>=0&&(o.splice(e,1),t.destroy())},this.registerPluginInstance=function(t){if(a.find(function(t){return t===this},t))throw"Plugin Instance not unique";return a.push(t),f&&t.node.start.call(t.node),!0},this.deletePlugin=function(t){var e=a.findIndex(function(e){return e.id===t});e>=0&&a.splice(e,1)[0].node.externalInterface.closeWindows()},this.audioStart=function(t){f||(!function(t){a.forEach(function(e){e.node.start.call(e.node,t)})}(t),f=!0)},this.audioStop=function(){f&&(a.forEach(function(t){t.node.stop.call(t.node)}),f=!1)};this.FeatureMap=new function(){var t=[],e=function(t){this.name=t.name,this.parameters=this.parameters,this.features=[]};function n(t,e){return t.find(function(t){return t.name===this.name},e)}function r(t,n){var r=new e(t);return n.push(r),r}var i=function(t,e){var i=[];function u(t){return i.find(function(t){return t.outputIndex===this.outputIndex&&t.frameSize===this.frameSize},t)}function a(){function e(t){var i,o=[];for(i=0;i<t.length;i++){var u=n(o,t[i]);(!u||t.parameters&&0!==t[i].parameters.length)&&(u=r(t[i],o)),t[i].features&&t[i].features.length>0&&(u.features=e(t[i].features))}return o}var o,u=[];for(o=0;o<i.length;o++){void 0===u[i[o].outputIndex]&&(u[i[o].outputIndex]=[]);var a=u[i[o].outputIndex].find(function(t){return t.frameSize===this.frameSize},i[o]);a||(a={frameSize:i[o].frameSize,featureList:void 0},u[i[o].outputIndex].push(a)),a.featureList=e(i[o].getFeatureList())}t.updateFeatures(u)}this.getSourceInstance=function(){return e},this.getSender=function(){return t},this.requestFeatures=function(t,e){var n=u(e);n||(n={outputIndex:e.outputIndex,frameSize:e.frameSize,requestors:[],getFeatureList:function(){var t,e=[];for(t=0;t<this.requestors.length;t++)e=e.concat(this.requestors[t].getFeatureList());return e}},i.push(n));var r=n.requestors.find(function(t){return t.getRequestorInstance()===this},t);r||(r=new o(t),n.requestors.push(r)),r.addFeatures(e),a()},this.findFrameMap=function(t,e){return i.find(function(n){return n.outputIndex===t&&n.frameSize===e})},this.cancelFeatures=function(t,e){if(void 0===e)i.forEach(function(e){var n=e.requestors.findIndex(function(e){return e.getRequestorInstance()===t});n>=0&&e.requestors.splice(n,1)});else{var n=u(e);if(!n)return;var r=n.requestors.find(function(t){return t.getRequestorInstance()===this},t);if(!r)return;r.deleteFeatures(e)}a()}},o=function(t){var e=[];t.node.featureMap.Receiver,this.getRequestorInstance=function(){return t},this.addFeatures=function(t){!function t(e,i){var o;for(o=0;o<i.length;o++){var u=n(e,i[o]);(!u||i[o].parameters&&0!==i[o].parameters.length)&&(u=r(i[o],e)),void 0!==i[o].features&&i[o].features.length>0&&t(u.features,i[o].features)}}(e,t.features)},this.deleteFeatures=function(t){!function t(r,i){var o,u=i.length;for(o=0;o<u;o++){var a=n(r,i[o]);a>=0&&(i[a].features&&i[a].features.length>0?t(r[a].features,i[a].features):e.splice(a,0))}}(e,t.features)},this.getFeatureList=function(){return e},this.postFeatures=function(n){var r,i={plugin:n.plugin,outputIndex:n.outputIndex,frameSize:n.frameSize,features:{numberOfChannels:n.results.numberOfChannels,results:[]}};function o(t,e,n){var r;function i(t){return t.name===r}for(r in e)if(e.hasOwnProperty(r)){var u=n.find(i);u&&(e[r].constructor===Object&&u.results?(t[r]={},o(t[r],e[r],u.results)):t[r]=e[r])}}for(r=0;r<n.results.numberOfChannels;r++)i.features.results[r]={},o(i.features.results[r],n.results.results[r].results,e);t.node.featureMap.Receiver.postFeatures(i)}};function u(e){return t.findIndex(function(t){return t.getSender()===this},e)}function a(t,e,n){var r=t[u(e)];if(!r&&!(r=t[u(n)]))throw"Could not locate source map";return r}this.createSourceMap=function(e,n){var r=new i(e,n);return t.push(r),r},this.deleteSourceMap=function(e){var n=u(e);if(-1===n)throw"Could not find the source map for the plugin";t.splice(n,1)},this.getPluginSender=function(t){return t.constructor===d&&(t=t.node),t.featureMap.Sender},this.requestFeatures=function(e,n,r){e.constructor!==d&&(e=e.pluginInstance);var i=this.getPluginSender(n);a(t,n,i).requestFeatures(e,r)},this.deleteFeatures=function(e,n,r){if(e.constructor!==d&&(e=e.pluginInstance),void 0===n)t.forEach(function(t){t.cancelFeatures(e)});else{var i=this.getPluginSender(n);a(t,n,i).cancelFeatures(e,r)}},this.getFeatureList=function(t,e){},this.postFeatures=function(e){var n=t[u(e.plugin)];if(!n&&!(n=t[u(this.getPluginSender(e.plugin))]))throw"Plugin Instance not loaded!";n.findFrameMap(e.outputIndex,e.frameSize).requestors.forEach(function(t){t.postFeatures(this)},e)}},Object.defineProperty(this.FeatureMap,"factory",{value:this});var v=[];this.createStore=function(t){var e=new i.a.LinkedStore(t);return v.push(e),e},this.getStores=function(){return v},this.findStore=function(t){return v.find(function(e){return e.name===t})},this.SessionData=new i.a.LinkedStore("Session"),this.UserData=new i.a.LinkedStore("User");var m=function(t,e){var n,r=function(e,n){var r=[],i=function(e,n){this.extractor=e.context.createAnalyser(),this.extractor.fftSize=n,e.connect(this.extractor),this.features=[],Object.defineProperty(this,"frameSize",{value:n});var r=t.recursiveProcessing;function i(t){var e={numberOfChannels:1,results:[]};r(t,this.features),e.results[0]={channel:0,results:JSON.parse(t.toJSON())},this.postFeatures(t.length,e)}this.setFeatures=function(t){this.features=t,0===this.features.length?this.extractor.clearCallback():this.extractor.frameCallback(i,this)},this.rejoinExtractor=function(){e.connect(this.extractor)}},o=function(t,e){var n=new Worker("jsap/feature-worker.js");n.onerror=function(t){console.error(t)},this.setFeatures=function(r){var i=this,o={state:1,sampleRate:t.context.sampleRate,featureList:r,numChannels:t.numberOfOutputs,frameSize:this.frameSize};this.features=r,r&&r.length>0?(n.onmessage=function(t){1===t.data.state?(n.onmessage=function(t){this.postFeatures(e,t.data.response)}.bind(i),i.extractor.onaudioprocess=function(t){var e,r=[];for(e=0;e<t.inputBuffer.numberOfChannels;e++)r[e]=t.inputBuffer.getChannelData(e);n.postMessage({state:2,frames:r})}.bind(i)):n.postMessage(o)},n.postMessage({state:0})):this.extractor.onaudioprocess=void 0},this.rejoinExtractor=function(){t.connect(this.extractor)},this.extractor=t.context.createScriptProcessor(e,t.numberOfOutputs,1),t.connect(this.extractor),this.extractor.connect(t.context.destination),Object.defineProperty(this,"frameSize",{value:e})};this.addExtractor=function(t){var e;return e=window.Worker?new o(n,t):new i(n,t),r.push(e),Object.defineProperty(e,"postFeatures",{value:function(t,e){var n={outputIndex:0,frameSize:t,results:e};this.postFeatures(n)}.bind(this)}),e},this.findExtractor=function(t){var e=t;return r.find(function(t){return Number(t.frameSize)===Number(e)})},this.rejoinExtractors=function(){r.forEach(function(t){t.rejoinExtractor()})},this.deleteExtractor=function(t){}};this.updateFeatures=function(e){var i;for(i=0;i<e.length;i++){if(void 0===n){if(i>1)throw"Requested an output that does not exist";n=new r(t,t.chainStart),Object.defineProperty(n,"postFeatures",{value:function(t){this.postFeatures(t)}.bind(this)})}var o;for(o=0;o<e[i].length;o++){var u=n.findExtractor(e[i][o].frameSize);u||(u=n.addExtractor(e[i][o].frameSize)),u.setFeatures(e[i][o].featureList)}}},this.rejoinExtractors=function(){n&&n.rejoinExtractors()},this.postFeatures=function(t){e.postFeatures({plugin:this,outputIndex:t.outputIndex,frameSize:t.frameSize,results:t.results})},e.createSourceMap(this,void 0)},g=function(t,e,n){var r=[],o=e,u=n,a="",s=1,c=new m(this,t.FeatureMap),f=this;function l(){for(var t=0,e=r.length-1;t<e;){var n=r[t++],i=r[t];n.reconnect(i)}}function d(){r.forEach(function(t){t.disconnect()})}function h(){return r.length>0?(o.disconnect(r[0].input),r[r.length-1].output.disconnect(u)):o.disconnect(u),!0}function p(){r.length>0?(o.connect(r[0].input),r[r.length-1].output.connect(u)):o.connect(u),c.rejoinExtractors()}function v(t){return new Promise(function(e,n){0===s?n("SubFactory has been destroyed! Cannot add new plugins"):e(t)}).then(function(){return t.createPluginInstance(f,!1).then(function(t){return Object.defineProperties(t,{TrackData:{value:f.TrackData}}),t})})}function g(t,e){var n,r,i=e.length;for(n=0;n<i;n++)t[(r=e[n]).name].apply(t,r.parameters),r.features&&r.features.length>0&&g(t.result[r.name],r.features)}this.parent=t,o.disconnect(),o.connect(n),this.TrackData=new i.a.LinkedStore("Track"),this.PluginData=new i.a.LinkedStore("Plugin"),this.featureSender=c,this.getFeatureChain=function(){},this.bypassPlugin=function(t,e){!1!==r.includes(t)&&t.bypass(e)},this.getPrototypes=function(){return this.parent.getPrototypes()},this.getFactory=function(){return this.parent},this.destroy=function(t){var e;for(e=0;e<r.length;e++)this.destroyPlugin(r[e]);o.disconnect(),!0===t&&o.connect(u)},this.createPlugin=function(t){return v(t).catch(function(t){throw"Plugin did not get created! Aborting"}).then(function(t){return h(),r.push(t),d(),l(),p(),t.node.onloaded.call(t.node),t})},this.destroyPlugin=function(t){if(0!==s){var e=this.getPluginIndex(t);e>=0&&(h(),t.node.stop.call(t.node),t.node.onunloaded.call(t.node),t.node.deconstruct.call(t.node),r.splice(e,1),this.parent.deletePlugin(t.id),d(),l(),p())}},this.getPlugins=function(){return r},this.getAllPlugins=function(){return this.parent.getAllPluginsObject()},this.getPluginIndex=function(t){if(0!==s)return r.findIndex(function(t,e,n){return t===this},t)},this.movePlugin=function(t,e){if(0!==s){var n,i,o,u=this.getPluginIndex(t);u>=0&&(h(),d(),n=r.splice(u,1),t.node.onunloaded.call(t.node),0===e?r=n.concat(r):e>=r.length?r=r.concat(n):(i=r.slice(0,e),o=r.slice(e),r=i.concat(n.concat(o))),l(),p(),t.node.onloaded.call(t.node))}},this.copyPlugin=function(t,e){if(void 0===e&&(e=r.length),"number"!=typeof e||e<0||e>r.length)throw"Plugin copy index outside of the chain scope.";return v(t.prototypeObject).catch(function(t){throw"Plugin did not get created! Aborting"}).then(function(n){return n.node.parameters.setParametersByObject(t.node.parameters.getParameterObject()),h(),d(),r.splice(e,0,n),l(),p(),n.node.onloaded.call(n.node),n})},Object.defineProperties(this,{chainStart:{value:e},chainStop:{value:n},name:{get:function(){return a},set:function(t){return"string"==typeof t&&(a=t),a}},recursiveProcessing:{get:function(){return g}}})},y=function(t){var e,n=this;function r(t){return new Promise(function(e,n){0==t.hasMidiInput||1==t.hasMidiOutput?n("Prototype is not a MidiSynthesis type. hasMidiInput must be true and hasMidiOutput must be false"):e(t)}).then(function(){return t.createPluginInstance(n,!1).then(function(t){return Object.defineProperties(t,{TrackData:{value:n.TrackData}}),t})})}var i=[];Object.defineProperties(this,{connect:{value:function(t,n,r){if(void 0===t)throw"Must define an AudioNode object";i.find(function(e){return e.destinationNode==t&&e.output==n&&e.input==r})||(i.push({destinationNode:t,output:n,input:r}),void 0===e?console.warn("MIDI Synthesiser is not loaded, connections will be validated on load"):e.node.connect(t,n,r))}},disconnect:{value:function(t,n,r){void 0===t?(e&&e.disconnect(),i=[]):"number"==typeof t&&void 0===n?(n=t,t=void 0,i=i.filter(function(t){return t.output!=n||(e&&e.node.disconnect(t.destinationNode,t.output),!1)})):"object"==typeof t&&void 0===n?i=i.filter(function(n){return n.destinationNode!=t||(e&&e.node.disconnect(n.destinationNode),!1)}):"object"==typeof t&&"number"==typeof n?i=i.filter(function(r){return r.destinationNode!=t||r.output!=n||(e&&e.node.disconnect(r.destinationNode,r.output),!1)}):"object"==typeof t&&"number"==typeof n&&"number"==typeof r&&(i=i.filter(function(i){return i.destinationNode!=t||i.output!=n||i.input!=r||(e&&e.node.disconnect(i.destinationNode,i.output,i.input),!1)}))}},scheduleEvent:{value:function(t,n){if(!e)throw"MIDI Synthesiser not loaded";e.node.scheduleEvent(t,n)}},cancelAllEvents:{value:function(t,n){if(!e)throw"MIDI Synthesiser not loaded";e.node.cancelAllEvents()}},midiSynthesiser:{get:function(){return e},set:function(){throw"Cannot set read-only attribute."}},loadMidiSynthesiserModule:{value:function(t){var n=this;return new Promise(function(e,n){0==t.hasMidiInput||1==t.hasMidiOutput?n("Prototype is not a MidiSynthesis type. hasMidiInput must be true and hasMidiOutput must be false"):e(t)}).then(function(t){return r.call(n,t).catch(function(t){throw"Plugin did not get created! Aborting"})}).then(function(t){return e=t,i.forEach(function(t){e.node.connect(t.destinationNode,t.output,t.input)}),e})}}})},b=function(t){return Object.create({setDefaultInterface:function(t,e,n){return{url:t,width:e,height:n}},buildPluginInterface:function(t,e){var n=document.createElement("iframe");return n.src=e.src,e.width&&(n.width=e.width),e.height&&(n.height=e.height),n.style.border="0",n},pollAllPlugins:function(){t.getAllPlugins().forEach(function(t){t.node.externalInterface.updateInterfaces()})}})}(this);Object.defineProperties(this,{context:{value:e},hasAudioStarted:{get:function(){return f}},pluginRootURL:{get:function(){return n},set:function(t){if("string"==typeof t)return n=t;throw"Cannot set root URL without a string"}},createFactoryCopy:{value:function(t){return e=t,new Promise(function(t,n){void 0===e.sampleRate?n(new Error("Invalid audio context provided")):t(e)}).then(function(t){var e=new c(t),n=[];return u.forEach(function(t){n.push(e.addPrototype(t.proto))}),Promise.all(n).then(function(){return e})}).then(function(t){return t});var e}},PluginGUI:{value:b}})}n.d(e,"SynthesiserBasePlugin",function(){return s.a}),function(){if(void 0===window.jsXtract){var t=document.createElement("script");t.src="https://gitcdn.xyz/repo/nickjillings/js-xtract/master/jsXtract.js",document.getElementsByTagName("head")[0].appendChild(t)}}(),u=void 0,a=function(){return{PluginFactory:c,BasePlugin:o.a,SynthesiserBasePlugin:s.a}},"function"==typeof define&&n(6)?define("JSAP",[],a):r.exports?r.exports=a():u.JSAP=a()}.call(this,n(4),n(5)(t))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},function(t,e){(function(e){t.exports=e}).call(this,{})}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9KU0FQL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL0pTQVAvLi9zcmMvYmFzZV9wbHVnaW4uanMiLCJ3ZWJwYWNrOi8vSlNBUC8uL3NyYy9MaW5rZWRTdG9yZS5qcyIsIndlYnBhY2s6Ly9KU0FQLy4vc3JjL3N5bnRoX2Jhc2UuanMiLCJ3ZWJwYWNrOi8vSlNBUC8uL3NyYy9wbHVnaW4tZmFjdG9yeS5qcyIsIndlYnBhY2s6Ly9KU0FQLyh3ZWJwYWNrKS9idWlsZGluL2dsb2JhbC5qcyIsIndlYnBhY2s6Ly9KU0FQLyh3ZWJwYWNrKS9idWlsZGluL2hhcm1vbnktbW9kdWxlLmpzIiwid2VicGFjazovL0pTQVAvKHdlYnBhY2spL2J1aWxkaW4vYW1kLW9wdGlvbnMuanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJfX3dlYnBhY2tfZXhwb3J0c19fIiwiQmFzZVBsdWdpbiIsIkF1ZGlvTm9kZSIsInVuZGVmaW5lZCIsIndpbmRvdyIsImltcG9ydFNjcmlwdHMiLCJnZXRJbnB1dHMiLCJ0aGlzIiwiZmFjdG9yeSIsIm93bmVyIiwiaW5wdXRMaXN0Iiwib3V0cHV0TGlzdCIsInBPd25lciIsImV2ZW50VGFyZ2V0IiwiRXZlbnRUYXJnZXQiLCJkZWxldGVJTyIsIm5vZGUiLCJsaXN0IiwiZmluZEluZGV4IiwiZSIsInNwbGljZSIsImNvbnRleHQiLCJmZWF0dXJlTWFwIiwiUGx1Z2luRmVhdHVyZUludGVyZmFjZSIsImV4dGVybmFsSW50ZXJmYWNlIiwiUGx1Z2luSW50ZXJmYWNlTWVzc2FnZUh1YiIsInBhcmFtZXRlcnMiLCJQYXJhbWV0ZXJNYW5hZ2VyIiwiYWRkSW5wdXQiLCJwdXNoIiwiZGVsZXRlSW5wdXQiLCJhZGRPdXRwdXQiLCJvdXRwdXRzIiwiZGVsZXRlT3V0cHV0Iiwic3RhcnQiLCJzdG9wIiwib25sb2FkZWQiLCJvbnVubG9hZGVkIiwiZGVjb25zdHJ1Y3QiLCJkZWZpbmVQcm9wZXJ0aWVzIiwibnVtSW5wdXRzIiwibGVuZ3RoIiwic2V0IiwibnVtT3V0cHV0cyIsIm51bVBhcmFtZXRlcnMiLCJpbnB1dHMiLCJpbmRleCIsImNvbm5lY3QiLCJkZXN0IiwiaW5wdCIsImlucHV0IiwiZGlzY29ubmVjdCIsImdldE91dHB1dHMiLCJnZXRQYXJhbWV0ZXJOYW1lIiwiZ2V0UGFyYW1ldGVyTmFtZXMiLCJnZXRQYXJhbWV0ZXJCeU5hbWUiLCJnZXRQYXJhbWV0ZXJPYmplY3QiLCJzZXRQYXJhbWV0ZXJCeU5hbWUiLCJzZXRQYXJhbWV0ZXJzQnlPYmplY3QiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInBsdWdpbkV4dGVybmFsSW50ZXJmYWNlIiwicGFyYW1ldGVyTGlzdCIsImZpbmRQYXJhbWV0ZXIiLCJmaW5kIiwidG9Mb3dlckNhc2UiLCJmaW5kUGFyYW1ldGVySW5kZXgiLCJidWlsZFBhcmFtZXRlck9iamVjdCIsIm9iaiIsImZvckVhY2giLCJhZGRQYXJhbWV0ZXIiLCJwYXJhbSIsIlBsdWdpblBhcmFtZXRlciIsImRhdGFUeXBlIiwidXBkYXRlIiwidHJhbnNsYXRlIiwidHJpZ2dlciIsImF1ZGlvUGFyYW0iLCJ2IiwiZiIsImJpbmRUb0F1ZGlvUGFyYW0iLCJhcCIsImJvdW5kQXVkaW9QYXJhbSIsImFjdGlvbkxpc3QiLCJOdW1iZXJQYXJhbWV0ZXIiLCJkZWZhdWx0VmFsdWUiLCJtaW5pbXVtIiwibWF4aW11bSIsIl9zdGVwU2l6ZSIsIl92YWx1ZSIsInR5cGUiLCJkZXN0cm95IiwiTWF0aCIsIm1heCIsIm1pbiIsInJvdW5kIiwiRXZlbnQiLCJkaXNwYXRjaEV2ZW50Iiwic3RlcFNpemUiLCJpc0Zpbml0ZSIsIlN0cmluZ1BhcmFtZXRlciIsIm1heExlbmd0aCIsIkJ1dHRvblBhcmFtZXRlciIsIm9uY2xpY2siLCJTd2l0Y2hQYXJhbWV0ZXIiLCJtaW5TdGF0ZSIsIm1heFN0YXRlIiwic2V0ViIsImVudHJ5IiwidGltZSIsIkRhdGUiLCJpbmNyZW1lbnQiLCJkZWNyZW1lbnQiLCJMaXN0UGFyYW1ldGVyIiwibGlzdE9mVmFsdWVzIiwiX2luZGV4IiwiaW5kZXhPZiIsImxpc3RWYWx1ZXMiLCJtYXAiLCJjb25zdHJ1Y3RvciIsImNyZWF0ZU51bWJlclBhcmFtZXRlciIsImNyZWF0ZVN0cmluZ1BhcmFtZXRlciIsImNyZWF0ZUJ1dHRvblBhcmFtZXRlciIsImNyZWF0ZVN3aXRjaFBhcmFtZXRlciIsImNyZWF0ZUxpc3RQYXJhbWV0ZXIiLCJBcnJheSIsImlzQXJyYXkiLCJpbmNsdWRlcyIsImhyb3ciLCJjcmVhdGVQYXJhbWV0ZXIiLCJuYW1lcyIsImEiLCJwYXJhbWV0ZXIiLCJkZWxldGVQYXJhbWV0ZXIiLCJkZWxldGVBbGxQYXJhbWV0ZXJzIiwiQmFzZVBsdWdpbkluc3RhbmNlIiwicGx1Z2luIiwiUmVjZWl2ZXIiLCJQbHVnaW5GZWF0dXJlSW50ZXJmYWNlUmVjZWl2ZXIiLCJGZWF0dXJlTWFwIiwiU2VuZGVyIiwiUGx1Z2luRmVhdHVyZUludGVyZmFjZVNlbmRlciIsIm9uZmVhdHVyZXMiLCJmdW5jIiwiRmVhdHVyZUludGVyZmFjZUluc3RhbmNlIiwiRmFjdG9yeUZlYXR1cmVNYXAiLCJjaGVja0ZlYXR1cmVBcmdzIiwic291cmNlIiwiZmVhdHVyZU9iamVjdCIsIm91dHB1dEluZGV4IiwiZnJhbWVTaXplIiwiZmVhdHVyZXMiLCJjX2ZlYXR1cmVzIiwicmVxdWVzdEZlYXR1cmVzIiwiZmVhdHVyZUxpc3QiLCJyZXF1ZXN0RmVhdHVyZXNGcm9tUGx1Z2luIiwiY2FuY2VsRmVhdHVyZXNGcm9tUGx1Z2luIiwiZGVsZXRlRmVhdHVyZXMiLCJjYW5jZWxBbGxGZWF0dXJlc0Zyb21QbHVnaW4iLCJjYW5jZWxBbGxGZWF0dXJlcyIsInBvc3RGZWF0dXJlcyIsIk1lc3NhZ2UiLCJPdXRwdXROb2RlIiwicGFyZW50Iiwib3V0cHV0IiwiZXh0cmFjdG9ycyIsIkV4dHJhY3RvciIsImV4dHJhY3RvciIsImNyZWF0ZUFuYWx5c2VyIiwiZmZ0U2l6ZSIsInJlY3Vyc2l2ZVByb2Nlc3NpbmciLCJvbmF1ZGlvY2FsbGJhY2siLCJkYXRhIiwibWVzc2FnZSIsIm51bWJlck9mQ2hhbm5lbHMiLCJyZXN1bHRzIiwiY2hhbm5lbCIsIkpTT04iLCJwYXJzZSIsInRvSlNPTiIsInNldEZlYXR1cmVzIiwiY2xlYXJDYWxsYmFjayIsImZyYW1lQ2FsbGJhY2siLCJXb3JrZXJFeHRyYWN0b3IiLCJ3b3JrZXIiLCJXb3JrZXIiLCJvbmVycm9yIiwiY29uc29sZSIsImVycm9yIiwic2VsZiIsImNvbmZpZ01lc3NhZ2UiLCJzdGF0ZSIsInNhbXBsZVJhdGUiLCJudW1DaGFubmVscyIsIm51bWJlck9mT3V0cHV0cyIsIm9ubWVzc2FnZSIsIm1zZyIsInJlc3BvbnNlIiwib25hdWRpb3Byb2Nlc3MiLCJmcmFtZXMiLCJpbnB1dEJ1ZmZlciIsImdldENoYW5uZWxEYXRhIiwicG9zdE1lc3NhZ2UiLCJjcmVhdGVTY3JpcHRQcm9jZXNzb3IiLCJkZXN0aW5hdGlvbiIsImFkZEV4dHJhY3RvciIsInJlc3VsdHNKU09OIiwiZmluZEV4dHJhY3RvciIsImNoZWNrIiwiZGVsZXRlRXh0cmFjdG9yIiwib3V0cHV0Tm9kZXMiLCJ1cGRhdGVGZWF0dXJlcyIsInJlc3VsdE9iamVjdCIsInNpIiwicGx1Z2luSW5zdGFuY2UiLCJjcmVhdGVTb3VyY2VNYXAiLCJQbHVnaW5Vc2VySW50ZXJmYWNlIiwid2lkdGgiLCJoZWlnaHQiLCJsb2ciLCJwcm9jZXNzb3IiLCJyb290IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwic3R5bGUiLCJkaW0iLCJpbnRlcnZhbEZ1bmN0aW9uIiwidXBkYXRlSW50ZXJ2YWwiLCJQbHVnaW5QYXJhbWV0ZXJJbnRlcmZhY2VzIiwiUGx1Z2luUGFyYW1ldGVySW50ZXJmYWNlTm9kZSIsIkRPTSIsIlBsdWdpblBhcmFtZXRlckluc3RhbmNlIiwiZ3VpIiwiR1VJIiwiQXVkaW9QYXJhbSIsImhhbmRsZUV2ZW50IiwiZXZlbnQiLCJjcmVhdGVQbHVnaW5QYXJhbWV0ZXJJbnRlcmZhY2VOb2RlIiwiZ2V0Um9vdCIsImdldERpbWVuc2lvbnMiLCJnZXRXaWR0aCIsImdldEhlaWdodCIsImJlZ2luQ2FsbGJhY2tzIiwibXMiLCJzZXRJbnRlcnZhbCIsInN0b3BDYWxsYmFja3MiLCJjbGVhckludGVydmFsIiwibG9hZFJlc291cmNlIiwidXJsIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJyZXEiLCJYTUxIdHRwUmVxdWVzdCIsIm9wZW4iLCJvbmxvYWQiLCJzdGF0dXMiLCJFcnJvciIsInN0YXR1c1RleHQiLCJzZW5kIiwiY2xlYXJHVUkiLCJpbm5lckhUTUwiLCJidWlsZFBhcmFtZXRlclVwZGF0ZVBheWxvYWQiLCJzZW5kZXJfaWQiLCJPIiwiYnJvYWRjYXN0UGFyYW1ldGVyVXBkYXRlcyIsIndpbmRvd01lc3NhZ2VMaXN0IiwidyIsImtleXMiLCJzZXRQYXJhbWV0ZXJNZXNzYWdlIiwidXBkYXRlSW50ZXJmYWNlcyIsImNsb3NlV2luZG93cyIsInBvcCIsImNsb3NlIiwicmVnaXN0ZXJXaW5kb3ciLCJMaW5rZWRTdG9yZSIsInN0b3JlTmFtZSIsIm9iamVjdFRvWE1MIiwiZG9jIiwidGVybSIsImRvY05vZGUiLCJ0b1hNTCIsImFwcGVuZENoaWxkIiwiYXJyYXlUb1hNTCIsInNldEF0dHJpYnV0ZSIsImFyciIsImFsbF9udW1iZXJzIiwiYWxsX3N0cmluZ3MiLCJldmVyeSIsImFkZFRlcm0iLCJhZGRUZXJtcyIsInRlcm1zT2JqZWN0IiwiZGVsZXRlVGVybSIsImdldFRlcm0iLCJoYXNUZXJtIiwic3RyaW5naWZ5IiwiaW1wbGVtZW50YXRpb24iLCJjcmVhdGVEb2N1bWVudCIsImZpcnN0RWxlbWVudENoaWxkIiwiU3ludGhlc2lzZXJCYXNlUGx1Z2luIiwiX2Jhc2VfcGx1Z2luX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18iLCJoYXNXYXJuZWRTY2hlZHVsZU5vdFNldCIsImhhc1dhcm5lZENhbmNlbE5vdFNldCIsInNjaGVkdWxlRXZlbnQiLCJjb250ZXh0VGltZSIsIndhcm5pbmciLCJ3cml0YWJsZSIsImNhbmNlbEFsbEV2ZW50cyIsImdsb2JhbCIsIlBsdWdpbkZhY3RvcnkiLCJfTGlua2VkU3RvcmVfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzBfXyIsIl9iYXNlX3BsdWdpbl9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMV9fIiwiX3N5bnRoX2Jhc2VfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfXyIsImF1ZGlvX2NvbnRleHQiLCJyb290VVJMIiwic3ViRmFjdG9yaWVzIiwic3ludGhlc2lzZXJIb3N0cyIsInBsdWdpbl9wcm90b3R5cGVzIiwicGx1Z2luc0xpc3QiLCJjdXJyZW50UGx1Z2luSWQiLCJhdWRpb1N0YXJ0ZWQiLCJyZXNvdXJjZU9iamVjdCIsInN0YXJ0c1dpdGgiLCJ4aHIiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZWFkeVN0YXRlIiwic2NyaXB0IiwidGV4dENvbnRlbnQiLCJyZXNwb25zZVRleHQiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImxvYWRQcm90b3R5cGVNb2R1bGUiLCJtdXN0TW9kdWxlIiwiZGVmaW5lIiwiYW1kIiwicmVxdWlyZSIsInRoZW4iLCJleGVjdXRhYmxlIiwiYWRkUHJvdG90eXBlIiwiY2F0Y2giLCJ3YXJuIiwibG9hZFBsdWdpblNjcmlwdCIsInRlc3QiLCJyZXR1cm5PYmplY3QiLCJTdHJpbmciLCJQbHVnaW5JbnN0YW5jZSIsImlkIiwicGx1Z2luX25vZGUiLCJuZXh0X25vZGUiLCJfYnlwYXNzZWQiLCJfaW4iLCJjcmVhdGVHYWluIiwiX291dCIsImJ5cGFzcyIsImlzQnlwYXNzZWQiLCJyZWNvbm5lY3QiLCJuZXdfbmV4dCIsImJ5cGFzc2VkIiwiTWlkaVN5bnRoZXNpc0luc3RhbmNlIiwic3ludGhOb2RlIiwiUGx1Z2luUHJvdG90eXBlIiwicHJvdG8iLCJsb2FkUmVzb3VyY2VDaGFpbiIsImsiLCJyZXNvdXJjZXMiLCJyZWN1cnNpdmVHZXRUZXN0IiwidmVyc2lvbiIsInVuaXF1ZUlEIiwiaGFzTWlkaUlucHV0IiwiaGFzTWlkaU91dHB1dCIsImNyZWF0ZVBsdWdpbkluc3RhbmNlIiwiYXN5bmMiLCJhbGwiLCJyZXNvdXJjZVByb21pc2VzIiwiY2hlY2tJc1JlYWR5IiwiaW5pdGlhbGlzZSIsInByb3RvdHlwZU9iamVjdCIsIlNlc2lvbkRhdGEiLCJTZXNzaW9uRGF0YSIsIlVzZXJEYXRhIiwicmVnaXN0ZXJQbHVnaW5JbnN0YW5jZSIsImNzcyIsInJlc291cmNlIiwicHJvbWlzZSIsImNvbXBsZXRlIiwiZ2V0UmVzb3VyY2VQcm9taXNlcyIsInBsdWdpbl9wcm90byIsInRlc3RPYmoiLCJtYXRjaCIsImdldFByb3RvdHlwZXMiLCJnZXRBdWRpb1BsdWdpblByb3RvdHlwZXMiLCJmaWx0ZXIiLCJnZXRNaWRpU3ludGhQcm90b3R5cGVzIiwiZ2V0TWlkaVBsdWdpblByb3RvdHlwZXMiLCJnZXRBbGxQbHVnaW5zIiwiZ2V0QWxsUGx1Z2luc09iamVjdCIsInN1YkZhY3RvcnkiLCJwbHVnaW5zIiwiZ2V0UGx1Z2lucyIsImNyZWF0ZVN1YkZhY3RvcnkiLCJjaGFpblN0YXJ0IiwiY2hhaW5TdG9wIiwiY3JlYXRlQXVkaW9QbHVnaW5DaGFpbk1hbmFnZXIiLCJkZXN0cm95U3ViRmFjdG9yeSIsImRlc3Ryb3lBdWRpb1BsdWdpbkNoYWluTWFuYWdlciIsIkF1ZGlvUGx1Z2luQ2hhaW5NYW5hZ2VyIiwiU3ViRmFjdG9yeSIsImVsZW1lbnQiLCJjcmVhdGVNaWRpU3ludGhlc2lzZXJIb3N0IiwiaG9zdCIsIk1pZGlTeW50aGVzaXNlckhvc3QiLCJkZXN0cm95TWlkaVN5bnRoZXNpc2VySG9zdCIsImluc3RhbmNlIiwiZGVsZXRlUGx1Z2luIiwiYXVkaW9TdGFydCIsInByb2dyYW1fdGltZSIsInRyaWdnZXJBdWRpb1N0YXJ0IiwiYXVkaW9TdG9wIiwiTWFwcGluZ3MiLCJGZWF0dXJlTm9kZSIsImdldEZlYXR1cmVOb2RlIiwiYWRkRmVhdHVyZU5vZGUiLCJmZWF0dXJlTm9kZSIsIlNvdXJjZU1hcCIsInBsdWdpbkluc3RhY2UiLCJmaW5kRmVhdHVyZU9iamVjdCIsInVwZGF0ZVNlbmRlciIsInJlY3Vyc2l2ZUZpbmQiLCJmcmFtZUxpc3QiLCJnZXRGZWF0dXJlTGlzdCIsImdldFNvdXJjZUluc3RhbmNlIiwiZ2V0U2VuZGVyIiwicmVxdWVzdG9ySW5zdGFuY2UiLCJyZXF1ZXN0b3JzIiwiRiIsImNvbmNhdCIsInJlcXVlc3RvciIsImdldFJlcXVlc3Rvckluc3RhbmNlIiwiUmVxdWVzdG9yTWFwIiwiYWRkRmVhdHVyZXMiLCJmaW5kRnJhbWVNYXAiLCJjYW5jZWxGZWF0dXJlcyIsInJlcXVlc3RvckluZGV4IiwiRmVhdHVyZXMiLCJyZWN1cnNpdmVseUFkZEZlYXR1cmVzIiwicm9vdEFycmF5IiwicmVjdXJzaXZlbHlEZWxldGVGZWF0dXJlcyIsInJlY3Vyc2l2ZVBvc3RGZWF0dXJlcyIsInJvb3ROb2RlIiwicmVzdWx0c0xpc3QiLCJGZWF0dXJlTGlzdCIsImFvIiwiZmluZFNvdXJjZUluZGV4IiwiZmluZFNvdXJjZU1hcCIsInBsdWdpblNlbmRlciIsInNvdXJjZU1hcCIsImRlbGV0ZVNvdXJjZU1hcCIsImdldFBsdWdpblNlbmRlciIsInN0b3JlcyIsImNyZWF0ZVN0b3JlIiwiZ2V0U3RvcmVzIiwiZmluZFN0b3JlIiwiU3ViRmFjdG9yeUZlYXR1cmVTZW5kZXIiLCJyZWpvaW5FeHRyYWN0b3IiLCJOdW1iZXIiLCJyZWpvaW5FeHRyYWN0b3JzIiwicGx1Z2luX2xpc3QiLCJwbHVnaW5DaGFpblN0YXJ0IiwicGx1Z2luQ2hhaW5TdG9wIiwiZmFjdG9yeU5hbWUiLCJjaGFpblN0YXJ0RmVhdHVyZSIsInJlYnVpbGQiLCJjdXJyZW50Tm9kZSIsIm5leHROb2RlIiwiaXNvbGF0ZSIsImN1dENoYWluIiwiam9pbkNoYWluIiwiYnVpbGROZXdQbHVnaW4iLCJUcmFja0RhdGEiLCJiYXNlIiwiYXBwbHkiLCJyZXN1bHQiLCJQbHVnaW5EYXRhIiwiZmVhdHVyZVNlbmRlciIsImdldEZlYXR1cmVDaGFpbiIsImJ5cGFzc1BsdWdpbiIsInBsdWdpbl9pbnN0YW5jZSIsImdldEZhY3RvcnkiLCJkZXN0cm95UGx1Z2luIiwiY3JlYXRlUGx1Z2luIiwicGx1Z2luX29iamVjdCIsImdldFBsdWdpbkluZGV4IiwiYXJyYXkiLCJtb3ZlUGx1Z2luIiwibmV3X2luZGV4IiwiaG9sZExvdyIsImhvbGRIaWdoIiwic2xpY2UiLCJjb3B5UGx1Z2luIiwiY29weV9pbmRleCIsIm1pZGlTeW50aFNsb3QiLCJidWlsZE5ld1N5bnRoZXNpc2VyT2JqZWN0IiwiY29ubmVjdGlvbnMiLCJkZXN0aW5hdGlvbk5vZGUiLCJjb25uIiwibWlkaVN5bnRoZXNpc2VyIiwibG9hZE1pZGlTeW50aGVzaXNlck1vZHVsZSIsIlBsdWdpblVzZXJJbnRlcmZhY2VNZXNzYWdlSHViIiwic2V0RGVmYXVsdEludGVyZmFjZSIsImJ1aWxkUGx1Z2luSW50ZXJmYWNlIiwiaW50ZXJmYWNlX29iamVjdCIsImlmcmFtZSIsInNyYyIsImJvcmRlciIsInBvbGxBbGxQbHVnaW5zIiwiaGFzQXVkaW9TdGFydGVkIiwicGx1Z2luUm9vdFVSTCIsImNyZWF0ZUZhY3RvcnlDb3B5IiwibmV3Y29udGV4dCIsIkJGYWN0b3J5IiwicHJvbWlzZXMiLCJuZXdGYWN0b3J5IiwiUGx1Z2luR1VJIiwianNYdHJhY3QiLCJKU0FQIiwiZyIsIkZ1bmN0aW9uIiwib3JpZ2luYWxNb2R1bGUiLCJ3ZWJwYWNrUG9seWZpbGwiLCJjaGlsZHJlbiIsIl9fd2VicGFja19hbWRfb3B0aW9uc19fIl0sIm1hcHBpbmdzIjoicUJBQ0EsSUFBQUEsRUFBQSxHQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLEdBQUEsQ0FDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxRQUFBLElBVUEsT0FOQUksRUFBQUwsR0FBQU0sS0FBQUosRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUYsR0FHQUcsRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxRQTBEQSxPQXJEQUYsRUFBQVEsRUFBQUYsRUFHQU4sRUFBQVMsRUFBQVYsRUFHQUMsRUFBQVUsRUFBQSxTQUFBUixFQUFBUyxFQUFBQyxHQUNBWixFQUFBYSxFQUFBWCxFQUFBUyxJQUNBRyxPQUFBQyxlQUFBYixFQUFBUyxFQUFBLENBQTBDSyxZQUFBLEVBQUFDLElBQUFMLEtBSzFDWixFQUFBa0IsRUFBQSxTQUFBaEIsR0FDQSxvQkFBQWlCLGVBQUFDLGFBQ0FOLE9BQUFDLGVBQUFiLEVBQUFpQixPQUFBQyxZQUFBLENBQXdEQyxNQUFBLFdBRXhEUCxPQUFBQyxlQUFBYixFQUFBLGNBQWlEbUIsT0FBQSxLQVFqRHJCLEVBQUFzQixFQUFBLFNBQUFELEVBQUFFLEdBRUEsR0FEQSxFQUFBQSxJQUFBRixFQUFBckIsRUFBQXFCLElBQ0EsRUFBQUUsRUFBQSxPQUFBRixFQUNBLEtBQUFFLEdBQUEsaUJBQUFGLFFBQUFHLFdBQUEsT0FBQUgsRUFDQSxJQUFBSSxFQUFBWCxPQUFBWSxPQUFBLE1BR0EsR0FGQTFCLEVBQUFrQixFQUFBTyxHQUNBWCxPQUFBQyxlQUFBVSxFQUFBLFdBQXlDVCxZQUFBLEVBQUFLLFVBQ3pDLEVBQUFFLEdBQUEsaUJBQUFGLEVBQUEsUUFBQU0sS0FBQU4sRUFBQXJCLEVBQUFVLEVBQUFlLEVBQUFFLEVBQUEsU0FBQUEsR0FBZ0gsT0FB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Q0F0aUIsT0FBQUMsZUFBQVosRUFBQSxVQUNBYSxZQUFBLEVBQ0FDLElBQUEsV0FDQSxPQUFBZCxFQUFBRSxLQUdBUyxPQUFBQyxlQUFBWixFQUFBLE1BQ0FhLFlBQUEsRUFDQUMsSUFBQSxXQUNBLE9BQUFkLEVBQUFDLEtBR0FVLE9BQUFDLGVBQUFaLEVBQUEsV0FDQWEsWUFBQSxJQUVBYixFQUFBZ2pCLGdCQUFBLEVBRUEsT0FBQWhqQixtQkN0QkEsU0FBQWtqQixHQUNBbGpCLEVBQUFELFFBQUFtakIiLCJmaWxlIjoiSlNBUC5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAzKTtcbiIsIi8vIEFkZCBnZXRJbnB1dHMgdG8gYWxsIEF1ZGlvTm9kZXMgdG8gZWFzZSBkZXBsb3ltZW50XG4vKmdsb2JhbHMgQXVkaW9Ob2RlLCBXb3JrZXIsIGNvbnNvbGUsIHdpbmRvdywgZG9jdW1lbnQsIFByb21pc2UsIFhNTEh0dHBSZXF1ZXN0ICovXG4vKmVzbGludC1lbnYgYnJvd3NlciAqL1xuLypqc2hpbnQgZXN2ZXJzaW9uOiA2ICovXG5pZiAodHlwZW9mIEF1ZGlvTm9kZSA9PT0gXCJmdW5jdGlvblwiICYmIHdpbmRvdy5pbXBvcnRTY3JpcHRzID09PSB1bmRlZmluZWQpIHtcbiAgICBBdWRpb05vZGUucHJvdG90eXBlLmdldElucHV0cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIFt0aGlzXTtcbiAgICB9O1xufVxuXG4vLyBUaGlzIHNob3VsZCBzaW1wbHkgZGVmaW5lIHRoZSBCYXNlUGx1Z2luIGZyb20gd2hpY2ggY3VzdG9tIHBsdWdpbnMgY2FuIGJlIGJ1aWx0IGZyb21cbnZhciBCYXNlUGx1Z2luID0gZnVuY3Rpb24oZmFjdG9yeSwgb3duZXIpIHtcbiAgICB2YXIgaW5wdXRMaXN0ID0gW10sXG4gICAgICAgIG91dHB1dExpc3QgPSBbXSxcbiAgICAgICAgcE93bmVyID0gb3duZXIsXG4gICAgICAgIGV2ZW50VGFyZ2V0ID0gbmV3IEV2ZW50VGFyZ2V0KCk7XG4gICAgaWYgKHRoaXMuY29udGV4dCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMuY29udGV4dCA9IGZhY3RvcnkuY29udGV4dDtcbiAgICB9XG4gICAgaWYgKHRoaXMuZmFjdG9yeSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHRoaXMuZmFjdG9yeSA9IGZhY3Rvcnk7XG4gICAgfVxuICAgIHRoaXMuZmVhdHVyZU1hcCA9IG5ldyBQbHVnaW5GZWF0dXJlSW50ZXJmYWNlKHRoaXMpO1xuICAgIHRoaXMuZXh0ZXJuYWxJbnRlcmZhY2UgPSBuZXcgUGx1Z2luSW50ZXJmYWNlTWVzc2FnZUh1Yih0aGlzKTtcbiAgICB0aGlzLnBhcmFtZXRlcnMgPSBuZXcgUGFyYW1ldGVyTWFuYWdlcih0aGlzLCB0aGlzLmV4dGVybmFsSW50ZXJmYWNlLCBldmVudFRhcmdldCk7XG5cbiAgICBmdW5jdGlvbiBkZWxldGVJTyhub2RlLCBsaXN0KSB7XG4gICAgICAgIHZhciBpID0gbGlzdC5maW5kSW5kZXgoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBlID09PSB0aGlzO1xuICAgICAgICB9LCBub2RlKTtcbiAgICAgICAgaWYgKGkgPT09IC0xKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgbGlzdC5zcGxpY2UoaSwgMSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHRoaXMuYWRkSW5wdXQgPSBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICBpbnB1dExpc3QucHVzaChub2RlKTtcbiAgICAgICAgcmV0dXJuIGlucHV0TGlzdDtcbiAgICB9O1xuICAgIHRoaXMuZGVsZXRlSW5wdXQgPSBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICByZXR1cm4gZGVsZXRlSU8obm9kZSwgaW5wdXRMaXN0KTtcbiAgICB9O1xuICAgIHRoaXMuYWRkT3V0cHV0ID0gZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgb3V0cHV0TGlzdC5wdXNoKG5vZGUpO1xuICAgICAgICByZXR1cm4gdGhpcy5vdXRwdXRzO1xuICAgIH07XG4gICAgdGhpcy5kZWxldGVPdXRwdXQgPSBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICByZXR1cm4gZGVsZXRlSU8obm9kZSwgb3V0cHV0TGlzdCk7XG4gICAgfTtcblxuICAgIHRoaXMuc3RhcnQgPSB0aGlzLnN0b3AgPSB0aGlzLm9ubG9hZGVkID0gdGhpcy5vbnVubG9hZGVkID0gdGhpcy5kZWNvbnN0cnVjdCA9IGZ1bmN0aW9uICgpIHt9O1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcywge1xuICAgICAgICBcIm51bUlucHV0c1wiOiB7XG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaW5wdXRMaXN0Lmxlbmd0aDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyAoXCJDYW5ub3Qgc2V0IHRoZSBudW1iZXIgb2YgaW5wdXRzIG9mIEJhc2VQbHVnaW5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFwibnVtT3V0cHV0c1wiOiB7XG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gb3V0cHV0TGlzdC5sZW5ndGg7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgKFwiQ2Fubm90IHNldCB0aGUgbnVtYmVyIG9mIG91dHB1dHMgb2YgQmFzZVBsdWdpblwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJudW1QYXJhbWV0ZXJzXCI6IHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcmFtZXRlcnMucGFyYW1ldGVycy5sZW5ndGg7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgKFwiQ2Fubm90IHNldCB0aGUgbnVtYmVyIG9mIHBhcmFtZXRlcnMgb2YgQmFzZVBsdWdpblwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJvd25lclwiOiB7XG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcE93bmVyO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKG93bmVyKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvd25lciA9PT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgICAgICAgICBwT3duZXIgPSBvd25lcjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBPd25lcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJpbnB1dHNcIjoge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gaW5wdXRMaXN0O1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHRocm93IChcIklsbGVnYWwgYXR0ZW1wdCB0byBtb2RpZnkgQmFzZVBsdWdpblwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJvdXRwdXRzXCI6IHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG91dHB1dExpc3Q7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgKFwiSWxsZWdhbCBhdHRlbXB0IHRvIG1vZGlmeSBCYXNlUGx1Z2luXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcImNvbm5lY3RcIjoge1xuICAgICAgICAgICAgXCJ2YWx1ZVwiOiBmdW5jdGlvbiAoZGVzdCkge1xuICAgICAgICAgICAgICAgIHRoaXMub3V0cHV0c1swXS5jb25uZWN0KGRlc3QuaW5wdCA/IGRlc3QuaW5wdXQgOiBkZXN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJkaXNjb25uZWN0XCI6IHtcbiAgICAgICAgICAgIFwidmFsdWVcIjogZnVuY3Rpb24gKGRlc3QpIHtcbiAgICAgICAgICAgICAgICBpZiAoZGVzdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub3V0cHV0c1swXS5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vdXRwdXRzWzBdLmRpc2Nvbm5lY3QoZGVzdC5pbnB1dCA/IGRlc3QuaW5wdXQgOiBkZXN0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFwiZ2V0SW5wdXRzXCI6IHtcbiAgICAgICAgICAgIFwidmFsdWVcIjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmlucHV0cztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJnZXRPdXRwdXRzXCI6IHtcbiAgICAgICAgICAgIFwidmFsdWVcIjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLm91dHB1dHM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFwiZ2V0UGFyYW1ldGVyTmFtZVwiOiB7XG4gICAgICAgICAgICBcInZhbHVlXCI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJhbWV0ZXJzLmdldFBhcmFtZXRlck5hbWVzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFwiZ2V0UGFyYW1ldGVyQnlOYW1lXCI6IHtcbiAgICAgICAgICAgIFwidmFsdWVcIjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcmFtZXRlcnMuZ2V0UGFyYW1ldGVyQnlOYW1lKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFwiZ2V0UGFyYW1ldGVyT2JqZWN0XCI6IHtcbiAgICAgICAgICAgIFwidmFsdWVcIjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcmFtZXRlcnMuZ2V0UGFyYW1ldGVyT2JqZWN0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFwic2V0UGFyYW1ldGVyQnlOYW1lXCI6IHtcbiAgICAgICAgICAgIFwidmFsdWVcIjogZnVuY3Rpb24gKG5hbWUsIHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyYW1ldGVycy5zZXRQYXJhbWV0ZXJCeU5hbWUobmFtZSwgdmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcInNldFBhcmFtZXRlcnNCeU9iamVjdFwiOiB7XG4gICAgICAgICAgICBcInZhbHVlXCI6IGZ1bmN0aW9uIChvYmplY3QpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJhbWV0ZXJzLnNldFBhcmFtZXRlcnNCeU9iamVjdChvYmplY3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcImFkZEV2ZW50TGlzdGVuZXJcIjoge1xuICAgICAgICAgICAgXCJ2YWx1ZVwiOiBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGV2ZW50VGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoa2V5LCB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFwicmVtb3ZlRXZlbnRMaXN0ZW5lclwiOiB7XG4gICAgICAgICAgICBcInZhbHVlXCI6IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZXZlbnRUYXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihrZXksIHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xufTtcblxudmFyIFBhcmFtZXRlck1hbmFnZXIgPSBmdW5jdGlvbiAob3duZXIsIHBsdWdpbkV4dGVybmFsSW50ZXJmYWNlLCBldmVudFRhcmdldCkge1xuICAgIHZhciBwYXJhbWV0ZXJMaXN0ID0gW107XG5cbiAgICBmdW5jdGlvbiBmaW5kUGFyYW1ldGVyKG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHBhcmFtZXRlckxpc3QuZmluZChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIGUubmFtZS50b0xvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGZpbmRQYXJhbWV0ZXJJbmRleChuYW1lKSB7XG4gICAgICAgIHJldHVybiBwYXJhbWV0ZXJMaXN0LmZpbmRJbmRleChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIGUubmFtZS50b0xvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGJ1aWxkUGFyYW1ldGVyT2JqZWN0KCkge1xuICAgICAgICB2YXIgb2JqID0ge307XG4gICAgICAgIHBhcmFtZXRlckxpc3QuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgb2JqW2UubmFtZV0gPSBlO1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhZGRQYXJhbWV0ZXIocGFyYW0pIHtcbiAgICAgICAgdmFyIGV4aXN0cyA9IHBhcmFtZXRlckxpc3QuZmluZEluZGV4KGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICByZXR1cm4gZSA9PT0gcGFyYW07XG4gICAgICAgIH0sIHBhcmFtKTtcbiAgICAgICAgaWYgKGV4aXN0cyA9PT0gLTEpIHtcbiAgICAgICAgICAgIHBhcmFtZXRlckxpc3QucHVzaChwYXJhbSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHBhcmFtO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIFBsdWdpblBhcmFtZXRlcihvd25lciwgbmFtZSwgZGF0YVR5cGUpIHtcbiAgICAgICAgdmFyIHVwZGF0ZSwgdHJhbnNsYXRlLCB0cmlnZ2VyLCBhdWRpb1BhcmFtLCBfQWN0aW9uTGlzdCA9IFtdO1xuICAgICAgICB1cGRhdGUgPSB0cmFuc2xhdGUgPSBmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgcmV0dXJuIHY7XG4gICAgICAgIH07XG4gICAgICAgIHRyaWdnZXIgPSBmdW5jdGlvbiAoKSB7fTtcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcywge1xuICAgICAgICAgICAgXCJuYW1lXCI6IHtcbiAgICAgICAgICAgICAgICBcInZhbHVlXCI6IG5hbWVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcIm93bmVyXCI6IHtcbiAgICAgICAgICAgICAgICBcInZhbHVlXCI6IG93bmVyXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJ1cGRhdGVcIjoge1xuICAgICAgICAgICAgICAgIFwiZ2V0XCI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIFwic2V0XCI6IGZ1bmN0aW9uIChmKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZiAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyAoXCJNdXN0IGJlIGEgY2FsbGJhY2sgZnVuY3Rpb25cIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGYoMCkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgKFwiRnVuY3Rpb24gbXVzdCByZXR1cm4gYSB2YWx1ZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB1cGRhdGUgPSBmO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcInRyYW5zbGF0ZVwiOiB7XG4gICAgICAgICAgICAgICAgXCJnZXRcIjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJhbnNsYXRlO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXCJzZXRcIjogZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBmICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IChcIk11c3QgYmUgYSBjYWxsYmFjayBmdW5jdGlvblwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZigwKSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyAoXCJGdW5jdGlvbiBtdXN0IHJldHVybiBhIHZhbHVlXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRyYW5zbGF0ZSA9IGY7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwidHJpZ2dlclwiOiB7XG4gICAgICAgICAgICAgICAgXCJnZXRcIjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJpZ2dlcjtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIFwic2V0XCI6IGZ1bmN0aW9uIChmKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZiAhPT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyAoXCJNdXN0IGJlIGEgY2FsbGJhY2sgZnVuY3Rpb25cIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdHJpZ2dlciA9IGY7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwiYmluZFRvQXVkaW9QYXJhbVwiOiB7XG4gICAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiBmdW5jdGlvbiAoYXApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBhcCAhPT0gXCJvYmplY3RcIiB8fCBhcC52YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyAoXCJNdXN0IGJlIGFuIEF1ZGlvUGFyYW0gb2JqZWN0IGZyb20gYW4gQXVkaW9Ob2RlXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciB2ID0gdGhpcy51cGRhdGUodGhpcy52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGF1ZGlvUGFyYW0gPSBhcDtcbiAgICAgICAgICAgICAgICAgICAgYXVkaW9QYXJhbS52YWx1ZSA9IHY7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwiYm91bmRBdWRpb1BhcmFtXCI6IHtcbiAgICAgICAgICAgICAgICBcImdldFwiOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhdWRpb1BhcmFtO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcImFjdGlvbkxpc3RcIjoge1xuICAgICAgICAgICAgICAgIFwidmFsdWVcIjogX0FjdGlvbkxpc3RcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gTnVtYmVyUGFyYW1ldGVyKG93bmVyLCBuYW1lLCBkZWZhdWx0VmFsdWUsIG1pbmltdW0sIG1heGltdW0pIHtcbiAgICAgICAgUGx1Z2luUGFyYW1ldGVyLmNhbGwodGhpcywgb3duZXIsIG5hbWUsIFwiTnVtYmVyXCIpO1xuICAgICAgICB2YXIgX3ZhbHVlID0gZGVmYXVsdFZhbHVlLFxuICAgICAgICAgICAgX3N0ZXBTaXplO1xuXG4gICAgICAgIGZ1bmN0aW9uIGFkZEFjdGlvbih2KSB7XG4gICAgICAgICAgICB2YXIgZW50cnkgPSB7XG4gICAgICAgICAgICAgICAgJ3RpbWUnOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IHZcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmFjdGlvbkxpc3QucHVzaChlbnRyeSk7XG4gICAgICAgIH1cblxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLCB7XG4gICAgICAgICAgICBcInR5cGVcIjoge1xuICAgICAgICAgICAgICAgIFwidmFsdWVcIjogXCJOdW1iZXJcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwiZGVzdHJveVwiOiB7XG4gICAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIG93bmVyID0gbmFtZSA9IGRlZmF1bHRWYWx1ZSA9IG1pbmltdW0gPSBtYXhpbXVtID0gX3ZhbHVlID0gX3N0ZXBTaXplID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcIm1pbmltdW1cIjoge1xuICAgICAgICAgICAgICAgIFwidmFsdWVcIjogbWluaW11bVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwibWF4aW11bVwiOiB7XG4gICAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiBtYXhpbXVtXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJkZWZhdWx0VmFsdWVcIjoge1xuICAgICAgICAgICAgICAgIFwidmFsdWVcIjogZGVmYXVsdFZhbHVlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJ2YWx1ZVwiOiB7XG4gICAgICAgICAgICAgICAgXCJnZXRcIjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5ib3VuZEF1ZGlvUGFyYW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnRyYW5zbGF0ZSh0aGlzLmJvdW5kQXVkaW9QYXJhbS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92YWx1ZTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIFwic2V0XCI6IGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1pbmltdW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHYgPSBNYXRoLm1heCh2LCB0aGlzLm1pbmltdW0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1heGltdW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHYgPSBNYXRoLm1pbih2LCB0aGlzLm1heGltdW0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChfc3RlcFNpemUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHYgPSBNYXRoLnJvdW5kKHYgLyBfc3RlcFNpemUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdiA9IHYgKiBfc3RlcFNpemU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYm91bmRBdWRpb1BhcmFtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJvdW5kQXVkaW9QYXJhbS52YWx1ZSA9IHRoaXMudXBkYXRlKHYpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChfdmFsdWUgIT09IHYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF92YWx1ZSA9IHY7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IG5ldyBFdmVudChcInBhcmFtZXRlcnNldFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50VGFyZ2V0LmRpc3BhdGNoRXZlbnQoZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwic3RlcFNpemVcIjoge1xuICAgICAgICAgICAgICAgIFwiZ2V0XCI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9zdGVwU2l6ZTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIFwic2V0XCI6IGZ1bmN0aW9uIChuKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNGaW5pdGUobikgfHwgbiA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IChcIkludmFsaWQgc3RlcCBzaXplXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIF9zdGVwU2l6ZSA9IG47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgTnVtYmVyUGFyYW1ldGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoUGx1Z2luUGFyYW1ldGVyLnByb3RvdHlwZSk7XG4gICAgTnVtYmVyUGFyYW1ldGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IE51bWJlclBhcmFtZXRlcjtcblxuICAgIGZ1bmN0aW9uIFN0cmluZ1BhcmFtZXRlcihvd25lciwgbmFtZSwgZGVmYXVsdFZhbHVlLCBtYXhMZW5ndGgpIHtcbiAgICAgICAgUGx1Z2luUGFyYW1ldGVyLmNhbGwodGhpcywgb3duZXIsIG5hbWUsIFwiU3RyaW5nXCIpO1xuICAgICAgICB2YXIgX3ZhbHVlID0gZGVmYXVsdFZhbHVlO1xuXG4gICAgICAgIGZ1bmN0aW9uIGFkZEFjdGlvbih2KSB7XG4gICAgICAgICAgICB2YXIgZW50cnkgPSB7XG4gICAgICAgICAgICAgICAgJ3RpbWUnOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IHZcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmFjdGlvbkxpc3QucHVzaChlbnRyeSk7XG4gICAgICAgIH1cblxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLCB7XG4gICAgICAgICAgICBcInR5cGVcIjoge1xuICAgICAgICAgICAgICAgIFwidmFsdWVcIjogXCJTdHJpbmdcIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwiZGVzdHJveVwiOiB7XG4gICAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIG93bmVyID0gbmFtZSA9IGRlZmF1bHRWYWx1ZSA9IG1heExlbmd0aCA9IF92YWx1ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJtYXhMZW5ndGhcIjoge1xuICAgICAgICAgICAgICAgIFwidmFsdWVcIjogbWF4TGVuZ3RoXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJkZWZhdWx0VmFsdWVcIjoge1xuICAgICAgICAgICAgICAgIFwidmFsdWVcIjogZGVmYXVsdFZhbHVlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJ2YWx1ZVwiOiB7XG4gICAgICAgICAgICAgICAgXCJnZXRcIjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5ib3VuZEF1ZGlvUGFyYW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnRyYW5zbGF0ZSh0aGlzLmJvdW5kQXVkaW9QYXJhbS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92YWx1ZTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIFwic2V0XCI6IGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtYXhMZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2Lmxlbmd0aCA+IG1heExlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IChcIlN0cmluZyBsb25nZXIgdGhhbiBcIiArIG1heExlbmd0aCArIFwiIGNoYXJhY3RlcnNcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYm91bmRBdWRpb1BhcmFtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJvdW5kQXVkaW9QYXJhbS52YWx1ZSA9IHRoaXMudXBkYXRlKHYpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChfdmFsdWUgIT09IHYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF92YWx1ZSA9IHY7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IG5ldyBFdmVudChcInBhcmFtZXRlcnNldFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50VGFyZ2V0LmRpc3BhdGNoRXZlbnQoZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgU3RyaW5nUGFyYW1ldGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoUGx1Z2luUGFyYW1ldGVyLnByb3RvdHlwZSk7XG4gICAgU3RyaW5nUGFyYW1ldGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFN0cmluZ1BhcmFtZXRlcjtcblxuICAgIGZ1bmN0aW9uIEJ1dHRvblBhcmFtZXRlcihvd25lciwgbmFtZSkge1xuICAgICAgICBQbHVnaW5QYXJhbWV0ZXIuY2FsbCh0aGlzLCBvd25lciwgbmFtZSwgXCJCdXR0b25cIik7XG4gICAgICAgIHZhciBvbmNsaWNrID0gZnVuY3Rpb24gKCkge307XG5cbiAgICAgICAgZnVuY3Rpb24gYWRkQWN0aW9uKHYpIHtcbiAgICAgICAgICAgIHZhciBlbnRyeSA9IHtcbiAgICAgICAgICAgICAgICAndGltZSc6IG5ldyBEYXRlKCksXG4gICAgICAgICAgICAgICAgJ3ZhbHVlJzogXCJjbGlja2VkXCJcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmFjdGlvbkxpc3QucHVzaChlbnRyeSk7XG4gICAgICAgIH1cblxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLCB7XG4gICAgICAgICAgICBcInR5cGVcIjoge1xuICAgICAgICAgICAgICAgIFwidmFsdWVcIjogXCJCdXR0b25cIlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwiZGVzdHJveVwiOiB7XG4gICAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIG93bmVyID0gbmFtZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJvbmNsaWNrXCI6IHtcbiAgICAgICAgICAgICAgICBcImdldFwiOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBvbmNsaWNrO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXCJzZXRcIjogZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBmICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IChcIm9uY2xpY2sgbXVzdCBiZSBhIGZ1bmN0aW9uXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG9uY2xpY2sgPSBmO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIEJ1dHRvblBhcmFtZXRlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFBsdWdpblBhcmFtZXRlci5wcm90b3R5cGUpO1xuICAgIEJ1dHRvblBhcmFtZXRlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBCdXR0b25QYXJhbWV0ZXI7XG5cbiAgICBmdW5jdGlvbiBTd2l0Y2hQYXJhbWV0ZXIob3duZXIsIG5hbWUsIGRlZmF1bHRWYWx1ZSwgbWluU3RhdGUsIG1heFN0YXRlKSB7XG4gICAgICAgIFBsdWdpblBhcmFtZXRlci5jYWxsKHRoaXMsIG93bmVyLCBuYW1lLCBcIkJ1dHRvblwiKTtcbiAgICAgICAgdmFyIG9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7fTtcbiAgICAgICAgdmFyIF92YWx1ZSA9IGRlZmF1bHRWYWx1ZTtcblxuICAgICAgICBmdW5jdGlvbiBhZGRBY3Rpb24odikge1xuICAgICAgICAgICAgdmFyIGVudHJ5ID0ge1xuICAgICAgICAgICAgICAgICd0aW1lJzogbmV3IERhdGUoKSxcbiAgICAgICAgICAgICAgICAndmFsdWUnOiB2XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5hY3Rpb25MaXN0LnB1c2goZW50cnkpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gc2V0Vih2KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5ib3VuZEF1ZGlvUGFyYW0pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmJvdW5kQXVkaW9QYXJhbS52YWx1ZSA9IHRoaXMudXBkYXRlKHYpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYWRkQWN0aW9uLmNhbGwodGhpcywgdik7XG4gICAgICAgICAgICBpZiAoX3ZhbHVlICE9PSB2KSB7XG4gICAgICAgICAgICAgICAgX3ZhbHVlID0gdjtcbiAgICAgICAgICAgICAgICB2YXIgZSA9IG5ldyBFdmVudChcInBhcmFtZXRlcnNldFwiKTtcbiAgICAgICAgICAgICAgICBldmVudFRhcmdldC5kaXNwYXRjaEV2ZW50KGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCk7XG4gICAgICAgICAgICByZXR1cm4gdjtcbiAgICAgICAgfVxuXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMsIHtcbiAgICAgICAgICAgIFwidHlwZVwiOiB7XG4gICAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiBcIlN3aXRjaFwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJkZXN0cm95XCI6IHtcbiAgICAgICAgICAgICAgICBcInZhbHVlXCI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgb3duZXIgPSBuYW1lID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcImRlZmF1bHRWYWx1ZVwiOiB7XG4gICAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiBkZWZhdWx0VmFsdWVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcIm1pblN0YXRlXCI6IHtcbiAgICAgICAgICAgICAgICBcInZhbHVlXCI6IG1pblN0YXRlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJtYXhTdGF0ZVwiOiB7XG4gICAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiBtYXhTdGF0ZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwidmFsdWVcIjoge1xuICAgICAgICAgICAgICAgIFwiZ2V0XCI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYm91bmRBdWRpb1BhcmFtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50cmFuc2xhdGUodGhpcy5ib3VuZEF1ZGlvUGFyYW0udmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfdmFsdWU7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBcInNldFwiOiBmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgICAgICAgICBpZiAodiA8IG1pblN0YXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyAoXCJTZXQgdmFsdWUgaXMgbGVzcyB0aGFuIFwiICsgbWluU3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh2ID4gbWF4U3RhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IChcIlNldCB2YWx1ZSBpcyBncmVhdGVyIHRoYW4gXCIgKyBtYXhTdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNldFYuY2FsbCh0aGlzLCB2KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJpbmNyZW1lbnRcIjoge1xuICAgICAgICAgICAgICAgIFwidmFsdWVcIjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdiA9IF92YWx1ZSArIDE7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2ID4gbWF4U3RhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHYgPSBtaW5TdGF0ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2V0Vi5jYWxsKHRoaXMsIHYpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcImRlY3JlbWVudFwiOiB7XG4gICAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB2ID0gX3ZhbHVlIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHYgPCBtaW5TdGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdiA9IG1heFN0YXRlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzZXRWLmNhbGwodGhpcywgdik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgU3dpdGNoUGFyYW1ldGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoUGx1Z2luUGFyYW1ldGVyLnByb3RvdHlwZSk7XG4gICAgU3dpdGNoUGFyYW1ldGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFN3aXRjaFBhcmFtZXRlcjtcblxuICAgIGZ1bmN0aW9uIExpc3RQYXJhbWV0ZXIob3duZXIsIG5hbWUsIGRlZmF1bHRWYWx1ZSwgbGlzdE9mVmFsdWVzKSB7XG4gICAgICAgIFBsdWdpblBhcmFtZXRlci5jYWxsKHRoaXMsIG93bmVyLCBuYW1lLCBcIkJ1dHRvblwiKTtcbiAgICAgICAgdmFyIG9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7fTtcbiAgICAgICAgdmFyIF9pbmRleCA9IGxpc3RPZlZhbHVlcy5pbmRleE9mKGRlZmF1bHRWYWx1ZSk7XG5cbiAgICAgICAgZnVuY3Rpb24gYWRkQWN0aW9uKHYpIHtcbiAgICAgICAgICAgIHZhciBlbnRyeSA9IHtcbiAgICAgICAgICAgICAgICAndGltZSc6IG5ldyBEYXRlKCksXG4gICAgICAgICAgICAgICAgJ3ZhbHVlJzogdlxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uTGlzdC5wdXNoKGVudHJ5KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNldFYodikge1xuICAgICAgICAgICAgdmFyIGkgPSBsaXN0T2ZWYWx1ZXMuaW5kZXhPZih2KTtcbiAgICAgICAgICAgIGlmIChpID09PSB1bmRlZmluZWQgfHwgaSA8IDApIHtcbiAgICAgICAgICAgICAgICB0aHJvdyhcIk5vdCBpbiBsaXN0IHJhbmdlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuYm91bmRBdWRpb1BhcmFtKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ib3VuZEF1ZGlvUGFyYW0udmFsdWUgPSB0aGlzLnVwZGF0ZSh2KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFkZEFjdGlvbi5jYWxsKHRoaXMsIHYpO1xuICAgICAgICAgICAgaWYgKF9pbmRleCAhPT0gaSkge1xuICAgICAgICAgICAgICAgIF9pbmRleCA9IGk7XG4gICAgICAgICAgICAgICAgdmFyIGUgPSBuZXcgRXZlbnQoXCJwYXJhbWV0ZXJzZXRcIik7XG4gICAgICAgICAgICAgICAgZXZlbnRUYXJnZXQuZGlzcGF0Y2hFdmVudChlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcigpO1xuICAgICAgICAgICAgcmV0dXJuIGxpc3RPZlZhbHVlc1tfaW5kZXhdO1xuICAgICAgICB9XG5cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcywge1xuICAgICAgICAgICAgXCJ0eXBlXCI6IHtcbiAgICAgICAgICAgICAgICBcInZhbHVlXCI6IFwiTGlzdFwiXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJkZXN0cm95XCI6IHtcbiAgICAgICAgICAgICAgICBcInZhbHVlXCI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgb3duZXIgPSBuYW1lID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcImRlZmF1bHRWYWx1ZVwiOiB7XG4gICAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiBkZWZhdWx0VmFsdWVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcImxpc3RWYWx1ZXNcIjoge1xuICAgICAgICAgICAgICAgIFwiZ2V0XCI6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbGlzdE9mVmFsdWVzLm1hcChmdW5jdGlvbih2KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdlxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJ2YWx1ZVwiOiB7XG4gICAgICAgICAgICAgICAgXCJnZXRcIjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5ib3VuZEF1ZGlvUGFyYW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnRyYW5zbGF0ZSh0aGlzLmJvdW5kQXVkaW9QYXJhbS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxpc3RPZlZhbHVlc1tfaW5kZXhdO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXCJzZXRcIjogZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNldFYuY2FsbCh0aGlzLCB2KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJpbmNyZW1lbnRcIjoge1xuICAgICAgICAgICAgICAgIFwidmFsdWVcIjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdiA9IF9pbmRleCArIDE7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2ID49IGxpc3RPZlZhbHVlcy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHYgPSAwO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzZXRWLmNhbGwodGhpcywgdik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwiZGVjcmVtZW50XCI6IHtcbiAgICAgICAgICAgICAgICBcInZhbHVlXCI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHYgPSBfaW5kZXggLSAxO1xuICAgICAgICAgICAgICAgICAgICBpZiAodiA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHYgPSBsaXN0T2ZWYWx1ZXMubGVuZ3RoLTE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNldFYuY2FsbCh0aGlzLCB2KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBMaXN0UGFyYW1ldGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoUGx1Z2luUGFyYW1ldGVyLnByb3RvdHlwZSk7XG4gICAgTGlzdFBhcmFtZXRlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBMaXN0UGFyYW1ldGVyO1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcywge1xuICAgICAgICAnY3JlYXRlTnVtYmVyUGFyYW1ldGVyJzoge1xuICAgICAgICAgICAgXCJ2YWx1ZVwiOiBmdW5jdGlvbiAobmFtZSwgZGVmYXVsdFZhbHVlLCBtaW5pbXVtLCBtYXhpbXVtKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBuYW1lICE9PSBcInN0cmluZ1wiIHx8IHR5cGVvZiBkZWZhdWx0VmFsdWUgIT09IFwibnVtYmVyXCIgfHwgKG1pbmltdW0gIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgbWluaW11bSAhPT0gXCJudW1iZXJcIikgfHwgKG1heGltdW0gIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgbWF4aW11bSAhPT0gXCJudW1iZXJcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgKFwiSW52bGlkIGNvbnN0cnVjdG9yXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZmluZFBhcmFtZXRlckluZGV4KG5hbWUpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyAoXCJQYXJhbWV0ZXIgd2l0aCBuYW1lICdcIiArIG5hbWUgKyBcIicgYWxyZWFkeSBleGlzdHNcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBwYXJhbSA9IG5ldyBOdW1iZXJQYXJhbWV0ZXIob3duZXIsIG5hbWUsIGRlZmF1bHRWYWx1ZSwgbWluaW11bSwgbWF4aW11bSk7XG4gICAgICAgICAgICAgICAgYWRkUGFyYW1ldGVyKHBhcmFtKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyYW07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgICdjcmVhdGVTdHJpbmdQYXJhbWV0ZXInOiB7XG4gICAgICAgICAgICBcInZhbHVlXCI6IGZ1bmN0aW9uIChuYW1lLCBkZWZhdWx0VmFsdWUsIG1heExlbmd0aCkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbmFtZSAhPT0gXCJzdHJpbmdcIiB8fCB0eXBlb2YgZGVmYXVsdFZhbHVlICE9PSBcInN0cmluZ1wiIHx8IChtYXhMZW5ndGggIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgbWF4TGVuZ3RoICE9PSBcIm51bWJlclwiKSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyAoXCJJbnZsaWQgY29uc3RydWN0b3JcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChmaW5kUGFyYW1ldGVySW5kZXgobmFtZSkgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IChcIlBhcmFtZXRlciB3aXRoIG5hbWUgJ1wiICsgbmFtZSArIFwiJyBhbHJlYWR5IGV4aXN0c1wiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHBhcmFtID0gbmV3IFN0cmluZ1BhcmFtZXRlcihvd25lciwgbmFtZSwgZGVmYXVsdFZhbHVlLCBtYXhMZW5ndGgpO1xuICAgICAgICAgICAgICAgIGFkZFBhcmFtZXRlcihwYXJhbSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcmFtO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICAnY3JlYXRlQnV0dG9uUGFyYW1ldGVyJzoge1xuICAgICAgICAgICAgXCJ2YWx1ZVwiOiBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbmFtZSAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyAoXCJJbnZhbGlkIGNvbnN0cnVjdG9yXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZmluZFBhcmFtZXRlckluZGV4KG5hbWUpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyAoXCJQYXJhbWV0ZXIgd2l0aCBuYW1lICdcIiArIG5hbWUgKyBcIicgYWxyZWFkeSBleGlzdHNcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBwYXJhbSA9IG5ldyBCdXR0b25QYXJhbWV0ZXIob3duZXIsIG5hbWUpO1xuICAgICAgICAgICAgICAgIGFkZFBhcmFtZXRlcihwYXJhbSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcmFtO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICAnY3JlYXRlU3dpdGNoUGFyYW1ldGVyJzoge1xuICAgICAgICAgICAgXCJ2YWx1ZVwiOiBmdW5jdGlvbiAobmFtZSwgZGVmYXVsdFZhbHVlLCBtaW5TdGF0ZSwgbWF4U3RhdGUpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG5hbWUgIT09IFwic3RyaW5nXCIgfHwgdHlwZW9mIGRlZmF1bHRWYWx1ZSAhPT0gXCJudW1iZXJcIiB8fCB0eXBlb2YgbWluU3RhdGUgIT09IFwibnVtYmVyXCIgfHwgdHlwZW9mIG1heFN0YXRlICE9PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IChcIkludmxpZCBjb25zdHJ1Y3RvclwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGZpbmRQYXJhbWV0ZXJJbmRleChuYW1lKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgKFwiUGFyYW1ldGVyIHdpdGggbmFtZSAnXCIgKyBuYW1lICsgXCInIGFscmVhZHkgZXhpc3RzXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgcGFyYW0gPSBuZXcgU3dpdGNoUGFyYW1ldGVyKG93bmVyLCBuYW1lLCBkZWZhdWx0VmFsdWUsIG1pblN0YXRlLCBtYXhTdGF0ZSk7XG4gICAgICAgICAgICAgICAgYWRkUGFyYW1ldGVyKHBhcmFtKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyYW07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgICdjcmVhdGVMaXN0UGFyYW1ldGVyJzoge1xuICAgICAgICAgICAgXCJ2YWx1ZVwiOiBmdW5jdGlvbiAobmFtZSwgZGVmYXVsdFZhbHVlLCBsaXN0T2ZWYWx1ZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG5hbWUgIT09IFwic3RyaW5nXCIgfHwgdHlwZW9mIGRlZmF1bHRWYWx1ZSA9PT0gXCJ1bmRlZmluZWRcIiB8fCAhQXJyYXkuaXNBcnJheShsaXN0T2ZWYWx1ZXMpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IChcIkludmxpZCBjb25zdHJ1Y3RvclwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGxpc3RPZlZhbHVlcy5pbmNsdWRlcyhkZWZhdWx0VmFsdWUpID09PSBmYWxzZSkge1xuICAgICAgICAgICAgICAgICAgICBocm93IChcIkludmxpZCBjb25zdHJ1Y3RvciAtIGRlZmF1bHQgdmFsdWUgbWlzc2luZ1wiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGZpbmRQYXJhbWV0ZXJJbmRleChuYW1lKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgKFwiUGFyYW1ldGVyIHdpdGggbmFtZSAnXCIgKyBuYW1lICsgXCInIGFscmVhZHkgZXhpc3RzXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgcGFyYW0gPSBuZXcgTGlzdFBhcmFtZXRlcihvd25lciwgbmFtZSwgZGVmYXVsdFZhbHVlLCBsaXN0T2ZWYWx1ZXMpO1xuICAgICAgICAgICAgICAgIGFkZFBhcmFtZXRlcihwYXJhbSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcmFtO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICAnY3JlYXRlUGFyYW1ldGVyJzoge1xuICAgICAgICAgICAgJ3ZhbHVlJzogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHRocm93IChcIlRoaXMgZnVuY3Rpb24gaXMgbm93IGRlcHJlY2F0ZWRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgICdnZXRQYXJhbWV0ZXJOYW1lJzoge1xuICAgICAgICAgICAgJ3ZhbHVlJzogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBuYW1lcyA9IFtdLFxuICAgICAgICAgICAgICAgICAgICBpO1xuICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBwYXJhbWV0ZXJMaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIG5hbWVzLnB1c2gocGFyYW1ldGVyTGlzdFtpXS5uYW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5hbWVzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICAnZ2V0UGFyYW1ldGVyQnlOYW1lJzoge1xuICAgICAgICAgICAgJ3ZhbHVlJzogZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmluZFBhcmFtZXRlcihuYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgJ2dldFBhcmFtZXRlck9iamVjdCc6IHtcbiAgICAgICAgICAgICd2YWx1ZSc6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYnVpbGRQYXJhbWV0ZXJPYmplY3QoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgJ2dldFBhcmFtZXRlck5hbWVzJzoge1xuICAgICAgICAgICAgJ3ZhbHVlJzogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBsID0gW107XG4gICAgICAgICAgICAgICAgcGFyYW1ldGVyTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICAgICAgICAgIGwucHVzaChhLm5hbWUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBsO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICAnc2V0UGFyYW1ldGVyQnlOYW1lJzoge1xuICAgICAgICAgICAgJ3ZhbHVlJzogZnVuY3Rpb24gKG4sIHYpIHtcbiAgICAgICAgICAgICAgICB2YXIgcGFyYW1ldGVyID0gZmluZFBhcmFtZXRlcihuKTtcbiAgICAgICAgICAgICAgICBpZiAoIXBhcmFtZXRlcikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHBhcmFtZXRlci52YWx1ZSA9IHY7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgICdkZWxldGVQYXJhbWV0ZXInOiB7XG4gICAgICAgICAgICAndmFsdWUnOiBmdW5jdGlvbiAobykge1xuICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IHBhcmFtZXRlckxpc3QuZmluZEluZGV4KGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlID09PSBvO1xuICAgICAgICAgICAgICAgIH0sIG8pO1xuICAgICAgICAgICAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIERvZXMgZXhpc3RcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1ldGVyTGlzdC5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgICAgICBvLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgJ2RlbGV0ZUFsbFBhcmFtZXRlcnMnOiB7XG4gICAgICAgICAgICAndmFsdWUnOiBmdW5jdGlvbiAobykge1xuICAgICAgICAgICAgICAgIHBhcmFtZXRlckxpc3QuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICBlLmRlc3Ryb3koKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJMaXN0ID0gW107XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgICdzZXRQYXJhbWV0ZXJzQnlPYmplY3QnOiB7XG4gICAgICAgICAgICAndmFsdWUnOiBmdW5jdGlvbiAob2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgdmFyIGtleTtcbiAgICAgICAgICAgICAgICBmb3IgKGtleSBpbiBvYmplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9iamVjdC5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG9iamVjdFtrZXldID09IFwib2JqZWN0XCIpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0UGFyYW1ldGVyQnlOYW1lKGtleSwgb2JqZWN0W2tleV0udmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygb2JqZWN0W2tleV0gPT0gXCJudW1iZXJcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0UGFyYW1ldGVyQnlOYW1lKGtleSwgb2JqZWN0W2tleV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyAoXCJDYW5ub3Qgc2V0IFwiICsga2V5ICsgXCI6IE5vdCBhIHZhbGlkIG9iamVjdFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgJ3BhcmFtZXRlcnMnOiB7XG4gICAgICAgICAgICAnZ2V0JzogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBidWlsZFBhcmFtZXRlck9iamVjdCgpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdzZXQnOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgKFwiQ2Fubm90IHNldCwgdXNlIC5zZXRQYXJhbWV0ZXJCeS4uLigpXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG52YXIgUGx1Z2luRmVhdHVyZUludGVyZmFjZSA9IGZ1bmN0aW9uIChCYXNlUGx1Z2luSW5zdGFuY2UpIHtcbiAgICB0aGlzLnBsdWdpbiA9IEJhc2VQbHVnaW5JbnN0YW5jZTtcbiAgICB0aGlzLlJlY2VpdmVyID0gbmV3IFBsdWdpbkZlYXR1cmVJbnRlcmZhY2VSZWNlaXZlcih0aGlzLCBCYXNlUGx1Z2luSW5zdGFuY2UuZmFjdG9yeS5GZWF0dXJlTWFwKTtcbiAgICB0aGlzLlNlbmRlciA9IG5ldyBQbHVnaW5GZWF0dXJlSW50ZXJmYWNlU2VuZGVyKHRoaXMsIEJhc2VQbHVnaW5JbnN0YW5jZS5mYWN0b3J5LkZlYXR1cmVNYXApO1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwib25mZWF0dXJlc1wiLCB7XG4gICAgICAgICdnZXQnOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5SZWNlaXZlci5vbmZlYXR1cmVzO1xuICAgICAgICB9LFxuICAgICAgICAnc2V0JzogZnVuY3Rpb24gKGZ1bmMpIHtcbiAgICAgICAgICAgIHRoaXMuUmVjZWl2ZXIub25mZWF0dXJlcyA9IGZ1bmM7XG4gICAgICAgICAgICByZXR1cm4gZnVuYztcbiAgICAgICAgfVxuICAgIH0pO1xufTtcbnZhciBQbHVnaW5GZWF0dXJlSW50ZXJmYWNlUmVjZWl2ZXIgPSBmdW5jdGlvbiAoRmVhdHVyZUludGVyZmFjZUluc3RhbmNlLCBGYWN0b3J5RmVhdHVyZU1hcCkge1xuICAgIGZ1bmN0aW9uIGNoZWNrRmVhdHVyZUFyZ3Moc291cmNlLCBmZWF0dXJlT2JqZWN0KSB7XG4gICAgICAgIGlmIChzb3VyY2UgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgKFwiU291cmNlIHBsdWdpbiBtdXN0IGJlIGRlZmluZWRcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZlYXR1cmVPYmplY3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgKFwiRmVhdHVyZU9iamVjdCBtdXN0IGJlIGRlZmluZWRcIik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBmZWF0dXJlT2JqZWN0Lm91dHB1dEluZGV4ICE9PSBcIm51bWJlclwiIHx8IHR5cGVvZiBmZWF0dXJlT2JqZWN0LmZyYW1lU2l6ZSAhPT0gXCJudW1iZXJcIiB8fCB0eXBlb2YgZmVhdHVyZU9iamVjdC5mZWF0dXJlcyAhPT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgdGhyb3cgKFwiTWFsZm9ybWVkIGZlYXR1cmVPYmplY3RcIik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHZhciBjX2ZlYXR1cmVzID0gZnVuY3Rpb24gKCkge307XG4gICAgdGhpcy5yZXF1ZXN0RmVhdHVyZXMgPSBmdW5jdGlvbiAoZmVhdHVyZUxpc3QpIHtcbiAgICAgICAgdmFyIGk7XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBmZWF0dXJlTGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0RmVhdHVyZXNGcm9tUGx1Z2luKGZlYXR1cmVMaXN0W2ldLnBsdWdpbiwge1xuICAgICAgICAgICAgICAgICdvdXRwdXRJbmRleCc6IGZlYXR1cmVMaXN0W2ldLm91dHB1dEluZGV4LFxuICAgICAgICAgICAgICAgICdmcmFtZVNpemUnOiBmZWF0dXJlTGlzdFtpXS5mcmFtZVNpemUsXG4gICAgICAgICAgICAgICAgJ2ZlYXR1cmVzJzogZmVhdHVyZUxpc3RbaV0uZmVhdHVyZXNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICB0aGlzLnJlcXVlc3RGZWF0dXJlc0Zyb21QbHVnaW4gPSBmdW5jdGlvbiAoc291cmNlLCBmZWF0dXJlT2JqZWN0KSB7XG4gICAgICAgIGNoZWNrRmVhdHVyZUFyZ3Moc291cmNlLCBmZWF0dXJlT2JqZWN0KTtcbiAgICAgICAgRmFjdG9yeUZlYXR1cmVNYXAucmVxdWVzdEZlYXR1cmVzKEZlYXR1cmVJbnRlcmZhY2VJbnN0YW5jZS5wbHVnaW4sIHNvdXJjZSwgZmVhdHVyZU9iamVjdCk7XG4gICAgfTtcbiAgICB0aGlzLmNhbmNlbEZlYXR1cmVzRnJvbVBsdWdpbiA9IGZ1bmN0aW9uIChzb3VyY2UsIGZlYXR1cmVPYmplY3QpIHtcbiAgICAgICAgY2hlY2tGZWF0dXJlQXJncyhzb3VyY2UsIGZlYXR1cmVPYmplY3QpO1xuICAgICAgICBGYWN0b3J5RmVhdHVyZU1hcC5kZWxldGVGZWF0dXJlcyhGZWF0dXJlSW50ZXJmYWNlSW5zdGFuY2UucGx1Z2luLCBzb3VyY2UsIGZlYXR1cmVPYmplY3QpO1xuICAgIH07XG4gICAgdGhpcy5jYW5jZWxBbGxGZWF0dXJlc0Zyb21QbHVnaW4gPSBmdW5jdGlvbiAoc291cmNlKSB7XG4gICAgICAgIGlmIChzb3VyY2UgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgKFwiU291cmNlIHBsdWdpbiBtdXN0IGJlIGRlZmluZWRcIik7XG4gICAgICAgIH1cbiAgICAgICAgRmFjdG9yeUZlYXR1cmVNYXAuZGVsZXRlRmVhdHVyZXMoRmVhdHVyZUludGVyZmFjZUluc3RhbmNlLnBsdWdpbiwgc291cmNlKTtcbiAgICB9O1xuICAgIHRoaXMuY2FuY2VsQWxsRmVhdHVyZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIEZhY3RvcnlGZWF0dXJlTWFwLmRlbGV0ZUZlYXR1cmVzKEZlYXR1cmVJbnRlcmZhY2VJbnN0YW5jZS5wbHVnaW4pO1xuICAgIH07XG5cbiAgICB0aGlzLnBvc3RGZWF0dXJlcyA9IGZ1bmN0aW9uIChNZXNzYWdlKSB7XG4gICAgICAgIC8qXG4gICAgICAgICAgICBDYWxsZWQgYnkgdGhlIFBsdWdpbiBGYWN0b3J5IHdpdGggdGhlIGZlYXR1cmUgbWVzc2FnZVxuICAgICAgICAgICAgbWVzc2FnZSA9IHtcbiAgICAgICAgICAgICAgICAncGx1Z2luJzogc291cmNlUGx1Z2luSW5zdGFuY2UsXG4gICAgICAgICAgICAgICAgJ291dHB1dEluZGV4Jzogb3V0cHV0SW5kZXgsXG4gICAgICAgICAgICAgICAgJ2ZyYW1lU2l6ZSc6IGZyYW1lU2l6ZSxcbiAgICAgICAgICAgICAgICAnZmVhdHVyZXMnOiB7fSBKUy1YdHJhY3QgZmVhdHVyZSByZXN1bHRzIG9iamVjdFxuICAgICAgICAgICAgfVxuICAgICAgICAqL1xuICAgICAgICBpZiAodHlwZW9mIGNfZmVhdHVyZXMgPT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgY19mZWF0dXJlcyhNZXNzYWdlKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJvbmZlYXR1cmVzXCIsIHtcbiAgICAgICAgJ2dldCc6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBjX2ZlYXR1cmVzO1xuICAgICAgICB9LFxuICAgICAgICAnc2V0JzogZnVuY3Rpb24gKGZ1bmMpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZnVuYyA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgY19mZWF0dXJlcyA9IGZ1bmM7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9KTtcblxufTtcbnZhciBQbHVnaW5GZWF0dXJlSW50ZXJmYWNlU2VuZGVyID0gZnVuY3Rpb24gKEZlYXR1cmVJbnRlcmZhY2VJbnN0YW5jZSwgRmFjdG9yeUZlYXR1cmVNYXApIHtcbiAgICB2YXIgT3V0cHV0Tm9kZSA9IGZ1bmN0aW9uIChwYXJlbnQsIG91dHB1dCwgaW5kZXgpIHtcbiAgICAgICAgdmFyIGV4dHJhY3RvcnMgPSBbXTtcbiAgICAgICAgdmFyIEV4dHJhY3RvciA9IGZ1bmN0aW9uIChvdXRwdXQsIGZyYW1lU2l6ZSkge1xuICAgICAgICAgICAgdGhpcy5leHRyYWN0b3IgPSBGZWF0dXJlSW50ZXJmYWNlSW5zdGFuY2UucGx1Z2luLmZhY3RvcnkuY29udGV4dC5jcmVhdGVBbmFseXNlcigpO1xuICAgICAgICAgICAgdGhpcy5leHRyYWN0b3IuZmZ0U2l6ZSA9IGZyYW1lU2l6ZTtcbiAgICAgICAgICAgIG91dHB1dC5jb25uZWN0KHRoaXMuZXh0cmFjdG9yKTtcbiAgICAgICAgICAgIHRoaXMuZmVhdHVyZXMgPSBbXTtcbiAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImZyYW1lU2l6ZVwiLCB7XG4gICAgICAgICAgICAgICAgJ3ZhbHVlJzogZnJhbWVTaXplXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8qXG4gICAgICAgICAgICBmdW5jdGlvbiByZWN1cnNpdmVQcm9jZXNzaW5nKGJhc2UsIGxpc3QpIHtcbiAgICAgICAgICAgICAgICB2YXIgbCA9IGxpc3QubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICBpLCBlbnRyeTtcbiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGVudHJ5ID0gbGlzdFtpXTtcbiAgICAgICAgICAgICAgICAgICAgYmFzZVtlbnRyeS5uYW1lXS5hcHBseShiYXNlLCBlbnRyeS5wYXJhbWV0ZXJzKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVudHJ5LmZlYXR1cmVzICYmIGVudHJ5LmZlYXR1cmVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY3Vyc2l2ZVByb2Nlc3NpbmcoYmFzZS5yZXN1bHRbZW50cnkubmFtZV0sIGVudHJ5LmZlYXR1cmVzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICovXG4gICAgICAgICAgICB2YXIgcmVjdXJzaXZlUHJvY2Vzc2luZyA9IHRoaXMuZmFjdG9yeS5yZWN1cnNpdmVQcm9jZXNzaW5nO1xuXG4gICAgICAgICAgICBmdW5jdGlvbiBvbmF1ZGlvY2FsbGJhY2soZGF0YSkge1xuICAgICAgICAgICAgICAgIC8vdGhpcyA9PT0gRXh0cmFjdG9yXG4gICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSB7XG4gICAgICAgICAgICAgICAgICAgICdudW1iZXJPZkNoYW5uZWxzJzogMSxcbiAgICAgICAgICAgICAgICAgICAgJ3Jlc3VsdHMnOiBbXVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgcmVjdXJzaXZlUHJvY2Vzc2luZyhkYXRhLCB0aGlzLmZlYXR1cmVzKTtcbiAgICAgICAgICAgICAgICBtZXNzYWdlLnJlc3VsdHNbMF0gPSB7XG4gICAgICAgICAgICAgICAgICAgICdjaGFubmVsJzogMCxcbiAgICAgICAgICAgICAgICAgICAgJ3Jlc3VsdHMnOiBKU09OLnBhcnNlKGRhdGEudG9KU09OKCkpXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0aGlzLnBvc3RGZWF0dXJlcyhkYXRhLmxlbmd0aCwgbWVzc2FnZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuc2V0RmVhdHVyZXMgPSBmdW5jdGlvbiAoZmVhdHVyZUxpc3QpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZlYXR1cmVzID0gZmVhdHVyZUxpc3Q7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuZmVhdHVyZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXh0cmFjdG9yLmNsZWFyQ2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4dHJhY3Rvci5mcmFtZUNhbGxiYWNrKG9uYXVkaW9jYWxsYmFjaywgdGhpcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIFdvcmtlckV4dHJhY3RvciA9IGZ1bmN0aW9uIChvdXRwdXQsIGZyYW1lU2l6ZSkge1xuICAgICAgICAgICAgZnVuY3Rpb24gb25hdWRpb2NhbGxiYWNrKGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgYywgZnJhbWVzID0gW107XG4gICAgICAgICAgICAgICAgZm9yIChjID0gMDsgYyA8IGUuaW5wdXRCdWZmZXIubnVtYmVyT2ZDaGFubmVsczsgYysrKSB7XG4gICAgICAgICAgICAgICAgICAgIGZyYW1lc1tjXSA9IGUuaW5wdXRCdWZmZXIuZ2V0Q2hhbm5lbERhdGEoYyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgICAgICdzdGF0ZSc6IDIsXG4gICAgICAgICAgICAgICAgICAgICdmcmFtZXMnOiBmcmFtZXNcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gcmVzcG9uc2UobXNnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5wb3N0RmVhdHVyZXMoZnJhbWVTaXplLCBtc2cuZGF0YS5yZXNwb25zZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciB3b3JrZXIgPSBuZXcgV29ya2VyKFwianNhcC9mZWF0dXJlLXdvcmtlci5qc1wiKTtcbiAgICAgICAgICAgIHdvcmtlci5vbmVycm9yID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdGhpcy5zZXRGZWF0dXJlcyA9IGZ1bmN0aW9uIChmZWF0dXJlTGlzdCkge1xuICAgICAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgICAgICAgICB2YXIgY29uZmlnTWVzc2FnZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgJ3N0YXRlJzogMSxcbiAgICAgICAgICAgICAgICAgICAgJ3NhbXBsZVJhdGUnOiBGZWF0dXJlSW50ZXJmYWNlSW5zdGFuY2UucGx1Z2luLmZhY3RvcnkuY29udGV4dC5zYW1wbGVSYXRlLFxuICAgICAgICAgICAgICAgICAgICAnZmVhdHVyZUxpc3QnOiBmZWF0dXJlTGlzdCxcbiAgICAgICAgICAgICAgICAgICAgJ251bUNoYW5uZWxzJzogb3V0cHV0Lm51bWJlck9mT3V0cHV0cyxcbiAgICAgICAgICAgICAgICAgICAgJ2ZyYW1lU2l6ZSc6IHRoaXMuZnJhbWVTaXplXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB0aGlzLmZlYXR1cmVzID0gZmVhdHVyZUxpc3Q7XG4gICAgICAgICAgICAgICAgaWYgKGZlYXR1cmVMaXN0ICYmIGZlYXR1cmVMaXN0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgd29ya2VyLm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS5kYXRhLnN0YXRlID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd29ya2VyLm9ubWVzc2FnZSA9IHJlc3BvbnNlLmJpbmQoc2VsZik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5leHRyYWN0b3Iub25hdWRpb3Byb2Nlc3MgPSBvbmF1ZGlvY2FsbGJhY2suYmluZChzZWxmKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKGNvbmZpZ01lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB3b3JrZXIucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgICAgICAgICAgJ3N0YXRlJzogMFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmV4dHJhY3Rvci5vbmF1ZGlvcHJvY2VzcyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHRoaXMuZXh0cmFjdG9yID0gRmVhdHVyZUludGVyZmFjZUluc3RhbmNlLnBsdWdpbi5mYWN0b3J5LmNvbnRleHQuY3JlYXRlU2NyaXB0UHJvY2Vzc29yKGZyYW1lU2l6ZSwgb3V0cHV0Lm51bWJlck9mT3V0cHV0cywgMSk7XG4gICAgICAgICAgICBvdXRwdXQuY29ubmVjdCh0aGlzLmV4dHJhY3Rvcik7XG4gICAgICAgICAgICB0aGlzLmV4dHJhY3Rvci5jb25uZWN0KEZlYXR1cmVJbnRlcmZhY2VJbnN0YW5jZS5wbHVnaW4uZmFjdG9yeS5jb250ZXh0LmRlc3RpbmF0aW9uKTtcblxuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZnJhbWVTaXplXCIsIHtcbiAgICAgICAgICAgICAgICAndmFsdWUnOiBmcmFtZVNpemVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmFkZEV4dHJhY3RvciA9IGZ1bmN0aW9uIChmcmFtZVNpemUpIHtcbiAgICAgICAgICAgIHZhciBvYmo7XG4gICAgICAgICAgICBpZiAod2luZG93Lldvcmtlcikge1xuICAgICAgICAgICAgICAgIG9iaiA9IG5ldyBXb3JrZXJFeHRyYWN0b3Iob3V0cHV0LCBmcmFtZVNpemUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBvYmogPSBuZXcgRXh0cmFjdG9yKG91dHB1dCwgZnJhbWVTaXplKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGV4dHJhY3RvcnMucHVzaChvYmopO1xuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwgXCJwb3N0RmVhdHVyZXNcIiwge1xuICAgICAgICAgICAgICAgICd2YWx1ZSc6IGZ1bmN0aW9uIChmcmFtZVNpemUsIHJlc3VsdHNKU09OKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBvYmogPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnb3V0cHV0SW5kZXgnOiBpbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgICdmcmFtZVNpemUnOiBmcmFtZVNpemUsXG4gICAgICAgICAgICAgICAgICAgICAgICAncmVzdWx0cyc6IHJlc3VsdHNKU09OXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucG9zdEZlYXR1cmVzKG9iaik7XG4gICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBvYmo7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZmluZEV4dHJhY3RvciA9IGZ1bmN0aW9uIChmcmFtZVNpemUpIHtcbiAgICAgICAgICAgIHZhciBjaGVjayA9IGZyYW1lU2l6ZTtcbiAgICAgICAgICAgIHJldHVybiBleHRyYWN0b3JzLmZpbmQoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGlzIE1VU1QgYmUgPT09IE5PVCA9PT1cbiAgICAgICAgICAgICAgICByZXR1cm4gZS5mcmFtZVNpemUgPT09IGNoZWNrO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZGVsZXRlRXh0cmFjdG9yID0gZnVuY3Rpb24gKGZyYW1lU2l6ZSkge307XG4gICAgfTtcbiAgICB2YXIgb3V0cHV0Tm9kZXMgPSBbXTtcbiAgICB0aGlzLnVwZGF0ZUZlYXR1cmVzID0gZnVuY3Rpb24gKGZlYXR1cmVPYmplY3QpIHtcbiAgICAgICAgLy8gW10gT3V0cHV0IC0+IHt9ICdmcmFtZXNpemUnIC0+IHt9ICdmZWF0dXJlcydcbiAgICAgICAgdmFyIG87XG4gICAgICAgIGZvciAobyA9IDA7IG8gPCBmZWF0dXJlT2JqZWN0Lmxlbmd0aDsgbysrKSB7XG4gICAgICAgICAgICBpZiAob3V0cHV0Tm9kZXNbb10gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGlmIChvID4gRmVhdHVyZUludGVyZmFjZUluc3RhbmNlLnBsdWdpbi5udW1PdXRwdXRzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IChcIlJlcXVlc3RlZCBhbiBvdXRwdXQgdGhhdCBkb2VzIG5vdCBleGlzdFwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgb3V0cHV0Tm9kZXNbb10gPSBuZXcgT3V0cHV0Tm9kZShGZWF0dXJlSW50ZXJmYWNlSW5zdGFuY2UucGx1Z2luLCBGZWF0dXJlSW50ZXJmYWNlSW5zdGFuY2UucGx1Z2luLm91dHB1dHNbb10sIG8pO1xuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvdXRwdXROb2Rlc1tvXSwgXCJwb3N0RmVhdHVyZXNcIiwge1xuICAgICAgICAgICAgICAgICAgICAndmFsdWUnOiBmdW5jdGlvbiAocmVzdWx0T2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBvc3RGZWF0dXJlcyhyZXN1bHRPYmplY3QpO1xuICAgICAgICAgICAgICAgICAgICB9LmJpbmQodGhpcylcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBzaTtcbiAgICAgICAgICAgIGZvciAoc2kgPSAwOyBzaSA8IGZlYXR1cmVPYmplY3Rbb10ubGVuZ3RoOyBzaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIGV4dHJhY3RvciA9IG91dHB1dE5vZGVzW29dLmZpbmRFeHRyYWN0b3IoZmVhdHVyZU9iamVjdFtvXVtzaV0uZnJhbWVTaXplKTtcbiAgICAgICAgICAgICAgICBpZiAoIWV4dHJhY3Rvcikge1xuICAgICAgICAgICAgICAgICAgICBleHRyYWN0b3IgPSBvdXRwdXROb2Rlc1tvXS5hZGRFeHRyYWN0b3IoZmVhdHVyZU9iamVjdFtvXVtzaV0uZnJhbWVTaXplKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZXh0cmFjdG9yLnNldEZlYXR1cmVzKGZlYXR1cmVPYmplY3Rbb11bc2ldLmZlYXR1cmVMaXN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLnBvc3RGZWF0dXJlcyA9IGZ1bmN0aW9uIChmZWF0dXJlT2JqZWN0KSB7XG4gICAgICAgIC8qXG4gICAgICAgICAgICBDYWxsZWQgYnkgdGhlIGluZGl2aWR1YWwgZXh0cmFjdG9yIGluc3RhbmNlczpcbiAgICAgICAgICAgIGZlYXR1cmVPYmplY3QgPSB7J2ZyYW1lU2l6ZSc6IGZyYW1lU2l6ZSxcbiAgICAgICAgICAgICdvdXRwdXRJbmRleCc6IG91dHB1dEluZGV4LFxuICAgICAgICAgICAgJ3Jlc3VsdHMnOltdfVxuICAgICAgICAqL1xuICAgICAgICBGZWF0dXJlSW50ZXJmYWNlSW5zdGFuY2UucGx1Z2luLmZhY3RvcnkuRmVhdHVyZU1hcC5wb3N0RmVhdHVyZXMoe1xuICAgICAgICAgICAgJ3BsdWdpbic6IEZlYXR1cmVJbnRlcmZhY2VJbnN0YW5jZS5wbHVnaW4ucGx1Z2luSW5zdGFuY2UsXG4gICAgICAgICAgICAnb3V0cHV0SW5kZXgnOiBmZWF0dXJlT2JqZWN0Lm91dHB1dEluZGV4LFxuICAgICAgICAgICAgJ2ZyYW1lU2l6ZSc6IGZlYXR1cmVPYmplY3QuZnJhbWVTaXplLFxuICAgICAgICAgICAgJ3Jlc3VsdHMnOiBmZWF0dXJlT2JqZWN0LnJlc3VsdHNcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8vIFNlbmQgdG8gRmFjdG9yeVxuICAgIEZhY3RvcnlGZWF0dXJlTWFwLmNyZWF0ZVNvdXJjZU1hcCh0aGlzLCBGZWF0dXJlSW50ZXJmYWNlSW5zdGFuY2UucGx1Z2luLnBsdWdpbkluc3RhbmNlKTtcbn07XG5cbi8qXG4gICAgVGhpcyBpcyBhbiBvcHRpb25hbCBtb2R1bGUgd2hpY2ggd2lsbCBhdHRlbXB0IHRvIGNyZWF0ZSBhIGdyYXBoaWNhbCBpbXBsZW1lbnRhdGlvbi5cbiAgICBBcyB3aXRoIG90aGVyIGF1ZGlvIHBsdWdpbnMgZm9yIERBV3MsIHRoZSBHVUkgaXMgYW4gb3B0aW9uYWwgZWxlbWVudCB3aGljaCBjYW4gYmUgYWNjZXB0ZWQgb3IgcmVqZWN0ZWQgYnkgdGhlIGhvc3QuXG5cbiAgICBUaGUgYWN0dWFsIEdVSSBpcyBsYXVuY2hlZCBhcyBhbiA8aWZyYW1lPiBlbGVtZW50IGluIHRoZSBicm93c2VyIHRvIGtlZXAgZWFjaCBwbHVnaW4gaXNvbGF0ZWQgZnJvbSB0aGUgcmVzdFxuKi9cblxudmFyIFBsdWdpblVzZXJJbnRlcmZhY2UgPSBmdW5jdGlvbiAoQmFzZVBsdWdpbkluc3RhbmNlLCB3aWR0aCwgaGVpZ2h0KSB7XG4gICAgY29uc29sZS5sb2coXCJERVBSRUNBVEVEISFcIik7XG4gICAgY29uc29sZS5sb2coXCJUaGUgY2xhc3MgUGx1Z2luVXNlckludGVyZmFjZSBoYXMgYmVlbiBkZXByZWNhdGVkXCIpO1xuICAgIGNvbnNvbGUubG9nKFwiUGxlYXNlIGxvb2sgYXQgdGhlIGRvY3VtZW50cyBmb3IgdGhlIG5ldyBtZXRob2RzIGZvciBidWlsZGluZyBwbHVnaW5zXCIpO1xuICAgIHRoaXMucHJvY2Vzc29yID0gQmFzZVBsdWdpbkluc3RhbmNlO1xuICAgIHRoaXMucm9vdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgaWYgKHdpZHRoID4gMCkge1xuICAgICAgICB0aGlzLnJvb3Quc3R5bGUud2lkdGggPSB3aWR0aCArIFwicHhcIjtcbiAgICB9XG4gICAgaWYgKGhlaWdodCA+IDApIHtcbiAgICAgICAgdGhpcy5yb290LnN0eWxlLmhlaWdodCA9IGhlaWdodCArIFwicHhcIjtcbiAgICB9XG4gICAgdGhpcy5kaW0gPSB7XG4gICAgICAgIHdpZHRoOiB3aWR0aCxcbiAgICAgICAgaGVpZ2h0OiBoZWlnaHRcbiAgICB9O1xuICAgIHRoaXMuaW50ZXJ2YWxGdW5jdGlvbiA9IG51bGw7XG4gICAgdGhpcy51cGRhdGVJbnRlcnZhbCA9IG51bGw7XG4gICAgdGhpcy5QbHVnaW5QYXJhbWV0ZXJJbnRlcmZhY2VzID0gW107XG5cbiAgICB2YXIgUGx1Z2luUGFyYW1ldGVySW50ZXJmYWNlTm9kZSA9IGZ1bmN0aW9uIChET00sIFBsdWdpblBhcmFtZXRlckluc3RhbmNlLCBwcm9jZXNzb3IsIGd1aSkge1xuICAgICAgICB0aGlzLmlucHV0ID0gRE9NO1xuICAgICAgICB0aGlzLnByb2Nlc3NvciA9IHByb2Nlc3NvcjtcbiAgICAgICAgdGhpcy5HVUkgPSBndWk7XG4gICAgICAgIHRoaXMuQXVkaW9QYXJhbSA9IFBsdWdpblBhcmFtZXRlckluc3RhbmNlO1xuICAgICAgICB0aGlzLmhhbmRsZUV2ZW50ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgICAgICB0aGlzLkF1ZGlvUGFyYW0udmFsdWUgPSB0aGlzLmlucHV0LnZhbHVlO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgdGhpcyk7XG4gICAgICAgIHRoaXMuaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCB0aGlzKTtcbiAgICAgICAgdGhpcy5pbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcyk7XG4gICAgfTtcblxuICAgIHRoaXMuY3JlYXRlUGx1Z2luUGFyYW1ldGVySW50ZXJmYWNlTm9kZSA9IGZ1bmN0aW9uIChET00sIFBsdWdpblBhcmFtZXRlckluc3RhbmNlKSB7XG4gICAgICAgIHZhciBub2RlID0gbmV3IFBsdWdpblBhcmFtZXRlckludGVyZmFjZU5vZGUoRE9NLCBQbHVnaW5QYXJhbWV0ZXJJbnN0YW5jZSwgdGhpcy5wcm9jZXNzb3IsIHRoaXMpO1xuICAgICAgICB0aGlzLlBsdWdpblBhcmFtZXRlckludGVyZmFjZXMucHVzaChub2RlKTtcbiAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgfTtcblxuICAgIHRoaXMudXBkYXRlID0gZnVuY3Rpb24gKCkge307XG5cbn07XG5cblBsdWdpblVzZXJJbnRlcmZhY2UucHJvdG90eXBlLmdldFJvb3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMucm9vdDtcbn07XG5QbHVnaW5Vc2VySW50ZXJmYWNlLnByb3RvdHlwZS5nZXREaW1lbnNpb25zID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLmRpbTtcbn07XG5QbHVnaW5Vc2VySW50ZXJmYWNlLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5kaW0ud2lkdGg7XG59O1xuUGx1Z2luVXNlckludGVyZmFjZS5wcm90b3R5cGUuZ2V0SGVpZ2h0ID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLmRpbS5oZWlnaHQ7XG59O1xuUGx1Z2luVXNlckludGVyZmFjZS5wcm90b3R5cGUuYmVnaW5DYWxsYmFja3MgPSBmdW5jdGlvbiAobXMpIHtcbiAgICAvLyBBbnkgcmVnaXN0ZXJlZCBjYWxsYmFja3MgYXJlIHN0YXJ0ZWQgYnkgdGhlIGhvc3RcbiAgICBpZiAobXMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBtcyA9IDI1MDtcbiAgICB9IC8vRGVmYXVsdCBvZiAyNTBtcyB1cGRhdGUgcGVyaW9kXG4gICAgaWYgKHRoaXMuaW50ZXJ2YWxGdW5jdGlvbiA9PT0gbnVsbCkge1xuICAgICAgICB0aGlzLnVwZGF0ZUludGVydmFsID0gbXM7XG4gICAgICAgIHRoaXMuaW50ZXJ2YWxGdW5jdGlvbiA9IHdpbmRvdy5zZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZSgpO1xuICAgICAgICB9LmJpbmQodGhpcyksIDI1MCk7XG4gICAgfVxufTtcblBsdWdpblVzZXJJbnRlcmZhY2UucHJvdG90eXBlLnN0b3BDYWxsYmFja3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgLy8gQW55IHJlZ2lzdGVyZWQgY2FsbGJhY2tzIGFyZSBzdG9wcGVkIGJ5IHRoZSBob3N0XG4gICAgaWYgKHRoaXMuaW50ZXJ2YWxGdW5jdGlvbiAhPT0gbnVsbCkge1xuICAgICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsRnVuY3Rpb24pO1xuICAgICAgICB0aGlzLnVwZGF0ZUludGVydmFsID0gbnVsbDtcbiAgICAgICAgdGhpcy5pbnRlcnZhbEZ1bmN0aW9uID0gbnVsbDtcbiAgICB9XG59O1xuUGx1Z2luVXNlckludGVyZmFjZS5wcm90b3R5cGUubG9hZFJlc291cmNlID0gZnVuY3Rpb24gKHVybCkge1xuICAgIHZhciBwID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICB2YXIgcmVxID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgICAgIHJlcS5vcGVuKCdHRVQnLCB1cmwpO1xuICAgICAgICByZXEub25sb2FkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHJlcS5zdGF0dXMgPT09IDIwMCkge1xuICAgICAgICAgICAgICAgIHJlc29sdmUocmVxLnJlc3BvbnNlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KEVycm9yKHJlcS5zdGF0dXNUZXh0KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHJlcS5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmVqZWN0KEVycm9yKFwiTmV0d29yayBFcnJvclwiKSk7XG4gICAgICAgIH07XG4gICAgICAgIHJlcS5zZW5kKCk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHA7XG59O1xuUGx1Z2luVXNlckludGVyZmFjZS5wcm90b3R5cGUuY2xlYXJHVUkgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5zdG9wQ2FsbGJhY2tzKCk7XG4gICAgdGhpcy5yb290LmlubmVySFRNTCA9IFwiXCI7XG59O1xuXG52YXIgUGx1Z2luSW50ZXJmYWNlTWVzc2FnZUh1YiA9IGZ1bmN0aW9uKG93bmVyKSB7XG4gICAgZnVuY3Rpb24gYnVpbGRQbHVnaW5QYXJhbWV0ZXJKU09OKHBsdWdpbikge1xuICAgICAgICB2YXIgbmFtZXMgPSBvd25lci5wYXJhbWV0ZXJzLmdldFBhcmFtZXRlck5hbWVzKCk7XG4gICAgICAgIHZhciBPID0ge307XG4gICAgICAgIG5hbWVzLmZvckVhY2goZnVuY3Rpb24obmFtZSkge1xuICAgICAgICAgICAgdmFyIHBhcmFtID0gb3duZXIucGFyYW1ldGVycy5nZXRQYXJhbWV0ZXJCeU5hbWUobmFtZSk7XG4gICAgICAgICAgICBPW25hbWVdID0ge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBwYXJhbS52YWx1ZSxcbiAgICAgICAgICAgICAgICBtYXhpbXVtOiBwYXJhbS5tYXhpbXVtLFxuICAgICAgICAgICAgICAgIG1pbmltdW06IHBhcmFtLm1pbmltdW0sXG4gICAgICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiBwYXJhbS5kZWZhdWx0VmFsdWUsXG4gICAgICAgICAgICAgICAgdHlwZTogcGFyYW0uY29uc3RydWN0b3IubmFtZSxcbiAgICAgICAgICAgICAgICBuYW1lOiBuYW1lXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIE87XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYnVpbGRQYXJhbWV0ZXJVcGRhdGVQYXlsb2FkKHNlbmRlcl9pZCkge1xuICAgICAgICB2YXIgbXNnID0ge1xuICAgICAgICAgICAgbWVzc2FnZTogXCJ1cGRhdGVQYXJhbWV0ZXJzXCIsXG4gICAgICAgICAgICBwYXJhbWV0ZXJzOiBidWlsZFBsdWdpblBhcmFtZXRlckpTT04ob3duZXIpXG4gICAgICAgIH07XG4gICAgICAgIGlmIChzZW5kZXJfaWQpIHtcbiAgICAgICAgICAgIG1zZy5zZW5kZXJfaWQgPSBzZW5kZXJfaWQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG1zZztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzZW5kUGFyYW1ldGVyVXBkYXRlcyhjaGFubmVsKSB7XG4gICAgICAgIGNoYW5uZWwucG9zdE1lc3NhZ2UoYnVpbGRQYXJhbWV0ZXJVcGRhdGVQYXlsb2FkKCkpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGJyb2FkY2FzdFBhcmFtZXRlclVwZGF0ZXMoc2VuZGVyX2lkKSB7XG4gICAgICAgIHZhciBtc2cgPSBidWlsZFBhcmFtZXRlclVwZGF0ZVBheWxvYWQoc2VuZGVyX2lkKTtcbiAgICAgICAgd2luZG93TWVzc2FnZUxpc3QuZm9yRWFjaChmdW5jdGlvbih3KSB7XG4gICAgICAgICAgICB3LnBvc3RNZXNzYWdlKG1zZyk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNldFBhcmFtZXRlck1lc3NhZ2UoZSkge1xuICAgICAgICB2YXIgcGFyYW1ldGVycyA9IEpTT04ucGFyc2UoZS5tZXNzYWdlLnBhcmFtZXRlcnMpO1xuICAgICAgICBPYmplY3Qua2V5cyhwYXJhbWV0ZXJzKS5mb3JFYWNoKGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgICAgICAgIG93bmVyLnBhcmFtZXRlcnMuc2V0UGFyYW1ldGVyQnlOYW1lKG5hbWUscGFyYW1ldGVyc1tuYW1lXS52YWx1ZSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHZhciB3aW5kb3dNZXNzYWdlTGlzdCA9IFtdO1xuICAgIHZhciBzdGF0ZSA9IDA7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsZnVuY3Rpb24oZSkge1xuICAgICAgICBpZiAoIXdpbmRvd01lc3NhZ2VMaXN0LmluY2x1ZGVzKGUuc291cmNlKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHN3aXRjaChlLmRhdGEubWVzc2FnZSkge1xuICAgICAgICAgICAgY2FzZSBcInNldFBhcmFtZXRlckJ5TmFtZVwiOlxuICAgICAgICAgICAgICAgIGlmIChlLmRhdGEucGFyYW1ldGVyLm5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgb3duZXIucGFyYW1ldGVycy5zZXRQYXJhbWV0ZXJCeU5hbWUoZS5kYXRhLnBhcmFtZXRlci5uYW1lLCBlLmRhdGEucGFyYW1ldGVyLnZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJvYWRjYXN0UGFyYW1ldGVyVXBkYXRlcyhlLmRhdGEuc2VuZGVyX2lkKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJzZXRQYXJhbWV0ZXJzQnlPYmplY3RcIjpcbiAgICAgICAgICAgICAgICBpZiAoZS5kYXRhLnBhcmFtZXRlcikge1xuICAgICAgICAgICAgICAgICAgICBzZXRQYXJhbWV0ZXJNZXNzYWdlKGUpO1xuICAgICAgICAgICAgICAgICAgICBicm9hZGNhc3RQYXJhbWV0ZXJVcGRhdGVzKGUuZGF0YS5zZW5kZXJfaWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJyZXF1ZXN0UGFyYW1ldGVyc1wiOlxuICAgICAgICAgICAgICAgIHNlbmRQYXJhbWV0ZXJVcGRhdGVzKGUuc291cmNlKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3coXCJVbmtub3duIG1lc3NhZ2UgdHlwZSBcXFwiXCIrZS5kYXRhLm1lc3NhZ2UrXCJcXFwiXCIpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLCB7XG4gICAgICAgIFwidXBkYXRlSW50ZXJmYWNlc1wiOiB7XG4gICAgICAgICAgICBcInZhbHVlXCI6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGJyb2FkY2FzdFBhcmFtZXRlclVwZGF0ZXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJjbG9zZVdpbmRvd3NcIjoge1xuICAgICAgICAgICAgdmFsdWU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGlmIChzdGF0ZSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICB3aGlsZSh3aW5kb3dNZXNzYWdlTGlzdC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdyA9IHdpbmRvd01lc3NhZ2VMaXN0LnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdy5jbG9zZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3coXCJDYW5uZWwgYWxyZWFkeSBjbG9zZWRcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcInJlZ2lzdGVyV2luZG93XCI6IHtcbiAgICAgICAgICAgIFwidmFsdWVcIjogZnVuY3Rpb24odykge1xuICAgICAgICAgICAgICAgIGlmICh3aW5kb3dNZXNzYWdlTGlzdC5pbmNsdWRlcyh3KSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93TWVzc2FnZUxpc3QucHVzaCh3KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG5pZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHdpbmRvdy5CYXNlUGx1Z2luID0gQmFzZVBsdWdpbjtcbn1cblxuZXhwb3J0IHtCYXNlUGx1Z2lufTtcbiIsIi8qZ2xvYmFscyBkb2N1bWVudCAqL1xuLyplc2xpbnQtZW52IGJyb3dzZXIgKi9cblxudmFyIExpbmtlZFN0b3JlID0gZnVuY3Rpb24gKHN0b3JlTmFtZSkge1xuICAgIC8vIFN0b3JlIGZvciB0aGUgc2VtYW50aWMgdGVybXMsIGVhY2ggc3RvcmUgaG9sZHMgaXRzIG93biBkYXRhIHRyZWVcbiAgICAvLyBUZXJtcyBhcmUgYWRkZWQgYXMga2V5L3ZhbHVlIHBhcmlzIHRvIGEgcm9vdCBub2RlXG4gICAgdmFyIHJvb3QgPSB7fTtcblxuICAgIGZ1bmN0aW9uIG9iamVjdFRvWE1MKG9iaiwgcm9vdCwgZG9jKSB7XG4gICAgICAgIC8vIFVzZWQgaWYgYW4gb2JqZWN0IHdhcyBwYXNzZWQgYXMgYSB0ZXJtIHZhbHVlXG4gICAgICAgIHZhciB0ZXJtO1xuICAgICAgICBmb3IgKHRlcm0gaW4gb2JqKSB7XG4gICAgICAgICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KHRlcm0pKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmpbdGVybV0gPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRvY05vZGU7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvYmpbdGVybV0udG9YTUwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY05vZGUgPSBvYmpbdGVybV0udG9YTUwoZG9jKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY05vZGUgPSBkb2MuY3JlYXRlRWxlbWVudCh0ZXJtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvb3QuYXBwZW5kQ2hpbGQoZG9jTm9kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob2JqW3Rlcm1dLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5VG9YTUwob2JqW3Rlcm1dLCBkb2NOb2RlLCBkb2MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmplY3RUb1hNTChvYmpbdGVybV0sIGRvY05vZGUsIGRvYyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcm9vdC5hcHBlbmRDaGlsZChkb2NOb2RlKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByb290LnNldEF0dHJpYnV0ZSh0ZXJtLCBvYmpbdGVybV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFycmF5VG9YTUwoYXJyLCByb290LCBkb2MpIHtcbiAgICAgICAgLy8gVXNlZCB0byBjb252ZXJ0IGFuIGFycmF5IHRvIGEgbGlzdCBvZiBYTUwgZW50cmllc1xuICAgICAgICB2YXIgYWxsX251bWJlcnMgPSB0cnVlLFxuICAgICAgICAgICAgYWxsX3N0cmluZ3MgPSB0cnVlLFxuICAgICAgICAgICAgaSwgbCA9IGFyci5sZW5ndGg7XG4gICAgICAgIGFsbF9udW1iZXJzID0gYXJyLmV2ZXJ5KGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICByZXR1cm4gdHlwZW9mIGEgPT09IFwibnVtYmVyXCI7XG4gICAgICAgIH0pO1xuICAgICAgICBhbGxfc3RyaW5ncyA9IGFyci5ldmVyeShmdW5jdGlvbiAoYSkge1xuICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBhID09PSBcInN0cmluZ1wiO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGFsbF9udW1iZXJzIHx8IGFsbF9zdHJpbmdzKSB7XG4gICAgICAgICAgICAvLyBBbiBhcnJheSBvZiBudW1iZXJzIG9yIHN0cmluZ3NcbiAgICAgICAgICAgIGFyci5mb3JFYWNoKGZ1bmN0aW9uIChhLCBpKSB7XG4gICAgICAgICAgICAgICAgcm9vdC5zZXRBdHRyaWJ1dGUoXCJpbmRleC1cIiArIGksIGEpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBBbiBhcnJheSBvZiBvYmplY3RzXG4gICAgICAgICAgICBhcnIuZm9yRWFjaChmdW5jdGlvbiAoYSwgaSkge1xuICAgICAgICAgICAgICAgIHZhciBub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInZhbHVlXCIpO1xuICAgICAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKFwiaW5kZXhcIiwgaSk7XG4gICAgICAgICAgICAgICAgb2JqZWN0VG9YTUwoYSwgbm9kZSwgZG9jKTtcbiAgICAgICAgICAgICAgICByb290LmFwcGVuZENoaWxkKG5vZGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLCB7XG4gICAgICAgICduYW1lJzoge1xuICAgICAgICAgICAgJ2dldCc6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RvcmVOYW1lO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdzZXQnOiBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgICAgICAgIGlmIChzdG9yZU5hbWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBuYW1lID0gc3RvcmVOYW1lO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IChcIk5hbWUgaXMgYWxyZWFkeSBzZXRcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICAnYWRkVGVybSc6IHtcbiAgICAgICAgICAgICd2YWx1ZSc6IGZ1bmN0aW9uICh0ZXJtLCB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGVybSAhPT0gXCJzdHJpbmdcIiAmJiB0ZXJtLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyAoXCJ0ZXJtIG11c3QgYmUgYSBzdHJpbmdcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJvb3RbdGVybV0gPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgJ2FkZFRlcm1zJzoge1xuICAgICAgICAgICAgJ3ZhbHVlJzogZnVuY3Rpb24gKHRlcm1zT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0ZXJtc09iamVjdCAhPT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyAoXCJhZGRUZXJtcyB0YWtlcyBhbiBvYmplY3Qgb2YgdGVybS92YWx1ZSBwYWlyc1wiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHRlcm07XG4gICAgICAgICAgICAgICAgZm9yICh0ZXJtIGluIHRlcm1zT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0ZXJtc09iamVjdC5oYXNPd25Qcm9wZXJ0eSh0ZXJtKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRUZXJtKHRlcm0sIHRlcm1zT2JqZWN0W3Rlcm1dKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgJ2RlbGV0ZVRlcm0nOiB7XG4gICAgICAgICAgICAndmFsdWUnOiBmdW5jdGlvbiAodGVybSkge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkVGVybSh0ZXJtLCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICAnZ2V0VGVybSc6IHtcbiAgICAgICAgICAgICd2YWx1ZSc6IGZ1bmN0aW9uICh0ZXJtKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0ZXJtICE9PSBcInN0cmluZ1wiICYmIHRlcm0ubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IChcInRlcm0gbXVzdCBiZSBhIHN0cmluZ1wiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJvb3RbdGVybV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgICdoYXNUZXJtJzoge1xuICAgICAgICAgICAgJ3ZhbHVlJzogZnVuY3Rpb24gKHRlcm0pIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRlcm0gIT09IFwic3RyaW5nXCIgJiYgdGVybS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgKFwidGVybSBtdXN0IGJlIGEgc3RyaW5nXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcm9vdC5oYXNPd25Qcm9wZXJ0eSh0ZXJtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgJ3RvSlNPTic6IHtcbiAgICAgICAgICAgICd2YWx1ZSc6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShyb290KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgICd0b1hNTCc6IHtcbiAgICAgICAgICAgICd2YWx1ZSc6IGZ1bmN0aW9uIChkb2MpIHtcbiAgICAgICAgICAgICAgICB2YXIgbm9kZTtcbiAgICAgICAgICAgICAgICBpZiAoIWRvYykge1xuICAgICAgICAgICAgICAgICAgICBkb2MgPSBkb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVEb2N1bWVudChudWxsLCBzdG9yZU5hbWUsIG51bGwpO1xuICAgICAgICAgICAgICAgICAgICBub2RlID0gZG9jLmZpcnN0RWxlbWVudENoaWxkO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGUgPSBkb2MuY3JlYXRlRWxlbWVudChzdG9yZU5hbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBvYmplY3RUb1hNTChyb290LCBub2RlLCBkb2MpO1xuICAgICAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCB7TGlua2VkU3RvcmV9O1xuIiwiLyoganNoaW50IGVzdmVyc2lvbjogNiAqL1xuaW1wb3J0IHtCYXNlUGx1Z2lufSBmcm9tIFwiLi9iYXNlX3BsdWdpblwiO1xuXG52YXIgU3ludGhlc2lzZXJCYXNlUGx1Z2luID0gZnVuY3Rpb24oZmFjdG9yeSwgb3duZXIpXG57XG4gICAgdmFyIGhhc1dhcm5lZFNjaGVkdWxlTm90U2V0ID0gZmFsc2U7XG4gICAgdmFyIGhhc1dhcm5lZENhbmNlbE5vdFNldCA9IGZhbHNlO1xuICAgIEJhc2VQbHVnaW4uY2FsbCh0aGlzLCBmYWN0b3J5LCBvd25lcik7XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLCB7XG4gICAgICAgIFwiYWRkSW5wdXRcIjoge1xuICAgICAgICAgICAgXCJ2YWx1ZVwiOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyhcIkNhbm5vdCBhZGQgaW5wdXQgdG8gdHlwZSBcXFwiU3ludGhlc2lzZXJCYXNlUGx1Z2luXFxcIlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJkZWxldGVJbnB1dFwiOiB7XG4gICAgICAgICAgICBcInZhbHVlXCI6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHRocm93KFwiQ2Fubm90IGRlbGV0ZSBpbnB1dCB0byB0eXBlIFxcXCJTeW50aGVzaXNlckJhc2VQbHVnaW5cXFwiXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcInNjaGVkdWxlRXZlbnRcIjoge1xuICAgICAgICAgICAgXCJ2YWx1ZVwiOiBmdW5jdGlvbiAobXNnLCBjb250ZXh0VGltZSkge1xuICAgICAgICAgICAgICAgIGlmICghaGFzV2FybmVkU2NoZWR1bGVOb3RTZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuaW5nKFwiV0FSTklORyAtIC5zY2hlZHVsZUV2ZW50IGlzIG5vdCBvdmVycmlkZGVuXCIpO1xuICAgICAgICAgICAgICAgICAgICBoYXNXYXJuZWRTY2hlZHVsZU5vdFNldCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwid3JpdGFibGVcIjogdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICBcImNhbmNlbEFsbEV2ZW50c1wiOiB7XG4gICAgICAgICAgICBcInZhbHVlXCI6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGlmICghaGFzV2FybmVkQ2FuY2VsTm90U2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybmluZyhcIldBUk5JTkcgLSAuY2FuY2VsQWxsRXZlbnRzIGlzIG5vdCBvdmVycmlkZGVuXCIpO1xuICAgICAgICAgICAgICAgICAgICBoYXNXYXJuZWRDYW5jZWxOb3RTZXQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcIndyaXRhYmxlXCI6IHRydWVcbiAgICAgICAgfVxuICAgIH0pO1xufTtcblN5bnRoZXNpc2VyQmFzZVBsdWdpbi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEJhc2VQbHVnaW4ucHJvdG90eXBlKTtcblN5bnRoZXNpc2VyQmFzZVBsdWdpbi5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBTeW50aGVzaXNlckJhc2VQbHVnaW47XG5cbmV4cG9ydCB7U3ludGhlc2lzZXJCYXNlUGx1Z2lufTtcbiIsIi8vIFRoaXMgZGVmaW5lcyBhIG1hc3RlciBvYmplY3QgZm9yIGhvbGRpbmcgYWxsIHRoZSBwbHVnaW5zIGFuZCBjb21tdW5pY2F0aW5nXG4vLyBUaGlzIG9iamVjdCB3aWxsIGFsc28gaGFuZGxlIGNyZWF0aW9uIGFuZCBkZXN0cnVjdGlvbiBvZiBwbHVnaW5zXG4vKmdsb2JhbHMgUHJvbWlzZSwgZG9jdW1lbnQsIGNvbnNvbGUsIExpbmtlZFN0b3JlLCBXb3JrZXIsIHdpbmRvdywgWE1MSHR0cFJlcXVlc3QgKi9cbi8qZXNsaW50LWVudiBicm93c2VyICovXG4vKiBqc2hpbnQgZXN2ZXJzaW9uOjYgKi9cblxuLy8gTG9hZCBqc1h0cmFjdFxuKGZ1bmN0aW9uKCkge1xuICAgIGlmICh3aW5kb3cuanNYdHJhY3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB2YXIgcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7XG4gICAgICAgIHMuc3JjID0gXCJodHRwczovL2dpdGNkbi54eXovcmVwby9uaWNramlsbGluZ3MvanMteHRyYWN0L21hc3Rlci9qc1h0cmFjdC5qc1wiO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF0uYXBwZW5kQ2hpbGQocyk7XG4gICAgfVxufSkoKTtcblxuaW1wb3J0IExpbmtlZFN0b3JlIGZyb20gJy4vTGlua2VkU3RvcmUnO1xuaW1wb3J0IHtCYXNlUGx1Z2lufSBmcm9tICcuL2Jhc2VfcGx1Z2luJztcbmltcG9ydCB7U3ludGhlc2lzZXJCYXNlUGx1Z2lufSBmcm9tICcuL3N5bnRoX2Jhc2UnO1xuXG5mdW5jdGlvbiBQbHVnaW5GYWN0b3J5KGF1ZGlvX2NvbnRleHQsIHJvb3RVUkwpIHtcbiAgICB2YXIgc3ViRmFjdG9yaWVzID0gW10sXG4gICAgc3ludGhlc2lzZXJIb3N0cyA9IFtdLFxuICAgIHBsdWdpbl9wcm90b3R5cGVzID0gW10sXG4gICAgcGx1Z2luc0xpc3QgPSBbXSxcbiAgICBjdXJyZW50UGx1Z2luSWQgPSAwLFxuICAgIGF1ZGlvU3RhcnRlZCA9IGZhbHNlO1xuXG4gICAgLypcbiAgICAgICAgdGhpcy5sb2FkUmVzb3VyY2UuIExvYWQgYSByZXNvdXJjZSBpbnRvIHRoZSBnbG9iYWwgbmFtZXNwYWNlXG5cbiAgICAgICAgQHBhcmFtIHJlc291cmNlT2JqZWN0OiBhIEpTIG9iamVjdCBob2xkaW5nIHRoZSBmb2xsb3dpbmcgcGFyYW1ldGVyczpcbiAgICAgICAgICAgIC51cmw6IFVSTCBvZiB0aGUgcmVzb3VyY2VcbiAgICAgICAgICAgIC50ZXN0OiBmdW5jdGlvbiB0byBjYWxsLCByZXR1cm5zIHRydWUgaWYgcmVzb3VyY2UgYWxyZWFkeSBsb2FkZWQsIGZhbHNlIGlmIG5vdFxuICAgICovXG4gICAgdGhpcy5sb2FkUHJvdG90eXBlTW9kdWxlID0gZnVuY3Rpb24ocmVzb3VyY2VPYmplY3QsIG11c3RNb2R1bGUpIHtcbiAgICAgICAgdmFyIGZhY3RvcnkgPSB0aGlzO1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGdsb2JhbC5kZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBnbG9iYWwuZGVmaW5lLmFtZCkge1xuICAgICAgICAgICAgICAgIGdsb2JhbC5yZXF1aXJlKFtyZXNvdXJjZU9iamVjdC51cmxdLCBmdW5jdGlvbihmKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoZik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBnbG9iYWwubW9kdWxlID09IFwib2JqZWN0XCIgJiYgZ2xvYmFsLm1vZHVsZS5leHBvcnRzKSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShnbG9iYWwucmVxdWlyZShyZXNvdXJjZU9iamVjdC51cmwpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KFwiQ2Fubm90IGxvYWQgdXNpbmcgbW9kdWxhciBzeXN0ZW1zXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKGV4ZWN1dGFibGUpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZXhlY3V0YWJsZSA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhY3RvcnkuYWRkUHJvdG90eXBlKGV4ZWN1dGFibGUpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZWplY3QoXCJJcyBub3QgYSBtb2R1bGUgcGx1Z2luXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KS5jYXRjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChtdXN0TW9kdWxlID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgcmVqZWN0KFwiQ2Fubm90IGxvYWQgdXNpbmcgbW9kdWxhciBzeXN0ZW1zXCIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJDb3VsZCBub3QgbG9hZCB1c2luZyBtb2R1bGFyIHN5c3RlbXNcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhY3RvcnkubG9hZFBsdWdpblNjcmlwdChyZXNvdXJjZU9iamVjdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG4gICAgdGhpcy5sb2FkUmVzb3VyY2UgPSBmdW5jdGlvbiAocmVzb3VyY2VPYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiByZXNvdXJjZU9iamVjdCAhPT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgICAgIHJlamVjdChcIkVycm9yXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHJlc291cmNlT2JqZWN0LnVybCAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgIHJlamVjdChcInJlc291cmNlT2JqZWN0LnVybCBtdXN0IGJlIGEgc3RyaW5nXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHJlc291cmNlT2JqZWN0LnRlc3QgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgIHJlamVjdChcInJlc291cmNlT2JqZWN0LnRlc3QgbXVzdCBiZSBhIGZ1bmN0aW9uXCIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKHJlc291cmNlT2JqZWN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkudGhlbihmdW5jdGlvbihyZXNvdXJjZU9iamVjdCl7XG4gICAgICAgICAgICB2YXIgcmVzcG9uc2UgPSByZXNvdXJjZU9iamVjdC50ZXN0KCk7XG4gICAgICAgICAgICBpZiAocmVzcG9uc2UgIT09IGZhbHNlICYmIHJlc3BvbnNlICE9PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgKFwicmVzb3VyY2VPYmplY3QudGVzdCBtdXN0IHJldHVybiB0cnVlIG9yIGZhbHNlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFyZXNvdXJjZU9iamVjdC50eXBlKSB7XG4gICAgICAgICAgICAgICAgcmVzb3VyY2VPYmplY3QudHlwZSA9IFwiamF2YXNjcmlwdFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzb3VyY2VPYmplY3QudHlwZSA9IHJlc291cmNlT2JqZWN0LnR5cGUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIHN3aXRjaCAocmVzb3VyY2VPYmplY3QudHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgXCJqYXZhc2NyaXB0XCI6XG4gICAgICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBsb2FkUmVzb3VyY2UocmVzb3VyY2VPYmplY3QpLnRoZW4oZnVuY3Rpb24gKHJlc291cmNlT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZXNvdXJjZU9iamVjdC5yZXR1cm5PYmplY3QgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJldHVybk9iamVjdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdpbmRvdy5oYXNPd25Qcm9wZXJ0eShyZXNvdXJjZU9iamVjdC5yZXR1cm5PYmplY3QpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gd2luZG93W3Jlc291cmNlT2JqZWN0LnJldHVybk9iamVjdF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlc291cmNlT2JqZWN0LnJldHVybk9iamVjdCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAod2luZG93Lmhhc093blByb3BlcnR5KHJlc291cmNlT2JqZWN0LnJldHVybk9iamVjdCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUod2luZG93W3Jlc291cmNlT2JqZWN0LnJldHVybk9iamVjdF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgKFwiSW52YWxpZCB0eXBlIFwiICsgU3RyaW5nKHJlc291cmNlT2JqZWN0LnR5cGUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHRoaXMubG9hZFBsdWdpblNjcmlwdCA9IGZ1bmN0aW9uIChyZXNvdXJjZU9iamVjdCkge1xuICAgICAgICBpZiAocmVzb3VyY2VPYmplY3QpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgcmVzb3VyY2VPYmplY3QucmV0dXJuT2JqZWN0ICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgKFwicmVzb3VyY2VPYmplY3QucmV0dXJuT2JqZWN0IG11c3QgYmUgdGhlIG5hbWUgb2YgdGhlIHByb3RvdHlwZSBmdW5jdGlvblwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxvYWRSZXNvdXJjZShyZXNvdXJjZU9iamVjdCkudGhlbihmdW5jdGlvbiAocGx1Z2luKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWRkUHJvdG90eXBlKHBsdWdpbik7XG4gICAgICAgICAgICB9LmJpbmQodGhpcykpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGxvYWRSZXNvdXJjZShyZXNvdXJjZU9iamVjdCkge1xuICAgICAgICBpZiAocmVzb3VyY2VPYmplY3QudXJsLnN0YXJ0c1dpdGgoXCJodHRwXCIpID09PSBmYWxzZSAmJiByb290VVJMICE9PSB1bmRlZmluZWQgJiYgcm9vdFVSTC5zdGFydHNXaXRoKFwiaHR0cFwiKSkge1xuICAgICAgICAgICAgcmVzb3VyY2VPYmplY3QudXJsID0gcm9vdFVSTCArIHJlc291cmNlT2JqZWN0LnVybDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICAgICAgeGhyLm9wZW4oXCJHRVRcIiwgcmVzb3VyY2VPYmplY3QudXJsKTtcbiAgICAgICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHhoci5yZWFkeVN0YXRlID09IDQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7XG4gICAgICAgICAgICAgICAgICAgIHNjcmlwdC50ZXh0Q29udGVudCA9IHhoci5yZXNwb25zZVRleHQ7XG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXS5hcHBlbmRDaGlsZChzY3JpcHQpO1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc291cmNlT2JqZWN0KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB4aHIuc2VuZCgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjb3B5RmFjdG9yeShuZXdjb250ZXh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgIGlmIChuZXdjb250ZXh0LnNhbXBsZVJhdGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIC8vTWF5YmUgbm90IGEgcmVhbCBBdWRpb0NvbnRleHRcbiAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKFwiSW52YWxpZCBhdWRpbyBjb250ZXh0IHByb3ZpZGVkXCIpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShuZXdjb250ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkudGhlbihmdW5jdGlvbihuZXdjb250ZXh0KSB7XG4gICAgICAgICAgICB2YXIgQkZhY3RvcnkgPSBuZXcgUGx1Z2luRmFjdG9yeShuZXdjb250ZXh0KTtcbiAgICAgICAgICAgIHZhciBwcm9taXNlcyA9IFtdO1xuICAgICAgICAgICAgcGx1Z2luX3Byb3RvdHlwZXMuZm9yRWFjaChmdW5jdGlvbiAocHJvdG8pIHtcbiAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKEJGYWN0b3J5LmFkZFByb3RvdHlwZShwcm90by5wcm90bykpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEJGYWN0b3J5O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pLnRoZW4oZnVuY3Rpb24obmV3RmFjdG9yeSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ld0ZhY3Rvcnk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHZhciBQbHVnaW5JbnN0YW5jZSA9IGZ1bmN0aW9uIChpZCwgcGx1Z2luX25vZGUpIHtcbiAgICAgICAgdGhpcy5uZXh0X25vZGUgPSB1bmRlZmluZWQ7XG4gICAgICAgIHZhciBfYnlwYXNzZWQgPSBmYWxzZTtcbiAgICAgICAgdmFyIF9pbiA9IGF1ZGlvX2NvbnRleHQuY3JlYXRlR2FpbigpLFxuICAgICAgICAgICAgX291dCA9IGF1ZGlvX2NvbnRleHQuY3JlYXRlR2FpbigpO1xuXG4gICAgICAgIF9pbi5jb25uZWN0KHBsdWdpbl9ub2RlLmdldElucHV0cygpWzBdKTtcbiAgICAgICAgcGx1Z2luX25vZGUuZ2V0T3V0cHV0cygpWzBdLmNvbm5lY3QoX291dCk7XG5cbiAgICAgICAgZnVuY3Rpb24gYnlwYXNzRW5hYmxlKCkge1xuICAgICAgICAgICAgX2luLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICAgIF9pbi5jb25uZWN0KF9vdXQpO1xuICAgICAgICAgICAgX2J5cGFzc2VkID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGJ5cGFzc0Rpc2FibGUoKSB7XG4gICAgICAgICAgICBfaW4uZGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgX2luLmNvbm5lY3QocGx1Z2luX25vZGUuZ2V0SW5wdXRzKClbMF0pO1xuICAgICAgICAgICAgX2J5cGFzc2VkID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmJ5cGFzcyA9IGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgICAgICAgc3RhdGUgPSAoc3RhdGUgPT09IHRydWUpO1xuICAgICAgICAgICAgaWYgKHN0YXRlID09PSBfYnlwYXNzZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX2J5cGFzc2VkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHN0YXRlKSB7XG4gICAgICAgICAgICAgICAgYnlwYXNzRW5hYmxlKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGJ5cGFzc0Rpc2FibGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBfYnlwYXNzZWQ7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5pc0J5cGFzc2VkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9ieXBhc3NlZDtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnJlY29ubmVjdCA9IGZ1bmN0aW9uIChuZXdfbmV4dCkge1xuICAgICAgICAgICAgdGhpcy5jb25uZWN0KG5ld19uZXh0KTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmNvbm5lY3QgPSBmdW5jdGlvbiAobmV3X25leHQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm5leHRfbm9kZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobmV3X25leHQgIT09IHVuZGVmaW5lZCAmJiBuZXdfbmV4dC5pbnB1dCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5uZXh0X25vZGUgPSBuZXdfbmV4dDtcbiAgICAgICAgICAgICAgICBfb3V0LmNvbm5lY3QodGhpcy5uZXh0X25vZGUuaW5wdXQpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuZGlzY29ubmVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm5leHRfbm9kZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgX291dC5kaXNjb25uZWN0KHRoaXMubmV4dF9ub2RlLmlucHV0KTtcbiAgICAgICAgICAgICAgICB0aGlzLm5leHRfbm9kZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBwbHVnaW5fbm9kZS5kZXN0cm95KCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcywge1xuICAgICAgICAgICAgJ2lkJzoge1xuICAgICAgICAgICAgICAgICd2YWx1ZSc6IGlkXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ25vZGUnOiB7XG4gICAgICAgICAgICAgICAgJ3ZhbHVlJzogcGx1Z2luX25vZGVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnaW5wdXQnOiB7XG4gICAgICAgICAgICAgICAgJ2dldCc6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9pbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ291dHB1dCc6IHtcbiAgICAgICAgICAgICAgICAnZ2V0JzogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX291dDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ2J5cGFzc2VkJzoge1xuICAgICAgICAgICAgICAgICdnZXQnOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfYnlwYXNzZWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIFBsdWdpbkluc3RhbmNlLnByb3RvdHlwZS5mYWN0b3J5ID0gdGhpcztcblxuICAgIHZhciBNaWRpU3ludGhlc2lzSW5zdGFuY2UgPSBmdW5jdGlvbihpZCwgc3ludGhOb2RlKSB7XG4gICAgICAgIHZhciBfb3V0ID0gYXVkaW9fY29udGV4dC5jcmVhdGVHYWluKCk7XG4gICAgICAgIHN5bnRoTm9kZS5nZXRPdXRwdXRzKClbMF0uY29ubmVjdChfb3V0KTtcblxuICAgICAgICB0aGlzLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzeW50aE5vZGUuZGVzdHJveSgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMsIHtcbiAgICAgICAgICAgICdpZCc6IHtcbiAgICAgICAgICAgICAgICAndmFsdWUnOiBpZFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdub2RlJzoge1xuICAgICAgICAgICAgICAgICd2YWx1ZSc6IHN5bnRoTm9kZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdvdXRwdXQnOiB7XG4gICAgICAgICAgICAgICAgJ2dldCc6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9vdXQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHZhciBQbHVnaW5Qcm90b3R5cGUgPSBmdW5jdGlvbiAocHJvdG8sIGZhY3RvcnkpIHtcblx0ICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcywge1xuICAgICAgICAgICAgJ25hbWUnOiB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IHByb3RvLnByb3RvdHlwZS5uYW1lXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ3Byb3RvJzoge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBwcm90b1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICd2ZXJzaW9uJzoge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBwcm90by5wcm90b3R5cGUudmVyc2lvblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICd1bmlxdWVJRCc6IHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogcHJvdG8ucHJvdG90eXBlLnVuaXF1ZUlEXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ2hhc01pZGlJbnB1dCc6IHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogcHJvdG8ucHJvdG90eXBlLmhhc01pZGlJbnB1dCB8fCBmYWxzZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdoYXNNaWRpT3V0cHV0Jzoge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBwcm90by5wcm90b3R5cGUuaGFzTWlkaU91dHB1dCB8fCBmYWxzZVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmNyZWF0ZVBsdWdpbkluc3RhbmNlID0gYXN5bmMgZnVuY3Rpb24ob3duZXIsIGFzeW5jKSB7XG4gICAgICAgICAgICB2YXIgcCA9IGNyZWF0ZVBsdWdpbkluc3RhbmNlKG93bmVyKTtcbiAgICAgICAgICAgIGlmIChhc3luYyA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBwO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBwO1xuICAgICAgICAgICAgICAgIHJldHVybiBwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZVBsdWdpbkluc3RhbmNlKG93bmVyKSB7XG4gICAgICAgICAgICByZXR1cm4gd2FpdFVudGlsUmVhZHkoKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjaGVja0lzUmVhZHkoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihcIlBsdWdpbiBub3QgcmVhZHlcIikpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShuZXcgcHJvdG8oZmFjdG9yeSwgb3duZXIpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKHBsdWdpbikge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuICAgICAgICAgICAgICAgICAgICBpZiAocGx1Z2luLmluaXRpYWxpc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwbHVnaW4uaW5pdGlhbGlzZSgpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShwbHVnaW4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHBsdWdpbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24ocGx1Z2luKSB7XG4gICAgICAgICAgICAgICAgdmFyIG5vZGU7XG4gICAgICAgICAgICAgICAgaWYgKHBsdWdpbi5oYXNNaWRpSW5wdXQgIT09IHRydWUgJiYgcGx1Z2luLmhhc01pZGlPdXRwdXQgIT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZSA9IG5ldyBQbHVnaW5JbnN0YW5jZShjdXJyZW50UGx1Z2luSWQrKywgcGx1Z2luKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBsdWdpbi5oYXNNaWRpSW5wdXQgPT09IHRydWUgJiYgcGx1Z2luLmhhc01pZGlPdXRwdXQgIT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZSA9IG5ldyBNaWRpU3ludGhlc2lzSW5zdGFuY2UoY3VycmVudFBsdWdpbklkKyssIHBsdWdpbik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3coXCJObyBJbnN0YW5jZSBIb2xkZXIgQXZhaWxhYmxlIVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMocGx1Z2luLCB7XG4gICAgICAgICAgICAgICAgICAgICdwbHVnaW5JbnN0YW5jZSc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICd2YWx1ZSc6IG5vZGVcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgJ3Byb3RvdHlwZU9iamVjdCc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICd2YWx1ZSc6IHNlbGZcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgJ25hbWUnOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcHJvdG8ucHJvdG90eXBlLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgJ3ZlcnNpb24nOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcHJvdG8ucHJvdG90eXBlLnZlcnNpb25cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgJ3VuaXF1ZUlEJzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHByb3RvLnByb3RvdHlwZS51bmlxdWVJRFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAnU2VzaW9uRGF0YSc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmYWN0b3J5LlNlc3Npb25EYXRhXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICdVc2VyRGF0YSc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmYWN0b3J5LlVzZXJEYXRhXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhub2RlLCB7XG4gICAgICAgICAgICAgICAgICAgIFwicHJvdG90eXBlT2JqZWN0XCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICd2YWx1ZSc6IHNlbGZcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgXCJleHRlcm5hbEludGVyZmFjZVwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAndmFsdWUnOiBwbHVnaW4uZXh0ZXJuYWxJbnRlcmZhY2VcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGZhY3RvcnkucmVnaXN0ZXJQbHVnaW5JbnN0YW5jZShub2RlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gbG9hZFJlc291cmNlQ2hhaW4ocmVzb3VyY2VPYmplY3QsIHApIHtcbiAgICAgICAgICAgIGlmICghcCkge1xuICAgICAgICAgICAgICAgIHZhciBrID0gbG9hZFJlc291cmNlKHJlc291cmNlT2JqZWN0KTtcbiAgICAgICAgICAgICAgICBrLnRoZW4oZnVuY3Rpb24gKHJlc291cmNlT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXNvdXJjZU9iamVjdC5yZXNvdXJjZXMgIT09IHVuZGVmaW5lZCAmJiByZXNvdXJjZU9iamVjdC5yZXNvdXJjZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXNvdXJjZU9iamVjdC5yZXNvdXJjZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrID0gbG9hZFJlc291cmNlQ2hhaW4ocmVzb3VyY2VPYmplY3QucmVzb3VyY2VzW2ldLCBrKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBrO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcC50aGVuKGxvYWRSZXNvdXJjZShyZXNvdXJjZU9iamVjdCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gbG9hZFN0eWxlc2hlZXQodXJsKSB7XG4gICAgICAgICAgICB2YXIgY3NzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpbmtcIik7XG4gICAgICAgICAgICBjc3Muc2V0QXR0cmlidXRlKFwicmVsXCIsIFwic3R5bGVzaGVldFwiKTtcbiAgICAgICAgICAgIGNzcy5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwidGV4dC9jc3NcIik7XG4gICAgICAgICAgICBjc3Muc2V0QXR0cmlidXRlKFwiaHJlZlwiLCB1cmwpO1xuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdLmFwcGVuZENoaWxkKGNzcyk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiByZWN1cnNpdmVHZXRUZXN0KHJlc291cmNlT2JqZWN0KSB7XG4gICAgICAgICAgICBpZiAocmVzb3VyY2VPYmplY3QuaGFzT3duUHJvcGVydHkoXCJsZW5ndGhcIikgJiYgcmVzb3VyY2VPYmplY3QubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZWN1cnNpdmVHZXRUZXN0KHJlc291cmNlT2JqZWN0W3Jlc291cmNlT2JqZWN0Lmxlbmd0aCAtIDFdKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzb3VyY2VPYmplY3QuaGFzT3duUHJvcGVydHkoXCJyZXNvdXJjZXNcIikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVjdXJzaXZlR2V0VGVzdChyZXNvdXJjZU9iamVjdC5yZXNvdXJjZXMpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb3VyY2VPYmplY3QudGVzdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciByZXNvdXJjZVByb21pc2VzID0gW107XG4gICAgICAgIGlmIChwcm90by5wcm90b3R5cGUucmVzb3VyY2VzKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3RvLnByb3RvdHlwZS5yZXNvdXJjZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVzb3VyY2UgPSBwcm90by5wcm90b3R5cGUucmVzb3VyY2VzW2ldO1xuICAgICAgICAgICAgICAgIHJlc291cmNlLnR5cGUgPSByZXNvdXJjZS50eXBlLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChyZXNvdXJjZS50eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJjc3NcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRTdHlsZXNoZWV0KHJlc291cmNlLnVybCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImphdmFzY3JpcHRcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvYmplY3QgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3Byb21pc2UnOiBsb2FkUmVzb3VyY2VDaGFpbihyZXNvdXJjZSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3N0YXRlJzogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnY29tcGxldGUnOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3Rlc3QnOiByZWN1cnNpdmVHZXRUZXN0KHJlc291cmNlKVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdC5wcm9taXNlLnRoZW4ob2JqZWN0LmNvbXBsZXRlLmJpbmQob2JqZWN0KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvdXJjZVByb21pc2VzLnB1c2gob2JqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgKFwiQ291bGQgbm90IGxvYWQgXCIgKyByZXNvdXJjZS51cmwgKyBcIiwgaW52YWxpZCByZXNvdXJjZS50eXBlXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZ2V0UmVzb3VyY2VQcm9taXNlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiByZXNvdXJjZVByb21pc2VzO1xuICAgICAgICB9O1xuICAgICAgICBmdW5jdGlvbiBjaGVja0lzUmVhZHkoKSB7XG4gICAgICAgICAgICB2YXIgc3RhdGUgPSB0cnVlO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXNvdXJjZVByb21pc2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc291cmNlUHJvbWlzZXNbaV0uc3RhdGUgIT09IDEgfHwgIXJlc291cmNlUHJvbWlzZXNbaV0udGVzdCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXRlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzdGF0ZTtcbiAgICAgICAgfTtcbiAgICAgICAgZnVuY3Rpb24gd2FpdFVudGlsUmVhZHkoKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocmVzb3VyY2VQcm9taXNlcyk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5hZGRQcm90b3R5cGUgPSBmdW5jdGlvbiAocGx1Z2luX3Byb3RvKSB7XG4gICAgICAgIHZhciBmYWN0b3J5ID0gdGhpcztcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBwbHVnaW5fcHJvdG8gIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgIHJlamVjdChcIlRoZSBQcm90b3R5cGUgbXVzdCBiZSBhIGZ1bmN0aW9uIVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBwbHVnaW5fcHJvdG8ucHJvdG90eXBlLm5hbWUgIT09IFwic3RyaW5nXCIgfHwgcGx1Z2luX3Byb3RvLnByb3RvdHlwZS5uYW1lLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJlamVjdChcIk1hbGZvcm1lZCBwbHVnaW4uIE5hbWUgbm90IGRlZmluZWRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgcGx1Z2luX3Byb3RvLnByb3RvdHlwZS52ZXJzaW9uICE9PSBcInN0cmluZ1wiIHx8IHBsdWdpbl9wcm90by5wcm90b3R5cGUudmVyc2lvbi5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICByZWplY3QoXCJNYWxmb3JtZWQgcGx1Z2luLiBWZXJzaW9uIG5vdCBkZWZpbmVkXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHBsdWdpbl9wcm90by5wcm90b3R5cGUudW5pcXVlSUQgIT09IFwic3RyaW5nXCIgfHwgcGx1Z2luX3Byb3RvLnByb3RvdHlwZS51bmlxdWVJRC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICByZWplY3QoXCJNYWxmb3JtZWQgcGx1Z2luLiB1bmlxdWVJRCBub3QgZGVmaW5lZFwiKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShwbHVnaW5fcHJvdG8pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKHBsdWdpbl9wcm90bykge1xuICAgICAgICAgICAgdmFyIHRlc3RPYmogPSB7XG4gICAgICAgICAgICAgICAgJ3Byb3RvJzogcGx1Z2luX3Byb3RvLFxuICAgICAgICAgICAgICAgICduYW1lJzogcGx1Z2luX3Byb3RvLnByb3RvdHlwZS5uYW1lLFxuICAgICAgICAgICAgICAgICd2ZXJzaW9uJzogcGx1Z2luX3Byb3RvLnByb3RvdHlwZS52ZXJzaW9uLFxuICAgICAgICAgICAgICAgICd1bmlxdWVJRCc6IHBsdWdpbl9wcm90by5wcm90b3R5cGUudW5pcXVlSURcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgb2JqID0gcGx1Z2luX3Byb3RvdHlwZXMuZmluZChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHZhciBwYXJhbTtcbiAgICAgICAgICAgICAgICB2YXIgbWF0Y2ggPSAwO1xuICAgICAgICAgICAgICAgIGZvciAocGFyYW0gaW4gdGhpcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZVtwYXJhbV0gPT09IHRoaXNbcGFyYW1dKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRjaCsrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBtYXRjaCA9PT0gNDtcbiAgICAgICAgICAgIH0sIHRlc3RPYmopO1xuICAgICAgICAgICAgaWYgKG9iaikge1xuICAgICAgICAgICAgICAgIHRocm93IChcIlRoZSBwbHVnaW4gbXVzdCBiZSB1bmlxdWUhXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb2JqID0gbmV3IFBsdWdpblByb3RvdHlwZShwbHVnaW5fcHJvdG8sIGZhY3RvcnkpO1xuICAgICAgICAgICAgcGx1Z2luX3Byb3RvdHlwZXMucHVzaChvYmopO1xuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMob2JqLCB7XG4gICAgICAgICAgICAgICAgJ2ZhY3RvcnknOiB7XG4gICAgICAgICAgICAgICAgICAgICd2YWx1ZSc6IGZhY3RvcnlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBvYmo7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICB0aGlzLmdldFByb3RvdHlwZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBwbHVnaW5fcHJvdG90eXBlcztcbiAgICB9O1xuXG4gICAgdGhpcy5nZXRBdWRpb1BsdWdpblByb3RvdHlwZXMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHBsdWdpbl9wcm90b3R5cGVzLmZpbHRlcihmdW5jdGlvbihwcm90bykge1xuICAgICAgICAgICAgcmV0dXJuIHByb3RvLmhhc01pZGlJbnB1dCA9PSBmYWxzZSAmJiBwcm90by5oYXNNaWRpT3V0cHV0ID09IGZhbHNlO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgdGhpcy5nZXRNaWRpU3ludGhQcm90b3R5cGVzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBwbHVnaW5fcHJvdG90eXBlcy5maWx0ZXIoZnVuY3Rpb24ocHJvdG8pIHtcbiAgICAgICAgICAgIHJldHVybiBwcm90by5oYXNNaWRpSW5wdXQgPT0gdHJ1ZSAmJiBwcm90by5oYXNNaWRpT3V0cHV0ID09IGZhbHNlO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgdGhpcy5nZXRNaWRpUGx1Z2luUHJvdG90eXBlcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gcGx1Z2luX3Byb3RvdHlwZXMuZmlsdGVyKGZ1bmN0aW9uKHByb3RvKSB7XG4gICAgICAgICAgICByZXR1cm4gcHJvdG8uaGFzTWlkaUlucHV0ID09IHRydWUgJiYgcHJvdG8uaGFzTWlkaU91dHB1dCA9PSB0cnVlO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgdGhpcy5nZXRBbGxQbHVnaW5zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gcGx1Z2luc0xpc3Q7XG4gICAgfTtcblxuICAgIHRoaXMuZ2V0QWxsUGx1Z2luc09iamVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG9iaiA9IHtcbiAgICAgICAgICAgICAgICAnZmFjdG9yeSc6IHRoaXMsXG4gICAgICAgICAgICAgICAgJ3N1YkZhY3Rvcmllcyc6IFtdXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaTtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IHN1YkZhY3Rvcmllcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgb2JqLnN1YkZhY3Rvcmllcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAnc3ViRmFjdG9yeSc6IHN1YkZhY3Rvcmllc1tpXSxcbiAgICAgICAgICAgICAgICAncGx1Z2lucyc6IHN1YkZhY3Rvcmllc1tpXS5nZXRQbHVnaW5zKClcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfTtcblxuICAgIHRoaXMuY3JlYXRlU3ViRmFjdG9yeSA9IGZ1bmN0aW9uKGNoYWluU3RhcnQsIGNoYWluU3RvcCkge1xuICAgICAgICBjb25zb2xlLndhcm4oXCJERVBSRUNBVEVEIC0gVGhpcyBmdW5jdGlvbiB3aWxsIGJlIGRlcHJlY2F0ZWQgaW4gZmF2b3VyIG9mIFxcXCJjcmVhdGVBdWRpb1BsdWdpbkNoYWluTWFuYWdlclxcXCJcIik7XG4gICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZUF1ZGlvUGx1Z2luQ2hhaW5NYW5hZ2VyKGNoYWluU3RhcnQsIGNoYWluU3RvcCk7XG4gICAgfTtcblxuICAgIHRoaXMuZGVzdHJveVN1YkZhY3RvcnkgPSBmdW5jdGlvbihjaGFpblN0YXJ0LCBjaGFpblN0b3ApIHtcbiAgICAgICAgY29uc29sZS53YXJuKFwiREVQUkVDQVRFRCAtIFRoaXMgZnVuY3Rpb24gd2lsbCBiZSBkZXByZWNhdGVkIGluIGZhdm91ciBvZiBcXFwiZGVzdHJveUF1ZGlvUGx1Z2luQ2hhaW5NYW5hZ2VyXFxcIlwiKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVzdHJveUF1ZGlvUGx1Z2luQ2hhaW5NYW5hZ2VyKGNoYWluU3RhcnQsIGNoYWluU3RvcCk7XG4gICAgfTtcblxuICAgIHRoaXMuY3JlYXRlQXVkaW9QbHVnaW5DaGFpbk1hbmFnZXIgPSBmdW5jdGlvbiAoY2hhaW5TdGFydCwgY2hhaW5TdG9wKSB7XG4gICAgICAgIHZhciBub2RlID0gbmV3IEF1ZGlvUGx1Z2luQ2hhaW5NYW5hZ2VyKHRoaXMsIGNoYWluU3RhcnQsIGNoYWluU3RvcCk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKG5vZGUsIHtcbiAgICAgICAgICAgICdTZXNzaW9uRGF0YSc6IHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5TZXNzaW9uRGF0YVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdVc2VyRGF0YSc6IHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5Vc2VyRGF0YVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgc3ViRmFjdG9yaWVzLnB1c2gobm9kZSk7XG4gICAgICAgIHJldHVybiBub2RlO1xuICAgIH07XG5cbiAgICB0aGlzLmRlc3Ryb3lBdWRpb1BsdWdpbkNoYWluTWFuYWdlciA9IGZ1bmN0aW9uIChTdWJGYWN0b3J5KSB7XG4gICAgICAgIHZhciBpbmRleCA9IHN1YkZhY3Rvcmllcy5maW5kSW5kZXgoZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIGlmIChlbGVtZW50ID09PSB0aGlzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0sIFN1YkZhY3RvcnkpO1xuICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICAgICAgc3ViRmFjdG9yaWVzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICBTdWJGYWN0b3J5LmRlc3Ryb3koKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmNyZWF0ZU1pZGlTeW50aGVzaXNlckhvc3QgPSBmdW5jdGlvbihmYWN0b3J5KSB7XG4gICAgICAgIHZhciBob3N0ID0gbmV3IE1pZGlTeW50aGVzaXNlckhvc3QoZmFjdG9yeSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGhvc3QsIHtcbiAgICAgICAgICAgICdTZXNzaW9uRGF0YSc6IHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5TZXNzaW9uRGF0YVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdVc2VyRGF0YSc6IHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5Vc2VyRGF0YVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgc3ludGhlc2lzZXJIb3N0cy5wdXNoKGhvc3QpO1xuICAgICAgICByZXR1cm4gaG9zdDtcbiAgICB9O1xuXG4gICAgdGhpcy5kZXN0cm95TWlkaVN5bnRoZXNpc2VySG9zdCA9IGZ1bmN0aW9uIChob3N0KSB7XG4gICAgICAgIHZhciBpbmRleCA9IHN5bnRoZXNpc2VySG9zdHMuZmluZEluZGV4KGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICBpZiAoZWxlbWVudCA9PT0gdGhpcykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9LCBob3N0KTtcbiAgICAgICAgaWYgKGluZGV4ID49IDApIHtcbiAgICAgICAgICAgIHN5bnRoZXNpc2VySG9zdHMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgIGhvc3QuZGVzdHJveSgpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMucmVnaXN0ZXJQbHVnaW5JbnN0YW5jZSA9IGZ1bmN0aW9uIChpbnN0YW5jZSkge1xuICAgICAgICBpZiAocGx1Z2luc0xpc3QuZmluZChmdW5jdGlvbiAocCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBwID09PSB0aGlzO1xuICAgICAgICAgICAgfSwgaW5zdGFuY2UpKSB7XG4gICAgICAgICAgICB0aHJvdyAoXCJQbHVnaW4gSW5zdGFuY2Ugbm90IHVuaXF1ZVwiKTtcbiAgICAgICAgfVxuICAgICAgICBwbHVnaW5zTGlzdC5wdXNoKGluc3RhbmNlKTtcbiAgICAgICAgaWYgKGF1ZGlvU3RhcnRlZCkge1xuICAgICAgICAgICAgaW5zdGFuY2Uubm9kZS5zdGFydC5jYWxsKGluc3RhbmNlLm5vZGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG5cbiAgICB0aGlzLmRlbGV0ZVBsdWdpbiA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICB2YXIgaW5kZXggPSBwbHVnaW5zTGlzdC5maW5kSW5kZXgoZnVuY3Rpb24gKHApIHtcbiAgICAgICAgICAgIHJldHVybiBwLmlkID09PSBpZDtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgICAgICB2YXIgcCA9IHBsdWdpbnNMaXN0LnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICBwWzBdLm5vZGUuZXh0ZXJuYWxJbnRlcmZhY2UuY2xvc2VXaW5kb3dzKCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gdHJpZ2dlckF1ZGlvU3RhcnQocHJvZ3JhbV90aW1lKSB7XG4gICAgICAgIHBsdWdpbnNMaXN0LmZvckVhY2goZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgICAgIG4ubm9kZS5zdGFydC5jYWxsKG4ubm9kZSwgcHJvZ3JhbV90aW1lKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdHJpZ2dlckF1ZGlvU3RvcCgpIHtcbiAgICAgICAgcGx1Z2luc0xpc3QuZm9yRWFjaChmdW5jdGlvbiAobikge1xuICAgICAgICAgICAgbi5ub2RlLnN0b3AuY2FsbChuLm5vZGUpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICB0aGlzLmF1ZGlvU3RhcnQgPSBmdW5jdGlvbiAocHJvZ3JhbV90aW1lKSB7XG4gICAgICAgIGlmICghYXVkaW9TdGFydGVkKSB7XG4gICAgICAgICAgICB0cmlnZ2VyQXVkaW9TdGFydChwcm9ncmFtX3RpbWUpO1xuICAgICAgICAgICAgYXVkaW9TdGFydGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgdGhpcy5hdWRpb1N0b3AgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChhdWRpb1N0YXJ0ZWQpIHtcbiAgICAgICAgICAgIHRyaWdnZXJBdWRpb1N0b3AoKTtcbiAgICAgICAgICAgIGF1ZGlvU3RhcnRlZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHZhciBGZWF0dXJlTWFwID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgTWFwcGluZ3MgPSBbXTtcblxuICAgICAgICB2YXIgRmVhdHVyZU5vZGUgPSBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICAgICAgdGhpcy5uYW1lID0gbm9kZS5uYW1lO1xuICAgICAgICAgICAgdGhpcy5wYXJhbWV0ZXJzID0gdGhpcy5wYXJhbWV0ZXJzO1xuICAgICAgICAgICAgdGhpcy5mZWF0dXJlcyA9IFtdO1xuICAgICAgICB9O1xuXG4gICAgICAgIGZ1bmN0aW9uIGdldEZlYXR1cmVOb2RlKGxpc3QsIGNoZWNrKSB7XG4gICAgICAgICAgICByZXR1cm4gbGlzdC5maW5kKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGUubmFtZSA9PT0gdGhpcy5uYW1lO1xuICAgICAgICAgICAgfSwgY2hlY2spO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gYWRkRmVhdHVyZU5vZGUoZmVhdHVyZU5vZGUsIGxpc3QpIHtcbiAgICAgICAgICAgIHZhciBub2RlID0gbmV3IEZlYXR1cmVOb2RlKGZlYXR1cmVOb2RlKTtcbiAgICAgICAgICAgIGxpc3QucHVzaChub2RlKTtcbiAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIFNvdXJjZU1hcCA9IGZ1bmN0aW9uIChTZW5kZXIsIHBsdWdpbkluc3RhY2UpIHtcbiAgICAgICAgICAgIHZhciBNYXBwaW5ncyA9IFtdO1xuICAgICAgICAgICAgdGhpcy5nZXRTb3VyY2VJbnN0YW5jZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGx1Z2luSW5zdGFjZTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmdldFNlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gU2VuZGVyO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gZmluZEZlYXR1cmVPYmplY3QoZmVhdHVyZU9iamVjdCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBNYXBwaW5ncy5maW5kKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoZS5vdXRwdXRJbmRleCA9PT0gdGhpcy5vdXRwdXRJbmRleCAmJiBlLmZyYW1lU2l6ZSA9PT0gdGhpcy5mcmFtZVNpemUpO1xuICAgICAgICAgICAgICAgIH0sIGZlYXR1cmVPYmplY3QpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiB1cGRhdGVTZW5kZXIoKSB7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gcmVjdXJzaXZlRmluZChmZWF0dXJlTGlzdCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZiwgbGlzdCA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGYgPSAwOyBmIDwgZmVhdHVyZUxpc3QubGVuZ3RoOyBmKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmZWF0dXJlTm9kZSA9IGdldEZlYXR1cmVOb2RlKGxpc3QsIGZlYXR1cmVMaXN0W2ZdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZmVhdHVyZU5vZGUgfHwgKGZlYXR1cmVMaXN0LnBhcmFtZXRlcnMgJiYgZmVhdHVyZUxpc3RbZl0ucGFyYW1ldGVycy5sZW5ndGggIT09IDApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmVhdHVyZU5vZGUgPSBhZGRGZWF0dXJlTm9kZShmZWF0dXJlTGlzdFtmXSwgbGlzdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmVhdHVyZUxpc3RbZl0uZmVhdHVyZXMgJiYgZmVhdHVyZUxpc3RbZl0uZmVhdHVyZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmVOb2RlLmZlYXR1cmVzID0gcmVjdXJzaXZlRmluZChmZWF0dXJlTGlzdFtmXS5mZWF0dXJlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxpc3Q7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBpLCBvdXRwdXRMaXN0ID0gW107XG4gICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IE1hcHBpbmdzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvdXRwdXRMaXN0W01hcHBpbmdzW2ldLm91dHB1dEluZGV4XSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRMaXN0W01hcHBpbmdzW2ldLm91dHB1dEluZGV4XSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciBmcmFtZUxpc3QgPSBvdXRwdXRMaXN0W01hcHBpbmdzW2ldLm91dHB1dEluZGV4XS5maW5kKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5mcmFtZVNpemUgPT09IHRoaXMuZnJhbWVTaXplO1xuICAgICAgICAgICAgICAgICAgICB9LCBNYXBwaW5nc1tpXSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZnJhbWVMaXN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmcmFtZUxpc3QgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2ZyYW1lU2l6ZSc6IE1hcHBpbmdzW2ldLmZyYW1lU2l6ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZmVhdHVyZUxpc3QnOiB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRMaXN0W01hcHBpbmdzW2ldLm91dHB1dEluZGV4XS5wdXNoKGZyYW1lTGlzdCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZnJhbWVMaXN0LmZlYXR1cmVMaXN0ID0gcmVjdXJzaXZlRmluZChNYXBwaW5nc1tpXS5nZXRGZWF0dXJlTGlzdCgpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgU2VuZGVyLnVwZGF0ZUZlYXR1cmVzKG91dHB1dExpc3QpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLnJlcXVlc3RGZWF0dXJlcyA9IGZ1bmN0aW9uIChyZXF1ZXN0b3JJbnN0YW5jZSwgZmVhdHVyZU9iamVjdCkge1xuICAgICAgICAgICAgICAgIHZhciBtYXAgPSBmaW5kRmVhdHVyZU9iamVjdChmZWF0dXJlT2JqZWN0KTtcbiAgICAgICAgICAgICAgICBpZiAoIW1hcCkge1xuICAgICAgICAgICAgICAgICAgICBtYXAgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnb3V0cHV0SW5kZXgnOiBmZWF0dXJlT2JqZWN0Lm91dHB1dEluZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2ZyYW1lU2l6ZSc6IGZlYXR1cmVPYmplY3QuZnJhbWVTaXplLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ3JlcXVlc3RvcnMnOiBbXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdnZXRGZWF0dXJlTGlzdCc6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgRiA9IFtdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCB0aGlzLnJlcXVlc3RvcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgRiA9IEYuY29uY2F0KHRoaXMucmVxdWVzdG9yc1tpXS5nZXRGZWF0dXJlTGlzdCgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEY7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIE1hcHBpbmdzLnB1c2gobWFwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHJlcXVlc3RvciA9IG1hcC5yZXF1ZXN0b3JzLmZpbmQoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuZ2V0UmVxdWVzdG9ySW5zdGFuY2UoKSA9PT0gdGhpcztcbiAgICAgICAgICAgICAgICB9LCByZXF1ZXN0b3JJbnN0YW5jZSk7XG4gICAgICAgICAgICAgICAgaWYgKCFyZXF1ZXN0b3IpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdG9yID0gbmV3IFJlcXVlc3Rvck1hcChyZXF1ZXN0b3JJbnN0YW5jZSk7XG4gICAgICAgICAgICAgICAgICAgIG1hcC5yZXF1ZXN0b3JzLnB1c2gocmVxdWVzdG9yKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVxdWVzdG9yLmFkZEZlYXR1cmVzKGZlYXR1cmVPYmplY3QpO1xuICAgICAgICAgICAgICAgIHVwZGF0ZVNlbmRlcigpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdGhpcy5maW5kRnJhbWVNYXAgPSBmdW5jdGlvbiAob3V0cHV0SW5kZXgsIGZyYW1lU2l6ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBNYXBwaW5ncy5maW5kKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoZS5vdXRwdXRJbmRleCA9PT0gb3V0cHV0SW5kZXggJiYgZS5mcmFtZVNpemUgPT09IGZyYW1lU2l6ZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB0aGlzLmNhbmNlbEZlYXR1cmVzID0gZnVuY3Rpb24gKHJlcXVlc3Rvckluc3RhbmNlLCBmZWF0dXJlT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgaWYgKGZlYXR1cmVPYmplY3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBNYXBwaW5ncy5mb3JFYWNoKGZ1bmN0aW9uIChtYXApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXF1ZXN0b3JJbmRleCA9IG1hcC5yZXF1ZXN0b3JzLmZpbmRJbmRleChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmdldFJlcXVlc3Rvckluc3RhbmNlKCkgPT09IHJlcXVlc3Rvckluc3RhbmNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVxdWVzdG9ySW5kZXggPj0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcC5yZXF1ZXN0b3JzLnNwbGljZShyZXF1ZXN0b3JJbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtYXAgPSBmaW5kRmVhdHVyZU9iamVjdChmZWF0dXJlT2JqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFtYXApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgcmVxdWVzdG9yID0gbWFwLnJlcXVlc3RvcnMuZmluZChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuZ2V0UmVxdWVzdG9ySW5zdGFuY2UoKSA9PT0gdGhpcztcbiAgICAgICAgICAgICAgICAgICAgfSwgcmVxdWVzdG9ySW5zdGFuY2UpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXJlcXVlc3Rvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3Rvci5kZWxldGVGZWF0dXJlcyhmZWF0dXJlT2JqZWN0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdXBkYXRlU2VuZGVyKCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICB2YXIgUmVxdWVzdG9yTWFwID0gZnVuY3Rpb24gKHBsdWdpbkluc3RhbmNlKSB7XG4gICAgICAgICAgICB2YXIgRmVhdHVyZXMgPSBbXTtcbiAgICAgICAgICAgIHZhciBSZWNlaXZlciA9IHBsdWdpbkluc3RhbmNlLm5vZGUuZmVhdHVyZU1hcC5SZWNlaXZlcjtcbiAgICAgICAgICAgIHRoaXMuZ2V0UmVxdWVzdG9ySW5zdGFuY2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBsdWdpbkluc3RhbmNlO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gcmVjdXJzaXZlbHlBZGRGZWF0dXJlcyhyb290QXJyYXksIGZlYXR1cmVPYmplY3QpIHtcbiAgICAgICAgICAgICAgICB2YXIgaTtcbiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgZmVhdHVyZU9iamVjdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayB3ZSBoYXZlIG5vdCBhbHJlYWR5IGxpc3RlZCB0aGUgZmVhdHVyZVxuICAgICAgICAgICAgICAgICAgICB2YXIgZmVhdHVyZU5vZGUgPSBnZXRGZWF0dXJlTm9kZShyb290QXJyYXksIGZlYXR1cmVPYmplY3RbaV0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWZlYXR1cmVOb2RlIHx8IChmZWF0dXJlT2JqZWN0W2ldLnBhcmFtZXRlcnMgJiYgZmVhdHVyZU9iamVjdFtpXS5wYXJhbWV0ZXJzLmxlbmd0aCAhPT0gMCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmVOb2RlID0gYWRkRmVhdHVyZU5vZGUoZmVhdHVyZU9iamVjdFtpXSwgcm9vdEFycmF5KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZmVhdHVyZU9iamVjdFtpXS5mZWF0dXJlcyAhPT0gdW5kZWZpbmVkICYmIGZlYXR1cmVPYmplY3RbaV0uZmVhdHVyZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVjdXJzaXZlbHlBZGRGZWF0dXJlcyhmZWF0dXJlTm9kZS5mZWF0dXJlcywgZmVhdHVyZU9iamVjdFtpXS5mZWF0dXJlcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHJlY3Vyc2l2ZWx5RGVsZXRlRmVhdHVyZXMocm9vdEFycmF5LCBmZWF0dXJlT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgdmFyIGwgPSBmZWF0dXJlT2JqZWN0Lmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgaTtcbiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEZpbmQgdGhlIGZlYXR1cmVcbiAgICAgICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gZ2V0RmVhdHVyZU5vZGUocm9vdEFycmF5LCBmZWF0dXJlT2JqZWN0W2ldKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4ID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmZWF0dXJlT2JqZWN0W2luZGV4XS5mZWF0dXJlcyAmJiBmZWF0dXJlT2JqZWN0W2luZGV4XS5mZWF0dXJlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjdXJzaXZlbHlEZWxldGVGZWF0dXJlcyhyb290QXJyYXlbaW5kZXhdLmZlYXR1cmVzLCBmZWF0dXJlT2JqZWN0W2luZGV4XS5mZWF0dXJlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZlYXR1cmVzLnNwbGljZShpbmRleCwgMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5hZGRGZWF0dXJlcyA9IGZ1bmN0aW9uIChmZWF0dXJlT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgcmVjdXJzaXZlbHlBZGRGZWF0dXJlcyhGZWF0dXJlcywgZmVhdHVyZU9iamVjdC5mZWF0dXJlcyk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB0aGlzLmRlbGV0ZUZlYXR1cmVzID0gZnVuY3Rpb24gKGZlYXR1cmVPYmplY3QpIHtcbiAgICAgICAgICAgICAgICByZWN1cnNpdmVseURlbGV0ZUZlYXR1cmVzKEZlYXR1cmVzLCBmZWF0dXJlT2JqZWN0LmZlYXR1cmVzKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHRoaXMuZ2V0RmVhdHVyZUxpc3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEZlYXR1cmVzO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdGhpcy5wb3N0RmVhdHVyZXMgPSBmdW5jdGlvbiAoZmVhdHVyZU9iamVjdCkge1xuICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ3BsdWdpbic6IGZlYXR1cmVPYmplY3QucGx1Z2luLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ291dHB1dEluZGV4JzogZmVhdHVyZU9iamVjdC5vdXRwdXRJbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgICdmcmFtZVNpemUnOiBmZWF0dXJlT2JqZWN0LmZyYW1lU2l6ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdmZWF0dXJlcyc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnbnVtYmVyT2ZDaGFubmVscyc6IGZlYXR1cmVPYmplY3QucmVzdWx0cy5udW1iZXJPZkNoYW5uZWxzLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdyZXN1bHRzJzogW11cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgaTtcblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHJlY3Vyc2l2ZVBvc3RGZWF0dXJlcyhyb290Tm9kZSwgcmVzdWx0c0xpc3QsIEZlYXR1cmVMaXN0KSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEFkZCB0aGUgcmVzdWx0cyB0cmVlIHdoZXJlIG5lY2Vzc2FyeVxuICAgICAgICAgICAgICAgICAgICB2YXIgaSwgcGFyYW07XG5cbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gYW8oZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUubmFtZSA9PT0gcGFyYW07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZm9yIChwYXJhbSBpbiByZXN1bHRzTGlzdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdHNMaXN0Lmhhc093blByb3BlcnR5KHBhcmFtKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBub2RlID0gRmVhdHVyZUxpc3QuZmluZChhbyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdHNMaXN0W3BhcmFtXS5jb25zdHJ1Y3RvciA9PT0gT2JqZWN0ICYmIG5vZGUucmVzdWx0cykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9vdE5vZGVbcGFyYW1dID0ge307XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWN1cnNpdmVQb3N0RmVhdHVyZXMocm9vdE5vZGVbcGFyYW1dLCByZXN1bHRzTGlzdFtwYXJhbV0sIG5vZGUucmVzdWx0cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByb290Tm9kZVtwYXJhbV0gPSByZXN1bHRzTGlzdFtwYXJhbV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gUGVyZm9ybSByZWN1cnNpdmUgbWFwIGZvciBlYWNoIGNoYW5uZWxcbiAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgZmVhdHVyZU9iamVjdC5yZXN1bHRzLm51bWJlck9mQ2hhbm5lbHM7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmZlYXR1cmVzLnJlc3VsdHNbaV0gPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgcmVjdXJzaXZlUG9zdEZlYXR1cmVzKG1lc3NhZ2UuZmVhdHVyZXMucmVzdWx0c1tpXSwgZmVhdHVyZU9iamVjdC5yZXN1bHRzLnJlc3VsdHNbaV0ucmVzdWx0cywgRmVhdHVyZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBwbHVnaW5JbnN0YW5jZS5ub2RlLmZlYXR1cmVNYXAuUmVjZWl2ZXIucG9zdEZlYXR1cmVzKG1lc3NhZ2UpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcblxuICAgICAgICBmdW5jdGlvbiBmaW5kU291cmNlSW5kZXgoU2VuZGVyKSB7XG4gICAgICAgICAgICByZXR1cm4gTWFwcGluZ3MuZmluZEluZGV4KGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGUuZ2V0U2VuZGVyKCkgPT09IHRoaXM7XG4gICAgICAgICAgICB9LCBTZW5kZXIpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZmluZFNvdXJjZU1hcChNYXBwaW5ncywgc291cmNlLCBwbHVnaW5TZW5kZXIpIHtcbiAgICAgICAgICAgIHZhciBzb3VyY2VNYXAgPSBNYXBwaW5nc1tmaW5kU291cmNlSW5kZXgoc291cmNlKV07XG4gICAgICAgICAgICBpZiAoIXNvdXJjZU1hcCkge1xuICAgICAgICAgICAgICAgIHNvdXJjZU1hcCA9IE1hcHBpbmdzW2ZpbmRTb3VyY2VJbmRleChwbHVnaW5TZW5kZXIpXTtcbiAgICAgICAgICAgICAgICBpZiAoIXNvdXJjZU1hcCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyAoXCJDb3VsZCBub3QgbG9jYXRlIHNvdXJjZSBtYXBcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHNvdXJjZU1hcDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEdFTkVSQUwgSU5URVJGQUNFXG4gICAgICAgIHRoaXMuY3JlYXRlU291cmNlTWFwID0gZnVuY3Rpb24gKFNlbmRlciwgcGx1Z2luSW5zdGFuY2UpIHtcbiAgICAgICAgICAgIHZhciBub2RlID0gbmV3IFNvdXJjZU1hcChTZW5kZXIsIHBsdWdpbkluc3RhbmNlKTtcbiAgICAgICAgICAgIE1hcHBpbmdzLnB1c2gobm9kZSk7XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5kZWxldGVTb3VyY2VNYXAgPSBmdW5jdGlvbiAoU2VuZGVyKSB7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSBmaW5kU291cmNlSW5kZXgoU2VuZGVyKTtcbiAgICAgICAgICAgIGlmIChpbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyAoXCJDb3VsZCBub3QgZmluZCB0aGUgc291cmNlIG1hcCBmb3IgdGhlIHBsdWdpblwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIE1hcHBpbmdzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5nZXRQbHVnaW5TZW5kZXIgPSBmdW5jdGlvbiAocGx1Z2luKSB7XG4gICAgICAgICAgICBpZiAocGx1Z2luLmNvbnN0cnVjdG9yID09PSBQbHVnaW5JbnN0YW5jZSkge1xuICAgICAgICAgICAgICAgIHBsdWdpbiA9IHBsdWdpbi5ub2RlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHBsdWdpbi5mZWF0dXJlTWFwLlNlbmRlcjtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnJlcXVlc3RGZWF0dXJlcyA9IGZ1bmN0aW9uIChyZXF1ZXN0b3IsIHNvdXJjZSwgZmVhdHVyZU9iamVjdCkge1xuICAgICAgICAgICAgaWYgKHJlcXVlc3Rvci5jb25zdHJ1Y3RvciAhPT0gUGx1Z2luSW5zdGFuY2UpIHtcbiAgICAgICAgICAgICAgICByZXF1ZXN0b3IgPSByZXF1ZXN0b3IucGx1Z2luSW5zdGFuY2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBHZXQgdGhlIHNvdXJjZSBtYXBcbiAgICAgICAgICAgIHZhciBwbHVnaW5TZW5kZXIgPSB0aGlzLmdldFBsdWdpblNlbmRlcihzb3VyY2UpO1xuICAgICAgICAgICAgdmFyIHNvdXJjZU1hcCA9IGZpbmRTb3VyY2VNYXAoTWFwcGluZ3MsIHNvdXJjZSwgcGx1Z2luU2VuZGVyKTtcbiAgICAgICAgICAgIHNvdXJjZU1hcC5yZXF1ZXN0RmVhdHVyZXMocmVxdWVzdG9yLCBmZWF0dXJlT2JqZWN0KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5kZWxldGVGZWF0dXJlcyA9IGZ1bmN0aW9uIChyZXF1ZXN0b3IsIHNvdXJjZSwgZmVhdHVyZU9iamVjdCkge1xuICAgICAgICAgICAgaWYgKHJlcXVlc3Rvci5jb25zdHJ1Y3RvciAhPT0gUGx1Z2luSW5zdGFuY2UpIHtcbiAgICAgICAgICAgICAgICByZXF1ZXN0b3IgPSByZXF1ZXN0b3IucGx1Z2luSW5zdGFuY2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoc291cmNlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBNYXBwaW5ncy5mb3JFYWNoKGZ1bmN0aW9uIChzb3VyY2VNYXApIHtcbiAgICAgICAgICAgICAgICAgICAgc291cmNlTWFwLmNhbmNlbEZlYXR1cmVzKHJlcXVlc3Rvcik7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIEdldCB0aGUgc291cmNlIG1hcFxuICAgICAgICAgICAgICAgIHZhciBwbHVnaW5TZW5kZXIgPSB0aGlzLmdldFBsdWdpblNlbmRlcihzb3VyY2UpO1xuICAgICAgICAgICAgICAgIHZhciBzb3VyY2VNYXAgPSBmaW5kU291cmNlTWFwKE1hcHBpbmdzLCBzb3VyY2UsIHBsdWdpblNlbmRlcik7XG4gICAgICAgICAgICAgICAgc291cmNlTWFwLmNhbmNlbEZlYXR1cmVzKHJlcXVlc3RvciwgZmVhdHVyZU9iamVjdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZ2V0RmVhdHVyZUxpc3QgPSBmdW5jdGlvbiAocmVxdWVzdG9yLCBzb3VyY2UpIHt9O1xuICAgICAgICB0aGlzLnBvc3RGZWF0dXJlcyA9IGZ1bmN0aW9uIChmZWF0dXJlT2JqZWN0KSB7XG4gICAgICAgICAgICAvLyBSZWNlaXZlIGZyb20gdGhlIFNlbmRlciBvYmplY3RzXG4gICAgICAgICAgICAvLyBUcmlnZ2VyIGRpc3RyaWJ1dGVkIHNlYXJjaCBmb3IgcmVzdWx0cyB0cmFuc21pc3Npb25cblxuICAgICAgICAgICAgLy8gRmlyc3QgZ2V0IHRoZSBpbnN0YW5jZSBtYXBwaW5nIGZvciBvdXRwdXQvZnJhbWVcbiAgICAgICAgICAgIHZhciBzb3VyY2UgPSBNYXBwaW5nc1tmaW5kU291cmNlSW5kZXgoZmVhdHVyZU9iamVjdC5wbHVnaW4pXTtcbiAgICAgICAgICAgIGlmICghc291cmNlKSB7XG4gICAgICAgICAgICAgICAgc291cmNlID0gTWFwcGluZ3NbZmluZFNvdXJjZUluZGV4KHRoaXMuZ2V0UGx1Z2luU2VuZGVyKGZlYXR1cmVPYmplY3QucGx1Z2luKSldO1xuICAgICAgICAgICAgICAgIGlmICghc291cmNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IChcIlBsdWdpbiBJbnN0YW5jZSBub3QgbG9hZGVkIVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgZnJhbWVNYXAgPSBzb3VyY2UuZmluZEZyYW1lTWFwKGZlYXR1cmVPYmplY3Qub3V0cHV0SW5kZXgsIGZlYXR1cmVPYmplY3QuZnJhbWVTaXplKTtcblxuICAgICAgICAgICAgLy8gU2VuZCB0aGUgZmVhdHVyZSBvYmplY3QgdG8gdGhlIFJlcXVlc3Rvck1hcCBvYmplY3QgdG8gaGFuZGxlIGNvbW1zXG4gICAgICAgICAgICBmcmFtZU1hcC5yZXF1ZXN0b3JzLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBlLnBvc3RGZWF0dXJlcyh0aGlzKTtcbiAgICAgICAgICAgIH0sIGZlYXR1cmVPYmplY3QpO1xuXG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIHRoaXMuRmVhdHVyZU1hcCA9IG5ldyBGZWF0dXJlTWFwKCk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMuRmVhdHVyZU1hcCwgXCJmYWN0b3J5XCIsIHtcbiAgICAgICAgJ3ZhbHVlJzogdGhpc1xuICAgIH0pO1xuXG4gICAgdmFyIHN0b3JlcyA9IFtdO1xuXG4gICAgdGhpcy5jcmVhdGVTdG9yZSA9IGZ1bmN0aW9uIChzdG9yZU5hbWUpIHtcbiAgICAgICAgdmFyIG5vZGUgPSBuZXcgTGlua2VkU3RvcmUuTGlua2VkU3RvcmUoc3RvcmVOYW1lKTtcbiAgICAgICAgc3RvcmVzLnB1c2gobm9kZSk7XG4gICAgICAgIHJldHVybiBub2RlO1xuICAgIH07XG5cbiAgICB0aGlzLmdldFN0b3JlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHN0b3JlcztcbiAgICB9O1xuXG4gICAgdGhpcy5maW5kU3RvcmUgPSBmdW5jdGlvbiAoc3RvcmVOYW1lKSB7XG4gICAgICAgIHJldHVybiBzdG9yZXMuZmluZChmdW5jdGlvbiAoYSkge1xuICAgICAgICAgICAgcmV0dXJuIGEubmFtZSA9PT0gc3RvcmVOYW1lO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgLy8gQnVpbGQgdGhlIGRlZmF1bHQgU3RvcmVzXG4gICAgdGhpcy5TZXNzaW9uRGF0YSA9IG5ldyBMaW5rZWRTdG9yZS5MaW5rZWRTdG9yZShcIlNlc3Npb25cIik7XG4gICAgdGhpcy5Vc2VyRGF0YSA9IG5ldyBMaW5rZWRTdG9yZS5MaW5rZWRTdG9yZShcIlVzZXJcIik7XG5cbiAgICAvLyBDcmVhdGVkIGZvciB0aGUgaW5wdXQgb2YgZWFjaCBTdWJGYWN0b3J5IHBsdWdpbiBjaGFpblxuICAgIHZhciBTdWJGYWN0b3J5RmVhdHVyZVNlbmRlciA9IGZ1bmN0aW9uIChvd25lciwgRmFjdG9yeUZlYXR1cmVNYXApIHtcbiAgICAgICAgdmFyIE91dHB1dE5vZGUgPSBmdW5jdGlvbiAocGFyZW50LCBvdXRwdXQpIHtcbiAgICAgICAgICAgIHZhciBleHRyYWN0b3JzID0gW107XG4gICAgICAgICAgICB2YXIgRXh0cmFjdG9yID0gZnVuY3Rpb24gKG91dHB1dCwgZnJhbWVTaXplKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5leHRyYWN0b3IgPSBvdXRwdXQuY29udGV4dC5jcmVhdGVBbmFseXNlcigpO1xuICAgICAgICAgICAgICAgIHRoaXMuZXh0cmFjdG9yLmZmdFNpemUgPSBmcmFtZVNpemU7XG4gICAgICAgICAgICAgICAgb3V0cHV0LmNvbm5lY3QodGhpcy5leHRyYWN0b3IpO1xuICAgICAgICAgICAgICAgIHRoaXMuZmVhdHVyZXMgPSBbXTtcbiAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJmcmFtZVNpemVcIiwge1xuICAgICAgICAgICAgICAgICAgICAndmFsdWUnOiBmcmFtZVNpemVcbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIHZhciByZWN1cnNpdmVQcm9jZXNzaW5nID0gb3duZXIucmVjdXJzaXZlUHJvY2Vzc2luZztcbiAgICAgICAgICAgICAgICAvKlxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHJlY3Vyc2l2ZVByb2Nlc3NpbmcoYmFzZSwgbGlzdCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbCA9IGxpc3QubGVuZ3RoLFxuICAgICAgICAgICAgICAgICAgICAgICAgaSwgZW50cnk7XG4gICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVudHJ5ID0gbGlzdFtpXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VbZW50cnkubmFtZV0uYXBwbHkoYmFzZSwgZW50cnkucGFyYW1ldGVycyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZW50cnkuZmVhdHVyZXMgJiYgZW50cnkuZmVhdHVyZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY3Vyc2l2ZVByb2Nlc3NpbmcoYmFzZS5yZXN1bHRbZW50cnkubmFtZV0sIGVudHJ5LmZlYXR1cmVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIG9uYXVkaW9jYWxsYmFjayhkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vdGhpcyA9PT0gRXh0cmFjdG9yXG4gICAgICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ251bWJlck9mQ2hhbm5lbHMnOiAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ3Jlc3VsdHMnOiBbXVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICByZWN1cnNpdmVQcm9jZXNzaW5nKGRhdGEsIHRoaXMuZmVhdHVyZXMpO1xuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLnJlc3VsdHNbMF0gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnY2hhbm5lbCc6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAncmVzdWx0cyc6IEpTT04ucGFyc2UoZGF0YS50b0pTT04oKSlcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3N0RmVhdHVyZXMoZGF0YS5sZW5ndGgsIG1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRoaXMuc2V0RmVhdHVyZXMgPSBmdW5jdGlvbiAoZmVhdHVyZUxpc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mZWF0dXJlcyA9IGZlYXR1cmVMaXN0O1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5mZWF0dXJlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXh0cmFjdG9yLmNsZWFyQ2FsbGJhY2soKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXh0cmFjdG9yLmZyYW1lQ2FsbGJhY2sob25hdWRpb2NhbGxiYWNrLCB0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgdGhpcy5yZWpvaW5FeHRyYWN0b3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIG91dHB1dC5jb25uZWN0KHRoaXMuZXh0cmFjdG9yKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBXb3JrZXJFeHRyYWN0b3IgPSBmdW5jdGlvbiAob3V0cHV0LCBmcmFtZVNpemUpIHtcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBvbmF1ZGlvY2FsbGJhY2soZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYywgZnJhbWVzID0gW107XG4gICAgICAgICAgICAgICAgICAgIGZvciAoYyA9IDA7IGMgPCBlLmlucHV0QnVmZmVyLm51bWJlck9mQ2hhbm5lbHM7IGMrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZnJhbWVzW2NdID0gZS5pbnB1dEJ1ZmZlci5nZXRDaGFubmVsRGF0YShjKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB3b3JrZXIucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgICAgICAgICAgJ3N0YXRlJzogMixcbiAgICAgICAgICAgICAgICAgICAgICAgICdmcmFtZXMnOiBmcmFtZXNcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gcmVzcG9uc2UobXNnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucG9zdEZlYXR1cmVzKGZyYW1lU2l6ZSwgbXNnLmRhdGEucmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciB3b3JrZXIgPSBuZXcgV29ya2VyKFwianNhcC9mZWF0dXJlLXdvcmtlci5qc1wiKTtcbiAgICAgICAgICAgICAgICB3b3JrZXIub25lcnJvciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHRoaXMuc2V0RmVhdHVyZXMgPSBmdW5jdGlvbiAoZmVhdHVyZUxpc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29uZmlnTWVzc2FnZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdzdGF0ZSc6IDEsXG4gICAgICAgICAgICAgICAgICAgICAgICAnc2FtcGxlUmF0ZSc6IG91dHB1dC5jb250ZXh0LnNhbXBsZVJhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAnZmVhdHVyZUxpc3QnOiBmZWF0dXJlTGlzdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICdudW1DaGFubmVscyc6IG91dHB1dC5udW1iZXJPZk91dHB1dHMsXG4gICAgICAgICAgICAgICAgICAgICAgICAnZnJhbWVTaXplJzogdGhpcy5mcmFtZVNpemVcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mZWF0dXJlcyA9IGZlYXR1cmVMaXN0O1xuICAgICAgICAgICAgICAgICAgICBpZiAoZmVhdHVyZUxpc3QgJiYgZmVhdHVyZUxpc3QubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgd29ya2VyLm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGUuZGF0YS5zdGF0ZSA9PT0gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3b3JrZXIub25tZXNzYWdlID0gcmVzcG9uc2UuYmluZChzZWxmKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5leHRyYWN0b3Iub25hdWRpb3Byb2Nlc3MgPSBvbmF1ZGlvY2FsbGJhY2suYmluZChzZWxmKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3b3JrZXIucG9zdE1lc3NhZ2UoY29uZmlnTWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3N0YXRlJzogMFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmV4dHJhY3Rvci5vbmF1ZGlvcHJvY2VzcyA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHRoaXMucmVqb2luRXh0cmFjdG9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBvdXRwdXQuY29ubmVjdCh0aGlzLmV4dHJhY3Rvcik7XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHRoaXMuZXh0cmFjdG9yID0gb3V0cHV0LmNvbnRleHQuY3JlYXRlU2NyaXB0UHJvY2Vzc29yKGZyYW1lU2l6ZSwgb3V0cHV0Lm51bWJlck9mT3V0cHV0cywgMSk7XG4gICAgICAgICAgICAgICAgb3V0cHV0LmNvbm5lY3QodGhpcy5leHRyYWN0b3IpO1xuICAgICAgICAgICAgICAgIHRoaXMuZXh0cmFjdG9yLmNvbm5lY3Qob3V0cHV0LmNvbnRleHQuZGVzdGluYXRpb24pO1xuXG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZnJhbWVTaXplXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgJ3ZhbHVlJzogZnJhbWVTaXplXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5hZGRFeHRyYWN0b3IgPSBmdW5jdGlvbiAoZnJhbWVTaXplKSB7XG4gICAgICAgICAgICAgICAgdmFyIG9iajtcbiAgICAgICAgICAgICAgICBpZiAod2luZG93Lldvcmtlcikge1xuICAgICAgICAgICAgICAgICAgICBvYmogPSBuZXcgV29ya2VyRXh0cmFjdG9yKG91dHB1dCwgZnJhbWVTaXplKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBvYmogPSBuZXcgRXh0cmFjdG9yKG91dHB1dCwgZnJhbWVTaXplKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZXh0cmFjdG9ycy5wdXNoKG9iaik7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwgXCJwb3N0RmVhdHVyZXNcIiwge1xuICAgICAgICAgICAgICAgICAgICAndmFsdWUnOiBmdW5jdGlvbiAoZnJhbWVTaXplLCByZXN1bHRzSlNPTikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9iaiA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnb3V0cHV0SW5kZXgnOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdmcmFtZVNpemUnOiBmcmFtZVNpemUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3Jlc3VsdHMnOiByZXN1bHRzSlNPTlxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucG9zdEZlYXR1cmVzKG9iaik7XG4gICAgICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBvYmo7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5maW5kRXh0cmFjdG9yID0gZnVuY3Rpb24gKGZyYW1lU2l6ZSkge1xuICAgICAgICAgICAgICAgIHZhciBjaGVjayA9IGZyYW1lU2l6ZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZXh0cmFjdG9ycy5maW5kKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgTVVTVCBiZSA9PSBOT1QgPT09XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBOdW1iZXIoZS5mcmFtZVNpemUpID09PSBOdW1iZXIoY2hlY2spO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMucmVqb2luRXh0cmFjdG9ycyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBleHRyYWN0b3JzLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgZS5yZWpvaW5FeHRyYWN0b3IoKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmRlbGV0ZUV4dHJhY3RvciA9IGZ1bmN0aW9uIChmcmFtZVNpemUpIHt9O1xuICAgICAgICB9O1xuICAgICAgICB2YXIgb3V0cHV0Tm9kZXM7XG4gICAgICAgIHRoaXMudXBkYXRlRmVhdHVyZXMgPSBmdW5jdGlvbiAoZmVhdHVyZU9iamVjdCkge1xuICAgICAgICAgICAgdmFyIG87XG4gICAgICAgICAgICBmb3IgKG8gPSAwOyBvIDwgZmVhdHVyZU9iamVjdC5sZW5ndGg7IG8rKykge1xuICAgICAgICAgICAgICAgIGlmIChvdXRwdXROb2RlcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvID4gMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgKFwiUmVxdWVzdGVkIGFuIG91dHB1dCB0aGF0IGRvZXMgbm90IGV4aXN0XCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG91dHB1dE5vZGVzID0gbmV3IE91dHB1dE5vZGUob3duZXIsIG93bmVyLmNoYWluU3RhcnQpO1xuICAgICAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob3V0cHV0Tm9kZXMsIFwicG9zdEZlYXR1cmVzXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICd2YWx1ZSc6IGZ1bmN0aW9uIChyZXN1bHRPYmplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBvc3RGZWF0dXJlcyhyZXN1bHRPYmplY3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgc2k7XG4gICAgICAgICAgICAgICAgZm9yIChzaSA9IDA7IHNpIDwgZmVhdHVyZU9iamVjdFtvXS5sZW5ndGg7IHNpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGV4dHJhY3RvciA9IG91dHB1dE5vZGVzLmZpbmRFeHRyYWN0b3IoZmVhdHVyZU9iamVjdFtvXVtzaV0uZnJhbWVTaXplKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFleHRyYWN0b3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4dHJhY3RvciA9IG91dHB1dE5vZGVzLmFkZEV4dHJhY3RvcihmZWF0dXJlT2JqZWN0W29dW3NpXS5mcmFtZVNpemUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGV4dHJhY3Rvci5zZXRGZWF0dXJlcyhmZWF0dXJlT2JqZWN0W29dW3NpXS5mZWF0dXJlTGlzdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMucmVqb2luRXh0cmFjdG9ycyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChvdXRwdXROb2Rlcykge1xuICAgICAgICAgICAgICAgIG91dHB1dE5vZGVzLnJlam9pbkV4dHJhY3RvcnMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnBvc3RGZWF0dXJlcyA9IGZ1bmN0aW9uIChmZWF0dXJlT2JqZWN0KSB7XG4gICAgICAgICAgICAvKlxuICAgICAgICAgICAgICAgIENhbGxlZCBieSB0aGUgaW5kaXZpZHVhbCBleHRyYWN0b3IgaW5zdGFuY2VzOlxuICAgICAgICAgICAgICAgIGZlYXR1cmVPYmplY3QgPSB7J2ZyYW1lU2l6ZSc6IGZyYW1lU2l6ZSxcbiAgICAgICAgICAgICAgICAnb3V0cHV0SW5kZXgnOiBvdXRwdXRJbmRleCxcbiAgICAgICAgICAgICAgICAncmVzdWx0cyc6W119XG4gICAgICAgICAgICAqL1xuICAgICAgICAgICAgRmFjdG9yeUZlYXR1cmVNYXAucG9zdEZlYXR1cmVzKHtcbiAgICAgICAgICAgICAgICAncGx1Z2luJzogdGhpcyxcbiAgICAgICAgICAgICAgICAnb3V0cHV0SW5kZXgnOiBmZWF0dXJlT2JqZWN0Lm91dHB1dEluZGV4LFxuICAgICAgICAgICAgICAgICdmcmFtZVNpemUnOiBmZWF0dXJlT2JqZWN0LmZyYW1lU2l6ZSxcbiAgICAgICAgICAgICAgICAncmVzdWx0cyc6IGZlYXR1cmVPYmplY3QucmVzdWx0c1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gU2VuZCB0byBGYWN0b3J5XG4gICAgICAgIEZhY3RvcnlGZWF0dXJlTWFwLmNyZWF0ZVNvdXJjZU1hcCh0aGlzLCB1bmRlZmluZWQpO1xuICAgIH07XG5cbiAgICB2YXIgQXVkaW9QbHVnaW5DaGFpbk1hbmFnZXIgPSBmdW5jdGlvbiAoUGx1Z2luRmFjdG9yeSwgY2hhaW5TdGFydCwgY2hhaW5TdG9wKSB7XG5cbiAgICAgICAgdmFyIHBsdWdpbl9saXN0ID0gW10sXG4gICAgICAgICAgICBwbHVnaW5DaGFpblN0YXJ0ID0gY2hhaW5TdGFydCxcbiAgICAgICAgICAgIHBsdWdpbkNoYWluU3RvcCA9IGNoYWluU3RvcCxcbiAgICAgICAgICAgIGZhY3RvcnlOYW1lID0gXCJcIixcbiAgICAgICAgICAgIHN0YXRlID0gMSxcbiAgICAgICAgICAgIGNoYWluU3RhcnRGZWF0dXJlID0gbmV3IFN1YkZhY3RvcnlGZWF0dXJlU2VuZGVyKHRoaXMsIFBsdWdpbkZhY3RvcnkuRmVhdHVyZU1hcCksXG4gICAgICAgICAgICBzZW1hbnRpY1N0b3JlcyA9IFtdLFxuICAgICAgICAgICAgc2VsZiA9IHRoaXM7XG4gICAgICAgIHRoaXMucGFyZW50ID0gUGx1Z2luRmFjdG9yeTtcbiAgICAgICAgcGx1Z2luQ2hhaW5TdGFydC5kaXNjb25uZWN0KCk7XG4gICAgICAgIHBsdWdpbkNoYWluU3RhcnQuY29ubmVjdChjaGFpblN0b3ApO1xuXG4gICAgICAgIHRoaXMuVHJhY2tEYXRhID0gbmV3IExpbmtlZFN0b3JlLkxpbmtlZFN0b3JlKFwiVHJhY2tcIik7XG4gICAgICAgIHRoaXMuUGx1Z2luRGF0YSA9IG5ldyBMaW5rZWRTdG9yZS5MaW5rZWRTdG9yZShcIlBsdWdpblwiKTtcblxuICAgICAgICB0aGlzLmZlYXR1cmVTZW5kZXIgPSBjaGFpblN0YXJ0RmVhdHVyZTtcblxuICAgICAgICB0aGlzLmdldEZlYXR1cmVDaGFpbiA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICB9O1xuXG4gICAgICAgIGZ1bmN0aW9uIHJlYnVpbGQoKSB7XG4gICAgICAgICAgICB2YXIgaSA9IDAsXG4gICAgICAgICAgICAgICAgbCA9IHBsdWdpbl9saXN0Lmxlbmd0aCAtIDE7XG4gICAgICAgICAgICB3aGlsZSAoaSA8IGwpIHtcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudE5vZGUgPSBwbHVnaW5fbGlzdFtpKytdO1xuICAgICAgICAgICAgICAgIHZhciBuZXh0Tm9kZSA9IHBsdWdpbl9saXN0W2ldO1xuICAgICAgICAgICAgICAgIGN1cnJlbnROb2RlLnJlY29ubmVjdChuZXh0Tm9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBpc29sYXRlKCkge1xuICAgICAgICAgICAgcGx1Z2luX2xpc3QuZm9yRWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIGUuZGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBjdXRDaGFpbigpIHtcbiAgICAgICAgICAgIGlmIChwbHVnaW5fbGlzdC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgcGx1Z2luQ2hhaW5TdGFydC5kaXNjb25uZWN0KHBsdWdpbl9saXN0WzBdLmlucHV0KTtcbiAgICAgICAgICAgICAgICBwbHVnaW5fbGlzdFtwbHVnaW5fbGlzdC5sZW5ndGggLSAxXS5vdXRwdXQuZGlzY29ubmVjdChwbHVnaW5DaGFpblN0b3ApO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwbHVnaW5DaGFpblN0YXJ0LmRpc2Nvbm5lY3QocGx1Z2luQ2hhaW5TdG9wKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gam9pbkNoYWluKCkge1xuICAgICAgICAgICAgaWYgKHBsdWdpbl9saXN0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBwbHVnaW5DaGFpblN0YXJ0LmNvbm5lY3QocGx1Z2luX2xpc3RbMF0uaW5wdXQpO1xuICAgICAgICAgICAgICAgIHBsdWdpbl9saXN0W3BsdWdpbl9saXN0Lmxlbmd0aCAtIDFdLm91dHB1dC5jb25uZWN0KHBsdWdpbkNoYWluU3RvcCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHBsdWdpbkNoYWluU3RhcnQuY29ubmVjdChwbHVnaW5DaGFpblN0b3ApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2hhaW5TdGFydEZlYXR1cmUucmVqb2luRXh0cmFjdG9ycygpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5ieXBhc3NQbHVnaW4gPSBmdW5jdGlvbiAocGx1Z2luX2luc3RhbmNlLCBzdGF0ZSkge1xuICAgICAgICAgICAgLy8gQ2hlY2sgaXMgYSBtZW1iZXIgb2YgdGhpcyBjaGFpblxuICAgICAgICAgICAgaWYgKHBsdWdpbl9saXN0LmluY2x1ZGVzKHBsdWdpbl9pbnN0YW5jZSkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGx1Z2luX2luc3RhbmNlLmJ5cGFzcyhzdGF0ZSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5nZXRQcm90b3R5cGVzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50LmdldFByb3RvdHlwZXMoKTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmdldEZhY3RvcnkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQ7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5kZXN0cm95ID0gZnVuY3Rpb24gKHJlY29ubmVjdCkge1xuICAgICAgICAgICAgdmFyIGk7XG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgcGx1Z2luX2xpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRlc3Ryb3lQbHVnaW4ocGx1Z2luX2xpc3RbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGx1Z2luQ2hhaW5TdGFydC5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgICBpZiAocmVjb25uZWN0ID09PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgcGx1Z2luQ2hhaW5TdGFydC5jb25uZWN0KHBsdWdpbkNoYWluU3RvcCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gUGx1Z2luIGNyZWF0aW9uIC8gZGVzdHJ1Y3Rpb25cblxuICAgICAgICBmdW5jdGlvbiBidWlsZE5ld1BsdWdpbihwcm90b3R5cGVPYmplY3QpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICBpZiAoc3RhdGUgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0IChcIlN1YkZhY3RvcnkgaGFzIGJlZW4gZGVzdHJveWVkISBDYW5ub3QgYWRkIG5ldyBwbHVnaW5zXCIpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUocHJvdG90eXBlT2JqZWN0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBwcm90b3R5cGVPYmplY3QuY3JlYXRlUGx1Z2luSW5zdGFuY2Uoc2VsZiwgZmFsc2UpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24obm9kZSkge1xuICAgICAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhub2RlLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnVHJhY2tEYXRhJzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBzZWxmLlRyYWNrRGF0YVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY3JlYXRlUGx1Z2luID0gZnVuY3Rpb24gKHByb3RvdHlwZU9iamVjdCkge1xuICAgICAgICAgICAgcmV0dXJuIGJ1aWxkTmV3UGx1Z2luKHByb3RvdHlwZU9iamVjdCkuY2F0Y2goZnVuY3Rpb24oZSl7XG4gICAgICAgICAgICAgICAgdGhyb3coXCJQbHVnaW4gZGlkIG5vdCBnZXQgY3JlYXRlZCEgQWJvcnRpbmdcIik7XG4gICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgICAgICAgICAgICBjdXRDaGFpbigpO1xuICAgICAgICAgICAgICAgIHBsdWdpbl9saXN0LnB1c2gobm9kZSk7XG4gICAgICAgICAgICAgICAgaXNvbGF0ZSgpO1xuICAgICAgICAgICAgICAgIHJlYnVpbGQoKTtcbiAgICAgICAgICAgICAgICBqb2luQ2hhaW4oKTtcbiAgICAgICAgICAgICAgICBub2RlLm5vZGUub25sb2FkZWQuY2FsbChub2RlLm5vZGUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5kZXN0cm95UGx1Z2luID0gZnVuY3Rpb24gKHBsdWdpbl9vYmplY3QpIHtcbiAgICAgICAgICAgIGlmIChzdGF0ZSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBpbmRleCA9IHRoaXMuZ2V0UGx1Z2luSW5kZXgocGx1Z2luX29iamVjdCk7XG4gICAgICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICAgICAgICAgIGN1dENoYWluKCk7XG4gICAgICAgICAgICAgICAgcGx1Z2luX29iamVjdC5ub2RlLnN0b3AuY2FsbChwbHVnaW5fb2JqZWN0Lm5vZGUpO1xuICAgICAgICAgICAgICAgIHBsdWdpbl9vYmplY3Qubm9kZS5vbnVubG9hZGVkLmNhbGwocGx1Z2luX29iamVjdC5ub2RlKTtcbiAgICAgICAgICAgICAgICBwbHVnaW5fb2JqZWN0Lm5vZGUuZGVjb25zdHJ1Y3QuY2FsbChwbHVnaW5fb2JqZWN0Lm5vZGUpO1xuICAgICAgICAgICAgICAgIHBsdWdpbl9saXN0LnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgdGhpcy5wYXJlbnQuZGVsZXRlUGx1Z2luKHBsdWdpbl9vYmplY3QuaWQpO1xuICAgICAgICAgICAgICAgIGlzb2xhdGUoKTtcbiAgICAgICAgICAgICAgICByZWJ1aWxkKCk7XG4gICAgICAgICAgICAgICAgam9pbkNoYWluKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5nZXRQbHVnaW5zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHBsdWdpbl9saXN0O1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuZ2V0QWxsUGx1Z2lucyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcmVudC5nZXRBbGxQbHVnaW5zT2JqZWN0KCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5nZXRQbHVnaW5JbmRleCA9IGZ1bmN0aW9uIChwbHVnaW5fb2JqZWN0KSB7XG4gICAgICAgICAgICBpZiAoc3RhdGUgPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgaW5kZXggPSBwbHVnaW5fbGlzdC5maW5kSW5kZXgoZnVuY3Rpb24gKGVsZW1lbnQsIGluZGV4LCBhcnJheSkge1xuICAgICAgICAgICAgICAgIGlmIChlbGVtZW50ID09PSB0aGlzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9LCBwbHVnaW5fb2JqZWN0KTtcbiAgICAgICAgICAgIHJldHVybiBpbmRleDtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLm1vdmVQbHVnaW4gPSBmdW5jdGlvbiAocGx1Z2luX29iamVjdCwgbmV3X2luZGV4KSB7XG4gICAgICAgICAgICBpZiAoc3RhdGUgPT09IDApIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgb2JqLCBpbmRleCA9IHRoaXMuZ2V0UGx1Z2luSW5kZXgocGx1Z2luX29iamVjdCksXG4gICAgICAgICAgICAgICAgaG9sZExvdywgaG9sZEhpZ2gsIGk7XG4gICAgICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICAgICAgICAgIGN1dENoYWluKCk7XG4gICAgICAgICAgICAgICAgaXNvbGF0ZSgpO1xuICAgICAgICAgICAgICAgIG9iaiA9IHBsdWdpbl9saXN0LnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgcGx1Z2luX29iamVjdC5ub2RlLm9udW5sb2FkZWQuY2FsbChwbHVnaW5fb2JqZWN0Lm5vZGUpO1xuICAgICAgICAgICAgICAgIGlmIChuZXdfaW5kZXggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcGx1Z2luX2xpc3QgPSBvYmouY29uY2F0KHBsdWdpbl9saXN0KTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG5ld19pbmRleCA+PSBwbHVnaW5fbGlzdC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgcGx1Z2luX2xpc3QgPSBwbHVnaW5fbGlzdC5jb25jYXQob2JqKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBob2xkTG93ID0gcGx1Z2luX2xpc3Quc2xpY2UoMCwgbmV3X2luZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgaG9sZEhpZ2ggPSBwbHVnaW5fbGlzdC5zbGljZShuZXdfaW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICBwbHVnaW5fbGlzdCA9IGhvbGRMb3cuY29uY2F0KG9iai5jb25jYXQoaG9sZEhpZ2gpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVidWlsZCgpO1xuICAgICAgICAgICAgICAgIGpvaW5DaGFpbigpO1xuICAgICAgICAgICAgICAgIHBsdWdpbl9vYmplY3Qubm9kZS5vbmxvYWRlZC5jYWxsKHBsdWdpbl9vYmplY3Qubm9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5jb3B5UGx1Z2luID0gZnVuY3Rpb24ocGx1Z2luX29iamVjdCwgY29weV9pbmRleCkge1xuICAgICAgICAgICAgaWYgKGNvcHlfaW5kZXggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIGNvcHlfaW5kZXggPSBwbHVnaW5fbGlzdC5sZW5ndGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodHlwZW9mIGNvcHlfaW5kZXggIT0gXCJudW1iZXJcIiB8fCBjb3B5X2luZGV4IDwgMCB8fCBjb3B5X2luZGV4ID4gcGx1Z2luX2xpc3QubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgdGhyb3coXCJQbHVnaW4gY29weSBpbmRleCBvdXRzaWRlIG9mIHRoZSBjaGFpbiBzY29wZS5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gYnVpbGROZXdQbHVnaW4ocGx1Z2luX29iamVjdC5wcm90b3R5cGVPYmplY3QpXG4gICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24oZSl7XG4gICAgICAgICAgICAgICAgdGhyb3coXCJQbHVnaW4gZGlkIG5vdCBnZXQgY3JlYXRlZCEgQWJvcnRpbmdcIik7XG4gICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgICAgICAgICAgICBub2RlLm5vZGUucGFyYW1ldGVycy5zZXRQYXJhbWV0ZXJzQnlPYmplY3QocGx1Z2luX29iamVjdC5ub2RlLnBhcmFtZXRlcnMuZ2V0UGFyYW1ldGVyT2JqZWN0KCkpO1xuICAgICAgICAgICAgICAgIGN1dENoYWluKCk7XG4gICAgICAgICAgICAgICAgaXNvbGF0ZSgpO1xuICAgICAgICAgICAgICAgIHBsdWdpbl9saXN0LnNwbGljZShjb3B5X2luZGV4LCAwLCBub2RlKTtcbiAgICAgICAgICAgICAgICByZWJ1aWxkKCk7XG4gICAgICAgICAgICAgICAgam9pbkNoYWluKCk7XG4gICAgICAgICAgICAgICAgbm9kZS5ub2RlLm9ubG9hZGVkLmNhbGwobm9kZS5ub2RlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIH07XG5cbiAgICAgICAgZnVuY3Rpb24gcmVjdXJzaXZlUHJvY2Vzc2luZyhiYXNlLCBsaXN0KSB7XG4gICAgICAgICAgICB2YXIgbCA9IGxpc3QubGVuZ3RoLFxuICAgICAgICAgICAgICAgIGksIGVudHJ5O1xuICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgICAgIGVudHJ5ID0gbGlzdFtpXTtcbiAgICAgICAgICAgICAgICBiYXNlW2VudHJ5Lm5hbWVdLmFwcGx5KGJhc2UsIGVudHJ5LnBhcmFtZXRlcnMpO1xuICAgICAgICAgICAgICAgIGlmIChlbnRyeS5mZWF0dXJlcyAmJiBlbnRyeS5mZWF0dXJlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlY3Vyc2l2ZVByb2Nlc3NpbmcoYmFzZS5yZXN1bHRbZW50cnkubmFtZV0sIGVudHJ5LmZlYXR1cmVzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLCB7XG4gICAgICAgICAgICAnY2hhaW5TdGFydCc6IHtcbiAgICAgICAgICAgICAgICAndmFsdWUnOiBjaGFpblN0YXJ0XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ2NoYWluU3RvcCc6IHtcbiAgICAgICAgICAgICAgICAndmFsdWUnOiBjaGFpblN0b3BcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnbmFtZSc6IHtcbiAgICAgICAgICAgICAgICAnZ2V0JzogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFjdG9yeU5hbWU7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAnc2V0JzogZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBuYW1lID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmYWN0b3J5TmFtZSA9IG5hbWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhY3RvcnlOYW1lO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAncmVjdXJzaXZlUHJvY2Vzc2luZyc6IHtcbiAgICAgICAgICAgICAgICAnZ2V0JzogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVjdXJzaXZlUHJvY2Vzc2luZztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICB2YXIgTWlkaVN5bnRoZXNpc2VySG9zdCA9IGZ1bmN0aW9uKGZhY3RvcnkpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICBmdW5jdGlvbiBidWlsZE5ld1N5bnRoZXNpc2VyT2JqZWN0KHByb3RvdHlwZU9iamVjdCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgIGlmIChwcm90b3R5cGVPYmplY3QuaGFzTWlkaUlucHV0ID09IGZhbHNlIHx8IHByb3RvdHlwZU9iamVjdC5oYXNNaWRpT3V0cHV0ID09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0IChcIlByb3RvdHlwZSBpcyBub3QgYSBNaWRpU3ludGhlc2lzIHR5cGUuIGhhc01pZGlJbnB1dCBtdXN0IGJlIHRydWUgYW5kIGhhc01pZGlPdXRwdXQgbXVzdCBiZSBmYWxzZVwiKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHByb3RvdHlwZU9iamVjdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJvdG90eXBlT2JqZWN0LmNyZWF0ZVBsdWdpbkluc3RhbmNlKHNlbGYsIGZhbHNlKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMobm9kZSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ1RyYWNrRGF0YSc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogc2VsZi5UcmFja0RhdGFcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgbWlkaVN5bnRoU2xvdDtcbiAgICAgICAgdmFyIGNvbm5lY3Rpb25zID0gW107XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMsIHtcbiAgICAgICAgICAgIFwiY29ubmVjdFwiOiB7XG4gICAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiBmdW5jdGlvbihkZXN0aW5hdGlvbk5vZGUsIG91dHB1dCwgaW5wdXQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRlc3RpbmF0aW9uTm9kZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyAoXCJNdXN0IGRlZmluZSBhbiBBdWRpb05vZGUgb2JqZWN0XCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciBleGlzdHMgPSBjb25uZWN0aW9ucy5maW5kKGZ1bmN0aW9uKGNvbm4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb25uLmRlc3RpbmF0aW9uTm9kZSA9PSBkZXN0aW5hdGlvbk5vZGUgJiYgY29ubi5vdXRwdXQgPT0gb3V0cHV0ICYmIGNvbm4uaW5wdXQgPT0gaW5wdXQ7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXhpc3RzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9ucy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbk5vZGU6ZGVzdGluYXRpb25Ob2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dDpvdXRwdXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQ6aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChtaWRpU3ludGhTbG90ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIk1JREkgU3ludGhlc2lzZXIgaXMgbm90IGxvYWRlZCwgY29ubmVjdGlvbnMgd2lsbCBiZSB2YWxpZGF0ZWQgb24gbG9hZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pZGlTeW50aFNsb3Qubm9kZS5jb25uZWN0KGRlc3RpbmF0aW9uTm9kZSwgb3V0cHV0LCBpbnB1dCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJkaXNjb25uZWN0XCI6IHtcbiAgICAgICAgICAgICAgICBcInZhbHVlXCI6IGZ1bmN0aW9uKGRlc3RpbmF0aW9uTm9kZSwgb3V0cHV0LCBpbnB1dCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGVzdGluYXRpb25Ob2RlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtaWRpU3ludGhTbG90KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWlkaVN5bnRoU2xvdC5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9ucyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBkZXN0aW5hdGlvbk5vZGUgPT0gXCJudW1iZXJcIiAmJiB0eXBlb2Ygb3V0cHV0ID09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dCA9IGRlc3RpbmF0aW9uTm9kZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uTm9kZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb25zID0gY29ubmVjdGlvbnMuZmlsdGVyKGZ1bmN0aW9uKGNvbm4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29ubi5vdXRwdXQgPT0gb3V0cHV0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtaWRpU3ludGhTbG90KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaWRpU3ludGhTbG90Lm5vZGUuZGlzY29ubmVjdChjb25uLmRlc3RpbmF0aW9uTm9kZSwgY29ubi5vdXRwdXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZGVzdGluYXRpb25Ob2RlID09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG91dHB1dCA9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9ucyA9IGNvbm5lY3Rpb25zLmZpbHRlcihmdW5jdGlvbihjb25uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbm4uZGVzdGluYXRpb25Ob2RlID09IGRlc3RpbmF0aW9uTm9kZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWlkaVN5bnRoU2xvdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWlkaVN5bnRoU2xvdC5ub2RlLmRpc2Nvbm5lY3QoY29ubi5kZXN0aW5hdGlvbk5vZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZGVzdGluYXRpb25Ob2RlID09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG91dHB1dCA9PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9ucyA9IGNvbm5lY3Rpb25zLmZpbHRlcihmdW5jdGlvbihjb25uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbm4uZGVzdGluYXRpb25Ob2RlID09IGRlc3RpbmF0aW9uTm9kZSAmJiBjb25uLm91dHB1dCA9PSBvdXRwdXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1pZGlTeW50aFNsb3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pZGlTeW50aFNsb3Qubm9kZS5kaXNjb25uZWN0KGNvbm4uZGVzdGluYXRpb25Ob2RlLCBjb25uLm91dHB1dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBkZXN0aW5hdGlvbk5vZGUgPT0gXCJvYmplY3RcIiAmJiB0eXBlb2Ygb3V0cHV0ID09IFwibnVtYmVyXCIgJiYgdHlwZW9mIGlucHV0ID09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb25zID0gY29ubmVjdGlvbnMuZmlsdGVyKGZ1bmN0aW9uKGNvbm4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29ubi5kZXN0aW5hdGlvbk5vZGUgPT0gZGVzdGluYXRpb25Ob2RlICYmIGNvbm4ub3V0cHV0ID09IG91dHB1dCAmJiBjb25uLmlucHV0ID09IGlucHV0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtaWRpU3ludGhTbG90KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaWRpU3ludGhTbG90Lm5vZGUuZGlzY29ubmVjdChjb25uLmRlc3RpbmF0aW9uTm9kZSwgY29ubi5vdXRwdXQsIGNvbm4uaW5wdXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcInNjaGVkdWxlRXZlbnRcIjoge1xuICAgICAgICAgICAgICAgIFwidmFsdWVcIjogZnVuY3Rpb24obXNnLCB0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtaWRpU3ludGhTbG90KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtaWRpU3ludGhTbG90Lm5vZGUuc2NoZWR1bGVFdmVudChtc2csIHQpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3coXCJNSURJIFN5bnRoZXNpc2VyIG5vdCBsb2FkZWRcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJjYW5jZWxBbGxFdmVudHNcIjoge1xuICAgICAgICAgICAgICAgIFwidmFsdWVcIjogZnVuY3Rpb24obXNnLCB0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtaWRpU3ludGhTbG90KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtaWRpU3ludGhTbG90Lm5vZGUuY2FuY2VsQWxsRXZlbnRzKCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyhcIk1JREkgU3ludGhlc2lzZXIgbm90IGxvYWRlZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcIm1pZGlTeW50aGVzaXNlclwiOiB7XG4gICAgICAgICAgICAgICAgXCJnZXRcIjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWlkaVN5bnRoU2xvdDtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIFwic2V0XCI6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyhcIkNhbm5vdCBzZXQgcmVhZC1vbmx5IGF0dHJpYnV0ZS5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwibG9hZE1pZGlTeW50aGVzaXNlck1vZHVsZVwiOiB7XG4gICAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiBmdW5jdGlvbihwcm90b3R5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvdG90eXBlLmhhc01pZGlJbnB1dCA9PSBmYWxzZSB8fCBwcm90b3R5cGUuaGFzTWlkaU91dHB1dCA9PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0IChcIlByb3RvdHlwZSBpcyBub3QgYSBNaWRpU3ludGhlc2lzIHR5cGUuIGhhc01pZGlJbnB1dCBtdXN0IGJlIHRydWUgYW5kIGhhc01pZGlPdXRwdXQgbXVzdCBiZSBmYWxzZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShwcm90b3R5cGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKHByb3RvdHlwZU9iamVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJ1aWxkTmV3U3ludGhlc2lzZXJPYmplY3QuY2FsbChzZWxmLCBwcm90b3R5cGVPYmplY3QpLmNhdGNoKGZ1bmN0aW9uKGUpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93KFwiUGx1Z2luIGRpZCBub3QgZ2V0IGNyZWF0ZWQhIEFib3J0aW5nXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24obm9kZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWlkaVN5bnRoU2xvdCA9IG5vZGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uKGNvbm4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaWRpU3ludGhTbG90Lm5vZGUuY29ubmVjdChjb25uLmRlc3RpbmF0aW9uTm9kZSwgY29ubi5vdXRwdXQsIGNvbm4uaW5wdXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWlkaVN5bnRoU2xvdDtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHZhciBQbHVnaW5Vc2VySW50ZXJmYWNlTWVzc2FnZUh1YiA9IChmdW5jdGlvbihmYWN0b3J5KXtcbiAgICAgICAgZnVuY3Rpb24gYnVpbGRQbHVnaW5JbnRlcmZhY2UocGx1Z2luX29iamVjdCwgaW50ZXJmYWNlX29iamVjdCkge1xuICAgICAgICAgICAgdmFyIGlmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpZnJhbWVcIik7XG4gICAgICAgICAgICBpZnJhbWUuc3JjID0gaW50ZXJmYWNlX29iamVjdC5zcmM7XG4gICAgICAgICAgICBpZiAoaW50ZXJmYWNlX29iamVjdC53aWR0aCkge1xuICAgICAgICAgICAgICAgIGlmcmFtZS53aWR0aCA9IGludGVyZmFjZV9vYmplY3Qud2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaW50ZXJmYWNlX29iamVjdC5oZWlnaHQpIHtcbiAgICAgICAgICAgICAgICBpZnJhbWUuaGVpZ2h0ID0gaW50ZXJmYWNlX29iamVjdC5oZWlnaHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZnJhbWUuc3R5bGUuYm9yZGVyID0gXCIwXCI7XG4gICAgICAgICAgICByZXR1cm4gaWZyYW1lO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIHNldERlZmF1bHRJbnRlcmZhY2UodXJsLCB3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICAgICAgICBkZWZhdWx0X2ludGVyZmFjZSA9IHtcbiAgICAgICAgICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgICAgICAgICB3aWR0aDogd2lkdGgsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiBoZWlnaHRcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gZGVmYXVsdF9pbnRlcmZhY2U7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gcG9sbEFsbFBsdWdpbnMoKSB7XG4gICAgICAgICAgICBmYWN0b3J5LmdldEFsbFBsdWdpbnMoKS5mb3JFYWNoKGZ1bmN0aW9uKHBsdWdpbikge1xuICAgICAgICAgICAgICAgIHBsdWdpbi5ub2RlLmV4dGVybmFsSW50ZXJmYWNlLnVwZGF0ZUludGVyZmFjZXMoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHZhciBkZWZhdWx0X2ludGVyZmFjZSA9IHtcbiAgICAgICAgICAgIHNyYzogXCJqc2FwX2RlZmF1bHQuaHRtbFwiXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIE9iamVjdC5jcmVhdGUoe1xuICAgICAgICAgICAgXCJzZXREZWZhdWx0SW50ZXJmYWNlXCI6IHNldERlZmF1bHRJbnRlcmZhY2UsXG4gICAgICAgICAgICBcImJ1aWxkUGx1Z2luSW50ZXJmYWNlXCI6YnVpbGRQbHVnaW5JbnRlcmZhY2UsXG4gICAgICAgICAgICBcInBvbGxBbGxQbHVnaW5zXCI6IHBvbGxBbGxQbHVnaW5zXG4gICAgICAgIH0pO1xuICAgIH0pKHRoaXMpO1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcywge1xuICAgICAgICBcImNvbnRleHRcIjoge1xuICAgICAgICAgICAgXCJ2YWx1ZVwiOiBhdWRpb19jb250ZXh0XG4gICAgICAgIH0sXG4gICAgICAgIFwiaGFzQXVkaW9TdGFydGVkXCI6IHtcbiAgICAgICAgICAgIFwiZ2V0XCI6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBhdWRpb1N0YXJ0ZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFwicGx1Z2luUm9vdFVSTFwiOiB7XG4gICAgICAgICAgICBcImdldFwiOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJvb3RVUkw7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJzZXRcIjogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcm9vdFVSTCA9IHQ7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByb290VVJMO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aHJvdyAoXCJDYW5ub3Qgc2V0IHJvb3QgVVJMIHdpdGhvdXQgYSBzdHJpbmdcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFwiY3JlYXRlRmFjdG9yeUNvcHlcIjoge1xuICAgICAgICAgICAgXCJ2YWx1ZVwiOiBmdW5jdGlvbiAoY29udGV4dCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjb3B5RmFjdG9yeShjb250ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJQbHVnaW5HVUlcIjoge1xuICAgICAgICAgICAgXCJ2YWx1ZVwiOiBQbHVnaW5Vc2VySW50ZXJmYWNlTWVzc2FnZUh1YlxuICAgICAgICB9XG4gICAgfSk7XG59XG5cbmV4cG9ydCB7QmFzZVBsdWdpbiwgU3ludGhlc2lzZXJCYXNlUGx1Z2luLCBQbHVnaW5GYWN0b3J5fTtcblxuKGZ1bmN0aW9uKHJvb3QsIGZhY3RvcnkpIHtcbiAgICBpZiAodHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQpIHtcbiAgICAgICAgZGVmaW5lKFwiSlNBUFwiLCBbXSwgZmFjdG9yeSk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgbW9kdWxlID09IFwib2JqZWN0XCIgJiYgbW9kdWxlLmV4cG9ydHMpIHtcbiAgICAgICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcm9vdC5KU0FQID0gZmFjdG9yeSgpO1xuICAgIH1cbn0pKHRoaXMsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIFBsdWdpbkZhY3Rvcnk6IFBsdWdpbkZhY3RvcnksXG4gICAgICAgIEJhc2VQbHVnaW46IEJhc2VQbHVnaW4sXG4gICAgICAgIFN5bnRoZXNpc2VyQmFzZVBsdWdpbjogU3ludGhlc2lzZXJCYXNlUGx1Z2luXG4gICAgfTtcbn0pO1xuIiwidmFyIGc7XG5cbi8vIFRoaXMgd29ya3MgaW4gbm9uLXN0cmljdCBtb2RlXG5nID0gKGZ1bmN0aW9uKCkge1xuXHRyZXR1cm4gdGhpcztcbn0pKCk7XG5cbnRyeSB7XG5cdC8vIFRoaXMgd29ya3MgaWYgZXZhbCBpcyBhbGxvd2VkIChzZWUgQ1NQKVxuXHRnID0gZyB8fCBuZXcgRnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpO1xufSBjYXRjaCAoZSkge1xuXHQvLyBUaGlzIHdvcmtzIGlmIHRoZSB3aW5kb3cgcmVmZXJlbmNlIGlzIGF2YWlsYWJsZVxuXHRpZiAodHlwZW9mIHdpbmRvdyA9PT0gXCJvYmplY3RcIikgZyA9IHdpbmRvdztcbn1cblxuLy8gZyBjYW4gc3RpbGwgYmUgdW5kZWZpbmVkLCBidXQgbm90aGluZyB0byBkbyBhYm91dCBpdC4uLlxuLy8gV2UgcmV0dXJuIHVuZGVmaW5lZCwgaW5zdGVhZCBvZiBub3RoaW5nIGhlcmUsIHNvIGl0J3Ncbi8vIGVhc2llciB0byBoYW5kbGUgdGhpcyBjYXNlLiBpZighZ2xvYmFsKSB7IC4uLn1cblxubW9kdWxlLmV4cG9ydHMgPSBnO1xuIiwibW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihvcmlnaW5hbE1vZHVsZSkge1xuXHRpZiAoIW9yaWdpbmFsTW9kdWxlLndlYnBhY2tQb2x5ZmlsbCkge1xuXHRcdHZhciBtb2R1bGUgPSBPYmplY3QuY3JlYXRlKG9yaWdpbmFsTW9kdWxlKTtcblx0XHQvLyBtb2R1bGUucGFyZW50ID0gdW5kZWZpbmVkIGJ5IGRlZmF1bHRcblx0XHRpZiAoIW1vZHVsZS5jaGlsZHJlbikgbW9kdWxlLmNoaWxkcmVuID0gW107XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG1vZHVsZSwgXCJsb2FkZWRcIiwge1xuXHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcblx0XHRcdGdldDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiBtb2R1bGUubDtcblx0XHRcdH1cblx0XHR9KTtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobW9kdWxlLCBcImlkXCIsIHtcblx0XHRcdGVudW1lcmFibGU6IHRydWUsXG5cdFx0XHRnZXQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gbW9kdWxlLmk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG1vZHVsZSwgXCJleHBvcnRzXCIsIHtcblx0XHRcdGVudW1lcmFibGU6IHRydWVcblx0XHR9KTtcblx0XHRtb2R1bGUud2VicGFja1BvbHlmaWxsID0gMTtcblx0fVxuXHRyZXR1cm4gbW9kdWxlO1xufTtcbiIsIi8qIGdsb2JhbHMgX193ZWJwYWNrX2FtZF9vcHRpb25zX18gKi9cbm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX2FtZF9vcHRpb25zX187XG4iXSwic291cmNlUm9vdCI6IiJ9