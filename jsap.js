var JSAP=function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var r={LinkedStore:function(t){var e={};function n(t,e,i){var o;for(o in t){var u;t.hasOwnProperty(o)&&("object"==typeof t[o]?(t[o].toXML?u=t[o].toXML(i):(u=i.createElement(o),e.appendChild(u),t[o].length?r(t[o],u,i):n(t[o],u,i)),e.appendChild(u)):e.setAttribute(o,t[o]))}}function r(t,e,r){var i,o;t.length,i=t.every(function(t){return"number"==typeof t}),o=t.every(function(t){return"string"==typeof t}),i||o?t.forEach(function(t,n){e.setAttribute("index-"+n,t)}):t.forEach(function(t,i){var o=document.createElement("value");o.setAttribute("index",i),n(t,o,r),e.appendChild(o)})}Object.defineProperties(this,{name:{get:function(){return t},set:function(e){if(void 0!==t)throw"Name is already set"}},addTerm:{value:function(t,n){if("string"!=typeof t&&0===t.length)throw"term must be a string";e[t]=n}},addTerms:{value:function(t){if("object"!=typeof t)throw"addTerms takes an object of term/value pairs";var e;for(e in t)t.hasOwnProperty(e)&&this.addTerm(e,t[e])}},deleteTerm:{value:function(t){this.addTerm(t,void 0)}},getTerm:{value:function(t){if("string"!=typeof t&&0===t.length)throw"term must be a string";return e[t]}},hasTerm:{value:function(t){if("string"!=typeof t&&0===t.length)throw"term must be a string";return e.hasOwnProperty(t)}},toJSON:{value:function(){return JSON.parse(JSON.stringify(e))}},toXML:{value:function(r){var i;return i=r?r.createElement(t):(r=document.implementation.createDocument(null,t,null)).firstElementChild,n(e,i,r),i}}})}};"function"==typeof AudioNode&&void 0===window.importScripts&&(AudioNode.prototype.getInputs=function(){return[this]});var i=function(t,e){var n=[],r=[],i=e,a=new EventTarget;function s(t,e){var n=e.findIndex(function(t){return t===this},t);return-1!==n&&(e.splice(n,1),!0)}void 0===this.context&&(this.context=t.context),void 0===this.factory&&(this.factory=t),this.featureMap=new u(this),this.externalInterface=new f(this),this.parameters=new o(this,this.externalInterface,a),this.addInput=function(t){return n.push(t),n},this.deleteInput=function(t){return s(t,n)},this.addOutput=function(t){return r.push(t),this.outputs},this.deleteOutput=function(t){return s(t,r)},this.start=this.stop=this.onloaded=this.onunloaded=this.deconstruct=function(){},Object.defineProperties(this,{numInputs:{get:function(){return n.length},set:function(){throw"Cannot set the number of inputs of BasePlugin"}},numOutputs:{get:function(){return r.length},set:function(){throw"Cannot set the number of outputs of BasePlugin"}},numParameters:{get:function(){return this.parameters.parameters.length},set:function(){throw"Cannot set the number of parameters of BasePlugin"}},owner:{get:function(){return i},set:function(t){return"object"==typeof t&&(i=t),i}},inputs:{get:function(t){return n},set:function(){throw"Illegal attempt to modify BasePlugin"}},outputs:{get:function(t){return r},set:function(){throw"Illegal attempt to modify BasePlugin"}},connect:{value:function(t){this.outputs[0].connect(t.inpt?t.input:t)}},disconnect:{value:function(t){void 0===t?this.outputs[0].disconnect():this.outputs[0].disconnect(t.input?t.input:t)}},getInputs:{value:function(){return this.inputs}},getOutputs:{value:function(){return this.outputs}},getParameterName:{value:function(){return this.parameters.getParameterNames()}},getParameterByName:{value:function(){return this.parameters.getParameterByName()}},getParameterObject:{value:function(){return this.parameters.getParameterObject()}},setParameterByName:{value:function(t,e){return this.parameters.setParameterByName(t,e)}},setParametersByObject:{value:function(t){return this.parameters.setParametersByObject(t)}},addEventListener:{value:function(t,e){return a.addEventListener(t,e)}},removeEventListener:{value:function(t,e){return a.addEventListener(t,e)}}})},o=function(t,e,n){var r=[];function i(t){return r.find(function(e){return e.name.toLowerCase()===t.toLowerCase()})}function o(t){return r.findIndex(function(e){return e.name.toLowerCase()===t.toLowerCase()})}function u(){var t={};return r.forEach(function(e){t[e.name]=e}),t}function a(t){return-1===r.findIndex(function(e){return e===t},t)&&r.push(t),t}function s(t,e,n){var r,i,o,u;r=i=function(t){return t},o=function(){},Object.defineProperties(this,{name:{value:e},owner:{value:t},update:{get:function(){return r},set:function(t){if("function"!=typeof t)throw"Must be a callback function";if(void 0===t(0))throw"Function must return a value";r=t}},translate:{get:function(){return i},set:function(t){if("function"!=typeof t)throw"Must be a callback function";if(void 0===t(0))throw"Function must return a value";i=t}},trigger:{get:function(){return o},set:function(t){if("function"!=typeof t)throw"Must be a callback function";o=t}},bindToAudioParam:{value:function(t){if("object"!=typeof t||void 0===t.value)throw"Must be an AudioParam object from an AudioNode";var e=this.update(this.value);(u=t).value=e}},boundAudioParam:{get:function(){return u}},actionList:{value:[]}})}function c(t,e,r,i,o){s.call(this,t,e,"Number");var u,a=r;Object.defineProperties(this,{destroy:{value:function(){t=e=r=i=o=a=u=void 0}},minimum:{value:i},maximum:{value:o},defaultValue:{value:r},value:{get:function(){return this.boundAudioParam?this.translate(this.boundAudioParam.value):a},set:function(t){if(this.minimum&&(t=Math.max(t,this.minimum)),this.maximum&&(t=Math.min(t,this.maximum)),u&&(t=Math.round(t/u),t*=u),this.boundAudioParam&&(this.boundAudioParam.value=this.update(t)),a!==t){a=t;var e=new Event("parameterset");n.dispatchEvent(e)}this.trigger()}},stepSize:{get:function(){return u},set:function(t){if(!isFinite(t)||t<0)throw"Invalid step size";u=t}}})}function f(t,e,r,i){s.call(this,t,e,"String");var o=r;Object.defineProperties(this,{destroy:{value:function(){t=e=r=i=o=void 0}},maxLength:{value:i},defaultValue:{value:r},value:{get:function(){return this.boundAudioParam?this.translate(this.boundAudioParam.value):o},set:function(t){if(i&&t.length>i)throw"String longer than "+i+" characters";if(this.boundAudioParam&&(this.boundAudioParam.value=this.update(t)),o!==t){o=t;var e=new Event("parameterset");n.dispatchEvent(e)}this.trigger()}}})}function l(t,e){s.call(this,t,e,"Button");var n=function(){};Object.defineProperties(this,{destroy:{value:function(){t=e=void 0}},onclick:{get:function(){return n},set:function(t){if("function"!=typeof t)throw"onclick must be a function";n=t}}})}function h(t,e,r,i,o){s.call(this,t,e,"Button");var u=r;function a(t){if(this.boundAudioParam&&(this.boundAudioParam.value=this.update(t)),function(t){var e={time:new Date,value:t};this.actionList.push(e)}.call(this,t),u!==t){u=t;var e=new Event("parameterset");n.dispatchEvent(e)}return this.trigger(),t}Object.defineProperties(this,{destroy:{value:function(){t=e=void 0}},defaultValue:{value:r},minState:{value:i},maxState:{value:o},value:{get:function(){return this.boundAudioParam?this.translate(this.boundAudioParam.value):u},set:function(t){if(t<i)throw"Set value is less than "+i;if(t>o)throw"Set value is greater than "+o;return a.call(this,t)}},increment:{value:function(){var t=u+1;return t>o&&(t=i),a.call(this,t)}},decrement:{value:function(){var t=u-1;return t<i&&(t=o),a.call(this,t)}}})}function d(t,e,r,i){s.call(this,t,e,"Button");var o=i.indexOf(r);function u(t){var e=i.indexOf(t);if(void 0===e||e<0)throw"Not in list range";if(this.boundAudioParam&&(this.boundAudioParam.value=this.update(t)),function(t){var e={time:new Date,value:t};this.actionList.push(e)}.call(this,t),o!==e){o=e;var r=new Event("parameterset");n.dispatchEvent(r)}return this.trigger(),i[o]}Object.defineProperties(this,{destroy:{value:function(){t=e=void 0}},defaultValue:{value:r},listValues:{get:function(){var t=[];return i.forEach(function(e){t.push(e)}),v}},value:{get:function(){return this.boundAudioParam?this.translate(this.boundAudioParam.value):i[o]},set:function(t){if(t<minState)throw"Set value is less than "+minState;if(t>maxState)throw"Set value is greater than "+maxState;return u.call(this,t)}},increment:{value:function(){var t=_value+1;return t>maxState&&(t=minState),u.call(this,t)}},decrement:{value:function(){var t=_value-1;return t<minState&&(t=maxState),u.call(this,t)}}})}c.prototype=Object.create(s.prototype),c.prototype.constructor=c,f.prototype=Object.create(s.prototype),f.prototype.constructor=f,l.prototype=Object.create(s.prototype),l.prototype.constructor=l,h.prototype=Object.create(s.prototype),h.prototype.constructor=h,d.prototype=Object.create(s.prototype),d.prototype.constructor=d,Object.defineProperties(this,{createNumberParameter:{value:function(e,n,r,i){if("string"!=typeof e||"number"!=typeof n||void 0!==r&&"number"!=typeof r||void 0!==i&&"number"!=typeof i)throw"Invlid constructor";if(-1!==o(e))throw"Parameter with name '"+e+"' already exists";var u=new c(t,e,n,r,i);return a(u),u}},createStringParameter:{value:function(e,n,r){if("string"!=typeof e||"string"!=typeof n||void 0!==r&&"number"!=typeof r)throw"Invlid constructor";if(-1!==o(e))throw"Parameter with name '"+e+"' already exists";var i=new f(t,e,n,r);return a(i),i}},createButtonParameter:{value:function(e){if("string"!=typeof e)throw"Invalid constructor";if(-1!==o(e))throw"Parameter with name '"+e+"' already exists";var n=new l(t,e);return a(n),n}},createSwitchParameter:{value:function(e,n,r,i){if("string"!=typeof e||"number"!=typeof n||"number"!=typeof r||"number"!=typeof i)throw"Invlid constructor";if(-1!==o(e))throw"Parameter with name '"+e+"' already exists";var u=new h(t,e,n,r,i);return a(u),u}},createListParameter:{value:function(e,n,r){if("string"!=typeof e||void 0===n||!Array.isArray(r))throw"Invlid constructor";if(!1===r.includes(n)&&hrow("Invlid constructor - default value missing"),-1!==o(e))throw"Parameter with name '"+e+"' already exists";var i=new d(t,e,n,r);return a(i),i}},createParameter:{value:function(){throw"This function is now deprecated"}},getParameterName:{value:function(){var t,e=[];for(t=0;t<r.length;t++)e.push(r[t].name);return e}},getParameterByName:{value:function(t){return i(t)}},getParameterObject:{value:function(){return u()}},getParameterNames:{value:function(){var t=[];return r.forEach(function(e){t.push(e.name)}),t}},setParameterByName:{value:function(t,e){var n=i(t);n&&(n.value=e)}},deleteParameter:{value:function(t){var e=r.findIndex(function(e){return e===t},t);return e>=0&&(r.splice(e,1),t.destroy(),!0)}},deleteAllParameters:{value:function(t){return r.forEach(function(t){t.destroy()}),r=[],!0}},setParametersByObject:{value:function(t){var e;for(e in t)if(t.hasOwnProperty(e))if("object"==typeof t[e])this.setParameterByName(e,t[e].value);else{if("number"!=typeof t[e])throw"Cannot set "+e+": Not a valid object";this.setParameterByName(e,t[e])}}},parameters:{get:function(){return u()},set:function(){throw"Cannot set, use .setParameterBy...()"}}})},u=function(t){this.plugin=t,this.Receiver=new a(this,t.factory.FeatureMap),this.Sender=new s(this,t.factory.FeatureMap),Object.defineProperty(this,"onfeatures",{get:function(){return this.Receiver.onfeatures},set:function(t){return this.Receiver.onfeatures=t,t}})},a=function(t,e){function n(t,e){if(void 0===t)throw"Source plugin must be defined";if(void 0===e)throw"FeatureObject must be defined";if("number"!=typeof e.outputIndex||"number"!=typeof e.frameSize||"object"!=typeof e.features)throw"Malformed featureObject";return!0}var r=function(){};this.requestFeatures=function(t){var e;for(e=0;e<t.length;e++)this.requestFeaturesFromPlugin(t[e].plugin,{outputIndex:t[e].outputIndex,frameSize:t[e].frameSize,features:t[e].features})},this.requestFeaturesFromPlugin=function(r,i){n(r,i),e.requestFeatures(t.plugin,r,i)},this.cancelFeaturesFromPlugin=function(r,i){n(r,i),e.deleteFeatures(t.plugin,r,i)},this.cancelAllFeaturesFromPlugin=function(n){if(void 0===n)throw"Source plugin must be defined";e.deleteFeatures(t.plugin,n)},this.cancelAllFeatures=function(){e.deleteFeatures(t.plugin)},this.postFeatures=function(t){"function"==typeof r&&r(t)},Object.defineProperty(this,"onfeatures",{get:function(){return r},set:function(t){return"function"==typeof t&&(r=t,!0)}})},s=function(t,e){var n=function(e,n,r){var i=[],o=function(e,n){this.extractor=t.plugin.factory.context.createAnalyser(),this.extractor.fftSize=n,e.connect(this.extractor),this.features=[],Object.defineProperty(this,"frameSize",{value:n});var r=this.factory.recursiveProcessing;function i(t){var e={numberOfChannels:1,results:[]};r(t,this.features),e.results[0]={channel:0,results:JSON.parse(t.toJSON())},this.postFeatures(t.length,e)}this.setFeatures=function(t){this.features=t,0===this.features.length?this.extractor.clearCallback():this.extractor.frameCallback(i,this)}},u=function(e,n){var r=new Worker("jsap/feature-worker.js");r.onerror=function(t){console.error(t)},this.setFeatures=function(i){var o=this,u={state:1,sampleRate:t.plugin.factory.context.sampleRate,featureList:i,numChannels:e.numberOfOutputs,frameSize:this.frameSize};this.features=i,i&&i.length>0?(r.onmessage=function(t){1===t.data.state?(r.onmessage=function(t){this.postFeatures(n,t.data.response)}.bind(o),o.extractor.onaudioprocess=function(t){var e,n=[];for(e=0;e<t.inputBuffer.numberOfChannels;e++)n[e]=t.inputBuffer.getChannelData(e);r.postMessage({state:2,frames:n})}.bind(o)):r.postMessage(u)},r.postMessage({state:0})):this.extractor.onaudioprocess=void 0},this.extractor=t.plugin.factory.context.createScriptProcessor(n,e.numberOfOutputs,1),e.connect(this.extractor),this.extractor.connect(t.plugin.factory.context.destination),Object.defineProperty(this,"frameSize",{value:n})};this.addExtractor=function(t){var e;return e=window.Worker?new u(n,t):new o(n,t),i.push(e),Object.defineProperty(e,"postFeatures",{value:function(t,e){var n={outputIndex:r,frameSize:t,results:e};this.postFeatures(n)}.bind(this)}),e},this.findExtractor=function(t){var e=t;return i.find(function(t){return t.frameSize===e})},this.deleteExtractor=function(t){}},r=[];this.updateFeatures=function(e){var i;for(i=0;i<e.length;i++){if(void 0===r[i]){if(i>t.plugin.numOutputs)throw"Requested an output that does not exist";r[i]=new n(t.plugin,t.plugin.outputs[i],i),Object.defineProperty(r[i],"postFeatures",{value:function(t){this.postFeatures(t)}.bind(this)})}var o;for(o=0;o<e[i].length;o++){var u=r[i].findExtractor(e[i][o].frameSize);u||(u=r[i].addExtractor(e[i][o].frameSize)),u.setFeatures(e[i][o].featureList)}}},this.postFeatures=function(e){t.plugin.factory.FeatureMap.postFeatures({plugin:t.plugin.pluginInstance,outputIndex:e.outputIndex,frameSize:e.frameSize,results:e.results})},e.createSourceMap(this,t.plugin.pluginInstance)},c=function(t,e,n){console.log("DEPRECATED!!"),console.log("The class PluginUserInterface has been deprecated"),console.log("Please look at the documents for the new methods for building plugins"),this.processor=t,this.root=document.createElement("div"),e>0&&(this.root.style.width=e+"px"),n>0&&(this.root.style.height=n+"px"),this.dim={width:e,height:n},this.intervalFunction=null,this.updateInterval=null,this.PluginParameterInterfaces=[];var r=function(t,e,n,r){this.input=t,this.processor=n,this.GUI=r,this.AudioParam=e,this.handleEvent=function(t){this.AudioParam.value=this.input.value},this.input.addEventListener("change",this),this.input.addEventListener("mousemove",this),this.input.addEventListener("click",this)};this.createPluginParameterInterfaceNode=function(t,e){var n=new r(t,e,this.processor,this);return this.PluginParameterInterfaces.push(n),n},this.update=function(){}};c.prototype.getRoot=function(){return this.root},c.prototype.getDimensions=function(){return this.dim},c.prototype.getWidth=function(){return this.dim.width},c.prototype.getHeight=function(){return this.dim.height},c.prototype.beginCallbacks=function(t){void 0===t&&(t=250),null===this.intervalFunction&&(this.updateInterval=t,this.intervalFunction=window.setInterval(function(){this.update()}.bind(this),250))},c.prototype.stopCallbacks=function(){null!==this.intervalFunction&&(window.clearInterval(this.intervalFunction),this.updateInterval=null,this.intervalFunction=null)},c.prototype.loadResource=function(t){return new Promise(function(e,n){var r=new XMLHttpRequest;r.open("GET",t),r.onload=function(){200===r.status?e(r.response):n(Error(r.statusText))},r.onerror=function(){n(Error("Network Error"))},r.send()})},c.prototype.clearGUI=function(){this.stopCallbacks(),this.root.innerHTML=""};var f=function(t){function e(e){var n,r,i={message:"updateParameters",parameters:(n=t.parameters.getParameterNames(),r={},n.forEach(function(e){var n=t.parameters.getParameterByName(e);r[e]={value:n.value,maximum:n.maximum,minimum:n.minimum,defaultValue:n.defaultValue,type:n.constructor.name,name:e}}),r)};return e&&(i.sender_id=e),i}function n(t){var n=e(t);r.forEach(function(t){t.postMessage(n)})}var r=[];window.onmessage=function(r){switch(r.data.message){case"setParameterByName":r.data.parameter&&(r.data.parameter.name&&r.data.parameter.value&&t.parameters.setParameterByName(r.data.parameter.name,r.data.parameter.value),n(r.data.sender_id));break;case"setParametersByObject":r.data.parameter&&(!function(e){var n=JSON.parse(e.message.parameters);Object.keys(n).forEach(function(e){t.parameters.setParameterByName(e,n[e].value)})}(r),n(r.data.sender_id));break;case"requestParameters":r.source.postMessage(e());break;default:throw'Unknown message type "'+r.data.message+'"'}},Object.defineProperties(this,{updateInterfaces:{value:function(){n()}},closeWindows:{value:function(){for(1;r.length>0;){r.pop().close()}}},registerWindow:{value:function(t){return!r.includes(t)&&(r.push(t),!0)}}})};"undefined"!=typeof window&&(window.BasePlugin=i);var l=function(t,e){var n=!1,r=!1;i.call(this,t,e),Object.defineProperties(this,{addInput:{value:function(){throw'Cannot add input to type "SynthesiserBasePlugin"'}},deleteInput:{value:function(){throw'Cannot delete input to type "SynthesiserBasePlugin"'}},scheduleEvent:{value:function(t,e){n||(console.warning("WARNING - .scheduleEvent is not overridden"),n=!0)},writable:!0},cancelAllEvents:{value:function(){r||(console.warning("WARNING - .cancelAllEvents is not overridden"),r=!0)},writable:!0}})};function h(t,e){var n=[],i=[],o=[],u=[],a=0,s=!1;function c(t){return!1===t.url.startsWith("http")&&void 0!==e&&e.startsWith("http")&&(t.url=e+t.url),new Promise(function(e,n){var r=new XMLHttpRequest;r.open("GET",t.url),r.onreadystatechange=function(){if(4==r.readyState){var n=document.createElement("script");n.textContent=r.responseText,document.getElementsByTagName("head")[0].appendChild(n),e(t)}},r.send()})}this.loadResource=function(t){return new Promise(function(e,n){"object"!=typeof t?n("Error"):"string"!=typeof t.url?n("resourceObject.url must be a string"):"function"!=typeof t.test?n("resourceObject.test must be a function"):e(t)}).then(function(t){var e=t.test();if(!1!==e&&!0!==e)throw"resourceObject.test must return true or false";switch(t.type||(t.type="javascript"),t.type=t.type.toLowerCase(),t.type){case"javascript":return e?new Promise(function(e,n){"string"==typeof t.returnObject?window.hasOwnProperty(t.returnObject)?e(window[t.returnObject]):n(!1):e(!0)}):c(t).then(function(t){return"string"!=typeof t.returnObject||!!window.hasOwnProperty(t.returnObject)&&window[t.returnObject]});default:throw"Invalid type "+String(t.type)}})},this.loadPluginScript=function(t){if(t){if("string"!=typeof t.returnObject)throw"resourceObject.returnObject must be the name of the prototype function";return this.loadResource(t).then(function(t){return this.addPrototype(t)}.bind(this))}};var f=function(e,n){this.next_node=void 0;var r=!1,i=t.createGain(),o=t.createGain();i.connect(n.getInputs()[0]),n.getOutputs()[0].connect(o),this.bypass=function(t){return(t=!0===t)===r?r:(t?(i.disconnect(),i.connect(o),r=!0):(i.disconnect(),i.connect(n.getInputs()[0]),r=!1),r)},this.isBypassed=function(){return r},this.reconnect=function(t){this.connect(t)},this.connect=function(t){return void 0!==this.next_node&&this.disconnect(),void 0!==t&&void 0!==t.input&&(this.next_node=t,o.connect(this.next_node.input),!0)},this.disconnect=function(){void 0!==this.next_node&&(o.disconnect(this.next_node.input),this.next_node=void 0)},this.destroy=function(){n.destroy()},Object.defineProperties(this,{id:{value:e},node:{value:n},input:{get:function(){return i}},output:{get:function(){return o}},bypassed:{get:function(){return r}}})};f.prototype.factory=this;var l=function(e,n){var r=t.createGain();n.getOutputs()[0].connect(r),this.destroy=function(){n.destroy()},Object.defineProperties(this,{id:{value:e},node:{value:n},output:{get:function(){return r}}})},d=function(t,e){var n=this;function r(t,e){if(e)return e.then(c(t));var n=c(t);return n.then(function(t){if(void 0!==t.resources&&t.resources.length>0)for(var e=0;e<t.resources.length;e++)n=r(t.resources[e],n)}),n}function i(t){return t.hasOwnProperty("length")&&t.length>0?i(t[t.length-1]):t.hasOwnProperty("resources")?i(t.resources):t.test}Object.defineProperties(this,{name:{value:t.prototype.name},proto:{value:t},version:{value:t.prototype.version},uniqueID:{value:t.prototype.uniqueID},hasMidiInput:{value:t.prototype.hasMidiInput||!1},hasMidiOutput:{value:t.prototype.hasMidiOutput||!1}}),this.createPluginInstance=async function(r,i){var o=function(r){return Promise.all(s).then(function(){return new Promise(function(n,i){!function(){for(var t=!0,e=0;e<s.length;e++)if(1!==s[e].state||!s[e].test()){t=!1;break}return t}()?i(new Error("Plugin not ready")):n(new t(e,r))})}).then(function(t){return new Promise(function(e,n){if(t.initialise)return t.initialise().then(function(){e(t)});e(t)})}).then(function(r){var i;if(!0!==r.hasMidiInput&&!0!==r.hasMidiOutput)i=new f(a++,r);else{if(!0!==r.hasMidiInput||!0===r.hasMidiOutput)throw"No Instance Holder Available!";i=new l(a++,r)}return Object.defineProperties(r,{pluginInstance:{value:i},prototypeObject:{value:n},name:{value:t.prototype.name},version:{value:t.prototype.version},uniqueID:{value:t.prototype.uniqueID},SesionData:{value:e.SessionData},UserData:{value:e.UserData}}),Object.defineProperties(i,{prototypeObject:{value:n},externalInterface:{value:r.externalInterface}}),e.registerPluginInstance(i),i})}(r);return!0===i?o:(await o,o)};var o,u,s=[];if(t.prototype.resources)for(var h=0;h<t.prototype.resources.length;h++){var d=t.prototype.resources[h];switch(d.type=d.type.toLowerCase(),d.type){case"css":o=d.url,u=void 0,(u=document.createElement("link")).setAttribute("rel","stylesheet"),u.setAttribute("type","text/css"),u.setAttribute("href",o),document.getElementsByTagName("head")[0].appendChild(u);break;case"javascript":var p={promise:r(d),state:0,complete:function(){this.state=1},test:i(d)};p.promise.then(p.complete.bind(p)),s.push(p);break;default:throw"Could not load "+d.url+", invalid resource.type"}}this.getResourcePromises=function(){return s}};this.addPrototype=function(t){var e=this;return new Promise(function(e,n){"function"!=typeof t?n("The Prototype must be a function!"):"string"!=typeof t.prototype.name||0===t.prototype.name.length?n("Malformed plugin. Name not defined"):"string"!=typeof t.prototype.version||0===t.prototype.version.length?n("Malformed plugin. Version not defined"):"string"!=typeof t.prototype.uniqueID||0===t.prototype.uniqueID.length?n("Malformed plugin. uniqueID not defined"):e(t)}).then(function(t){var n={proto:t,name:t.prototype.name,version:t.prototype.version,uniqueID:t.prototype.uniqueID},r=o.find(function(t){var e,n=0;for(e in this)t[e]===this[e]&&n++;return 4===n},n);if(r)throw"The plugin must be unique!";return r=new d(t,e),o.push(r),Object.defineProperties(r,{factory:{value:e}}),r})},this.getPrototypes=function(){return o},this.getAudioPluginPrototypes=function(){return o.filter(function(t){return 0==t.hasMidiInput&&0==t.hasMidiOutput})},this.getMidiSynthPrototypes=function(){return o.filter(function(t){return 1==t.hasMidiInput&&0==t.hasMidiOutput})},this.getMidiPluginPrototypes=function(){return o.filter(function(t){return 1==t.hasMidiInput&&1==t.hasMidiOutput})},this.getAllPlugins=function(){return u},this.getAllPluginsObject=function(){var t,e={factory:this,subFactories:[]};for(t=0;t<n.length;t++)e.subFactories.push({subFactory:n[t],plugins:n[t].getPlugins()});return e},this.createSubFactory=function(t,e){return console.warn('DEPRECATED - This function will be deprecated in favour of "createAudioPluginChainManager"'),this.createAudioPluginChainManager(t,e)},this.destroySubFactory=function(t,e){return console.warn('DEPRECATED - This function will be deprecated in favour of "destroyAudioPluginChainManager"'),this.destroyAudioPluginChainManager(t,e)},this.createAudioPluginChainManager=function(t,e){var r=new m(this,t,e);return Object.defineProperties(r,{SessionData:{value:this.SessionData},UserData:{value:this.UserData}}),n.push(r),r},this.destroyAudioPluginChainManager=function(t){var e=n.findIndex(function(t){return t===this},t);e>=0&&(n.splice(e,1),t.destroy())},this.createMidiSynthesiserHost=function(t){var e=new g(t);return Object.defineProperties(e,{SessionData:{value:this.SessionData},UserData:{value:this.UserData}}),i.push(e),e},this.destroyMidiSynthesiserHost=function(t){var e=i.findIndex(function(t){return t===this},t);e>=0&&(i.splice(e,1),t.destroy())},this.registerPluginInstance=function(t){if(u.find(function(t){return t===this},t))throw"Plugin Instance not unique";return u.push(t),s&&t.node.start.call(t.node),!0},this.deletePlugin=function(t){var e=u.findIndex(function(e){return e.id===t});e>=0&&u.splice(e,1)[0].node.externalInterface.closeWindows()},this.audioStart=function(){s||(u.forEach(function(t){t.node.start.call(t.node)}),s=!0)},this.audioStop=function(){s&&(u.forEach(function(t){t.node.stop.call(t.node)}),s=!1)};this.FeatureMap=new function(){var t=[],e=function(t){this.name=t.name,this.parameters=this.parameters,this.features=[]};function n(t,e){return t.find(function(t){return t.name===this.name},e)}function r(t,n){var r=new e(t);return n.push(r),r}var i=function(t,e){var i=[];function u(t){return i.find(function(t){return t.outputIndex===this.outputIndex&&t.frameSize===this.frameSize},t)}function a(){function e(t){var i,o=[];for(i=0;i<t.length;i++){var u=n(o,t[i]);(!u||t.parameters&&0!==t[i].parameters.length)&&(u=r(t[i],o)),t[i].features&&t[i].features.length>0&&(u.features=e(t[i].features))}return o}var o,u=[];for(o=0;o<i.length;o++){void 0===u[i[o].outputIndex]&&(u[i[o].outputIndex]=[]);var a=u[i[o].outputIndex].find(function(t){return t.frameSize===this.frameSize},i[o]);a||(a={frameSize:i[o].frameSize,featureList:void 0},u[i[o].outputIndex].push(a)),a.featureList=e(i[o].getFeatureList())}t.updateFeatures(u)}this.getSourceInstance=function(){return e},this.getSender=function(){return t},this.requestFeatures=function(t,e){var n=u(e);n||(n={outputIndex:e.outputIndex,frameSize:e.frameSize,requestors:[],getFeatureList:function(){var t,e=[];for(t=0;t<this.requestors.length;t++)e=e.concat(this.requestors[t].getFeatureList());return e}},i.push(n));var r=n.requestors.find(function(t){return t.getRequestorInstance()===this},t);r||(r=new o(t),n.requestors.push(r)),r.addFeatures(e),a()},this.findFrameMap=function(t,e){return i.find(function(n){return n.outputIndex===t&&n.frameSize===e})},this.cancelFeatures=function(t,e){if(void 0===e)i.forEach(function(e){var n=e.requestors.findIndex(function(e){return e.getRequestorInstance()===t});n>=0&&e.requestors.splice(n,1)});else{var n=u(e);if(!n)return;var r=n.requestors.find(function(t){return t.getRequestorInstance()===this},t);if(!r)return;r.deleteFeatures(e)}a()}},o=function(t){var e=[];t.node.featureMap.Receiver,this.getRequestorInstance=function(){return t},this.addFeatures=function(t){!function t(e,i){var o;for(o=0;o<i.length;o++){var u=n(e,i[o]);(!u||i[o].parameters&&0!==i[o].parameters.length)&&(u=r(i[o],e)),void 0!==i[o].features&&i[o].features.length>0&&t(u.features,i[o].features)}}(e,t.features)},this.deleteFeatures=function(t){!function t(r,i){var o,u=i.length;for(o=0;o<u;o++){var a=n(r,i[o]);a>=0&&(i[a].features&&i[a].features.length>0?t(r[a].features,i[a].features):e.splice(a,0))}}(e,t.features)},this.getFeatureList=function(){return e},this.postFeatures=function(n){var r,i={plugin:n.plugin,outputIndex:n.outputIndex,frameSize:n.frameSize,features:{numberOfChannels:n.results.numberOfChannels,results:[]}};function o(t,e,n){var r;function i(t){return t.name===r}for(r in e)if(e.hasOwnProperty(r)){var u=n.find(i);u&&(e[r].constructor===Object&&u.results?(t[r]={},o(t[r],e[r],u.results)):t[r]=e[r])}}for(r=0;r<n.results.numberOfChannels;r++)i.features.results[r]={},o(i.features.results[r],n.results.results[r].results,e);t.node.featureMap.Receiver.postFeatures(i)}};function u(e){return t.findIndex(function(t){return t.getSender()===this},e)}function a(t,e,n){var r=t[u(e)];if(!r&&!(r=t[u(n)]))throw"Could not locate source map";return r}this.createSourceMap=function(e,n){var r=new i(e,n);return t.push(r),r},this.deleteSourceMap=function(e){var n=u(e);if(-1===n)throw"Could not find the source map for the plugin";t.splice(n,1)},this.getPluginSender=function(t){return t.constructor===f&&(t=t.node),t.featureMap.Sender},this.requestFeatures=function(e,n,r){e.constructor!==f&&(e=e.pluginInstance);var i=this.getPluginSender(n);a(t,n,i).requestFeatures(e,r)},this.deleteFeatures=function(e,n,r){if(e.constructor!==f&&(e=e.pluginInstance),void 0===n)t.forEach(function(t){t.cancelFeatures(e)});else{var i=this.getPluginSender(n);a(t,n,i).cancelFeatures(e,r)}},this.getFeatureList=function(t,e){},this.postFeatures=function(e){var n=t[u(e.plugin)];if(!n&&!(n=t[u(this.getPluginSender(e.plugin))]))throw"Plugin Instance not loaded!";n.findFrameMap(e.outputIndex,e.frameSize).requestors.forEach(function(t){t.postFeatures(this)},e)}},Object.defineProperty(this.FeatureMap,"factory",{value:this});var p=[];this.createStore=function(t){var e=new r.LinkedStore(t);return p.push(e),e},this.getStores=function(){return p},this.findStore=function(t){return p.find(function(e){return e.name===t})},this.SessionData=new r.LinkedStore("Session"),this.UserData=new r.LinkedStore("User");var v=function(t,e){var n,r=function(e,n){var r=[],i=function(e,n){this.extractor=e.context.createAnalyser(),this.extractor.fftSize=n,e.connect(this.extractor),this.features=[],Object.defineProperty(this,"frameSize",{value:n});var r=t.recursiveProcessing;function i(t){var e={numberOfChannels:1,results:[]};r(t,this.features),e.results[0]={channel:0,results:JSON.parse(t.toJSON())},this.postFeatures(t.length,e)}this.setFeatures=function(t){this.features=t,0===this.features.length?this.extractor.clearCallback():this.extractor.frameCallback(i,this)},this.rejoinExtractor=function(){e.connect(this.extractor)}},o=function(t,e){var n=new Worker("jsap/feature-worker.js");n.onerror=function(t){console.error(t)},this.setFeatures=function(r){var i=this,o={state:1,sampleRate:t.context.sampleRate,featureList:r,numChannels:t.numberOfOutputs,frameSize:this.frameSize};this.features=r,r&&r.length>0?(n.onmessage=function(t){1===t.data.state?(n.onmessage=function(t){this.postFeatures(e,t.data.response)}.bind(i),i.extractor.onaudioprocess=function(t){var e,r=[];for(e=0;e<t.inputBuffer.numberOfChannels;e++)r[e]=t.inputBuffer.getChannelData(e);n.postMessage({state:2,frames:r})}.bind(i)):n.postMessage(o)},n.postMessage({state:0})):this.extractor.onaudioprocess=void 0},this.rejoinExtractor=function(){t.connect(this.extractor)},this.extractor=t.context.createScriptProcessor(e,t.numberOfOutputs,1),t.connect(this.extractor),this.extractor.connect(t.context.destination),Object.defineProperty(this,"frameSize",{value:e})};this.addExtractor=function(t){var e;return e=window.Worker?new o(n,t):new i(n,t),r.push(e),Object.defineProperty(e,"postFeatures",{value:function(t,e){var n={outputIndex:0,frameSize:t,results:e};this.postFeatures(n)}.bind(this)}),e},this.findExtractor=function(t){var e=t;return r.find(function(t){return Number(t.frameSize)===Number(e)})},this.rejoinExtractors=function(){r.forEach(function(t){t.rejoinExtractor()})},this.deleteExtractor=function(t){}};this.updateFeatures=function(e){var i;for(i=0;i<e.length;i++){if(void 0===n){if(i>1)throw"Requested an output that does not exist";n=new r(t,t.chainStart),Object.defineProperty(n,"postFeatures",{value:function(t){this.postFeatures(t)}.bind(this)})}var o;for(o=0;o<e[i].length;o++){var u=n.findExtractor(e[i][o].frameSize);u||(u=n.addExtractor(e[i][o].frameSize)),u.setFeatures(e[i][o].featureList)}}},this.rejoinExtractors=function(){n&&n.rejoinExtractors()},this.postFeatures=function(t){e.postFeatures({plugin:this,outputIndex:t.outputIndex,frameSize:t.frameSize,results:t.results})},e.createSourceMap(this,void 0)},m=function(t,e,n){var i=[],o=e,u=n,a="",s=1,c=new v(this,t.FeatureMap);function f(){for(var t=0,e=i.length-1;t<e;){var n=i[t++],r=i[t];n.reconnect(r)}}function l(){i.forEach(function(t){t.disconnect()})}function h(){return i.length>0?(o.disconnect(i[0].input),i[i.length-1].output.disconnect(u)):o.disconnect(u),!0}function d(){i.length>0?(o.connect(i[0].input),i[i.length-1].output.connect(u)):o.connect(u),c.rejoinExtractors()}function p(t){return new Promise(function(e,n){0===s?n("SubFactory has been destroyed! Cannot add new plugins"):e(t)}).then(function(){return t.createPluginInstance(self,!1).then(function(t){return Object.defineProperties(t,{TrackData:{value:self.TrackData}}),t})})}function m(t,e){var n,r,i=e.length;for(n=0;n<i;n++)t[(r=e[n]).name].apply(t,r.parameters),r.features&&r.features.length>0&&m(t.result[r.name],r.features)}this.parent=t,o.disconnect(),o.connect(n),this.TrackData=new r.LinkedStore("Track"),this.PluginData=new r.LinkedStore("Plugin"),this.featureSender=c,this.getFeatureChain=function(){},this.bypassPlugin=function(t,e){!1!==i.includes(t)&&t.bypass(e)},this.getPrototypes=function(){return this.parent.getPrototypes()},this.getFactory=function(){return this.parent},this.destroy=function(t){var e;for(e=0;e<i.length;e++)this.destroyPlugin(i[e]);o.disconnect(),!0===t&&o.connect(u)},this.createPlugin=function(t){return p(t).catch(function(t){throw"Plugin did not get created! Aborting"}).then(function(t){return h(),i.push(t),l(),f(),d(),t.node.onloaded.call(t.node),t})},this.destroyPlugin=function(t){if(0!==s){var e=this.getPluginIndex(t);e>=0&&(h(),t.node.stop.call(t.node),t.node.onunloaded.call(t.node),t.node.deconstruct.call(t.node),i.splice(e,1),this.parent.deletePlugin(t.id),l(),f(),d())}},this.getPlugins=function(){return i},this.getAllPlugins=function(){return this.parent.getAllPluginsObject()},this.getPluginIndex=function(t){if(0!==s)return i.findIndex(function(t,e,n){return t===this},t)},this.movePlugin=function(t,e){if(0!==s){var n,r,o,u=this.getPluginIndex(t);u>=0&&(h(),l(),n=i.splice(u,1),t.node.onunloaded.call(t.node),0===e?i=n.concat(i):e>=i.length?i=i.concat(n):(r=i.slice(0,e),o=i.slice(e),i=r.concat(n.concat(o))),f(),d(),t.node.onloaded.call(t.node))}},this.copyPlugin=function(t,e){if(void 0===e&&(e=i.length),"number"!=typeof e||e<0||e>i.length)throw"Plugin copy index outside of the chain scope.";return p(t.prototypeObject).catch(function(t){throw"Plugin did not get created! Aborting"}).then(function(n){return n.node.parameters.setParametersByObject(t.node.parameters.getParameterObject()),h(),l(),i.splice(e,0,n),f(),d(),n.node.onloaded.call(n.node),n})},Object.defineProperties(this,{chainStart:{value:e},chainStop:{value:n},name:{get:function(){return a},set:function(t){return"string"==typeof t&&(a=t),a}},recursiveProcessing:{get:function(){return m}}})},g=function(t){var e,n=[];Object.defineProperties(this,{connect:{value:function(t,r,i){if(void 0===t)throw"Must define an AudioNode object";n.find(function(e){return e.destinationNode==t&&e.output==r&&e.input==i})||(n.push({destinationNode:t,output:r,input:i}),void 0===e?console.warn("MIDI Synthesiser is not loaded, connections will be validated on load"):e.node.connect(t,r,i))}},disconnect:{value:function(t,r,i){void 0===t?(e&&e.disconnect(),n=[]):"number"==typeof t&&void 0===r?(r=t,t=void 0,n=n.filter(function(t){return t.output!=r||(e&&e.node.disconnect(t.destinationNode,t.output),!1)})):"object"==typeof t&&void 0===r?n=n.filter(function(n){return n.destinationNode!=t||(e&&e.node.disconnect(n.destinationNode),!1)}):"object"==typeof t&&"number"==typeof r?n=n.filter(function(n){return n.destinationNode!=t||n.output!=r||(e&&e.node.disconnect(n.destinationNode,n.output),!1)}):"object"==typeof t&&"number"==typeof r&&"number"==typeof i&&(n=n.filter(function(n){return n.destinationNode!=t||n.output!=r||n.input!=i||(e&&e.node.disconnect(n.destinationNode,n.output,n.input),!1)}))}},scheduleEvent:{value:function(t,n){if(!e)throw"MIDI Synthesiser not loaded";e.node.scheduleEvent(t,n)}},cancelAllEvents:{value:function(t,n){if(!e)throw"MIDI Synthesiser not loaded";e.node.cancelAllEvents()}},midiSynthesiser:{get:function(){return e},set:function(){throw"Cannot set read-only attribute."}},loadMidiSynthesiserModule:{value:function(t){var r=this;return new Promise(function(e,n){0==t.hasMidiInput||1==t.hasMidiOutput?n("Prototype is not a MidiSynthesis type. hasMidiInput must be true and hasMidiOutput must be false"):e(t)}).then(function(t){return function(t){var e=this;return new Promise(function(e,n){0==t.hasMidiInput||1==t.hasMidiOutput?n("Prototype is not a MidiSynthesis type. hasMidiInput must be true and hasMidiOutput must be false"):e(t)}).then(function(){return t.createPluginInstance(e,!1).then(function(t){return Object.defineProperties(t,{TrackData:{value:e.TrackData}}),t})})}.call(r,t).catch(function(t){throw"Plugin did not get created! Aborting"})}).then(function(t){return e=t,n.forEach(function(t){e.node.connect(t.destinationNode,t.output,t.input)}),e})}}})},y=function(t){return Object.create({setDefaultInterface:function(t,e,n){return{url:t,width:e,height:n}},buildPluginInterface:function(t,e){var n=document.createElement("iframe");return n.src=e.src,e.width&&(n.width=e.width),e.height&&(n.height=e.height),n.style.border="0",n},pollAllPlugins:function(){t.getAllPlugins().forEach(function(t){t.node.externalInterface.updateInterfaces()})}})}(this);Object.defineProperties(this,{context:{value:t},pluginRootURL:{get:function(){return e},set:function(t){if("string"==typeof t)return e=t;throw"Cannot set root URL without a string"}},createFactoryCopy:{value:function(t){return e=t,new Promise(function(t,n){void 0===e.sampleRate?n(new Error("Invalid audio context provided")):t(e)}).then(function(t){var e=new h(t),n=[];return o.forEach(function(t){n.push(e.addPrototype(t.proto))}),Promise.all(n).then(function(){return e})}).then(function(t){return t});var e}},PluginGUI:{value:y}})}(l.prototype=Object.create(i.prototype)).constructor=l,n.d(e,"PluginFactory",function(){return h}),n.d(e,"BasePlugin",function(){return i}),n.d(e,"SynthesiserBasePlugin",function(){return l}),function(){if(void 0===window.jsXtract){var t=document.createElement("script");t.src="https://gitcdn.xyz/repo/nickjillings/js-xtract/master/jsXtract.js",document.getElementsByTagName("head")[0].appendChild(t)}}()}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9KU0FQL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL0pTQVAvLi9zcmMvTGlua2VkU3RvcmUuanMiLCJ3ZWJwYWNrOi8vSlNBUC8uL3NyYy9iYXNlX3BsdWdpbi5qcyIsIndlYnBhY2s6Ly9KU0FQLy4vc3JjL3N5bnRoX2Jhc2UuanMiLCJ3ZWJwYWNrOi8vSlNBUC8uL3NyYy9wbHVnaW4tZmFjdG9yeS5qcyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsInNyY19MaW5rZWRTdG9yZSIsIkxpbmtlZFN0b3JlIiwic3RvcmVOYW1lIiwicm9vdCIsIm9iamVjdFRvWE1MIiwib2JqIiwiZG9jIiwidGVybSIsImRvY05vZGUiLCJ0b1hNTCIsImNyZWF0ZUVsZW1lbnQiLCJhcHBlbmRDaGlsZCIsImxlbmd0aCIsImFycmF5VG9YTUwiLCJzZXRBdHRyaWJ1dGUiLCJhcnIiLCJhbGxfbnVtYmVycyIsImFsbF9zdHJpbmdzIiwiZXZlcnkiLCJhIiwiZm9yRWFjaCIsIm5vZGUiLCJkb2N1bWVudCIsImRlZmluZVByb3BlcnRpZXMiLCJ0aGlzIiwic2V0IiwidW5kZWZpbmVkIiwiYWRkVGVybSIsImFkZFRlcm1zIiwidGVybXNPYmplY3QiLCJkZWxldGVUZXJtIiwiZ2V0VGVybSIsImhhc1Rlcm0iLCJ0b0pTT04iLCJKU09OIiwicGFyc2UiLCJzdHJpbmdpZnkiLCJpbXBsZW1lbnRhdGlvbiIsImNyZWF0ZURvY3VtZW50IiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJBdWRpb05vZGUiLCJ3aW5kb3ciLCJpbXBvcnRTY3JpcHRzIiwiZ2V0SW5wdXRzIiwiQmFzZVBsdWdpbiIsImZhY3RvcnkiLCJvd25lciIsImlucHV0TGlzdCIsIm91dHB1dExpc3QiLCJwT3duZXIiLCJldmVudFRhcmdldCIsIkV2ZW50VGFyZ2V0IiwiZGVsZXRlSU8iLCJsaXN0IiwiZmluZEluZGV4IiwiZSIsInNwbGljZSIsImNvbnRleHQiLCJmZWF0dXJlTWFwIiwiUGx1Z2luRmVhdHVyZUludGVyZmFjZSIsImV4dGVybmFsSW50ZXJmYWNlIiwiUGx1Z2luSW50ZXJmYWNlTWVzc2FnZUh1YiIsInBhcmFtZXRlcnMiLCJQYXJhbWV0ZXJNYW5hZ2VyIiwiYWRkSW5wdXQiLCJwdXNoIiwiZGVsZXRlSW5wdXQiLCJhZGRPdXRwdXQiLCJvdXRwdXRzIiwiZGVsZXRlT3V0cHV0Iiwic3RhcnQiLCJzdG9wIiwib25sb2FkZWQiLCJvbnVubG9hZGVkIiwiZGVjb25zdHJ1Y3QiLCJudW1JbnB1dHMiLCJudW1PdXRwdXRzIiwibnVtUGFyYW1ldGVycyIsImlucHV0cyIsImluZGV4IiwiY29ubmVjdCIsImRlc3QiLCJpbnB0IiwiaW5wdXQiLCJkaXNjb25uZWN0IiwiZ2V0T3V0cHV0cyIsImdldFBhcmFtZXRlck5hbWUiLCJnZXRQYXJhbWV0ZXJOYW1lcyIsImdldFBhcmFtZXRlckJ5TmFtZSIsImdldFBhcmFtZXRlck9iamVjdCIsInNldFBhcmFtZXRlckJ5TmFtZSIsInNldFBhcmFtZXRlcnNCeU9iamVjdCIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwicGx1Z2luRXh0ZXJuYWxJbnRlcmZhY2UiLCJwYXJhbWV0ZXJMaXN0IiwiZmluZFBhcmFtZXRlciIsImZpbmQiLCJ0b0xvd2VyQ2FzZSIsImZpbmRQYXJhbWV0ZXJJbmRleCIsImJ1aWxkUGFyYW1ldGVyT2JqZWN0IiwiYWRkUGFyYW1ldGVyIiwicGFyYW0iLCJQbHVnaW5QYXJhbWV0ZXIiLCJkYXRhVHlwZSIsInVwZGF0ZSIsInRyYW5zbGF0ZSIsInRyaWdnZXIiLCJhdWRpb1BhcmFtIiwidiIsImYiLCJiaW5kVG9BdWRpb1BhcmFtIiwiYXAiLCJib3VuZEF1ZGlvUGFyYW0iLCJhY3Rpb25MaXN0IiwiTnVtYmVyUGFyYW1ldGVyIiwiZGVmYXVsdFZhbHVlIiwibWluaW11bSIsIm1heGltdW0iLCJfc3RlcFNpemUiLCJfdmFsdWUiLCJkZXN0cm95IiwiTWF0aCIsIm1heCIsIm1pbiIsInJvdW5kIiwiRXZlbnQiLCJkaXNwYXRjaEV2ZW50Iiwic3RlcFNpemUiLCJpc0Zpbml0ZSIsIlN0cmluZ1BhcmFtZXRlciIsIm1heExlbmd0aCIsIkJ1dHRvblBhcmFtZXRlciIsIm9uY2xpY2siLCJTd2l0Y2hQYXJhbWV0ZXIiLCJtaW5TdGF0ZSIsIm1heFN0YXRlIiwic2V0ViIsImVudHJ5IiwidGltZSIsIkRhdGUiLCJpbmNyZW1lbnQiLCJkZWNyZW1lbnQiLCJMaXN0UGFyYW1ldGVyIiwibGlzdE9mVmFsdWVzIiwiX2luZGV4IiwiaW5kZXhPZiIsImxpc3RWYWx1ZXMiLCJjb25zdHJ1Y3RvciIsImNyZWF0ZU51bWJlclBhcmFtZXRlciIsImNyZWF0ZVN0cmluZ1BhcmFtZXRlciIsImNyZWF0ZUJ1dHRvblBhcmFtZXRlciIsImNyZWF0ZVN3aXRjaFBhcmFtZXRlciIsImNyZWF0ZUxpc3RQYXJhbWV0ZXIiLCJBcnJheSIsImlzQXJyYXkiLCJpbmNsdWRlcyIsImhyb3ciLCJjcmVhdGVQYXJhbWV0ZXIiLCJuYW1lcyIsInBhcmFtZXRlciIsImRlbGV0ZVBhcmFtZXRlciIsImRlbGV0ZUFsbFBhcmFtZXRlcnMiLCJCYXNlUGx1Z2luSW5zdGFuY2UiLCJwbHVnaW4iLCJSZWNlaXZlciIsIlBsdWdpbkZlYXR1cmVJbnRlcmZhY2VSZWNlaXZlciIsIkZlYXR1cmVNYXAiLCJTZW5kZXIiLCJQbHVnaW5GZWF0dXJlSW50ZXJmYWNlU2VuZGVyIiwib25mZWF0dXJlcyIsImZ1bmMiLCJGZWF0dXJlSW50ZXJmYWNlSW5zdGFuY2UiLCJGYWN0b3J5RmVhdHVyZU1hcCIsImNoZWNrRmVhdHVyZUFyZ3MiLCJzb3VyY2UiLCJmZWF0dXJlT2JqZWN0Iiwib3V0cHV0SW5kZXgiLCJmcmFtZVNpemUiLCJmZWF0dXJlcyIsImNfZmVhdHVyZXMiLCJyZXF1ZXN0RmVhdHVyZXMiLCJmZWF0dXJlTGlzdCIsInJlcXVlc3RGZWF0dXJlc0Zyb21QbHVnaW4iLCJjYW5jZWxGZWF0dXJlc0Zyb21QbHVnaW4iLCJkZWxldGVGZWF0dXJlcyIsImNhbmNlbEFsbEZlYXR1cmVzRnJvbVBsdWdpbiIsImNhbmNlbEFsbEZlYXR1cmVzIiwicG9zdEZlYXR1cmVzIiwiTWVzc2FnZSIsIk91dHB1dE5vZGUiLCJwYXJlbnQiLCJvdXRwdXQiLCJleHRyYWN0b3JzIiwiRXh0cmFjdG9yIiwiZXh0cmFjdG9yIiwiY3JlYXRlQW5hbHlzZXIiLCJmZnRTaXplIiwicmVjdXJzaXZlUHJvY2Vzc2luZyIsIm9uYXVkaW9jYWxsYmFjayIsImRhdGEiLCJtZXNzYWdlIiwibnVtYmVyT2ZDaGFubmVscyIsInJlc3VsdHMiLCJjaGFubmVsIiwic2V0RmVhdHVyZXMiLCJjbGVhckNhbGxiYWNrIiwiZnJhbWVDYWxsYmFjayIsIldvcmtlckV4dHJhY3RvciIsIndvcmtlciIsIldvcmtlciIsIm9uZXJyb3IiLCJjb25zb2xlIiwiZXJyb3IiLCJzZWxmIiwiY29uZmlnTWVzc2FnZSIsInN0YXRlIiwic2FtcGxlUmF0ZSIsIm51bUNoYW5uZWxzIiwibnVtYmVyT2ZPdXRwdXRzIiwib25tZXNzYWdlIiwibXNnIiwicmVzcG9uc2UiLCJvbmF1ZGlvcHJvY2VzcyIsImZyYW1lcyIsImlucHV0QnVmZmVyIiwiZ2V0Q2hhbm5lbERhdGEiLCJwb3N0TWVzc2FnZSIsImNyZWF0ZVNjcmlwdFByb2Nlc3NvciIsImRlc3RpbmF0aW9uIiwiYWRkRXh0cmFjdG9yIiwicmVzdWx0c0pTT04iLCJmaW5kRXh0cmFjdG9yIiwiY2hlY2siLCJkZWxldGVFeHRyYWN0b3IiLCJvdXRwdXROb2RlcyIsInVwZGF0ZUZlYXR1cmVzIiwicmVzdWx0T2JqZWN0Iiwic2kiLCJwbHVnaW5JbnN0YW5jZSIsImNyZWF0ZVNvdXJjZU1hcCIsIlBsdWdpblVzZXJJbnRlcmZhY2UiLCJ3aWR0aCIsImhlaWdodCIsImxvZyIsInByb2Nlc3NvciIsInN0eWxlIiwiZGltIiwiaW50ZXJ2YWxGdW5jdGlvbiIsInVwZGF0ZUludGVydmFsIiwiUGx1Z2luUGFyYW1ldGVySW50ZXJmYWNlcyIsIlBsdWdpblBhcmFtZXRlckludGVyZmFjZU5vZGUiLCJET00iLCJQbHVnaW5QYXJhbWV0ZXJJbnN0YW5jZSIsImd1aSIsIkdVSSIsIkF1ZGlvUGFyYW0iLCJoYW5kbGVFdmVudCIsImV2ZW50IiwiY3JlYXRlUGx1Z2luUGFyYW1ldGVySW50ZXJmYWNlTm9kZSIsImdldFJvb3QiLCJnZXREaW1lbnNpb25zIiwiZ2V0V2lkdGgiLCJnZXRIZWlnaHQiLCJiZWdpbkNhbGxiYWNrcyIsIm1zIiwic2V0SW50ZXJ2YWwiLCJzdG9wQ2FsbGJhY2tzIiwiY2xlYXJJbnRlcnZhbCIsImxvYWRSZXNvdXJjZSIsInVybCIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwicmVxIiwiWE1MSHR0cFJlcXVlc3QiLCJvcGVuIiwib25sb2FkIiwic3RhdHVzIiwiRXJyb3IiLCJzdGF0dXNUZXh0Iiwic2VuZCIsImNsZWFyR1VJIiwiaW5uZXJIVE1MIiwiYnVpbGRQYXJhbWV0ZXJVcGRhdGVQYXlsb2FkIiwic2VuZGVyX2lkIiwiTyIsInR5cGUiLCJicm9hZGNhc3RQYXJhbWV0ZXJVcGRhdGVzIiwid2luZG93TWVzc2FnZUxpc3QiLCJ3Iiwia2V5cyIsInNldFBhcmFtZXRlck1lc3NhZ2UiLCJ1cGRhdGVJbnRlcmZhY2VzIiwiY2xvc2VXaW5kb3dzIiwicG9wIiwiY2xvc2UiLCJyZWdpc3RlcldpbmRvdyIsIlN5bnRoZXNpc2VyQmFzZVBsdWdpbiIsImhhc1dhcm5lZFNjaGVkdWxlTm90U2V0IiwiaGFzV2FybmVkQ2FuY2VsTm90U2V0Iiwic2NoZWR1bGVFdmVudCIsImNvbnRleHRUaW1lIiwid2FybmluZyIsIndyaXRhYmxlIiwiY2FuY2VsQWxsRXZlbnRzIiwicGx1Z2luX2ZhY3RvcnlfUGx1Z2luRmFjdG9yeSIsImF1ZGlvX2NvbnRleHQiLCJyb290VVJMIiwic3ViRmFjdG9yaWVzIiwic3ludGhlc2lzZXJIb3N0cyIsInBsdWdpbl9wcm90b3R5cGVzIiwicGx1Z2luc0xpc3QiLCJjdXJyZW50UGx1Z2luSWQiLCJhdWRpb1N0YXJ0ZWQiLCJyZXNvdXJjZU9iamVjdCIsInN0YXJ0c1dpdGgiLCJ4aHIiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJyZWFkeVN0YXRlIiwic2NyaXB0IiwidGV4dENvbnRlbnQiLCJyZXNwb25zZVRleHQiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInRlc3QiLCJ0aGVuIiwicmV0dXJuT2JqZWN0IiwiU3RyaW5nIiwibG9hZFBsdWdpblNjcmlwdCIsImFkZFByb3RvdHlwZSIsIlBsdWdpbkluc3RhbmNlIiwiaWQiLCJwbHVnaW5fbm9kZSIsIm5leHRfbm9kZSIsIl9ieXBhc3NlZCIsIl9pbiIsImNyZWF0ZUdhaW4iLCJfb3V0IiwiYnlwYXNzIiwiaXNCeXBhc3NlZCIsInJlY29ubmVjdCIsIm5ld19uZXh0IiwiYnlwYXNzZWQiLCJNaWRpU3ludGhlc2lzSW5zdGFuY2UiLCJzeW50aE5vZGUiLCJQbHVnaW5Qcm90b3R5cGUiLCJwcm90byIsImxvYWRSZXNvdXJjZUNoYWluIiwiayIsInJlc291cmNlcyIsInJlY3Vyc2l2ZUdldFRlc3QiLCJ2ZXJzaW9uIiwidW5pcXVlSUQiLCJoYXNNaWRpSW5wdXQiLCJoYXNNaWRpT3V0cHV0IiwiY3JlYXRlUGx1Z2luSW5zdGFuY2UiLCJhc3luYyIsImFsbCIsInJlc291cmNlUHJvbWlzZXMiLCJjaGVja0lzUmVhZHkiLCJpbml0aWFsaXNlIiwicHJvdG90eXBlT2JqZWN0IiwiU2VzaW9uRGF0YSIsIlNlc3Npb25EYXRhIiwiVXNlckRhdGEiLCJyZWdpc3RlclBsdWdpbkluc3RhbmNlIiwiY3NzIiwicmVzb3VyY2UiLCJwcm9taXNlIiwiY29tcGxldGUiLCJnZXRSZXNvdXJjZVByb21pc2VzIiwicGx1Z2luX3Byb3RvIiwidGVzdE9iaiIsIm1hdGNoIiwiZ2V0UHJvdG90eXBlcyIsImdldEF1ZGlvUGx1Z2luUHJvdG90eXBlcyIsImZpbHRlciIsImdldE1pZGlTeW50aFByb3RvdHlwZXMiLCJnZXRNaWRpUGx1Z2luUHJvdG90eXBlcyIsImdldEFsbFBsdWdpbnMiLCJnZXRBbGxQbHVnaW5zT2JqZWN0Iiwic3ViRmFjdG9yeSIsInBsdWdpbnMiLCJnZXRQbHVnaW5zIiwiY3JlYXRlU3ViRmFjdG9yeSIsImNoYWluU3RhcnQiLCJjaGFpblN0b3AiLCJ3YXJuIiwiY3JlYXRlQXVkaW9QbHVnaW5DaGFpbk1hbmFnZXIiLCJkZXN0cm95U3ViRmFjdG9yeSIsImRlc3Ryb3lBdWRpb1BsdWdpbkNoYWluTWFuYWdlciIsIkF1ZGlvUGx1Z2luQ2hhaW5NYW5hZ2VyIiwiU3ViRmFjdG9yeSIsImVsZW1lbnQiLCJjcmVhdGVNaWRpU3ludGhlc2lzZXJIb3N0IiwiaG9zdCIsIk1pZGlTeW50aGVzaXNlckhvc3QiLCJkZXN0cm95TWlkaVN5bnRoZXNpc2VySG9zdCIsImluc3RhbmNlIiwiZGVsZXRlUGx1Z2luIiwiYXVkaW9TdGFydCIsImF1ZGlvU3RvcCIsIk1hcHBpbmdzIiwiRmVhdHVyZU5vZGUiLCJnZXRGZWF0dXJlTm9kZSIsImFkZEZlYXR1cmVOb2RlIiwiZmVhdHVyZU5vZGUiLCJTb3VyY2VNYXAiLCJwbHVnaW5JbnN0YWNlIiwiZmluZEZlYXR1cmVPYmplY3QiLCJ1cGRhdGVTZW5kZXIiLCJyZWN1cnNpdmVGaW5kIiwiZnJhbWVMaXN0IiwiZ2V0RmVhdHVyZUxpc3QiLCJnZXRTb3VyY2VJbnN0YW5jZSIsImdldFNlbmRlciIsInJlcXVlc3Rvckluc3RhbmNlIiwibWFwIiwicmVxdWVzdG9ycyIsIkYiLCJjb25jYXQiLCJyZXF1ZXN0b3IiLCJnZXRSZXF1ZXN0b3JJbnN0YW5jZSIsIlJlcXVlc3Rvck1hcCIsImFkZEZlYXR1cmVzIiwiZmluZEZyYW1lTWFwIiwiY2FuY2VsRmVhdHVyZXMiLCJyZXF1ZXN0b3JJbmRleCIsIkZlYXR1cmVzIiwicmVjdXJzaXZlbHlBZGRGZWF0dXJlcyIsInJvb3RBcnJheSIsInJlY3Vyc2l2ZWx5RGVsZXRlRmVhdHVyZXMiLCJyZWN1cnNpdmVQb3N0RmVhdHVyZXMiLCJyb290Tm9kZSIsInJlc3VsdHNMaXN0IiwiRmVhdHVyZUxpc3QiLCJhbyIsImZpbmRTb3VyY2VJbmRleCIsImZpbmRTb3VyY2VNYXAiLCJwbHVnaW5TZW5kZXIiLCJzb3VyY2VNYXAiLCJkZWxldGVTb3VyY2VNYXAiLCJnZXRQbHVnaW5TZW5kZXIiLCJzdG9yZXMiLCJjcmVhdGVTdG9yZSIsImdldFN0b3JlcyIsImZpbmRTdG9yZSIsIlN1YkZhY3RvcnlGZWF0dXJlU2VuZGVyIiwicmVqb2luRXh0cmFjdG9yIiwiTnVtYmVyIiwicmVqb2luRXh0cmFjdG9ycyIsIlBsdWdpbkZhY3RvcnkiLCJwbHVnaW5fbGlzdCIsInBsdWdpbkNoYWluU3RhcnQiLCJwbHVnaW5DaGFpblN0b3AiLCJmYWN0b3J5TmFtZSIsImNoYWluU3RhcnRGZWF0dXJlIiwicmVidWlsZCIsImN1cnJlbnROb2RlIiwibmV4dE5vZGUiLCJpc29sYXRlIiwiY3V0Q2hhaW4iLCJqb2luQ2hhaW4iLCJidWlsZE5ld1BsdWdpbiIsIlRyYWNrRGF0YSIsImJhc2UiLCJhcHBseSIsInJlc3VsdCIsIlBsdWdpbkRhdGEiLCJmZWF0dXJlU2VuZGVyIiwiZ2V0RmVhdHVyZUNoYWluIiwiYnlwYXNzUGx1Z2luIiwicGx1Z2luX2luc3RhbmNlIiwiZ2V0RmFjdG9yeSIsImRlc3Ryb3lQbHVnaW4iLCJjcmVhdGVQbHVnaW4iLCJjYXRjaCIsInBsdWdpbl9vYmplY3QiLCJnZXRQbHVnaW5JbmRleCIsImFycmF5IiwibW92ZVBsdWdpbiIsIm5ld19pbmRleCIsImhvbGRMb3ciLCJob2xkSGlnaCIsInNsaWNlIiwiY29weVBsdWdpbiIsImNvcHlfaW5kZXgiLCJtaWRpU3ludGhTbG90IiwiY29ubmVjdGlvbnMiLCJkZXN0aW5hdGlvbk5vZGUiLCJjb25uIiwibWlkaVN5bnRoZXNpc2VyIiwibG9hZE1pZGlTeW50aGVzaXNlck1vZHVsZSIsIlBsdWdpblVzZXJJbnRlcmZhY2VNZXNzYWdlSHViIiwic2V0RGVmYXVsdEludGVyZmFjZSIsImJ1aWxkUGx1Z2luSW50ZXJmYWNlIiwiaW50ZXJmYWNlX29iamVjdCIsImlmcmFtZSIsInNyYyIsImJvcmRlciIsInBvbGxBbGxQbHVnaW5zIiwicGx1Z2luUm9vdFVSTCIsImNyZWF0ZUZhY3RvcnlDb3B5IiwibmV3Y29udGV4dCIsIkJGYWN0b3J5IiwicHJvbWlzZXMiLCJuZXdGYWN0b3J5IiwiUGx1Z2luR1VJIiwiX193ZWJwYWNrX2V4cG9ydHNfXyIsImpzWHRyYWN0Il0sIm1hcHBpbmdzIjoicUJBQ0EsSUFBQUEsRUFBQSxHQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLEdBQUEsQ0FDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxRQUFBLElBVUEsT0FOQUksRUFBQUwsR0FBQU0sS0FBQUosRUFBQUQsUUFBQUMsSUFBQUQsUUFBQUYsR0FHQUcsRUFBQUUsR0FBQSxFQUdBRixFQUFBRCxRQTBEQSxPQXJEQUYsRUFBQVEsRUFBQUYsRUFHQU4sRUFBQVMsRUFBQVYsRUFHQUMsRUFBQVUsRUFBQSxTQUFBUixFQUFBUyxFQUFBQyxHQUNBWixFQUFBYSxFQUFBWCxFQUFBUyxJQUNBRyxPQUFBQyxlQUFBYixFQUFBUyxFQUFBLENBQTBDSyxZQUFBLEVBQUFDLElBQUFMLEtBSzFDWixFQUFBa0IsRUFBQSxTQUFBaEIsR0FDQSxvQkFBQWlCLGVBQUFDLGFBQ0FOLE9BQUFDLGVBQUFiLEVBQUFpQixP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dC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsIi8qZ2xvYmFscyBkb2N1bWVudCAqL1xuLyplc2xpbnQtZW52IGJyb3dzZXIgKi9cblxudmFyIExpbmtlZFN0b3JlID0gZnVuY3Rpb24gKHN0b3JlTmFtZSkge1xuICAgIC8vIFN0b3JlIGZvciB0aGUgc2VtYW50aWMgdGVybXMsIGVhY2ggc3RvcmUgaG9sZHMgaXRzIG93biBkYXRhIHRyZWVcbiAgICAvLyBUZXJtcyBhcmUgYWRkZWQgYXMga2V5L3ZhbHVlIHBhcmlzIHRvIGEgcm9vdCBub2RlXG4gICAgdmFyIHJvb3QgPSB7fTtcblxuICAgIGZ1bmN0aW9uIG9iamVjdFRvWE1MKG9iaiwgcm9vdCwgZG9jKSB7XG4gICAgICAgIC8vIFVzZWQgaWYgYW4gb2JqZWN0IHdhcyBwYXNzZWQgYXMgYSB0ZXJtIHZhbHVlXG4gICAgICAgIHZhciB0ZXJtO1xuICAgICAgICBmb3IgKHRlcm0gaW4gb2JqKSB7XG4gICAgICAgICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KHRlcm0pKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBvYmpbdGVybV0gPT09IFwib2JqZWN0XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRvY05vZGU7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvYmpbdGVybV0udG9YTUwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY05vZGUgPSBvYmpbdGVybV0udG9YTUwoZG9jKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvY05vZGUgPSBkb2MuY3JlYXRlRWxlbWVudCh0ZXJtKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvb3QuYXBwZW5kQ2hpbGQoZG9jTm9kZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob2JqW3Rlcm1dLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFycmF5VG9YTUwob2JqW3Rlcm1dLCBkb2NOb2RlLCBkb2MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmplY3RUb1hNTChvYmpbdGVybV0sIGRvY05vZGUsIGRvYyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcm9vdC5hcHBlbmRDaGlsZChkb2NOb2RlKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByb290LnNldEF0dHJpYnV0ZSh0ZXJtLCBvYmpbdGVybV0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFycmF5VG9YTUwoYXJyLCByb290LCBkb2MpIHtcbiAgICAgICAgLy8gVXNlZCB0byBjb252ZXJ0IGFuIGFycmF5IHRvIGEgbGlzdCBvZiBYTUwgZW50cmllc1xuICAgICAgICB2YXIgYWxsX251bWJlcnMgPSB0cnVlLFxuICAgICAgICAgICAgYWxsX3N0cmluZ3MgPSB0cnVlLFxuICAgICAgICAgICAgaSwgbCA9IGFyci5sZW5ndGg7XG4gICAgICAgIGFsbF9udW1iZXJzID0gYXJyLmV2ZXJ5KGZ1bmN0aW9uIChhKSB7XG4gICAgICAgICAgICByZXR1cm4gdHlwZW9mIGEgPT09IFwibnVtYmVyXCI7XG4gICAgICAgIH0pO1xuICAgICAgICBhbGxfc3RyaW5ncyA9IGFyci5ldmVyeShmdW5jdGlvbiAoYSkge1xuICAgICAgICAgICAgcmV0dXJuIHR5cGVvZiBhID09PSBcInN0cmluZ1wiO1xuICAgICAgICB9KTtcbiAgICAgICAgaWYgKGFsbF9udW1iZXJzIHx8IGFsbF9zdHJpbmdzKSB7XG4gICAgICAgICAgICAvLyBBbiBhcnJheSBvZiBudW1iZXJzIG9yIHN0cmluZ3NcbiAgICAgICAgICAgIGFyci5mb3JFYWNoKGZ1bmN0aW9uIChhLCBpKSB7XG4gICAgICAgICAgICAgICAgcm9vdC5zZXRBdHRyaWJ1dGUoXCJpbmRleC1cIiArIGksIGEpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBBbiBhcnJheSBvZiBvYmplY3RzXG4gICAgICAgICAgICBhcnIuZm9yRWFjaChmdW5jdGlvbiAoYSwgaSkge1xuICAgICAgICAgICAgICAgIHZhciBub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInZhbHVlXCIpO1xuICAgICAgICAgICAgICAgIG5vZGUuc2V0QXR0cmlidXRlKFwiaW5kZXhcIiwgaSk7XG4gICAgICAgICAgICAgICAgb2JqZWN0VG9YTUwoYSwgbm9kZSwgZG9jKTtcbiAgICAgICAgICAgICAgICByb290LmFwcGVuZENoaWxkKG5vZGUpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLCB7XG4gICAgICAgICduYW1lJzoge1xuICAgICAgICAgICAgJ2dldCc6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc3RvcmVOYW1lO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdzZXQnOiBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgICAgICAgIGlmIChzdG9yZU5hbWUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBuYW1lID0gc3RvcmVOYW1lO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IChcIk5hbWUgaXMgYWxyZWFkeSBzZXRcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICAnYWRkVGVybSc6IHtcbiAgICAgICAgICAgICd2YWx1ZSc6IGZ1bmN0aW9uICh0ZXJtLCB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGVybSAhPT0gXCJzdHJpbmdcIiAmJiB0ZXJtLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyAoXCJ0ZXJtIG11c3QgYmUgYSBzdHJpbmdcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJvb3RbdGVybV0gPSB2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgJ2FkZFRlcm1zJzoge1xuICAgICAgICAgICAgJ3ZhbHVlJzogZnVuY3Rpb24gKHRlcm1zT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0ZXJtc09iamVjdCAhPT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyAoXCJhZGRUZXJtcyB0YWtlcyBhbiBvYmplY3Qgb2YgdGVybS92YWx1ZSBwYWlyc1wiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHRlcm07XG4gICAgICAgICAgICAgICAgZm9yICh0ZXJtIGluIHRlcm1zT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0ZXJtc09iamVjdC5oYXNPd25Qcm9wZXJ0eSh0ZXJtKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRUZXJtKHRlcm0sIHRlcm1zT2JqZWN0W3Rlcm1dKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgJ2RlbGV0ZVRlcm0nOiB7XG4gICAgICAgICAgICAndmFsdWUnOiBmdW5jdGlvbiAodGVybSkge1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkVGVybSh0ZXJtLCB1bmRlZmluZWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICAnZ2V0VGVybSc6IHtcbiAgICAgICAgICAgICd2YWx1ZSc6IGZ1bmN0aW9uICh0ZXJtKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0ZXJtICE9PSBcInN0cmluZ1wiICYmIHRlcm0ubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IChcInRlcm0gbXVzdCBiZSBhIHN0cmluZ1wiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJvb3RbdGVybV07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgICdoYXNUZXJtJzoge1xuICAgICAgICAgICAgJ3ZhbHVlJzogZnVuY3Rpb24gKHRlcm0pIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRlcm0gIT09IFwic3RyaW5nXCIgJiYgdGVybS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgKFwidGVybSBtdXN0IGJlIGEgc3RyaW5nXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcm9vdC5oYXNPd25Qcm9wZXJ0eSh0ZXJtKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgJ3RvSlNPTic6IHtcbiAgICAgICAgICAgICd2YWx1ZSc6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShyb290KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgICd0b1hNTCc6IHtcbiAgICAgICAgICAgICd2YWx1ZSc6IGZ1bmN0aW9uIChkb2MpIHtcbiAgICAgICAgICAgICAgICB2YXIgbm9kZTtcbiAgICAgICAgICAgICAgICBpZiAoIWRvYykge1xuICAgICAgICAgICAgICAgICAgICBkb2MgPSBkb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVEb2N1bWVudChudWxsLCBzdG9yZU5hbWUsIG51bGwpO1xuICAgICAgICAgICAgICAgICAgICBub2RlID0gZG9jLmZpcnN0RWxlbWVudENoaWxkO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG5vZGUgPSBkb2MuY3JlYXRlRWxlbWVudChzdG9yZU5hbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBvYmplY3RUb1hNTChyb290LCBub2RlLCBkb2MpO1xuICAgICAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCB7TGlua2VkU3RvcmV9O1xuIiwiLy8gQWRkIGdldElucHV0cyB0byBhbGwgQXVkaW9Ob2RlcyB0byBlYXNlIGRlcGxveW1lbnRcbi8qZ2xvYmFscyBBdWRpb05vZGUsIFdvcmtlciwgY29uc29sZSwgd2luZG93LCBkb2N1bWVudCwgUHJvbWlzZSwgWE1MSHR0cFJlcXVlc3QgKi9cbi8qZXNsaW50LWVudiBicm93c2VyICovXG4vKmpzaGludCBlc3ZlcnNpb246IDYgKi9cbmlmICh0eXBlb2YgQXVkaW9Ob2RlID09PSBcImZ1bmN0aW9uXCIgJiYgd2luZG93LmltcG9ydFNjcmlwdHMgPT09IHVuZGVmaW5lZCkge1xuICAgIEF1ZGlvTm9kZS5wcm90b3R5cGUuZ2V0SW5wdXRzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gW3RoaXNdO1xuICAgIH07XG59XG5cbi8vIFRoaXMgc2hvdWxkIHNpbXBseSBkZWZpbmUgdGhlIEJhc2VQbHVnaW4gZnJvbSB3aGljaCBjdXN0b20gcGx1Z2lucyBjYW4gYmUgYnVpbHQgZnJvbVxudmFyIEJhc2VQbHVnaW4gPSBmdW5jdGlvbihmYWN0b3J5LCBvd25lcikge1xuICAgIHZhciBpbnB1dExpc3QgPSBbXSxcbiAgICAgICAgb3V0cHV0TGlzdCA9IFtdLFxuICAgICAgICBwT3duZXIgPSBvd25lcixcbiAgICAgICAgZXZlbnRUYXJnZXQgPSBuZXcgRXZlbnRUYXJnZXQoKTtcbiAgICBpZiAodGhpcy5jb250ZXh0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5jb250ZXh0ID0gZmFjdG9yeS5jb250ZXh0O1xuICAgIH1cbiAgICBpZiAodGhpcy5mYWN0b3J5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgdGhpcy5mYWN0b3J5ID0gZmFjdG9yeTtcbiAgICB9XG4gICAgdGhpcy5mZWF0dXJlTWFwID0gbmV3IFBsdWdpbkZlYXR1cmVJbnRlcmZhY2UodGhpcyk7XG4gICAgdGhpcy5leHRlcm5hbEludGVyZmFjZSA9IG5ldyBQbHVnaW5JbnRlcmZhY2VNZXNzYWdlSHViKHRoaXMpO1xuICAgIHRoaXMucGFyYW1ldGVycyA9IG5ldyBQYXJhbWV0ZXJNYW5hZ2VyKHRoaXMsIHRoaXMuZXh0ZXJuYWxJbnRlcmZhY2UsIGV2ZW50VGFyZ2V0KTtcblxuICAgIGZ1bmN0aW9uIGRlbGV0ZUlPKG5vZGUsIGxpc3QpIHtcbiAgICAgICAgdmFyIGkgPSBsaXN0LmZpbmRJbmRleChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgcmV0dXJuIGUgPT09IHRoaXM7XG4gICAgICAgIH0sIG5vZGUpO1xuICAgICAgICBpZiAoaSA9PT0gLTEpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBsaXN0LnNwbGljZShpLCAxKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgdGhpcy5hZGRJbnB1dCA9IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgIGlucHV0TGlzdC5wdXNoKG5vZGUpO1xuICAgICAgICByZXR1cm4gaW5wdXRMaXN0O1xuICAgIH07XG4gICAgdGhpcy5kZWxldGVJbnB1dCA9IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgIHJldHVybiBkZWxldGVJTyhub2RlLCBpbnB1dExpc3QpO1xuICAgIH07XG4gICAgdGhpcy5hZGRPdXRwdXQgPSBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICBvdXRwdXRMaXN0LnB1c2gobm9kZSk7XG4gICAgICAgIHJldHVybiB0aGlzLm91dHB1dHM7XG4gICAgfTtcbiAgICB0aGlzLmRlbGV0ZU91dHB1dCA9IGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgIHJldHVybiBkZWxldGVJTyhub2RlLCBvdXRwdXRMaXN0KTtcbiAgICB9O1xuXG4gICAgdGhpcy5zdGFydCA9IHRoaXMuc3RvcCA9IHRoaXMub25sb2FkZWQgPSB0aGlzLm9udW5sb2FkZWQgPSB0aGlzLmRlY29uc3RydWN0ID0gZnVuY3Rpb24gKCkge307XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLCB7XG4gICAgICAgIFwibnVtSW5wdXRzXCI6IHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpbnB1dExpc3QubGVuZ3RoO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHRocm93IChcIkNhbm5vdCBzZXQgdGhlIG51bWJlciBvZiBpbnB1dHMgb2YgQmFzZVBsdWdpblwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJudW1PdXRwdXRzXCI6IHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBvdXRwdXRMaXN0Lmxlbmd0aDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyAoXCJDYW5ub3Qgc2V0IHRoZSBudW1iZXIgb2Ygb3V0cHV0cyBvZiBCYXNlUGx1Z2luXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcIm51bVBhcmFtZXRlcnNcIjoge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyYW1ldGVycy5wYXJhbWV0ZXJzLmxlbmd0aDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyAoXCJDYW5ub3Qgc2V0IHRoZSBudW1iZXIgb2YgcGFyYW1ldGVycyBvZiBCYXNlUGx1Z2luXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcIm93bmVyXCI6IHtcbiAgICAgICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBwT3duZXI7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAob3duZXIpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG93bmVyID09PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHBPd25lciA9IG93bmVyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcE93bmVyO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcImlucHV0c1wiOiB7XG4gICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBpbnB1dExpc3Q7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgKFwiSWxsZWdhbCBhdHRlbXB0IHRvIG1vZGlmeSBCYXNlUGx1Z2luXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcIm91dHB1dHNcIjoge1xuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gb3V0cHV0TGlzdDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyAoXCJJbGxlZ2FsIGF0dGVtcHQgdG8gbW9kaWZ5IEJhc2VQbHVnaW5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFwiY29ubmVjdFwiOiB7XG4gICAgICAgICAgICBcInZhbHVlXCI6IGZ1bmN0aW9uIChkZXN0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vdXRwdXRzWzBdLmNvbm5lY3QoZGVzdC5pbnB0ID8gZGVzdC5pbnB1dCA6IGRlc3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcImRpc2Nvbm5lY3RcIjoge1xuICAgICAgICAgICAgXCJ2YWx1ZVwiOiBmdW5jdGlvbiAoZGVzdCkge1xuICAgICAgICAgICAgICAgIGlmIChkZXN0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vdXRwdXRzWzBdLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm91dHB1dHNbMF0uZGlzY29ubmVjdChkZXN0LmlucHV0ID8gZGVzdC5pbnB1dCA6IGRlc3QpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJnZXRJbnB1dHNcIjoge1xuICAgICAgICAgICAgXCJ2YWx1ZVwiOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5wdXRzO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcImdldE91dHB1dHNcIjoge1xuICAgICAgICAgICAgXCJ2YWx1ZVwiOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMub3V0cHV0cztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJnZXRQYXJhbWV0ZXJOYW1lXCI6IHtcbiAgICAgICAgICAgIFwidmFsdWVcIjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcmFtZXRlcnMuZ2V0UGFyYW1ldGVyTmFtZXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJnZXRQYXJhbWV0ZXJCeU5hbWVcIjoge1xuICAgICAgICAgICAgXCJ2YWx1ZVwiOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyYW1ldGVycy5nZXRQYXJhbWV0ZXJCeU5hbWUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJnZXRQYXJhbWV0ZXJPYmplY3RcIjoge1xuICAgICAgICAgICAgXCJ2YWx1ZVwiOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyYW1ldGVycy5nZXRQYXJhbWV0ZXJPYmplY3QoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJzZXRQYXJhbWV0ZXJCeU5hbWVcIjoge1xuICAgICAgICAgICAgXCJ2YWx1ZVwiOiBmdW5jdGlvbiAobmFtZSwgdmFsdWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJhbWV0ZXJzLnNldFBhcmFtZXRlckJ5TmFtZShuYW1lLCB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFwic2V0UGFyYW1ldGVyc0J5T2JqZWN0XCI6IHtcbiAgICAgICAgICAgIFwidmFsdWVcIjogZnVuY3Rpb24gKG9iamVjdCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcmFtZXRlcnMuc2V0UGFyYW1ldGVyc0J5T2JqZWN0KG9iamVjdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFwiYWRkRXZlbnRMaXN0ZW5lclwiOiB7XG4gICAgICAgICAgICBcInZhbHVlXCI6IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZXZlbnRUYXJnZXQuYWRkRXZlbnRMaXN0ZW5lcihrZXksIHZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJyZW1vdmVFdmVudExpc3RlbmVyXCI6IHtcbiAgICAgICAgICAgIFwidmFsdWVcIjogZnVuY3Rpb24oa2V5LCB2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBldmVudFRhcmdldC5hZGRFdmVudExpc3RlbmVyKGtleSwgdmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG59O1xuXG52YXIgUGFyYW1ldGVyTWFuYWdlciA9IGZ1bmN0aW9uIChvd25lciwgcGx1Z2luRXh0ZXJuYWxJbnRlcmZhY2UsIGV2ZW50VGFyZ2V0KSB7XG4gICAgdmFyIHBhcmFtZXRlckxpc3QgPSBbXTtcblxuICAgIGZ1bmN0aW9uIGZpbmRQYXJhbWV0ZXIobmFtZSkge1xuICAgICAgICByZXR1cm4gcGFyYW1ldGVyTGlzdC5maW5kKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICByZXR1cm4gZS5uYW1lLnRvTG93ZXJDYXNlKCkgPT09IG5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZmluZFBhcmFtZXRlckluZGV4KG5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHBhcmFtZXRlckxpc3QuZmluZEluZGV4KGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICByZXR1cm4gZS5uYW1lLnRvTG93ZXJDYXNlKCkgPT09IG5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYnVpbGRQYXJhbWV0ZXJPYmplY3QoKSB7XG4gICAgICAgIHZhciBvYmogPSB7fTtcbiAgICAgICAgcGFyYW1ldGVyTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBvYmpbZS5uYW1lXSA9IGU7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFkZFBhcmFtZXRlcihwYXJhbSkge1xuICAgICAgICB2YXIgZXhpc3RzID0gcGFyYW1ldGVyTGlzdC5maW5kSW5kZXgoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBlID09PSBwYXJhbTtcbiAgICAgICAgfSwgcGFyYW0pO1xuICAgICAgICBpZiAoZXhpc3RzID09PSAtMSkge1xuICAgICAgICAgICAgcGFyYW1ldGVyTGlzdC5wdXNoKHBhcmFtKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcGFyYW07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gUGx1Z2luUGFyYW1ldGVyKG93bmVyLCBuYW1lLCBkYXRhVHlwZSkge1xuICAgICAgICB2YXIgdXBkYXRlLCB0cmFuc2xhdGUsIHRyaWdnZXIsIGF1ZGlvUGFyYW0sIF9BY3Rpb25MaXN0ID0gW107XG4gICAgICAgIHVwZGF0ZSA9IHRyYW5zbGF0ZSA9IGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgICByZXR1cm4gdjtcbiAgICAgICAgfTtcbiAgICAgICAgdHJpZ2dlciA9IGZ1bmN0aW9uICgpIHt9O1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLCB7XG4gICAgICAgICAgICBcIm5hbWVcIjoge1xuICAgICAgICAgICAgICAgIFwidmFsdWVcIjogbmFtZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwib3duZXJcIjoge1xuICAgICAgICAgICAgICAgIFwidmFsdWVcIjogb3duZXJcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcInVwZGF0ZVwiOiB7XG4gICAgICAgICAgICAgICAgXCJnZXRcIjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdXBkYXRlO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXCJzZXRcIjogZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBmICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IChcIk11c3QgYmUgYSBjYWxsYmFjayBmdW5jdGlvblwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoZigwKSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyAoXCJGdW5jdGlvbiBtdXN0IHJldHVybiBhIHZhbHVlXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZSA9IGY7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwidHJhbnNsYXRlXCI6IHtcbiAgICAgICAgICAgICAgICBcImdldFwiOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cmFuc2xhdGU7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBcInNldFwiOiBmdW5jdGlvbiAoZikge1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGYgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgKFwiTXVzdCBiZSBhIGNhbGxiYWNrIGZ1bmN0aW9uXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChmKDApID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IChcIkZ1bmN0aW9uIG11c3QgcmV0dXJuIGEgdmFsdWVcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdHJhbnNsYXRlID0gZjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJ0cmlnZ2VyXCI6IHtcbiAgICAgICAgICAgICAgICBcImdldFwiOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cmlnZ2VyO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXCJzZXRcIjogZnVuY3Rpb24gKGYpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBmICE9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IChcIk11c3QgYmUgYSBjYWxsYmFjayBmdW5jdGlvblwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyID0gZjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJiaW5kVG9BdWRpb1BhcmFtXCI6IHtcbiAgICAgICAgICAgICAgICBcInZhbHVlXCI6IGZ1bmN0aW9uIChhcCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGFwICE9PSBcIm9iamVjdFwiIHx8IGFwLnZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IChcIk11c3QgYmUgYW4gQXVkaW9QYXJhbSBvYmplY3QgZnJvbSBhbiBBdWRpb05vZGVcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIHYgPSB0aGlzLnVwZGF0ZSh0aGlzLnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgYXVkaW9QYXJhbSA9IGFwO1xuICAgICAgICAgICAgICAgICAgICBhdWRpb1BhcmFtLnZhbHVlID0gdjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJib3VuZEF1ZGlvUGFyYW1cIjoge1xuICAgICAgICAgICAgICAgIFwiZ2V0XCI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGF1ZGlvUGFyYW07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwiYWN0aW9uTGlzdFwiOiB7XG4gICAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiBfQWN0aW9uTGlzdFxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBOdW1iZXJQYXJhbWV0ZXIob3duZXIsIG5hbWUsIGRlZmF1bHRWYWx1ZSwgbWluaW11bSwgbWF4aW11bSkge1xuICAgICAgICBQbHVnaW5QYXJhbWV0ZXIuY2FsbCh0aGlzLCBvd25lciwgbmFtZSwgXCJOdW1iZXJcIik7XG4gICAgICAgIHZhciBfdmFsdWUgPSBkZWZhdWx0VmFsdWUsXG4gICAgICAgICAgICBfc3RlcFNpemU7XG5cbiAgICAgICAgZnVuY3Rpb24gYWRkQWN0aW9uKHYpIHtcbiAgICAgICAgICAgIHZhciBlbnRyeSA9IHtcbiAgICAgICAgICAgICAgICAndGltZSc6IG5ldyBEYXRlKCksXG4gICAgICAgICAgICAgICAgJ3ZhbHVlJzogdlxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uTGlzdC5wdXNoKGVudHJ5KTtcbiAgICAgICAgfVxuXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMsIHtcbiAgICAgICAgICAgIFwiZGVzdHJveVwiOiB7XG4gICAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIG93bmVyID0gbmFtZSA9IGRlZmF1bHRWYWx1ZSA9IG1pbmltdW0gPSBtYXhpbXVtID0gX3ZhbHVlID0gX3N0ZXBTaXplID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcIm1pbmltdW1cIjoge1xuICAgICAgICAgICAgICAgIFwidmFsdWVcIjogbWluaW11bVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwibWF4aW11bVwiOiB7XG4gICAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiBtYXhpbXVtXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJkZWZhdWx0VmFsdWVcIjoge1xuICAgICAgICAgICAgICAgIFwidmFsdWVcIjogZGVmYXVsdFZhbHVlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJ2YWx1ZVwiOiB7XG4gICAgICAgICAgICAgICAgXCJnZXRcIjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5ib3VuZEF1ZGlvUGFyYW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnRyYW5zbGF0ZSh0aGlzLmJvdW5kQXVkaW9QYXJhbS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF92YWx1ZTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIFwic2V0XCI6IGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1pbmltdW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHYgPSBNYXRoLm1heCh2LCB0aGlzLm1pbmltdW0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLm1heGltdW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHYgPSBNYXRoLm1pbih2LCB0aGlzLm1heGltdW0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChfc3RlcFNpemUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHYgPSBNYXRoLnJvdW5kKHYgLyBfc3RlcFNpemUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdiA9IHYgKiBfc3RlcFNpemU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYm91bmRBdWRpb1BhcmFtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmJvdW5kQXVkaW9QYXJhbS52YWx1ZSA9IHRoaXMudXBkYXRlKHYpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChfdmFsdWUgIT09IHYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF92YWx1ZSA9IHY7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZSA9IG5ldyBFdmVudChcInBhcmFtZXRlcnNldFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50VGFyZ2V0LmRpc3BhdGNoRXZlbnQoZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhpcy50cmlnZ2VyKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwic3RlcFNpemVcIjoge1xuICAgICAgICAgICAgICAgIFwiZ2V0XCI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9zdGVwU2l6ZTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIFwic2V0XCI6IGZ1bmN0aW9uIChuKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNGaW5pdGUobikgfHwgbiA8IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IChcIkludmFsaWQgc3RlcCBzaXplXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIF9zdGVwU2l6ZSA9IG47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgTnVtYmVyUGFyYW1ldGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoUGx1Z2luUGFyYW1ldGVyLnByb3RvdHlwZSk7XG4gICAgTnVtYmVyUGFyYW1ldGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IE51bWJlclBhcmFtZXRlcjtcblxuICAgIGZ1bmN0aW9uIFN0cmluZ1BhcmFtZXRlcihvd25lciwgbmFtZSwgZGVmYXVsdFZhbHVlLCBtYXhMZW5ndGgpIHtcbiAgICAgICAgUGx1Z2luUGFyYW1ldGVyLmNhbGwodGhpcywgb3duZXIsIG5hbWUsIFwiU3RyaW5nXCIpO1xuICAgICAgICB2YXIgX3ZhbHVlID0gZGVmYXVsdFZhbHVlO1xuXG4gICAgICAgIGZ1bmN0aW9uIGFkZEFjdGlvbih2KSB7XG4gICAgICAgICAgICB2YXIgZW50cnkgPSB7XG4gICAgICAgICAgICAgICAgJ3RpbWUnOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IHZcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmFjdGlvbkxpc3QucHVzaChlbnRyeSk7XG4gICAgICAgIH1cblxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLCB7XG4gICAgICAgICAgICBcImRlc3Ryb3lcIjoge1xuICAgICAgICAgICAgICAgIFwidmFsdWVcIjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBvd25lciA9IG5hbWUgPSBkZWZhdWx0VmFsdWUgPSBtYXhMZW5ndGggPSBfdmFsdWUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwibWF4TGVuZ3RoXCI6IHtcbiAgICAgICAgICAgICAgICBcInZhbHVlXCI6IG1heExlbmd0aFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwiZGVmYXVsdFZhbHVlXCI6IHtcbiAgICAgICAgICAgICAgICBcInZhbHVlXCI6IGRlZmF1bHRWYWx1ZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwidmFsdWVcIjoge1xuICAgICAgICAgICAgICAgIFwiZ2V0XCI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYm91bmRBdWRpb1BhcmFtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50cmFuc2xhdGUodGhpcy5ib3VuZEF1ZGlvUGFyYW0udmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfdmFsdWU7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBcInNldFwiOiBmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgICAgICAgICBpZiAobWF4TGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodi5sZW5ndGggPiBtYXhMZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyAoXCJTdHJpbmcgbG9uZ2VyIHRoYW4gXCIgKyBtYXhMZW5ndGggKyBcIiBjaGFyYWN0ZXJzXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmJvdW5kQXVkaW9QYXJhbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ib3VuZEF1ZGlvUGFyYW0udmFsdWUgPSB0aGlzLnVwZGF0ZSh2KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAoX3ZhbHVlICE9PSB2KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdmFsdWUgPSB2O1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGUgPSBuZXcgRXZlbnQoXCJwYXJhbWV0ZXJzZXRcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudFRhcmdldC5kaXNwYXRjaEV2ZW50KGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudHJpZ2dlcigpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIFN0cmluZ1BhcmFtZXRlci5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFBsdWdpblBhcmFtZXRlci5wcm90b3R5cGUpO1xuICAgIFN0cmluZ1BhcmFtZXRlci5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBTdHJpbmdQYXJhbWV0ZXI7XG5cbiAgICBmdW5jdGlvbiBCdXR0b25QYXJhbWV0ZXIob3duZXIsIG5hbWUpIHtcbiAgICAgICAgUGx1Z2luUGFyYW1ldGVyLmNhbGwodGhpcywgb3duZXIsIG5hbWUsIFwiQnV0dG9uXCIpO1xuICAgICAgICB2YXIgb25jbGljayA9IGZ1bmN0aW9uICgpIHt9O1xuXG4gICAgICAgIGZ1bmN0aW9uIGFkZEFjdGlvbih2KSB7XG4gICAgICAgICAgICB2YXIgZW50cnkgPSB7XG4gICAgICAgICAgICAgICAgJ3RpbWUnOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IFwiY2xpY2tlZFwiXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5hY3Rpb25MaXN0LnB1c2goZW50cnkpO1xuICAgICAgICB9XG5cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcywge1xuICAgICAgICAgICAgXCJkZXN0cm95XCI6IHtcbiAgICAgICAgICAgICAgICBcInZhbHVlXCI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgb3duZXIgPSBuYW1lID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcIm9uY2xpY2tcIjoge1xuICAgICAgICAgICAgICAgIFwiZ2V0XCI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9uY2xpY2s7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBcInNldFwiOiBmdW5jdGlvbiAoZikge1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIGYgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgKFwib25jbGljayBtdXN0IGJlIGEgZnVuY3Rpb25cIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgb25jbGljayA9IGY7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgQnV0dG9uUGFyYW1ldGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoUGx1Z2luUGFyYW1ldGVyLnByb3RvdHlwZSk7XG4gICAgQnV0dG9uUGFyYW1ldGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IEJ1dHRvblBhcmFtZXRlcjtcblxuICAgIGZ1bmN0aW9uIFN3aXRjaFBhcmFtZXRlcihvd25lciwgbmFtZSwgZGVmYXVsdFZhbHVlLCBtaW5TdGF0ZSwgbWF4U3RhdGUpIHtcbiAgICAgICAgUGx1Z2luUGFyYW1ldGVyLmNhbGwodGhpcywgb3duZXIsIG5hbWUsIFwiQnV0dG9uXCIpO1xuICAgICAgICB2YXIgb25jbGljayA9IGZ1bmN0aW9uICgpIHt9O1xuICAgICAgICB2YXIgX3ZhbHVlID0gZGVmYXVsdFZhbHVlO1xuXG4gICAgICAgIGZ1bmN0aW9uIGFkZEFjdGlvbih2KSB7XG4gICAgICAgICAgICB2YXIgZW50cnkgPSB7XG4gICAgICAgICAgICAgICAgJ3RpbWUnOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgICAgICd2YWx1ZSc6IHZcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmFjdGlvbkxpc3QucHVzaChlbnRyeSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBzZXRWKHYpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmJvdW5kQXVkaW9QYXJhbSkge1xuICAgICAgICAgICAgICAgIHRoaXMuYm91bmRBdWRpb1BhcmFtLnZhbHVlID0gdGhpcy51cGRhdGUodik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBhZGRBY3Rpb24uY2FsbCh0aGlzLCB2KTtcbiAgICAgICAgICAgIGlmIChfdmFsdWUgIT09IHYpIHtcbiAgICAgICAgICAgICAgICBfdmFsdWUgPSB2O1xuICAgICAgICAgICAgICAgIHZhciBlID0gbmV3IEV2ZW50KFwicGFyYW1ldGVyc2V0XCIpO1xuICAgICAgICAgICAgICAgIGV2ZW50VGFyZ2V0LmRpc3BhdGNoRXZlbnQoZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnRyaWdnZXIoKTtcbiAgICAgICAgICAgIHJldHVybiB2O1xuICAgICAgICB9XG5cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcywge1xuICAgICAgICAgICAgXCJkZXN0cm95XCI6IHtcbiAgICAgICAgICAgICAgICBcInZhbHVlXCI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgb3duZXIgPSBuYW1lID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcImRlZmF1bHRWYWx1ZVwiOiB7XG4gICAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiBkZWZhdWx0VmFsdWVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcIm1pblN0YXRlXCI6IHtcbiAgICAgICAgICAgICAgICBcInZhbHVlXCI6IG1pblN0YXRlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJtYXhTdGF0ZVwiOiB7XG4gICAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiBtYXhTdGF0ZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwidmFsdWVcIjoge1xuICAgICAgICAgICAgICAgIFwiZ2V0XCI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYm91bmRBdWRpb1BhcmFtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy50cmFuc2xhdGUodGhpcy5ib3VuZEF1ZGlvUGFyYW0udmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfdmFsdWU7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBcInNldFwiOiBmdW5jdGlvbiAodikge1xuICAgICAgICAgICAgICAgICAgICBpZiAodiA8IG1pblN0YXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyAoXCJTZXQgdmFsdWUgaXMgbGVzcyB0aGFuIFwiICsgbWluU3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh2ID4gbWF4U3RhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IChcIlNldCB2YWx1ZSBpcyBncmVhdGVyIHRoYW4gXCIgKyBtYXhTdGF0ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNldFYuY2FsbCh0aGlzLCB2KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJpbmNyZW1lbnRcIjoge1xuICAgICAgICAgICAgICAgIFwidmFsdWVcIjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdiA9IF92YWx1ZSArIDE7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2ID4gbWF4U3RhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHYgPSBtaW5TdGF0ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2V0Vi5jYWxsKHRoaXMsIHYpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcImRlY3JlbWVudFwiOiB7XG4gICAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB2ID0gX3ZhbHVlIC0gMTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHYgPCBtaW5TdGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdiA9IG1heFN0YXRlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzZXRWLmNhbGwodGhpcywgdik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgU3dpdGNoUGFyYW1ldGVyLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoUGx1Z2luUGFyYW1ldGVyLnByb3RvdHlwZSk7XG4gICAgU3dpdGNoUGFyYW1ldGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFN3aXRjaFBhcmFtZXRlcjtcblxuICAgIGZ1bmN0aW9uIExpc3RQYXJhbWV0ZXIob3duZXIsIG5hbWUsIGRlZmF1bHRWYWx1ZSwgbGlzdE9mVmFsdWVzKSB7XG4gICAgICAgIFBsdWdpblBhcmFtZXRlci5jYWxsKHRoaXMsIG93bmVyLCBuYW1lLCBcIkJ1dHRvblwiKTtcbiAgICAgICAgdmFyIG9uY2xpY2sgPSBmdW5jdGlvbiAoKSB7fTtcbiAgICAgICAgdmFyIF9pbmRleCA9IGxpc3RPZlZhbHVlcy5pbmRleE9mKGRlZmF1bHRWYWx1ZSk7XG5cbiAgICAgICAgZnVuY3Rpb24gYWRkQWN0aW9uKHYpIHtcbiAgICAgICAgICAgIHZhciBlbnRyeSA9IHtcbiAgICAgICAgICAgICAgICAndGltZSc6IG5ldyBEYXRlKCksXG4gICAgICAgICAgICAgICAgJ3ZhbHVlJzogdlxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uTGlzdC5wdXNoKGVudHJ5KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHNldFYodikge1xuICAgICAgICAgICAgdmFyIGkgPSBsaXN0T2ZWYWx1ZXMuaW5kZXhPZih2KTtcbiAgICAgICAgICAgIGlmIChpID09PSB1bmRlZmluZWQgfHwgaSA8IDApIHtcbiAgICAgICAgICAgICAgICB0aHJvdyhcIk5vdCBpbiBsaXN0IHJhbmdlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHRoaXMuYm91bmRBdWRpb1BhcmFtKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5ib3VuZEF1ZGlvUGFyYW0udmFsdWUgPSB0aGlzLnVwZGF0ZSh2KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFkZEFjdGlvbi5jYWxsKHRoaXMsIHYpO1xuICAgICAgICAgICAgaWYgKF9pbmRleCAhPT0gaSkge1xuICAgICAgICAgICAgICAgIF9pbmRleCA9IGk7XG4gICAgICAgICAgICAgICAgdmFyIGUgPSBuZXcgRXZlbnQoXCJwYXJhbWV0ZXJzZXRcIik7XG4gICAgICAgICAgICAgICAgZXZlbnRUYXJnZXQuZGlzcGF0Y2hFdmVudChlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMudHJpZ2dlcigpO1xuICAgICAgICAgICAgcmV0dXJuIGxpc3RPZlZhbHVlc1tfaW5kZXhdO1xuICAgICAgICB9XG5cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcywge1xuICAgICAgICAgICAgXCJkZXN0cm95XCI6IHtcbiAgICAgICAgICAgICAgICBcInZhbHVlXCI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgb3duZXIgPSBuYW1lID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcImRlZmF1bHRWYWx1ZVwiOiB7XG4gICAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiBkZWZhdWx0VmFsdWVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcImxpc3RWYWx1ZXNcIjoge1xuICAgICAgICAgICAgICAgIFwiZ2V0XCI6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbCA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBsaXN0T2ZWYWx1ZXMuZm9yRWFjaChmdW5jdGlvbih2KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsLnB1c2godik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJ2YWx1ZVwiOiB7XG4gICAgICAgICAgICAgICAgXCJnZXRcIjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5ib3VuZEF1ZGlvUGFyYW0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnRyYW5zbGF0ZSh0aGlzLmJvdW5kQXVkaW9QYXJhbS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxpc3RPZlZhbHVlc1tfaW5kZXhdO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgXCJzZXRcIjogZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHYgPCBtaW5TdGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgKFwiU2V0IHZhbHVlIGlzIGxlc3MgdGhhbiBcIiArIG1pblN0YXRlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodiA+IG1heFN0YXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyAoXCJTZXQgdmFsdWUgaXMgZ3JlYXRlciB0aGFuIFwiICsgbWF4U3RhdGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzZXRWLmNhbGwodGhpcywgdik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwiaW5jcmVtZW50XCI6IHtcbiAgICAgICAgICAgICAgICBcInZhbHVlXCI6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHYgPSBfdmFsdWUgKyAxO1xuICAgICAgICAgICAgICAgICAgICBpZiAodiA+IG1heFN0YXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2ID0gbWluU3RhdGU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNldFYuY2FsbCh0aGlzLCB2KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJkZWNyZW1lbnRcIjoge1xuICAgICAgICAgICAgICAgIFwidmFsdWVcIjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgdiA9IF92YWx1ZSAtIDE7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2IDwgbWluU3RhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHYgPSBtYXhTdGF0ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2V0Vi5jYWxsKHRoaXMsIHYpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIExpc3RQYXJhbWV0ZXIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShQbHVnaW5QYXJhbWV0ZXIucHJvdG90eXBlKTtcbiAgICBMaXN0UGFyYW1ldGVyLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IExpc3RQYXJhbWV0ZXI7XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLCB7XG4gICAgICAgICdjcmVhdGVOdW1iZXJQYXJhbWV0ZXInOiB7XG4gICAgICAgICAgICBcInZhbHVlXCI6IGZ1bmN0aW9uIChuYW1lLCBkZWZhdWx0VmFsdWUsIG1pbmltdW0sIG1heGltdW0pIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG5hbWUgIT09IFwic3RyaW5nXCIgfHwgdHlwZW9mIGRlZmF1bHRWYWx1ZSAhPT0gXCJudW1iZXJcIiB8fCAobWluaW11bSAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBtaW5pbXVtICE9PSBcIm51bWJlclwiKSB8fCAobWF4aW11bSAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBtYXhpbXVtICE9PSBcIm51bWJlclwiKSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyAoXCJJbnZsaWQgY29uc3RydWN0b3JcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChmaW5kUGFyYW1ldGVySW5kZXgobmFtZSkgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IChcIlBhcmFtZXRlciB3aXRoIG5hbWUgJ1wiICsgbmFtZSArIFwiJyBhbHJlYWR5IGV4aXN0c1wiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHBhcmFtID0gbmV3IE51bWJlclBhcmFtZXRlcihvd25lciwgbmFtZSwgZGVmYXVsdFZhbHVlLCBtaW5pbXVtLCBtYXhpbXVtKTtcbiAgICAgICAgICAgICAgICBhZGRQYXJhbWV0ZXIocGFyYW0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXJhbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgJ2NyZWF0ZVN0cmluZ1BhcmFtZXRlcic6IHtcbiAgICAgICAgICAgIFwidmFsdWVcIjogZnVuY3Rpb24gKG5hbWUsIGRlZmF1bHRWYWx1ZSwgbWF4TGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBuYW1lICE9PSBcInN0cmluZ1wiIHx8IHR5cGVvZiBkZWZhdWx0VmFsdWUgIT09IFwic3RyaW5nXCIgfHwgKG1heExlbmd0aCAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBtYXhMZW5ndGggIT09IFwibnVtYmVyXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IChcIkludmxpZCBjb25zdHJ1Y3RvclwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGZpbmRQYXJhbWV0ZXJJbmRleChuYW1lKSAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgKFwiUGFyYW1ldGVyIHdpdGggbmFtZSAnXCIgKyBuYW1lICsgXCInIGFscmVhZHkgZXhpc3RzXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgcGFyYW0gPSBuZXcgU3RyaW5nUGFyYW1ldGVyKG93bmVyLCBuYW1lLCBkZWZhdWx0VmFsdWUsIG1heExlbmd0aCk7XG4gICAgICAgICAgICAgICAgYWRkUGFyYW1ldGVyKHBhcmFtKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyYW07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgICdjcmVhdGVCdXR0b25QYXJhbWV0ZXInOiB7XG4gICAgICAgICAgICBcInZhbHVlXCI6IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBuYW1lICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IChcIkludmFsaWQgY29uc3RydWN0b3JcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChmaW5kUGFyYW1ldGVySW5kZXgobmFtZSkgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHRocm93IChcIlBhcmFtZXRlciB3aXRoIG5hbWUgJ1wiICsgbmFtZSArIFwiJyBhbHJlYWR5IGV4aXN0c1wiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHBhcmFtID0gbmV3IEJ1dHRvblBhcmFtZXRlcihvd25lciwgbmFtZSk7XG4gICAgICAgICAgICAgICAgYWRkUGFyYW1ldGVyKHBhcmFtKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyYW07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgICdjcmVhdGVTd2l0Y2hQYXJhbWV0ZXInOiB7XG4gICAgICAgICAgICBcInZhbHVlXCI6IGZ1bmN0aW9uIChuYW1lLCBkZWZhdWx0VmFsdWUsIG1pblN0YXRlLCBtYXhTdGF0ZSkge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbmFtZSAhPT0gXCJzdHJpbmdcIiB8fCB0eXBlb2YgZGVmYXVsdFZhbHVlICE9PSBcIm51bWJlclwiIHx8IHR5cGVvZiBtaW5TdGF0ZSAhPT0gXCJudW1iZXJcIiB8fCB0eXBlb2YgbWF4U3RhdGUgIT09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgKFwiSW52bGlkIGNvbnN0cnVjdG9yXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZmluZFBhcmFtZXRlckluZGV4KG5hbWUpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyAoXCJQYXJhbWV0ZXIgd2l0aCBuYW1lICdcIiArIG5hbWUgKyBcIicgYWxyZWFkeSBleGlzdHNcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBwYXJhbSA9IG5ldyBTd2l0Y2hQYXJhbWV0ZXIob3duZXIsIG5hbWUsIGRlZmF1bHRWYWx1ZSwgbWluU3RhdGUsIG1heFN0YXRlKTtcbiAgICAgICAgICAgICAgICBhZGRQYXJhbWV0ZXIocGFyYW0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBwYXJhbTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgJ2NyZWF0ZUxpc3RQYXJhbWV0ZXInOiB7XG4gICAgICAgICAgICBcInZhbHVlXCI6IGZ1bmN0aW9uIChuYW1lLCBkZWZhdWx0VmFsdWUsIGxpc3RPZlZhbHVlcykge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbmFtZSAhPT0gXCJzdHJpbmdcIiB8fCB0eXBlb2YgZGVmYXVsdFZhbHVlID09PSBcInVuZGVmaW5lZFwiIHx8ICFBcnJheS5pc0FycmF5KGxpc3RPZlZhbHVlcykpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgKFwiSW52bGlkIGNvbnN0cnVjdG9yXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobGlzdE9mVmFsdWVzLmluY2x1ZGVzKGRlZmF1bHRWYWx1ZSkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGhyb3cgKFwiSW52bGlkIGNvbnN0cnVjdG9yIC0gZGVmYXVsdCB2YWx1ZSBtaXNzaW5nXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZmluZFBhcmFtZXRlckluZGV4KG5hbWUpICE9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyAoXCJQYXJhbWV0ZXIgd2l0aCBuYW1lICdcIiArIG5hbWUgKyBcIicgYWxyZWFkeSBleGlzdHNcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBwYXJhbSA9IG5ldyBMaXN0UGFyYW1ldGVyKG93bmVyLCBuYW1lLCBkZWZhdWx0VmFsdWUsIGxpc3RPZlZhbHVlcyk7XG4gICAgICAgICAgICAgICAgYWRkUGFyYW1ldGVyKHBhcmFtKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyYW07XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgICdjcmVhdGVQYXJhbWV0ZXInOiB7XG4gICAgICAgICAgICAndmFsdWUnOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgKFwiVGhpcyBmdW5jdGlvbiBpcyBub3cgZGVwcmVjYXRlZFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgJ2dldFBhcmFtZXRlck5hbWUnOiB7XG4gICAgICAgICAgICAndmFsdWUnOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIG5hbWVzID0gW10sXG4gICAgICAgICAgICAgICAgICAgIGk7XG4gICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IHBhcmFtZXRlckxpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgbmFtZXMucHVzaChwYXJhbWV0ZXJMaXN0W2ldLm5hbWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gbmFtZXM7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgICdnZXRQYXJhbWV0ZXJCeU5hbWUnOiB7XG4gICAgICAgICAgICAndmFsdWUnOiBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmaW5kUGFyYW1ldGVyKG5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICAnZ2V0UGFyYW1ldGVyT2JqZWN0Jzoge1xuICAgICAgICAgICAgJ3ZhbHVlJzogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBidWlsZFBhcmFtZXRlck9iamVjdCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICAnZ2V0UGFyYW1ldGVyTmFtZXMnOiB7XG4gICAgICAgICAgICAndmFsdWUnOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIGwgPSBbXTtcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJMaXN0LmZvckVhY2goZnVuY3Rpb24gKGEpIHtcbiAgICAgICAgICAgICAgICAgICAgbC5wdXNoKGEubmFtZSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGw7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgICdzZXRQYXJhbWV0ZXJCeU5hbWUnOiB7XG4gICAgICAgICAgICAndmFsdWUnOiBmdW5jdGlvbiAobiwgdikge1xuICAgICAgICAgICAgICAgIHZhciBwYXJhbWV0ZXIgPSBmaW5kUGFyYW1ldGVyKG4pO1xuICAgICAgICAgICAgICAgIGlmICghcGFyYW1ldGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcGFyYW1ldGVyLnZhbHVlID0gdjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgJ2RlbGV0ZVBhcmFtZXRlcic6IHtcbiAgICAgICAgICAgICd2YWx1ZSc6IGZ1bmN0aW9uIChvKSB7XG4gICAgICAgICAgICAgICAgdmFyIGluZGV4ID0gcGFyYW1ldGVyTGlzdC5maW5kSW5kZXgoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUgPT09IG87XG4gICAgICAgICAgICAgICAgfSwgbyk7XG4gICAgICAgICAgICAgICAgaWYgKGluZGV4ID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRG9lcyBleGlzdFxuICAgICAgICAgICAgICAgICAgICBwYXJhbWV0ZXJMaXN0LnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICAgICAgICAgIG8uZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICAnZGVsZXRlQWxsUGFyYW1ldGVycyc6IHtcbiAgICAgICAgICAgICd2YWx1ZSc6IGZ1bmN0aW9uIChvKSB7XG4gICAgICAgICAgICAgICAgcGFyYW1ldGVyTGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGUuZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHBhcmFtZXRlckxpc3QgPSBbXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgJ3NldFBhcmFtZXRlcnNCeU9iamVjdCc6IHtcbiAgICAgICAgICAgICd2YWx1ZSc6IGZ1bmN0aW9uIChvYmplY3QpIHtcbiAgICAgICAgICAgICAgICB2YXIga2V5O1xuICAgICAgICAgICAgICAgIGZvciAoa2V5IGluIG9iamVjdCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAob2JqZWN0Lmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygb2JqZWN0W2tleV0gPT0gXCJvYmplY3RcIikge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRQYXJhbWV0ZXJCeU5hbWUoa2V5LCBvYmplY3Rba2V5XS52YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBvYmplY3Rba2V5XSA9PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRQYXJhbWV0ZXJCeU5hbWUoa2V5LCBvYmplY3Rba2V5XSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IChcIkNhbm5vdCBzZXQgXCIgKyBrZXkgKyBcIjogTm90IGEgdmFsaWQgb2JqZWN0XCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICAncGFyYW1ldGVycyc6IHtcbiAgICAgICAgICAgICdnZXQnOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGJ1aWxkUGFyYW1ldGVyT2JqZWN0KCk7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ3NldCc6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyAoXCJDYW5ub3Qgc2V0LCB1c2UgLnNldFBhcmFtZXRlckJ5Li4uKClcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbn07XG5cbnZhciBQbHVnaW5GZWF0dXJlSW50ZXJmYWNlID0gZnVuY3Rpb24gKEJhc2VQbHVnaW5JbnN0YW5jZSkge1xuICAgIHRoaXMucGx1Z2luID0gQmFzZVBsdWdpbkluc3RhbmNlO1xuICAgIHRoaXMuUmVjZWl2ZXIgPSBuZXcgUGx1Z2luRmVhdHVyZUludGVyZmFjZVJlY2VpdmVyKHRoaXMsIEJhc2VQbHVnaW5JbnN0YW5jZS5mYWN0b3J5LkZlYXR1cmVNYXApO1xuICAgIHRoaXMuU2VuZGVyID0gbmV3IFBsdWdpbkZlYXR1cmVJbnRlcmZhY2VTZW5kZXIodGhpcywgQmFzZVBsdWdpbkluc3RhbmNlLmZhY3RvcnkuRmVhdHVyZU1hcCk7XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJvbmZlYXR1cmVzXCIsIHtcbiAgICAgICAgJ2dldCc6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLlJlY2VpdmVyLm9uZmVhdHVyZXM7XG4gICAgICAgIH0sXG4gICAgICAgICdzZXQnOiBmdW5jdGlvbiAoZnVuYykge1xuICAgICAgICAgICAgdGhpcy5SZWNlaXZlci5vbmZlYXR1cmVzID0gZnVuYztcbiAgICAgICAgICAgIHJldHVybiBmdW5jO1xuICAgICAgICB9XG4gICAgfSk7XG59O1xudmFyIFBsdWdpbkZlYXR1cmVJbnRlcmZhY2VSZWNlaXZlciA9IGZ1bmN0aW9uIChGZWF0dXJlSW50ZXJmYWNlSW5zdGFuY2UsIEZhY3RvcnlGZWF0dXJlTWFwKSB7XG4gICAgZnVuY3Rpb24gY2hlY2tGZWF0dXJlQXJncyhzb3VyY2UsIGZlYXR1cmVPYmplY3QpIHtcbiAgICAgICAgaWYgKHNvdXJjZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyAoXCJTb3VyY2UgcGx1Z2luIG11c3QgYmUgZGVmaW5lZFwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZmVhdHVyZU9iamVjdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyAoXCJGZWF0dXJlT2JqZWN0IG11c3QgYmUgZGVmaW5lZFwiKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIGZlYXR1cmVPYmplY3Qub3V0cHV0SW5kZXggIT09IFwibnVtYmVyXCIgfHwgdHlwZW9mIGZlYXR1cmVPYmplY3QuZnJhbWVTaXplICE9PSBcIm51bWJlclwiIHx8IHR5cGVvZiBmZWF0dXJlT2JqZWN0LmZlYXR1cmVzICE9PSBcIm9iamVjdFwiKSB7XG4gICAgICAgICAgICB0aHJvdyAoXCJNYWxmb3JtZWQgZmVhdHVyZU9iamVjdFwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgdmFyIGNfZmVhdHVyZXMgPSBmdW5jdGlvbiAoKSB7fTtcbiAgICB0aGlzLnJlcXVlc3RGZWF0dXJlcyA9IGZ1bmN0aW9uIChmZWF0dXJlTGlzdCkge1xuICAgICAgICB2YXIgaTtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGZlYXR1cmVMaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICB0aGlzLnJlcXVlc3RGZWF0dXJlc0Zyb21QbHVnaW4oZmVhdHVyZUxpc3RbaV0ucGx1Z2luLCB7XG4gICAgICAgICAgICAgICAgJ291dHB1dEluZGV4JzogZmVhdHVyZUxpc3RbaV0ub3V0cHV0SW5kZXgsXG4gICAgICAgICAgICAgICAgJ2ZyYW1lU2l6ZSc6IGZlYXR1cmVMaXN0W2ldLmZyYW1lU2l6ZSxcbiAgICAgICAgICAgICAgICAnZmVhdHVyZXMnOiBmZWF0dXJlTGlzdFtpXS5mZWF0dXJlc1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHRoaXMucmVxdWVzdEZlYXR1cmVzRnJvbVBsdWdpbiA9IGZ1bmN0aW9uIChzb3VyY2UsIGZlYXR1cmVPYmplY3QpIHtcbiAgICAgICAgY2hlY2tGZWF0dXJlQXJncyhzb3VyY2UsIGZlYXR1cmVPYmplY3QpO1xuICAgICAgICBGYWN0b3J5RmVhdHVyZU1hcC5yZXF1ZXN0RmVhdHVyZXMoRmVhdHVyZUludGVyZmFjZUluc3RhbmNlLnBsdWdpbiwgc291cmNlLCBmZWF0dXJlT2JqZWN0KTtcbiAgICB9O1xuICAgIHRoaXMuY2FuY2VsRmVhdHVyZXNGcm9tUGx1Z2luID0gZnVuY3Rpb24gKHNvdXJjZSwgZmVhdHVyZU9iamVjdCkge1xuICAgICAgICBjaGVja0ZlYXR1cmVBcmdzKHNvdXJjZSwgZmVhdHVyZU9iamVjdCk7XG4gICAgICAgIEZhY3RvcnlGZWF0dXJlTWFwLmRlbGV0ZUZlYXR1cmVzKEZlYXR1cmVJbnRlcmZhY2VJbnN0YW5jZS5wbHVnaW4sIHNvdXJjZSwgZmVhdHVyZU9iamVjdCk7XG4gICAgfTtcbiAgICB0aGlzLmNhbmNlbEFsbEZlYXR1cmVzRnJvbVBsdWdpbiA9IGZ1bmN0aW9uIChzb3VyY2UpIHtcbiAgICAgICAgaWYgKHNvdXJjZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aHJvdyAoXCJTb3VyY2UgcGx1Z2luIG11c3QgYmUgZGVmaW5lZFwiKTtcbiAgICAgICAgfVxuICAgICAgICBGYWN0b3J5RmVhdHVyZU1hcC5kZWxldGVGZWF0dXJlcyhGZWF0dXJlSW50ZXJmYWNlSW5zdGFuY2UucGx1Z2luLCBzb3VyY2UpO1xuICAgIH07XG4gICAgdGhpcy5jYW5jZWxBbGxGZWF0dXJlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgRmFjdG9yeUZlYXR1cmVNYXAuZGVsZXRlRmVhdHVyZXMoRmVhdHVyZUludGVyZmFjZUluc3RhbmNlLnBsdWdpbik7XG4gICAgfTtcblxuICAgIHRoaXMucG9zdEZlYXR1cmVzID0gZnVuY3Rpb24gKE1lc3NhZ2UpIHtcbiAgICAgICAgLypcbiAgICAgICAgICAgIENhbGxlZCBieSB0aGUgUGx1Z2luIEZhY3Rvcnkgd2l0aCB0aGUgZmVhdHVyZSBtZXNzYWdlXG4gICAgICAgICAgICBtZXNzYWdlID0ge1xuICAgICAgICAgICAgICAgICdwbHVnaW4nOiBzb3VyY2VQbHVnaW5JbnN0YW5jZSxcbiAgICAgICAgICAgICAgICAnb3V0cHV0SW5kZXgnOiBvdXRwdXRJbmRleCxcbiAgICAgICAgICAgICAgICAnZnJhbWVTaXplJzogZnJhbWVTaXplLFxuICAgICAgICAgICAgICAgICdmZWF0dXJlcyc6IHt9IEpTLVh0cmFjdCBmZWF0dXJlIHJlc3VsdHMgb2JqZWN0XG4gICAgICAgICAgICB9XG4gICAgICAgICovXG4gICAgICAgIGlmICh0eXBlb2YgY19mZWF0dXJlcyA9PT0gXCJmdW5jdGlvblwiKSB7XG4gICAgICAgICAgICBjX2ZlYXR1cmVzKE1lc3NhZ2UpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIm9uZmVhdHVyZXNcIiwge1xuICAgICAgICAnZ2V0JzogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIGNfZmVhdHVyZXM7XG4gICAgICAgIH0sXG4gICAgICAgICdzZXQnOiBmdW5jdGlvbiAoZnVuYykge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBmdW5jID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgICAgICBjX2ZlYXR1cmVzID0gZnVuYztcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG59O1xudmFyIFBsdWdpbkZlYXR1cmVJbnRlcmZhY2VTZW5kZXIgPSBmdW5jdGlvbiAoRmVhdHVyZUludGVyZmFjZUluc3RhbmNlLCBGYWN0b3J5RmVhdHVyZU1hcCkge1xuICAgIHZhciBPdXRwdXROb2RlID0gZnVuY3Rpb24gKHBhcmVudCwgb3V0cHV0LCBpbmRleCkge1xuICAgICAgICB2YXIgZXh0cmFjdG9ycyA9IFtdO1xuICAgICAgICB2YXIgRXh0cmFjdG9yID0gZnVuY3Rpb24gKG91dHB1dCwgZnJhbWVTaXplKSB7XG4gICAgICAgICAgICB0aGlzLmV4dHJhY3RvciA9IEZlYXR1cmVJbnRlcmZhY2VJbnN0YW5jZS5wbHVnaW4uZmFjdG9yeS5jb250ZXh0LmNyZWF0ZUFuYWx5c2VyKCk7XG4gICAgICAgICAgICB0aGlzLmV4dHJhY3Rvci5mZnRTaXplID0gZnJhbWVTaXplO1xuICAgICAgICAgICAgb3V0cHV0LmNvbm5lY3QodGhpcy5leHRyYWN0b3IpO1xuICAgICAgICAgICAgdGhpcy5mZWF0dXJlcyA9IFtdO1xuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZnJhbWVTaXplXCIsIHtcbiAgICAgICAgICAgICAgICAndmFsdWUnOiBmcmFtZVNpemVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLypcbiAgICAgICAgICAgIGZ1bmN0aW9uIHJlY3Vyc2l2ZVByb2Nlc3NpbmcoYmFzZSwgbGlzdCkge1xuICAgICAgICAgICAgICAgIHZhciBsID0gbGlzdC5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgIGksIGVudHJ5O1xuICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgZW50cnkgPSBsaXN0W2ldO1xuICAgICAgICAgICAgICAgICAgICBiYXNlW2VudHJ5Lm5hbWVdLmFwcGx5KGJhc2UsIGVudHJ5LnBhcmFtZXRlcnMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZW50cnkuZmVhdHVyZXMgJiYgZW50cnkuZmVhdHVyZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVjdXJzaXZlUHJvY2Vzc2luZyhiYXNlLnJlc3VsdFtlbnRyeS5uYW1lXSwgZW50cnkuZmVhdHVyZXMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHZhciByZWN1cnNpdmVQcm9jZXNzaW5nID0gdGhpcy5mYWN0b3J5LnJlY3Vyc2l2ZVByb2Nlc3Npbmc7XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIG9uYXVkaW9jYWxsYmFjayhkYXRhKSB7XG4gICAgICAgICAgICAgICAgLy90aGlzID09PSBFeHRyYWN0b3JcbiAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgJ251bWJlck9mQ2hhbm5lbHMnOiAxLFxuICAgICAgICAgICAgICAgICAgICAncmVzdWx0cyc6IFtdXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICByZWN1cnNpdmVQcm9jZXNzaW5nKGRhdGEsIHRoaXMuZmVhdHVyZXMpO1xuICAgICAgICAgICAgICAgIG1lc3NhZ2UucmVzdWx0c1swXSA9IHtcbiAgICAgICAgICAgICAgICAgICAgJ2NoYW5uZWwnOiAwLFxuICAgICAgICAgICAgICAgICAgICAncmVzdWx0cyc6IEpTT04ucGFyc2UoZGF0YS50b0pTT04oKSlcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoaXMucG9zdEZlYXR1cmVzKGRhdGEubGVuZ3RoLCBtZXNzYWdlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5zZXRGZWF0dXJlcyA9IGZ1bmN0aW9uIChmZWF0dXJlTGlzdCkge1xuICAgICAgICAgICAgICAgIHRoaXMuZmVhdHVyZXMgPSBmZWF0dXJlTGlzdDtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5mZWF0dXJlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5leHRyYWN0b3IuY2xlYXJDYWxsYmFjaygpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXh0cmFjdG9yLmZyYW1lQ2FsbGJhY2sob25hdWRpb2NhbGxiYWNrLCB0aGlzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICB2YXIgV29ya2VyRXh0cmFjdG9yID0gZnVuY3Rpb24gKG91dHB1dCwgZnJhbWVTaXplKSB7XG4gICAgICAgICAgICBmdW5jdGlvbiBvbmF1ZGlvY2FsbGJhY2soZSkge1xuICAgICAgICAgICAgICAgIHZhciBjLCBmcmFtZXMgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IgKGMgPSAwOyBjIDwgZS5pbnB1dEJ1ZmZlci5udW1iZXJPZkNoYW5uZWxzOyBjKyspIHtcbiAgICAgICAgICAgICAgICAgICAgZnJhbWVzW2NdID0gZS5pbnB1dEJ1ZmZlci5nZXRDaGFubmVsRGF0YShjKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKHtcbiAgICAgICAgICAgICAgICAgICAgJ3N0YXRlJzogMixcbiAgICAgICAgICAgICAgICAgICAgJ2ZyYW1lcyc6IGZyYW1lc1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiByZXNwb25zZShtc2cpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBvc3RGZWF0dXJlcyhmcmFtZVNpemUsIG1zZy5kYXRhLnJlc3BvbnNlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHdvcmtlciA9IG5ldyBXb3JrZXIoXCJqc2FwL2ZlYXR1cmUtd29ya2VyLmpzXCIpO1xuICAgICAgICAgICAgd29ya2VyLm9uZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB0aGlzLnNldEZlYXR1cmVzID0gZnVuY3Rpb24gKGZlYXR1cmVMaXN0KSB7XG4gICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICAgICAgICAgIHZhciBjb25maWdNZXNzYWdlID0ge1xuICAgICAgICAgICAgICAgICAgICAnc3RhdGUnOiAxLFxuICAgICAgICAgICAgICAgICAgICAnc2FtcGxlUmF0ZSc6IEZlYXR1cmVJbnRlcmZhY2VJbnN0YW5jZS5wbHVnaW4uZmFjdG9yeS5jb250ZXh0LnNhbXBsZVJhdGUsXG4gICAgICAgICAgICAgICAgICAgICdmZWF0dXJlTGlzdCc6IGZlYXR1cmVMaXN0LFxuICAgICAgICAgICAgICAgICAgICAnbnVtQ2hhbm5lbHMnOiBvdXRwdXQubnVtYmVyT2ZPdXRwdXRzLFxuICAgICAgICAgICAgICAgICAgICAnZnJhbWVTaXplJzogdGhpcy5mcmFtZVNpemVcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoaXMuZmVhdHVyZXMgPSBmZWF0dXJlTGlzdDtcbiAgICAgICAgICAgICAgICBpZiAoZmVhdHVyZUxpc3QgJiYgZmVhdHVyZUxpc3QubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICB3b3JrZXIub25tZXNzYWdlID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLmRhdGEuc3RhdGUgPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3b3JrZXIub25tZXNzYWdlID0gcmVzcG9uc2UuYmluZChzZWxmKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxmLmV4dHJhY3Rvci5vbmF1ZGlvcHJvY2VzcyA9IG9uYXVkaW9jYWxsYmFjay5iaW5kKHNlbGYpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3b3JrZXIucG9zdE1lc3NhZ2UoY29uZmlnTWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAnc3RhdGUnOiAwXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXh0cmFjdG9yLm9uYXVkaW9wcm9jZXNzID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdGhpcy5leHRyYWN0b3IgPSBGZWF0dXJlSW50ZXJmYWNlSW5zdGFuY2UucGx1Z2luLmZhY3RvcnkuY29udGV4dC5jcmVhdGVTY3JpcHRQcm9jZXNzb3IoZnJhbWVTaXplLCBvdXRwdXQubnVtYmVyT2ZPdXRwdXRzLCAxKTtcbiAgICAgICAgICAgIG91dHB1dC5jb25uZWN0KHRoaXMuZXh0cmFjdG9yKTtcbiAgICAgICAgICAgIHRoaXMuZXh0cmFjdG9yLmNvbm5lY3QoRmVhdHVyZUludGVyZmFjZUluc3RhbmNlLnBsdWdpbi5mYWN0b3J5LmNvbnRleHQuZGVzdGluYXRpb24pO1xuXG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJmcmFtZVNpemVcIiwge1xuICAgICAgICAgICAgICAgICd2YWx1ZSc6IGZyYW1lU2l6ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuYWRkRXh0cmFjdG9yID0gZnVuY3Rpb24gKGZyYW1lU2l6ZSkge1xuICAgICAgICAgICAgdmFyIG9iajtcbiAgICAgICAgICAgIGlmICh3aW5kb3cuV29ya2VyKSB7XG4gICAgICAgICAgICAgICAgb2JqID0gbmV3IFdvcmtlckV4dHJhY3RvcihvdXRwdXQsIGZyYW1lU2l6ZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG9iaiA9IG5ldyBFeHRyYWN0b3Iob3V0cHV0LCBmcmFtZVNpemUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZXh0cmFjdG9ycy5wdXNoKG9iaik7XG4gICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBcInBvc3RGZWF0dXJlc1wiLCB7XG4gICAgICAgICAgICAgICAgJ3ZhbHVlJzogZnVuY3Rpb24gKGZyYW1lU2l6ZSwgcmVzdWx0c0pTT04pIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9iaiA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdvdXRwdXRJbmRleCc6IGluZGV4LFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2ZyYW1lU2l6ZSc6IGZyYW1lU2l6ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdyZXN1bHRzJzogcmVzdWx0c0pTT05cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3N0RmVhdHVyZXMob2JqKTtcbiAgICAgICAgICAgICAgICB9LmJpbmQodGhpcylcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIG9iajtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5maW5kRXh0cmFjdG9yID0gZnVuY3Rpb24gKGZyYW1lU2l6ZSkge1xuICAgICAgICAgICAgdmFyIGNoZWNrID0gZnJhbWVTaXplO1xuICAgICAgICAgICAgcmV0dXJuIGV4dHJhY3RvcnMuZmluZChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIC8vIFRoaXMgTVVTVCBiZSA9PT0gTk9UID09PVxuICAgICAgICAgICAgICAgIHJldHVybiBlLmZyYW1lU2l6ZSA9PT0gY2hlY2s7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5kZWxldGVFeHRyYWN0b3IgPSBmdW5jdGlvbiAoZnJhbWVTaXplKSB7fTtcbiAgICB9O1xuICAgIHZhciBvdXRwdXROb2RlcyA9IFtdO1xuICAgIHRoaXMudXBkYXRlRmVhdHVyZXMgPSBmdW5jdGlvbiAoZmVhdHVyZU9iamVjdCkge1xuICAgICAgICAvLyBbXSBPdXRwdXQgLT4ge30gJ2ZyYW1lc2l6ZScgLT4ge30gJ2ZlYXR1cmVzJ1xuICAgICAgICB2YXIgbztcbiAgICAgICAgZm9yIChvID0gMDsgbyA8IGZlYXR1cmVPYmplY3QubGVuZ3RoOyBvKyspIHtcbiAgICAgICAgICAgIGlmIChvdXRwdXROb2Rlc1tvXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgaWYgKG8gPiBGZWF0dXJlSW50ZXJmYWNlSW5zdGFuY2UucGx1Z2luLm51bU91dHB1dHMpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgKFwiUmVxdWVzdGVkIGFuIG91dHB1dCB0aGF0IGRvZXMgbm90IGV4aXN0XCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBvdXRwdXROb2Rlc1tvXSA9IG5ldyBPdXRwdXROb2RlKEZlYXR1cmVJbnRlcmZhY2VJbnN0YW5jZS5wbHVnaW4sIEZlYXR1cmVJbnRlcmZhY2VJbnN0YW5jZS5wbHVnaW4ub3V0cHV0c1tvXSwgbyk7XG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG91dHB1dE5vZGVzW29dLCBcInBvc3RGZWF0dXJlc1wiLCB7XG4gICAgICAgICAgICAgICAgICAgICd2YWx1ZSc6IGZ1bmN0aW9uIChyZXN1bHRPYmplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucG9zdEZlYXR1cmVzKHJlc3VsdE9iamVjdCk7XG4gICAgICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHNpO1xuICAgICAgICAgICAgZm9yIChzaSA9IDA7IHNpIDwgZmVhdHVyZU9iamVjdFtvXS5sZW5ndGg7IHNpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgZXh0cmFjdG9yID0gb3V0cHV0Tm9kZXNbb10uZmluZEV4dHJhY3RvcihmZWF0dXJlT2JqZWN0W29dW3NpXS5mcmFtZVNpemUpO1xuICAgICAgICAgICAgICAgIGlmICghZXh0cmFjdG9yKSB7XG4gICAgICAgICAgICAgICAgICAgIGV4dHJhY3RvciA9IG91dHB1dE5vZGVzW29dLmFkZEV4dHJhY3RvcihmZWF0dXJlT2JqZWN0W29dW3NpXS5mcmFtZVNpemUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBleHRyYWN0b3Iuc2V0RmVhdHVyZXMoZmVhdHVyZU9iamVjdFtvXVtzaV0uZmVhdHVyZUxpc3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMucG9zdEZlYXR1cmVzID0gZnVuY3Rpb24gKGZlYXR1cmVPYmplY3QpIHtcbiAgICAgICAgLypcbiAgICAgICAgICAgIENhbGxlZCBieSB0aGUgaW5kaXZpZHVhbCBleHRyYWN0b3IgaW5zdGFuY2VzOlxuICAgICAgICAgICAgZmVhdHVyZU9iamVjdCA9IHsnZnJhbWVTaXplJzogZnJhbWVTaXplLFxuICAgICAgICAgICAgJ291dHB1dEluZGV4Jzogb3V0cHV0SW5kZXgsXG4gICAgICAgICAgICAncmVzdWx0cyc6W119XG4gICAgICAgICovXG4gICAgICAgIEZlYXR1cmVJbnRlcmZhY2VJbnN0YW5jZS5wbHVnaW4uZmFjdG9yeS5GZWF0dXJlTWFwLnBvc3RGZWF0dXJlcyh7XG4gICAgICAgICAgICAncGx1Z2luJzogRmVhdHVyZUludGVyZmFjZUluc3RhbmNlLnBsdWdpbi5wbHVnaW5JbnN0YW5jZSxcbiAgICAgICAgICAgICdvdXRwdXRJbmRleCc6IGZlYXR1cmVPYmplY3Qub3V0cHV0SW5kZXgsXG4gICAgICAgICAgICAnZnJhbWVTaXplJzogZmVhdHVyZU9iamVjdC5mcmFtZVNpemUsXG4gICAgICAgICAgICAncmVzdWx0cyc6IGZlYXR1cmVPYmplY3QucmVzdWx0c1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgLy8gU2VuZCB0byBGYWN0b3J5XG4gICAgRmFjdG9yeUZlYXR1cmVNYXAuY3JlYXRlU291cmNlTWFwKHRoaXMsIEZlYXR1cmVJbnRlcmZhY2VJbnN0YW5jZS5wbHVnaW4ucGx1Z2luSW5zdGFuY2UpO1xufTtcblxuLypcbiAgICBUaGlzIGlzIGFuIG9wdGlvbmFsIG1vZHVsZSB3aGljaCB3aWxsIGF0dGVtcHQgdG8gY3JlYXRlIGEgZ3JhcGhpY2FsIGltcGxlbWVudGF0aW9uLlxuICAgIEFzIHdpdGggb3RoZXIgYXVkaW8gcGx1Z2lucyBmb3IgREFXcywgdGhlIEdVSSBpcyBhbiBvcHRpb25hbCBlbGVtZW50IHdoaWNoIGNhbiBiZSBhY2NlcHRlZCBvciByZWplY3RlZCBieSB0aGUgaG9zdC5cblxuICAgIFRoZSBhY3R1YWwgR1VJIGlzIGxhdW5jaGVkIGFzIGFuIDxpZnJhbWU+IGVsZW1lbnQgaW4gdGhlIGJyb3dzZXIgdG8ga2VlcCBlYWNoIHBsdWdpbiBpc29sYXRlZCBmcm9tIHRoZSByZXN0XG4qL1xuXG52YXIgUGx1Z2luVXNlckludGVyZmFjZSA9IGZ1bmN0aW9uIChCYXNlUGx1Z2luSW5zdGFuY2UsIHdpZHRoLCBoZWlnaHQpIHtcbiAgICBjb25zb2xlLmxvZyhcIkRFUFJFQ0FURUQhIVwiKTtcbiAgICBjb25zb2xlLmxvZyhcIlRoZSBjbGFzcyBQbHVnaW5Vc2VySW50ZXJmYWNlIGhhcyBiZWVuIGRlcHJlY2F0ZWRcIik7XG4gICAgY29uc29sZS5sb2coXCJQbGVhc2UgbG9vayBhdCB0aGUgZG9jdW1lbnRzIGZvciB0aGUgbmV3IG1ldGhvZHMgZm9yIGJ1aWxkaW5nIHBsdWdpbnNcIik7XG4gICAgdGhpcy5wcm9jZXNzb3IgPSBCYXNlUGx1Z2luSW5zdGFuY2U7XG4gICAgdGhpcy5yb290ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBpZiAod2lkdGggPiAwKSB7XG4gICAgICAgIHRoaXMucm9vdC5zdHlsZS53aWR0aCA9IHdpZHRoICsgXCJweFwiO1xuICAgIH1cbiAgICBpZiAoaGVpZ2h0ID4gMCkge1xuICAgICAgICB0aGlzLnJvb3Quc3R5bGUuaGVpZ2h0ID0gaGVpZ2h0ICsgXCJweFwiO1xuICAgIH1cbiAgICB0aGlzLmRpbSA9IHtcbiAgICAgICAgd2lkdGg6IHdpZHRoLFxuICAgICAgICBoZWlnaHQ6IGhlaWdodFxuICAgIH07XG4gICAgdGhpcy5pbnRlcnZhbEZ1bmN0aW9uID0gbnVsbDtcbiAgICB0aGlzLnVwZGF0ZUludGVydmFsID0gbnVsbDtcbiAgICB0aGlzLlBsdWdpblBhcmFtZXRlckludGVyZmFjZXMgPSBbXTtcblxuICAgIHZhciBQbHVnaW5QYXJhbWV0ZXJJbnRlcmZhY2VOb2RlID0gZnVuY3Rpb24gKERPTSwgUGx1Z2luUGFyYW1ldGVySW5zdGFuY2UsIHByb2Nlc3NvciwgZ3VpKSB7XG4gICAgICAgIHRoaXMuaW5wdXQgPSBET007XG4gICAgICAgIHRoaXMucHJvY2Vzc29yID0gcHJvY2Vzc29yO1xuICAgICAgICB0aGlzLkdVSSA9IGd1aTtcbiAgICAgICAgdGhpcy5BdWRpb1BhcmFtID0gUGx1Z2luUGFyYW1ldGVySW5zdGFuY2U7XG4gICAgICAgIHRoaXMuaGFuZGxlRXZlbnQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgIHRoaXMuQXVkaW9QYXJhbS52YWx1ZSA9IHRoaXMuaW5wdXQudmFsdWU7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCB0aGlzKTtcbiAgICAgICAgdGhpcy5pbnB1dC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vtb3ZlXCIsIHRoaXMpO1xuICAgICAgICB0aGlzLmlucHV0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzKTtcbiAgICB9O1xuXG4gICAgdGhpcy5jcmVhdGVQbHVnaW5QYXJhbWV0ZXJJbnRlcmZhY2VOb2RlID0gZnVuY3Rpb24gKERPTSwgUGx1Z2luUGFyYW1ldGVySW5zdGFuY2UpIHtcbiAgICAgICAgdmFyIG5vZGUgPSBuZXcgUGx1Z2luUGFyYW1ldGVySW50ZXJmYWNlTm9kZShET00sIFBsdWdpblBhcmFtZXRlckluc3RhbmNlLCB0aGlzLnByb2Nlc3NvciwgdGhpcyk7XG4gICAgICAgIHRoaXMuUGx1Z2luUGFyYW1ldGVySW50ZXJmYWNlcy5wdXNoKG5vZGUpO1xuICAgICAgICByZXR1cm4gbm9kZTtcbiAgICB9O1xuXG4gICAgdGhpcy51cGRhdGUgPSBmdW5jdGlvbiAoKSB7fTtcblxufTtcblxuUGx1Z2luVXNlckludGVyZmFjZS5wcm90b3R5cGUuZ2V0Um9vdCA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcy5yb290O1xufTtcblBsdWdpblVzZXJJbnRlcmZhY2UucHJvdG90eXBlLmdldERpbWVuc2lvbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGltO1xufTtcblBsdWdpblVzZXJJbnRlcmZhY2UucHJvdG90eXBlLmdldFdpZHRoID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiB0aGlzLmRpbS53aWR0aDtcbn07XG5QbHVnaW5Vc2VySW50ZXJmYWNlLnByb3RvdHlwZS5nZXRIZWlnaHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGltLmhlaWdodDtcbn07XG5QbHVnaW5Vc2VySW50ZXJmYWNlLnByb3RvdHlwZS5iZWdpbkNhbGxiYWNrcyA9IGZ1bmN0aW9uIChtcykge1xuICAgIC8vIEFueSByZWdpc3RlcmVkIGNhbGxiYWNrcyBhcmUgc3RhcnRlZCBieSB0aGUgaG9zdFxuICAgIGlmIChtcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIG1zID0gMjUwO1xuICAgIH0gLy9EZWZhdWx0IG9mIDI1MG1zIHVwZGF0ZSBwZXJpb2RcbiAgICBpZiAodGhpcy5pbnRlcnZhbEZ1bmN0aW9uID09PSBudWxsKSB7XG4gICAgICAgIHRoaXMudXBkYXRlSW50ZXJ2YWwgPSBtcztcbiAgICAgICAgdGhpcy5pbnRlcnZhbEZ1bmN0aW9uID0gd2luZG93LnNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlKCk7XG4gICAgICAgIH0uYmluZCh0aGlzKSwgMjUwKTtcbiAgICB9XG59O1xuUGx1Z2luVXNlckludGVyZmFjZS5wcm90b3R5cGUuc3RvcENhbGxiYWNrcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAvLyBBbnkgcmVnaXN0ZXJlZCBjYWxsYmFja3MgYXJlIHN0b3BwZWQgYnkgdGhlIGhvc3RcbiAgICBpZiAodGhpcy5pbnRlcnZhbEZ1bmN0aW9uICE9PSBudWxsKSB7XG4gICAgICAgIHdpbmRvdy5jbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWxGdW5jdGlvbik7XG4gICAgICAgIHRoaXMudXBkYXRlSW50ZXJ2YWwgPSBudWxsO1xuICAgICAgICB0aGlzLmludGVydmFsRnVuY3Rpb24gPSBudWxsO1xuICAgIH1cbn07XG5QbHVnaW5Vc2VySW50ZXJmYWNlLnByb3RvdHlwZS5sb2FkUmVzb3VyY2UgPSBmdW5jdGlvbiAodXJsKSB7XG4gICAgdmFyIHAgPSBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIHZhciByZXEgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcbiAgICAgICAgcmVxLm9wZW4oJ0dFVCcsIHVybCk7XG4gICAgICAgIHJlcS5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAocmVxLnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShyZXEucmVzcG9uc2UpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZWplY3QoRXJyb3IocmVxLnN0YXR1c1RleHQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgcmVxLm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZWplY3QoRXJyb3IoXCJOZXR3b3JrIEVycm9yXCIpKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmVxLnNlbmQoKTtcbiAgICB9KTtcbiAgICByZXR1cm4gcDtcbn07XG5QbHVnaW5Vc2VySW50ZXJmYWNlLnByb3RvdHlwZS5jbGVhckdVSSA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLnN0b3BDYWxsYmFja3MoKTtcbiAgICB0aGlzLnJvb3QuaW5uZXJIVE1MID0gXCJcIjtcbn07XG5cbnZhciBQbHVnaW5JbnRlcmZhY2VNZXNzYWdlSHViID0gZnVuY3Rpb24ob3duZXIpIHtcbiAgICBmdW5jdGlvbiBidWlsZFBsdWdpblBhcmFtZXRlckpTT04ocGx1Z2luKSB7XG4gICAgICAgIHZhciBuYW1lcyA9IG93bmVyLnBhcmFtZXRlcnMuZ2V0UGFyYW1ldGVyTmFtZXMoKTtcbiAgICAgICAgdmFyIE8gPSB7fTtcbiAgICAgICAgbmFtZXMuZm9yRWFjaChmdW5jdGlvbihuYW1lKSB7XG4gICAgICAgICAgICB2YXIgcGFyYW0gPSBvd25lci5wYXJhbWV0ZXJzLmdldFBhcmFtZXRlckJ5TmFtZShuYW1lKTtcbiAgICAgICAgICAgIE9bbmFtZV0gPSB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IHBhcmFtLnZhbHVlLFxuICAgICAgICAgICAgICAgIG1heGltdW06IHBhcmFtLm1heGltdW0sXG4gICAgICAgICAgICAgICAgbWluaW11bTogcGFyYW0ubWluaW11bSxcbiAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU6IHBhcmFtLmRlZmF1bHRWYWx1ZSxcbiAgICAgICAgICAgICAgICB0eXBlOiBwYXJhbS5jb25zdHJ1Y3Rvci5uYW1lLFxuICAgICAgICAgICAgICAgIG5hbWU6IG5hbWVcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gTztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBidWlsZFBhcmFtZXRlclVwZGF0ZVBheWxvYWQoc2VuZGVyX2lkKSB7XG4gICAgICAgIHZhciBtc2cgPSB7XG4gICAgICAgICAgICBtZXNzYWdlOiBcInVwZGF0ZVBhcmFtZXRlcnNcIixcbiAgICAgICAgICAgIHBhcmFtZXRlcnM6IGJ1aWxkUGx1Z2luUGFyYW1ldGVySlNPTihvd25lcilcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHNlbmRlcl9pZCkge1xuICAgICAgICAgICAgbXNnLnNlbmRlcl9pZCA9IHNlbmRlcl9pZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbXNnO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNlbmRQYXJhbWV0ZXJVcGRhdGVzKGNoYW5uZWwpIHtcbiAgICAgICAgY2hhbm5lbC5wb3N0TWVzc2FnZShidWlsZFBhcmFtZXRlclVwZGF0ZVBheWxvYWQoKSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYnJvYWRjYXN0UGFyYW1ldGVyVXBkYXRlcyhzZW5kZXJfaWQpIHtcbiAgICAgICAgdmFyIG1zZyA9IGJ1aWxkUGFyYW1ldGVyVXBkYXRlUGF5bG9hZChzZW5kZXJfaWQpO1xuICAgICAgICB3aW5kb3dNZXNzYWdlTGlzdC5mb3JFYWNoKGZ1bmN0aW9uKHcpIHtcbiAgICAgICAgICAgIHcucG9zdE1lc3NhZ2UobXNnKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2V0UGFyYW1ldGVyTWVzc2FnZShlKSB7XG4gICAgICAgIHZhciBwYXJhbWV0ZXJzID0gSlNPTi5wYXJzZShlLm1lc3NhZ2UucGFyYW1ldGVycyk7XG4gICAgICAgIE9iamVjdC5rZXlzKHBhcmFtZXRlcnMpLmZvckVhY2goZnVuY3Rpb24obmFtZSkge1xuICAgICAgICAgICAgb3duZXIucGFyYW1ldGVycy5zZXRQYXJhbWV0ZXJCeU5hbWUobmFtZSxwYXJhbWV0ZXJzW25hbWVdLnZhbHVlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgdmFyIHdpbmRvd01lc3NhZ2VMaXN0ID0gW107XG4gICAgdmFyIHN0YXRlID0gMDtcblxuICAgIHdpbmRvdy5vbm1lc3NhZ2UgPSBmdW5jdGlvbihlKSB7XG4gICAgICAgIHN3aXRjaChlLmRhdGEubWVzc2FnZSkge1xuICAgICAgICAgICAgY2FzZSBcInNldFBhcmFtZXRlckJ5TmFtZVwiOlxuICAgICAgICAgICAgICAgIGlmIChlLmRhdGEucGFyYW1ldGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlLmRhdGEucGFyYW1ldGVyLm5hbWUgJiYgZS5kYXRhLnBhcmFtZXRlci52YWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3duZXIucGFyYW1ldGVycy5zZXRQYXJhbWV0ZXJCeU5hbWUoZS5kYXRhLnBhcmFtZXRlci5uYW1lLCBlLmRhdGEucGFyYW1ldGVyLnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicm9hZGNhc3RQYXJhbWV0ZXJVcGRhdGVzKGUuZGF0YS5zZW5kZXJfaWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJzZXRQYXJhbWV0ZXJzQnlPYmplY3RcIjpcbiAgICAgICAgICAgICAgICBpZiAoZS5kYXRhLnBhcmFtZXRlcikge1xuICAgICAgICAgICAgICAgICAgICBzZXRQYXJhbWV0ZXJNZXNzYWdlKGUpO1xuICAgICAgICAgICAgICAgICAgICBicm9hZGNhc3RQYXJhbWV0ZXJVcGRhdGVzKGUuZGF0YS5zZW5kZXJfaWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgXCJyZXF1ZXN0UGFyYW1ldGVyc1wiOlxuICAgICAgICAgICAgICAgIHNlbmRQYXJhbWV0ZXJVcGRhdGVzKGUuc291cmNlKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3coXCJVbmtub3duIG1lc3NhZ2UgdHlwZSBcXFwiXCIrZS5kYXRhLm1lc3NhZ2UrXCJcXFwiXCIpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMsIHtcbiAgICAgICAgXCJ1cGRhdGVJbnRlcmZhY2VzXCI6IHtcbiAgICAgICAgICAgIFwidmFsdWVcIjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgYnJvYWRjYXN0UGFyYW1ldGVyVXBkYXRlcygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcImNsb3NlV2luZG93c1wiOiB7XG4gICAgICAgICAgICB2YWx1ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXRlID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHdoaWxlKHdpbmRvd01lc3NhZ2VMaXN0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB3ID0gd2luZG93TWVzc2FnZUxpc3QucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB3LmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyhcIkNhbm5lbCBhbHJlYWR5IGNsb3NlZFwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFwicmVnaXN0ZXJXaW5kb3dcIjoge1xuICAgICAgICAgICAgXCJ2YWx1ZVwiOiBmdW5jdGlvbih3KSB7XG4gICAgICAgICAgICAgICAgaWYgKHdpbmRvd01lc3NhZ2VMaXN0LmluY2x1ZGVzKHcpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3dNZXNzYWdlTGlzdC5wdXNoKHcpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbn07XG5cbmlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgd2luZG93LkJhc2VQbHVnaW4gPSBCYXNlUGx1Z2luO1xufVxuXG5leHBvcnQge0Jhc2VQbHVnaW59O1xuIiwiLyoganNoaW50IGVzdmVyc2lvbjogNiAqL1xuaW1wb3J0IHtCYXNlUGx1Z2lufSBmcm9tIFwiLi9iYXNlX3BsdWdpblwiO1xuXG52YXIgU3ludGhlc2lzZXJCYXNlUGx1Z2luID0gZnVuY3Rpb24oZmFjdG9yeSwgb3duZXIpXG57XG4gICAgdmFyIGhhc1dhcm5lZFNjaGVkdWxlTm90U2V0ID0gZmFsc2U7XG4gICAgdmFyIGhhc1dhcm5lZENhbmNlbE5vdFNldCA9IGZhbHNlO1xuICAgIEJhc2VQbHVnaW4uY2FsbCh0aGlzLCBmYWN0b3J5LCBvd25lcik7XG5cbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLCB7XG4gICAgICAgIFwiYWRkSW5wdXRcIjoge1xuICAgICAgICAgICAgXCJ2YWx1ZVwiOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyhcIkNhbm5vdCBhZGQgaW5wdXQgdG8gdHlwZSBcXFwiU3ludGhlc2lzZXJCYXNlUGx1Z2luXFxcIlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJkZWxldGVJbnB1dFwiOiB7XG4gICAgICAgICAgICBcInZhbHVlXCI6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHRocm93KFwiQ2Fubm90IGRlbGV0ZSBpbnB1dCB0byB0eXBlIFxcXCJTeW50aGVzaXNlckJhc2VQbHVnaW5cXFwiXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBcInNjaGVkdWxlRXZlbnRcIjoge1xuICAgICAgICAgICAgXCJ2YWx1ZVwiOiBmdW5jdGlvbiAobXNnLCBjb250ZXh0VGltZSkge1xuICAgICAgICAgICAgICAgIGlmICghaGFzV2FybmVkU2NoZWR1bGVOb3RTZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuaW5nKFwiV0FSTklORyAtIC5zY2hlZHVsZUV2ZW50IGlzIG5vdCBvdmVycmlkZGVuXCIpO1xuICAgICAgICAgICAgICAgICAgICBoYXNXYXJuZWRTY2hlZHVsZU5vdFNldCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwid3JpdGFibGVcIjogdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICBcImNhbmNlbEFsbEV2ZW50c1wiOiB7XG4gICAgICAgICAgICBcInZhbHVlXCI6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIGlmICghaGFzV2FybmVkQ2FuY2VsTm90U2V0KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybmluZyhcIldBUk5JTkcgLSAuY2FuY2VsQWxsRXZlbnRzIGlzIG5vdCBvdmVycmlkZGVuXCIpO1xuICAgICAgICAgICAgICAgICAgICBoYXNXYXJuZWRDYW5jZWxOb3RTZXQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcIndyaXRhYmxlXCI6IHRydWVcbiAgICAgICAgfVxuICAgIH0pO1xufTtcblN5bnRoZXNpc2VyQmFzZVBsdWdpbi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEJhc2VQbHVnaW4ucHJvdG90eXBlKTtcblN5bnRoZXNpc2VyQmFzZVBsdWdpbi5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBTeW50aGVzaXNlckJhc2VQbHVnaW47XG5cbmV4cG9ydCB7U3ludGhlc2lzZXJCYXNlUGx1Z2lufTtcbiIsIi8vIFRoaXMgZGVmaW5lcyBhIG1hc3RlciBvYmplY3QgZm9yIGhvbGRpbmcgYWxsIHRoZSBwbHVnaW5zIGFuZCBjb21tdW5pY2F0aW5nXG4vLyBUaGlzIG9iamVjdCB3aWxsIGFsc28gaGFuZGxlIGNyZWF0aW9uIGFuZCBkZXN0cnVjdGlvbiBvZiBwbHVnaW5zXG4vKmdsb2JhbHMgUHJvbWlzZSwgZG9jdW1lbnQsIGNvbnNvbGUsIExpbmtlZFN0b3JlLCBXb3JrZXIsIHdpbmRvdywgWE1MSHR0cFJlcXVlc3QgKi9cbi8qZXNsaW50LWVudiBicm93c2VyICovXG4vKiBqc2hpbnQgZXN2ZXJzaW9uOjYgKi9cblxuLy8gTG9hZCBqc1h0cmFjdFxuKGZ1bmN0aW9uKCkge1xuICAgIGlmICh3aW5kb3cuanNYdHJhY3QgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB2YXIgcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7XG4gICAgICAgIHMuc3JjID0gXCJodHRwczovL2dpdGNkbi54eXovcmVwby9uaWNramlsbGluZ3MvanMteHRyYWN0L21hc3Rlci9qc1h0cmFjdC5qc1wiO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF0uYXBwZW5kQ2hpbGQocyk7XG4gICAgfVxufSkoKTtcblxuaW1wb3J0IExpbmtlZFN0b3JlIGZyb20gJy4vTGlua2VkU3RvcmUnO1xuZXhwb3J0IHtCYXNlUGx1Z2lufSBmcm9tICcuL2Jhc2VfcGx1Z2luJztcbmV4cG9ydCB7U3ludGhlc2lzZXJCYXNlUGx1Z2lufSBmcm9tICcuL3N5bnRoX2Jhc2UnO1xuXG5cbmV4cG9ydCBmdW5jdGlvbiBQbHVnaW5GYWN0b3J5KGF1ZGlvX2NvbnRleHQsIHJvb3RVUkwpIHtcbiAgICAgICAgdmFyIHN1YkZhY3RvcmllcyA9IFtdLFxuICAgICAgICBzeW50aGVzaXNlckhvc3RzID0gW10sXG4gICAgICAgIHBsdWdpbl9wcm90b3R5cGVzID0gW10sXG4gICAgICAgIHBsdWdpbnNMaXN0ID0gW10sXG4gICAgICAgIGN1cnJlbnRQbHVnaW5JZCA9IDAsXG4gICAgICAgIGF1ZGlvU3RhcnRlZCA9IGZhbHNlO1xuXG4gICAgLypcbiAgICAgICAgdGhpcy5sb2FkUmVzb3VyY2UuIExvYWQgYSByZXNvdXJjZSBpbnRvIHRoZSBnbG9iYWwgbmFtZXNwYWNlXG5cbiAgICAgICAgQHBhcmFtIHJlc291cmNlT2JqZWN0OiBhIEpTIG9iamVjdCBob2xkaW5nIHRoZSBmb2xsb3dpbmcgcGFyYW1ldGVyczpcbiAgICAgICAgICAgIC51cmw6IFVSTCBvZiB0aGUgcmVzb3VyY2VcbiAgICAgICAgICAgIC50ZXN0OiBmdW5jdGlvbiB0byBjYWxsLCByZXR1cm5zIHRydWUgaWYgcmVzb3VyY2UgYWxyZWFkeSBsb2FkZWQsIGZhbHNlIGlmIG5vdFxuICAgICovXG4gICAgdGhpcy5sb2FkUmVzb3VyY2UgPSBmdW5jdGlvbiAocmVzb3VyY2VPYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiByZXNvdXJjZU9iamVjdCAhPT0gXCJvYmplY3RcIikge1xuICAgICAgICAgICAgICAgIHJlamVjdChcIkVycm9yXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHJlc291cmNlT2JqZWN0LnVybCAhPT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgIHJlamVjdChcInJlc291cmNlT2JqZWN0LnVybCBtdXN0IGJlIGEgc3RyaW5nXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHJlc291cmNlT2JqZWN0LnRlc3QgIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgIHJlamVjdChcInJlc291cmNlT2JqZWN0LnRlc3QgbXVzdCBiZSBhIGZ1bmN0aW9uXCIpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKHJlc291cmNlT2JqZWN0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkudGhlbihmdW5jdGlvbihyZXNvdXJjZU9iamVjdCl7XG4gICAgICAgICAgICB2YXIgcmVzcG9uc2UgPSByZXNvdXJjZU9iamVjdC50ZXN0KCk7XG4gICAgICAgICAgICBpZiAocmVzcG9uc2UgIT09IGZhbHNlICYmIHJlc3BvbnNlICE9PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgKFwicmVzb3VyY2VPYmplY3QudGVzdCBtdXN0IHJldHVybiB0cnVlIG9yIGZhbHNlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFyZXNvdXJjZU9iamVjdC50eXBlKSB7XG4gICAgICAgICAgICAgICAgcmVzb3VyY2VPYmplY3QudHlwZSA9IFwiamF2YXNjcmlwdFwiO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzb3VyY2VPYmplY3QudHlwZSA9IHJlc291cmNlT2JqZWN0LnR5cGUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgICAgIHN3aXRjaCAocmVzb3VyY2VPYmplY3QudHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgXCJqYXZhc2NyaXB0XCI6XG4gICAgICAgICAgICAgICAgICAgIGlmICghcmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBsb2FkUmVzb3VyY2UocmVzb3VyY2VPYmplY3QpLnRoZW4oZnVuY3Rpb24gKHJlc291cmNlT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiByZXNvdXJjZU9iamVjdC5yZXR1cm5PYmplY3QgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJldHVybk9iamVjdDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHdpbmRvdy5oYXNPd25Qcm9wZXJ0eShyZXNvdXJjZU9iamVjdC5yZXR1cm5PYmplY3QpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gd2luZG93W3Jlc291cmNlT2JqZWN0LnJldHVybk9iamVjdF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHJlc291cmNlT2JqZWN0LnJldHVybk9iamVjdCA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAod2luZG93Lmhhc093blByb3BlcnR5KHJlc291cmNlT2JqZWN0LnJldHVybk9iamVjdCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUod2luZG93W3Jlc291cmNlT2JqZWN0LnJldHVybk9iamVjdF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGZhbHNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgKFwiSW52YWxpZCB0eXBlIFwiICsgU3RyaW5nKHJlc291cmNlT2JqZWN0LnR5cGUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHRoaXMubG9hZFBsdWdpblNjcmlwdCA9IGZ1bmN0aW9uIChyZXNvdXJjZU9iamVjdCkge1xuICAgICAgICBpZiAocmVzb3VyY2VPYmplY3QpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgcmVzb3VyY2VPYmplY3QucmV0dXJuT2JqZWN0ICE9PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgKFwicmVzb3VyY2VPYmplY3QucmV0dXJuT2JqZWN0IG11c3QgYmUgdGhlIG5hbWUgb2YgdGhlIHByb3RvdHlwZSBmdW5jdGlvblwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmxvYWRSZXNvdXJjZShyZXNvdXJjZU9iamVjdCkudGhlbihmdW5jdGlvbiAocGx1Z2luKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWRkUHJvdG90eXBlKHBsdWdpbik7XG4gICAgICAgICAgICB9LmJpbmQodGhpcykpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGxvYWRSZXNvdXJjZShyZXNvdXJjZU9iamVjdCkge1xuICAgICAgICBpZiAocmVzb3VyY2VPYmplY3QudXJsLnN0YXJ0c1dpdGgoXCJodHRwXCIpID09PSBmYWxzZSAmJiByb290VVJMICE9PSB1bmRlZmluZWQgJiYgcm9vdFVSTC5zdGFydHNXaXRoKFwiaHR0cFwiKSkge1xuICAgICAgICAgICAgcmVzb3VyY2VPYmplY3QudXJsID0gcm9vdFVSTCArIHJlc291cmNlT2JqZWN0LnVybDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuICAgICAgICAgICAgeGhyLm9wZW4oXCJHRVRcIiwgcmVzb3VyY2VPYmplY3QudXJsKTtcbiAgICAgICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaWYgKHhoci5yZWFkeVN0YXRlID09IDQpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7XG4gICAgICAgICAgICAgICAgICAgIHNjcmlwdC50ZXh0Q29udGVudCA9IHhoci5yZXNwb25zZVRleHQ7XG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiaGVhZFwiKVswXS5hcHBlbmRDaGlsZChzY3JpcHQpO1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHJlc291cmNlT2JqZWN0KTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB4aHIuc2VuZCgpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBjb3B5RmFjdG9yeShuZXdjb250ZXh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgIGlmIChuZXdjb250ZXh0LnNhbXBsZVJhdGUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIC8vTWF5YmUgbm90IGEgcmVhbCBBdWRpb0NvbnRleHRcbiAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKFwiSW52YWxpZCBhdWRpbyBjb250ZXh0IHByb3ZpZGVkXCIpKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShuZXdjb250ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkudGhlbihmdW5jdGlvbihuZXdjb250ZXh0KSB7XG4gICAgICAgICAgICB2YXIgQkZhY3RvcnkgPSBuZXcgUGx1Z2luRmFjdG9yeShuZXdjb250ZXh0KTtcbiAgICAgICAgICAgIHZhciBwcm9taXNlcyA9IFtdO1xuICAgICAgICAgICAgcGx1Z2luX3Byb3RvdHlwZXMuZm9yRWFjaChmdW5jdGlvbiAocHJvdG8pIHtcbiAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKEJGYWN0b3J5LmFkZFByb3RvdHlwZShwcm90by5wcm90bykpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIEJGYWN0b3J5O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pLnRoZW4oZnVuY3Rpb24obmV3RmFjdG9yeSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ld0ZhY3Rvcnk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHZhciBQbHVnaW5JbnN0YW5jZSA9IGZ1bmN0aW9uIChpZCwgcGx1Z2luX25vZGUpIHtcbiAgICAgICAgdGhpcy5uZXh0X25vZGUgPSB1bmRlZmluZWQ7XG4gICAgICAgIHZhciBfYnlwYXNzZWQgPSBmYWxzZTtcbiAgICAgICAgdmFyIF9pbiA9IGF1ZGlvX2NvbnRleHQuY3JlYXRlR2FpbigpLFxuICAgICAgICAgICAgX291dCA9IGF1ZGlvX2NvbnRleHQuY3JlYXRlR2FpbigpO1xuXG4gICAgICAgIF9pbi5jb25uZWN0KHBsdWdpbl9ub2RlLmdldElucHV0cygpWzBdKTtcbiAgICAgICAgcGx1Z2luX25vZGUuZ2V0T3V0cHV0cygpWzBdLmNvbm5lY3QoX291dCk7XG5cbiAgICAgICAgZnVuY3Rpb24gYnlwYXNzRW5hYmxlKCkge1xuICAgICAgICAgICAgX2luLmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICAgIF9pbi5jb25uZWN0KF9vdXQpO1xuICAgICAgICAgICAgX2J5cGFzc2VkID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGJ5cGFzc0Rpc2FibGUoKSB7XG4gICAgICAgICAgICBfaW4uZGlzY29ubmVjdCgpO1xuICAgICAgICAgICAgX2luLmNvbm5lY3QocGx1Z2luX25vZGUuZ2V0SW5wdXRzKClbMF0pO1xuICAgICAgICAgICAgX2J5cGFzc2VkID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmJ5cGFzcyA9IGZ1bmN0aW9uIChzdGF0ZSkge1xuICAgICAgICAgICAgc3RhdGUgPSAoc3RhdGUgPT09IHRydWUpO1xuICAgICAgICAgICAgaWYgKHN0YXRlID09PSBfYnlwYXNzZWQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gX2J5cGFzc2VkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHN0YXRlKSB7XG4gICAgICAgICAgICAgICAgYnlwYXNzRW5hYmxlKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGJ5cGFzc0Rpc2FibGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBfYnlwYXNzZWQ7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5pc0J5cGFzc2VkID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9ieXBhc3NlZDtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnJlY29ubmVjdCA9IGZ1bmN0aW9uIChuZXdfbmV4dCkge1xuICAgICAgICAgICAgdGhpcy5jb25uZWN0KG5ld19uZXh0KTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmNvbm5lY3QgPSBmdW5jdGlvbiAobmV3X25leHQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm5leHRfbm9kZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobmV3X25leHQgIT09IHVuZGVmaW5lZCAmJiBuZXdfbmV4dC5pbnB1dCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5uZXh0X25vZGUgPSBuZXdfbmV4dDtcbiAgICAgICAgICAgICAgICBfb3V0LmNvbm5lY3QodGhpcy5uZXh0X25vZGUuaW5wdXQpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuZGlzY29ubmVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLm5leHRfbm9kZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgX291dC5kaXNjb25uZWN0KHRoaXMubmV4dF9ub2RlLmlucHV0KTtcbiAgICAgICAgICAgICAgICB0aGlzLm5leHRfbm9kZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBwbHVnaW5fbm9kZS5kZXN0cm95KCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcywge1xuICAgICAgICAgICAgJ2lkJzoge1xuICAgICAgICAgICAgICAgICd2YWx1ZSc6IGlkXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ25vZGUnOiB7XG4gICAgICAgICAgICAgICAgJ3ZhbHVlJzogcGx1Z2luX25vZGVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnaW5wdXQnOiB7XG4gICAgICAgICAgICAgICAgJ2dldCc6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9pbjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ291dHB1dCc6IHtcbiAgICAgICAgICAgICAgICAnZ2V0JzogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX291dDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ2J5cGFzc2VkJzoge1xuICAgICAgICAgICAgICAgICdnZXQnOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfYnlwYXNzZWQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIFBsdWdpbkluc3RhbmNlLnByb3RvdHlwZS5mYWN0b3J5ID0gdGhpcztcblxuICAgIHZhciBNaWRpU3ludGhlc2lzSW5zdGFuY2UgPSBmdW5jdGlvbihpZCwgc3ludGhOb2RlKSB7XG4gICAgICAgIHZhciBfb3V0ID0gYXVkaW9fY29udGV4dC5jcmVhdGVHYWluKCk7XG4gICAgICAgIHN5bnRoTm9kZS5nZXRPdXRwdXRzKClbMF0uY29ubmVjdChfb3V0KTtcblxuICAgICAgICB0aGlzLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzeW50aE5vZGUuZGVzdHJveSgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMsIHtcbiAgICAgICAgICAgICdpZCc6IHtcbiAgICAgICAgICAgICAgICAndmFsdWUnOiBpZFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdub2RlJzoge1xuICAgICAgICAgICAgICAgICd2YWx1ZSc6IHN5bnRoTm9kZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdvdXRwdXQnOiB7XG4gICAgICAgICAgICAgICAgJ2dldCc6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9vdXQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHZhciBQbHVnaW5Qcm90b3R5cGUgPSBmdW5jdGlvbiAocHJvdG8sIGZhY3RvcnkpIHtcblx0ICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcywge1xuICAgICAgICAgICAgJ25hbWUnOiB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IHByb3RvLnByb3RvdHlwZS5uYW1lXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ3Byb3RvJzoge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBwcm90b1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICd2ZXJzaW9uJzoge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBwcm90by5wcm90b3R5cGUudmVyc2lvblxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICd1bmlxdWVJRCc6IHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogcHJvdG8ucHJvdG90eXBlLnVuaXF1ZUlEXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgJ2hhc01pZGlJbnB1dCc6IHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogcHJvdG8ucHJvdG90eXBlLmhhc01pZGlJbnB1dCB8fCBmYWxzZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdoYXNNaWRpT3V0cHV0Jzoge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBwcm90by5wcm90b3R5cGUuaGFzTWlkaU91dHB1dCB8fCBmYWxzZVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLmNyZWF0ZVBsdWdpbkluc3RhbmNlID0gYXN5bmMgZnVuY3Rpb24ob3duZXIsIGFzeW5jKSB7XG4gICAgICAgICAgICB2YXIgcCA9IGNyZWF0ZVBsdWdpbkluc3RhbmNlKG93bmVyKTtcbiAgICAgICAgICAgIGlmIChhc3luYyA9PT0gdHJ1ZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBwO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBhd2FpdCBwO1xuICAgICAgICAgICAgICAgIHJldHVybiBwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGZ1bmN0aW9uIGNyZWF0ZVBsdWdpbkluc3RhbmNlKG93bmVyKSB7XG4gICAgICAgICAgICByZXR1cm4gd2FpdFVudGlsUmVhZHkoKS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFjaGVja0lzUmVhZHkoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihcIlBsdWdpbiBub3QgcmVhZHlcIikpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShuZXcgcHJvdG8oZmFjdG9yeSwgb3duZXIpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKHBsdWdpbikge1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuICAgICAgICAgICAgICAgICAgICBpZiAocGx1Z2luLmluaXRpYWxpc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwbHVnaW4uaW5pdGlhbGlzZSgpLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShwbHVnaW4pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHBsdWdpbik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24ocGx1Z2luKSB7XG4gICAgICAgICAgICAgICAgdmFyIG5vZGU7XG4gICAgICAgICAgICAgICAgaWYgKHBsdWdpbi5oYXNNaWRpSW5wdXQgIT09IHRydWUgJiYgcGx1Z2luLmhhc01pZGlPdXRwdXQgIT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZSA9IG5ldyBQbHVnaW5JbnN0YW5jZShjdXJyZW50UGx1Z2luSWQrKywgcGx1Z2luKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHBsdWdpbi5oYXNNaWRpSW5wdXQgPT09IHRydWUgJiYgcGx1Z2luLmhhc01pZGlPdXRwdXQgIT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgbm9kZSA9IG5ldyBNaWRpU3ludGhlc2lzSW5zdGFuY2UoY3VycmVudFBsdWdpbklkKyssIHBsdWdpbik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3coXCJObyBJbnN0YW5jZSBIb2xkZXIgQXZhaWxhYmxlIVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMocGx1Z2luLCB7XG4gICAgICAgICAgICAgICAgICAgICdwbHVnaW5JbnN0YW5jZSc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICd2YWx1ZSc6IG5vZGVcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgJ3Byb3RvdHlwZU9iamVjdCc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICd2YWx1ZSc6IHNlbGZcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgJ25hbWUnOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcHJvdG8ucHJvdG90eXBlLm5hbWVcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgJ3ZlcnNpb24nOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogcHJvdG8ucHJvdG90eXBlLnZlcnNpb25cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgJ3VuaXF1ZUlEJzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHByb3RvLnByb3RvdHlwZS51bmlxdWVJRFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAnU2VzaW9uRGF0YSc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmYWN0b3J5LlNlc3Npb25EYXRhXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICdVc2VyRGF0YSc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmYWN0b3J5LlVzZXJEYXRhXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhub2RlLCB7XG4gICAgICAgICAgICAgICAgICAgIFwicHJvdG90eXBlT2JqZWN0XCI6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICd2YWx1ZSc6IHNlbGZcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgXCJleHRlcm5hbEludGVyZmFjZVwiOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAndmFsdWUnOiBwbHVnaW4uZXh0ZXJuYWxJbnRlcmZhY2VcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGZhY3RvcnkucmVnaXN0ZXJQbHVnaW5JbnN0YW5jZShub2RlKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gbG9hZFJlc291cmNlQ2hhaW4ocmVzb3VyY2VPYmplY3QsIHApIHtcbiAgICAgICAgICAgIGlmICghcCkge1xuICAgICAgICAgICAgICAgIHZhciBrID0gbG9hZFJlc291cmNlKHJlc291cmNlT2JqZWN0KTtcbiAgICAgICAgICAgICAgICBrLnRoZW4oZnVuY3Rpb24gKHJlc291cmNlT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXNvdXJjZU9iamVjdC5yZXNvdXJjZXMgIT09IHVuZGVmaW5lZCAmJiByZXNvdXJjZU9iamVjdC5yZXNvdXJjZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXNvdXJjZU9iamVjdC5yZXNvdXJjZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBrID0gbG9hZFJlc291cmNlQ2hhaW4ocmVzb3VyY2VPYmplY3QucmVzb3VyY2VzW2ldLCBrKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHJldHVybiBrO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcC50aGVuKGxvYWRSZXNvdXJjZShyZXNvdXJjZU9iamVjdCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gbG9hZFN0eWxlc2hlZXQodXJsKSB7XG4gICAgICAgICAgICB2YXIgY3NzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpbmtcIik7XG4gICAgICAgICAgICBjc3Muc2V0QXR0cmlidXRlKFwicmVsXCIsIFwic3R5bGVzaGVldFwiKTtcbiAgICAgICAgICAgIGNzcy5zZXRBdHRyaWJ1dGUoXCJ0eXBlXCIsIFwidGV4dC9jc3NcIik7XG4gICAgICAgICAgICBjc3Muc2V0QXR0cmlidXRlKFwiaHJlZlwiLCB1cmwpO1xuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJoZWFkXCIpWzBdLmFwcGVuZENoaWxkKGNzcyk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiByZWN1cnNpdmVHZXRUZXN0KHJlc291cmNlT2JqZWN0KSB7XG4gICAgICAgICAgICBpZiAocmVzb3VyY2VPYmplY3QuaGFzT3duUHJvcGVydHkoXCJsZW5ndGhcIikgJiYgcmVzb3VyY2VPYmplY3QubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybiByZWN1cnNpdmVHZXRUZXN0KHJlc291cmNlT2JqZWN0W3Jlc291cmNlT2JqZWN0Lmxlbmd0aCAtIDFdKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzb3VyY2VPYmplY3QuaGFzT3duUHJvcGVydHkoXCJyZXNvdXJjZXNcIikpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVjdXJzaXZlR2V0VGVzdChyZXNvdXJjZU9iamVjdC5yZXNvdXJjZXMpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzb3VyY2VPYmplY3QudGVzdDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHZhciByZXNvdXJjZVByb21pc2VzID0gW107XG4gICAgICAgIGlmIChwcm90by5wcm90b3R5cGUucmVzb3VyY2VzKSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3RvLnByb3RvdHlwZS5yZXNvdXJjZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICB2YXIgcmVzb3VyY2UgPSBwcm90by5wcm90b3R5cGUucmVzb3VyY2VzW2ldO1xuICAgICAgICAgICAgICAgIHJlc291cmNlLnR5cGUgPSByZXNvdXJjZS50eXBlLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChyZXNvdXJjZS50eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgXCJjc3NcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvYWRTdHlsZXNoZWV0KHJlc291cmNlLnVybCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBcImphdmFzY3JpcHRcIjpcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvYmplY3QgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3Byb21pc2UnOiBsb2FkUmVzb3VyY2VDaGFpbihyZXNvdXJjZSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3N0YXRlJzogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnY29tcGxldGUnOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhdGUgPSAxO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3Rlc3QnOiByZWN1cnNpdmVHZXRUZXN0KHJlc291cmNlKVxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdC5wcm9taXNlLnRoZW4ob2JqZWN0LmNvbXBsZXRlLmJpbmQob2JqZWN0KSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvdXJjZVByb21pc2VzLnB1c2gob2JqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgKFwiQ291bGQgbm90IGxvYWQgXCIgKyByZXNvdXJjZS51cmwgKyBcIiwgaW52YWxpZCByZXNvdXJjZS50eXBlXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZ2V0UmVzb3VyY2VQcm9taXNlcyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiByZXNvdXJjZVByb21pc2VzO1xuICAgICAgICB9O1xuICAgICAgICBmdW5jdGlvbiBjaGVja0lzUmVhZHkoKSB7XG4gICAgICAgICAgICB2YXIgc3RhdGUgPSB0cnVlO1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXNvdXJjZVByb21pc2VzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlc291cmNlUHJvbWlzZXNbaV0uc3RhdGUgIT09IDEgfHwgIXJlc291cmNlUHJvbWlzZXNbaV0udGVzdCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXRlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzdGF0ZTtcbiAgICAgICAgfTtcbiAgICAgICAgZnVuY3Rpb24gd2FpdFVudGlsUmVhZHkoKSB7XG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocmVzb3VyY2VQcm9taXNlcyk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5hZGRQcm90b3R5cGUgPSBmdW5jdGlvbiAocGx1Z2luX3Byb3RvKSB7XG4gICAgICAgIHZhciBmYWN0b3J5ID0gdGhpcztcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBwbHVnaW5fcHJvdG8gIT09IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgICAgIHJlamVjdChcIlRoZSBQcm90b3R5cGUgbXVzdCBiZSBhIGZ1bmN0aW9uIVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBwbHVnaW5fcHJvdG8ucHJvdG90eXBlLm5hbWUgIT09IFwic3RyaW5nXCIgfHwgcGx1Z2luX3Byb3RvLnByb3RvdHlwZS5uYW1lLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJlamVjdChcIk1hbGZvcm1lZCBwbHVnaW4uIE5hbWUgbm90IGRlZmluZWRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgcGx1Z2luX3Byb3RvLnByb3RvdHlwZS52ZXJzaW9uICE9PSBcInN0cmluZ1wiIHx8IHBsdWdpbl9wcm90by5wcm90b3R5cGUudmVyc2lvbi5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICByZWplY3QoXCJNYWxmb3JtZWQgcGx1Z2luLiBWZXJzaW9uIG5vdCBkZWZpbmVkXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHBsdWdpbl9wcm90by5wcm90b3R5cGUudW5pcXVlSUQgIT09IFwic3RyaW5nXCIgfHwgcGx1Z2luX3Byb3RvLnByb3RvdHlwZS51bmlxdWVJRC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICByZWplY3QoXCJNYWxmb3JtZWQgcGx1Z2luLiB1bmlxdWVJRCBub3QgZGVmaW5lZFwiKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZShwbHVnaW5fcHJvdG8pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKHBsdWdpbl9wcm90bykge1xuICAgICAgICAgICAgdmFyIHRlc3RPYmogPSB7XG4gICAgICAgICAgICAgICAgJ3Byb3RvJzogcGx1Z2luX3Byb3RvLFxuICAgICAgICAgICAgICAgICduYW1lJzogcGx1Z2luX3Byb3RvLnByb3RvdHlwZS5uYW1lLFxuICAgICAgICAgICAgICAgICd2ZXJzaW9uJzogcGx1Z2luX3Byb3RvLnByb3RvdHlwZS52ZXJzaW9uLFxuICAgICAgICAgICAgICAgICd1bmlxdWVJRCc6IHBsdWdpbl9wcm90by5wcm90b3R5cGUudW5pcXVlSURcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgb2JqID0gcGx1Z2luX3Byb3RvdHlwZXMuZmluZChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHZhciBwYXJhbTtcbiAgICAgICAgICAgICAgICB2YXIgbWF0Y2ggPSAwO1xuICAgICAgICAgICAgICAgIGZvciAocGFyYW0gaW4gdGhpcykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZVtwYXJhbV0gPT09IHRoaXNbcGFyYW1dKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRjaCsrO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBtYXRjaCA9PT0gNDtcbiAgICAgICAgICAgIH0sIHRlc3RPYmopO1xuICAgICAgICAgICAgaWYgKG9iaikge1xuICAgICAgICAgICAgICAgIHRocm93IChcIlRoZSBwbHVnaW4gbXVzdCBiZSB1bmlxdWUhXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb2JqID0gbmV3IFBsdWdpblByb3RvdHlwZShwbHVnaW5fcHJvdG8sIGZhY3RvcnkpO1xuICAgICAgICAgICAgcGx1Z2luX3Byb3RvdHlwZXMucHVzaChvYmopO1xuICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMob2JqLCB7XG4gICAgICAgICAgICAgICAgJ2ZhY3RvcnknOiB7XG4gICAgICAgICAgICAgICAgICAgICd2YWx1ZSc6IGZhY3RvcnlcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiBvYmo7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICB0aGlzLmdldFByb3RvdHlwZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBwbHVnaW5fcHJvdG90eXBlcztcbiAgICB9O1xuXG4gICAgdGhpcy5nZXRBdWRpb1BsdWdpblByb3RvdHlwZXMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHBsdWdpbl9wcm90b3R5cGVzLmZpbHRlcihmdW5jdGlvbihwcm90bykge1xuICAgICAgICAgICAgcmV0dXJuIHByb3RvLmhhc01pZGlJbnB1dCA9PSBmYWxzZSAmJiBwcm90by5oYXNNaWRpT3V0cHV0ID09IGZhbHNlO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgdGhpcy5nZXRNaWRpU3ludGhQcm90b3R5cGVzID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBwbHVnaW5fcHJvdG90eXBlcy5maWx0ZXIoZnVuY3Rpb24ocHJvdG8pIHtcbiAgICAgICAgICAgIHJldHVybiBwcm90by5oYXNNaWRpSW5wdXQgPT0gdHJ1ZSAmJiBwcm90by5oYXNNaWRpT3V0cHV0ID09IGZhbHNlO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgdGhpcy5nZXRNaWRpUGx1Z2luUHJvdG90eXBlcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gcGx1Z2luX3Byb3RvdHlwZXMuZmlsdGVyKGZ1bmN0aW9uKHByb3RvKSB7XG4gICAgICAgICAgICByZXR1cm4gcHJvdG8uaGFzTWlkaUlucHV0ID09IHRydWUgJiYgcHJvdG8uaGFzTWlkaU91dHB1dCA9PSB0cnVlO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgdGhpcy5nZXRBbGxQbHVnaW5zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gcGx1Z2luc0xpc3Q7XG4gICAgfTtcblxuICAgIHRoaXMuZ2V0QWxsUGx1Z2luc09iamVjdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIG9iaiA9IHtcbiAgICAgICAgICAgICAgICAnZmFjdG9yeSc6IHRoaXMsXG4gICAgICAgICAgICAgICAgJ3N1YkZhY3Rvcmllcyc6IFtdXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgaTtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IHN1YkZhY3Rvcmllcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgb2JqLnN1YkZhY3Rvcmllcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAnc3ViRmFjdG9yeSc6IHN1YkZhY3Rvcmllc1tpXSxcbiAgICAgICAgICAgICAgICAncGx1Z2lucyc6IHN1YkZhY3Rvcmllc1tpXS5nZXRQbHVnaW5zKClcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgfTtcblxuICAgIHRoaXMuY3JlYXRlU3ViRmFjdG9yeSA9IGZ1bmN0aW9uKGNoYWluU3RhcnQsIGNoYWluU3RvcCkge1xuICAgICAgICBjb25zb2xlLndhcm4oXCJERVBSRUNBVEVEIC0gVGhpcyBmdW5jdGlvbiB3aWxsIGJlIGRlcHJlY2F0ZWQgaW4gZmF2b3VyIG9mIFxcXCJjcmVhdGVBdWRpb1BsdWdpbkNoYWluTWFuYWdlclxcXCJcIik7XG4gICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZUF1ZGlvUGx1Z2luQ2hhaW5NYW5hZ2VyKGNoYWluU3RhcnQsIGNoYWluU3RvcCk7XG4gICAgfTtcblxuICAgIHRoaXMuZGVzdHJveVN1YkZhY3RvcnkgPSBmdW5jdGlvbihjaGFpblN0YXJ0LCBjaGFpblN0b3ApIHtcbiAgICAgICAgY29uc29sZS53YXJuKFwiREVQUkVDQVRFRCAtIFRoaXMgZnVuY3Rpb24gd2lsbCBiZSBkZXByZWNhdGVkIGluIGZhdm91ciBvZiBcXFwiZGVzdHJveUF1ZGlvUGx1Z2luQ2hhaW5NYW5hZ2VyXFxcIlwiKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGVzdHJveUF1ZGlvUGx1Z2luQ2hhaW5NYW5hZ2VyKGNoYWluU3RhcnQsIGNoYWluU3RvcCk7XG4gICAgfTtcblxuICAgIHRoaXMuY3JlYXRlQXVkaW9QbHVnaW5DaGFpbk1hbmFnZXIgPSBmdW5jdGlvbiAoY2hhaW5TdGFydCwgY2hhaW5TdG9wKSB7XG4gICAgICAgIHZhciBub2RlID0gbmV3IEF1ZGlvUGx1Z2luQ2hhaW5NYW5hZ2VyKHRoaXMsIGNoYWluU3RhcnQsIGNoYWluU3RvcCk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKG5vZGUsIHtcbiAgICAgICAgICAgICdTZXNzaW9uRGF0YSc6IHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5TZXNzaW9uRGF0YVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdVc2VyRGF0YSc6IHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5Vc2VyRGF0YVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgc3ViRmFjdG9yaWVzLnB1c2gobm9kZSk7XG4gICAgICAgIHJldHVybiBub2RlO1xuICAgIH07XG5cbiAgICB0aGlzLmRlc3Ryb3lBdWRpb1BsdWdpbkNoYWluTWFuYWdlciA9IGZ1bmN0aW9uIChTdWJGYWN0b3J5KSB7XG4gICAgICAgIHZhciBpbmRleCA9IHN1YkZhY3Rvcmllcy5maW5kSW5kZXgoZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAgICAgICAgIGlmIChlbGVtZW50ID09PSB0aGlzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0sIFN1YkZhY3RvcnkpO1xuICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICAgICAgc3ViRmFjdG9yaWVzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICBTdWJGYWN0b3J5LmRlc3Ryb3koKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmNyZWF0ZU1pZGlTeW50aGVzaXNlckhvc3QgPSBmdW5jdGlvbihmYWN0b3J5KSB7XG4gICAgICAgIHZhciBob3N0ID0gbmV3IE1pZGlTeW50aGVzaXNlckhvc3QoZmFjdG9yeSk7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGhvc3QsIHtcbiAgICAgICAgICAgICdTZXNzaW9uRGF0YSc6IHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5TZXNzaW9uRGF0YVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdVc2VyRGF0YSc6IHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5Vc2VyRGF0YVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgc3ludGhlc2lzZXJIb3N0cy5wdXNoKGhvc3QpO1xuICAgICAgICByZXR1cm4gaG9zdDtcbiAgICB9O1xuXG4gICAgdGhpcy5kZXN0cm95TWlkaVN5bnRoZXNpc2VySG9zdCA9IGZ1bmN0aW9uIChob3N0KSB7XG4gICAgICAgIHZhciBpbmRleCA9IHN5bnRoZXNpc2VySG9zdHMuZmluZEluZGV4KGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgICAgICBpZiAoZWxlbWVudCA9PT0gdGhpcykge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9LCBob3N0KTtcbiAgICAgICAgaWYgKGluZGV4ID49IDApIHtcbiAgICAgICAgICAgIHN5bnRoZXNpc2VySG9zdHMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgIGhvc3QuZGVzdHJveSgpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMucmVnaXN0ZXJQbHVnaW5JbnN0YW5jZSA9IGZ1bmN0aW9uIChpbnN0YW5jZSkge1xuICAgICAgICBpZiAocGx1Z2luc0xpc3QuZmluZChmdW5jdGlvbiAocCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBwID09PSB0aGlzO1xuICAgICAgICAgICAgfSwgaW5zdGFuY2UpKSB7XG4gICAgICAgICAgICB0aHJvdyAoXCJQbHVnaW4gSW5zdGFuY2Ugbm90IHVuaXF1ZVwiKTtcbiAgICAgICAgfVxuICAgICAgICBwbHVnaW5zTGlzdC5wdXNoKGluc3RhbmNlKTtcbiAgICAgICAgaWYgKGF1ZGlvU3RhcnRlZCkge1xuICAgICAgICAgICAgaW5zdGFuY2Uubm9kZS5zdGFydC5jYWxsKGluc3RhbmNlLm5vZGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH07XG5cbiAgICB0aGlzLmRlbGV0ZVBsdWdpbiA9IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICB2YXIgaW5kZXggPSBwbHVnaW5zTGlzdC5maW5kSW5kZXgoZnVuY3Rpb24gKHApIHtcbiAgICAgICAgICAgIHJldHVybiBwLmlkID09PSBpZDtcbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgICAgICB2YXIgcCA9IHBsdWdpbnNMaXN0LnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgICAgICBwWzBdLm5vZGUuZXh0ZXJuYWxJbnRlcmZhY2UuY2xvc2VXaW5kb3dzKCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgZnVuY3Rpb24gdHJpZ2dlckF1ZGlvU3RhcnQoKSB7XG4gICAgICAgIHBsdWdpbnNMaXN0LmZvckVhY2goZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgICAgIG4ubm9kZS5zdGFydC5jYWxsKG4ubm9kZSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHRyaWdnZXJBdWRpb1N0b3AoKSB7XG4gICAgICAgIHBsdWdpbnNMaXN0LmZvckVhY2goZnVuY3Rpb24gKG4pIHtcbiAgICAgICAgICAgIG4ubm9kZS5zdG9wLmNhbGwobi5ub2RlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgdGhpcy5hdWRpb1N0YXJ0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoIWF1ZGlvU3RhcnRlZCkge1xuICAgICAgICAgICAgdHJpZ2dlckF1ZGlvU3RhcnQoKTtcbiAgICAgICAgICAgIGF1ZGlvU3RhcnRlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHRoaXMuYXVkaW9TdG9wID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoYXVkaW9TdGFydGVkKSB7XG4gICAgICAgICAgICB0cmlnZ2VyQXVkaW9TdG9wKCk7XG4gICAgICAgICAgICBhdWRpb1N0YXJ0ZWQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgRmVhdHVyZU1hcCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIE1hcHBpbmdzID0gW107XG5cbiAgICAgICAgdmFyIEZlYXR1cmVOb2RlID0gZnVuY3Rpb24gKG5vZGUpIHtcbiAgICAgICAgICAgIHRoaXMubmFtZSA9IG5vZGUubmFtZTtcbiAgICAgICAgICAgIHRoaXMucGFyYW1ldGVycyA9IHRoaXMucGFyYW1ldGVycztcbiAgICAgICAgICAgIHRoaXMuZmVhdHVyZXMgPSBbXTtcbiAgICAgICAgfTtcblxuICAgICAgICBmdW5jdGlvbiBnZXRGZWF0dXJlTm9kZShsaXN0LCBjaGVjaykge1xuICAgICAgICAgICAgcmV0dXJuIGxpc3QuZmluZChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBlLm5hbWUgPT09IHRoaXMubmFtZTtcbiAgICAgICAgICAgIH0sIGNoZWNrKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGFkZEZlYXR1cmVOb2RlKGZlYXR1cmVOb2RlLCBsaXN0KSB7XG4gICAgICAgICAgICB2YXIgbm9kZSA9IG5ldyBGZWF0dXJlTm9kZShmZWF0dXJlTm9kZSk7XG4gICAgICAgICAgICBsaXN0LnB1c2gobm9kZSk7XG4gICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBTb3VyY2VNYXAgPSBmdW5jdGlvbiAoU2VuZGVyLCBwbHVnaW5JbnN0YWNlKSB7XG4gICAgICAgICAgICB2YXIgTWFwcGluZ3MgPSBbXTtcbiAgICAgICAgICAgIHRoaXMuZ2V0U291cmNlSW5zdGFuY2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHBsdWdpbkluc3RhY2U7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5nZXRTZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFNlbmRlcjtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGZpbmRGZWF0dXJlT2JqZWN0KGZlYXR1cmVPYmplY3QpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gTWFwcGluZ3MuZmluZChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGUub3V0cHV0SW5kZXggPT09IHRoaXMub3V0cHV0SW5kZXggJiYgZS5mcmFtZVNpemUgPT09IHRoaXMuZnJhbWVTaXplKTtcbiAgICAgICAgICAgICAgICB9LCBmZWF0dXJlT2JqZWN0KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gdXBkYXRlU2VuZGVyKCkge1xuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHJlY3Vyc2l2ZUZpbmQoZmVhdHVyZUxpc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGYsIGxpc3QgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChmID0gMDsgZiA8IGZlYXR1cmVMaXN0Lmxlbmd0aDsgZisrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmVhdHVyZU5vZGUgPSBnZXRGZWF0dXJlTm9kZShsaXN0LCBmZWF0dXJlTGlzdFtmXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWZlYXR1cmVOb2RlIHx8IChmZWF0dXJlTGlzdC5wYXJhbWV0ZXJzICYmIGZlYXR1cmVMaXN0W2ZdLnBhcmFtZXRlcnMubGVuZ3RoICE9PSAwKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmVOb2RlID0gYWRkRmVhdHVyZU5vZGUoZmVhdHVyZUxpc3RbZl0sIGxpc3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZlYXR1cmVMaXN0W2ZdLmZlYXR1cmVzICYmIGZlYXR1cmVMaXN0W2ZdLmZlYXR1cmVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmZWF0dXJlTm9kZS5mZWF0dXJlcyA9IHJlY3Vyc2l2ZUZpbmQoZmVhdHVyZUxpc3RbZl0uZmVhdHVyZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBsaXN0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgaSwgb3V0cHV0TGlzdCA9IFtdO1xuICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBNYXBwaW5ncy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAob3V0cHV0TGlzdFtNYXBwaW5nc1tpXS5vdXRwdXRJbmRleF0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0TGlzdFtNYXBwaW5nc1tpXS5vdXRwdXRJbmRleF0gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB2YXIgZnJhbWVMaXN0ID0gb3V0cHV0TGlzdFtNYXBwaW5nc1tpXS5vdXRwdXRJbmRleF0uZmluZChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUuZnJhbWVTaXplID09PSB0aGlzLmZyYW1lU2l6ZTtcbiAgICAgICAgICAgICAgICAgICAgfSwgTWFwcGluZ3NbaV0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWZyYW1lTGlzdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZnJhbWVMaXN0ID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdmcmFtZVNpemUnOiBNYXBwaW5nc1tpXS5mcmFtZVNpemUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2ZlYXR1cmVMaXN0JzogdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgb3V0cHV0TGlzdFtNYXBwaW5nc1tpXS5vdXRwdXRJbmRleF0ucHVzaChmcmFtZUxpc3QpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGZyYW1lTGlzdC5mZWF0dXJlTGlzdCA9IHJlY3Vyc2l2ZUZpbmQoTWFwcGluZ3NbaV0uZ2V0RmVhdHVyZUxpc3QoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFNlbmRlci51cGRhdGVGZWF0dXJlcyhvdXRwdXRMaXN0KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5yZXF1ZXN0RmVhdHVyZXMgPSBmdW5jdGlvbiAocmVxdWVzdG9ySW5zdGFuY2UsIGZlYXR1cmVPYmplY3QpIHtcbiAgICAgICAgICAgICAgICB2YXIgbWFwID0gZmluZEZlYXR1cmVPYmplY3QoZmVhdHVyZU9iamVjdCk7XG4gICAgICAgICAgICAgICAgaWYgKCFtYXApIHtcbiAgICAgICAgICAgICAgICAgICAgbWFwID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ291dHB1dEluZGV4JzogZmVhdHVyZU9iamVjdC5vdXRwdXRJbmRleCxcbiAgICAgICAgICAgICAgICAgICAgICAgICdmcmFtZVNpemUnOiBmZWF0dXJlT2JqZWN0LmZyYW1lU2l6ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdyZXF1ZXN0b3JzJzogW10sXG4gICAgICAgICAgICAgICAgICAgICAgICAnZ2V0RmVhdHVyZUxpc3QnOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIEYgPSBbXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdGhpcy5yZXF1ZXN0b3JzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEYgPSBGLmNvbmNhdCh0aGlzLnJlcXVlc3RvcnNbaV0uZ2V0RmVhdHVyZUxpc3QoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBGO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBNYXBwaW5ncy5wdXNoKG1hcCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciByZXF1ZXN0b3IgPSBtYXAucmVxdWVzdG9ycy5maW5kKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmdldFJlcXVlc3Rvckluc3RhbmNlKCkgPT09IHRoaXM7XG4gICAgICAgICAgICAgICAgfSwgcmVxdWVzdG9ySW5zdGFuY2UpO1xuICAgICAgICAgICAgICAgIGlmICghcmVxdWVzdG9yKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlcXVlc3RvciA9IG5ldyBSZXF1ZXN0b3JNYXAocmVxdWVzdG9ySW5zdGFuY2UpO1xuICAgICAgICAgICAgICAgICAgICBtYXAucmVxdWVzdG9ycy5wdXNoKHJlcXVlc3Rvcik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJlcXVlc3Rvci5hZGRGZWF0dXJlcyhmZWF0dXJlT2JqZWN0KTtcbiAgICAgICAgICAgICAgICB1cGRhdGVTZW5kZXIoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHRoaXMuZmluZEZyYW1lTWFwID0gZnVuY3Rpb24gKG91dHB1dEluZGV4LCBmcmFtZVNpemUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gTWFwcGluZ3MuZmluZChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGUub3V0cHV0SW5kZXggPT09IG91dHB1dEluZGV4ICYmIGUuZnJhbWVTaXplID09PSBmcmFtZVNpemUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdGhpcy5jYW5jZWxGZWF0dXJlcyA9IGZ1bmN0aW9uIChyZXF1ZXN0b3JJbnN0YW5jZSwgZmVhdHVyZU9iamVjdCkge1xuICAgICAgICAgICAgICAgIGlmIChmZWF0dXJlT2JqZWN0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgTWFwcGluZ3MuZm9yRWFjaChmdW5jdGlvbiAobWFwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVxdWVzdG9ySW5kZXggPSBtYXAucmVxdWVzdG9ycy5maW5kSW5kZXgoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZS5nZXRSZXF1ZXN0b3JJbnN0YW5jZSgpID09PSByZXF1ZXN0b3JJbnN0YW5jZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcXVlc3RvckluZGV4ID49IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXAucmVxdWVzdG9ycy5zcGxpY2UocmVxdWVzdG9ySW5kZXgsIDEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWFwID0gZmluZEZlYXR1cmVPYmplY3QoZmVhdHVyZU9iamVjdCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghbWFwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlcXVlc3RvciA9IG1hcC5yZXF1ZXN0b3JzLmZpbmQoZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLmdldFJlcXVlc3Rvckluc3RhbmNlKCkgPT09IHRoaXM7XG4gICAgICAgICAgICAgICAgICAgIH0sIHJlcXVlc3Rvckluc3RhbmNlKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXF1ZXN0b3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXF1ZXN0b3IuZGVsZXRlRmVhdHVyZXMoZmVhdHVyZU9iamVjdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHVwZGF0ZVNlbmRlcigpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIFJlcXVlc3Rvck1hcCA9IGZ1bmN0aW9uIChwbHVnaW5JbnN0YW5jZSkge1xuICAgICAgICAgICAgdmFyIEZlYXR1cmVzID0gW107XG4gICAgICAgICAgICB2YXIgUmVjZWl2ZXIgPSBwbHVnaW5JbnN0YW5jZS5ub2RlLmZlYXR1cmVNYXAuUmVjZWl2ZXI7XG4gICAgICAgICAgICB0aGlzLmdldFJlcXVlc3Rvckluc3RhbmNlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBwbHVnaW5JbnN0YW5jZTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHJlY3Vyc2l2ZWx5QWRkRmVhdHVyZXMocm9vdEFycmF5LCBmZWF0dXJlT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgdmFyIGk7XG4gICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGZlYXR1cmVPYmplY3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgd2UgaGF2ZSBub3QgYWxyZWFkeSBsaXN0ZWQgdGhlIGZlYXR1cmVcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZlYXR1cmVOb2RlID0gZ2V0RmVhdHVyZU5vZGUocm9vdEFycmF5LCBmZWF0dXJlT2JqZWN0W2ldKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFmZWF0dXJlTm9kZSB8fCAoZmVhdHVyZU9iamVjdFtpXS5wYXJhbWV0ZXJzICYmIGZlYXR1cmVPYmplY3RbaV0ucGFyYW1ldGVycy5sZW5ndGggIT09IDApKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmZWF0dXJlTm9kZSA9IGFkZEZlYXR1cmVOb2RlKGZlYXR1cmVPYmplY3RbaV0sIHJvb3RBcnJheSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGZlYXR1cmVPYmplY3RbaV0uZmVhdHVyZXMgIT09IHVuZGVmaW5lZCAmJiBmZWF0dXJlT2JqZWN0W2ldLmZlYXR1cmVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY3Vyc2l2ZWx5QWRkRmVhdHVyZXMoZmVhdHVyZU5vZGUuZmVhdHVyZXMsIGZlYXR1cmVPYmplY3RbaV0uZmVhdHVyZXMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiByZWN1cnNpdmVseURlbGV0ZUZlYXR1cmVzKHJvb3RBcnJheSwgZmVhdHVyZU9iamVjdCkge1xuICAgICAgICAgICAgICAgIHZhciBsID0gZmVhdHVyZU9iamVjdC5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgIGk7XG4gICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAvLyBGaW5kIHRoZSBmZWF0dXJlXG4gICAgICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IGdldEZlYXR1cmVOb2RlKHJvb3RBcnJheSwgZmVhdHVyZU9iamVjdFtpXSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmVhdHVyZU9iamVjdFtpbmRleF0uZmVhdHVyZXMgJiYgZmVhdHVyZU9iamVjdFtpbmRleF0uZmVhdHVyZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlY3Vyc2l2ZWx5RGVsZXRlRmVhdHVyZXMocm9vdEFycmF5W2luZGV4XS5mZWF0dXJlcywgZmVhdHVyZU9iamVjdFtpbmRleF0uZmVhdHVyZXMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBGZWF0dXJlcy5zcGxpY2UoaW5kZXgsIDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuYWRkRmVhdHVyZXMgPSBmdW5jdGlvbiAoZmVhdHVyZU9iamVjdCkge1xuICAgICAgICAgICAgICAgIHJlY3Vyc2l2ZWx5QWRkRmVhdHVyZXMoRmVhdHVyZXMsIGZlYXR1cmVPYmplY3QuZmVhdHVyZXMpO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdGhpcy5kZWxldGVGZWF0dXJlcyA9IGZ1bmN0aW9uIChmZWF0dXJlT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgcmVjdXJzaXZlbHlEZWxldGVGZWF0dXJlcyhGZWF0dXJlcywgZmVhdHVyZU9iamVjdC5mZWF0dXJlcyk7XG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB0aGlzLmdldEZlYXR1cmVMaXN0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBGZWF0dXJlcztcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHRoaXMucG9zdEZlYXR1cmVzID0gZnVuY3Rpb24gKGZlYXR1cmVPYmplY3QpIHtcbiAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdwbHVnaW4nOiBmZWF0dXJlT2JqZWN0LnBsdWdpbixcbiAgICAgICAgICAgICAgICAgICAgICAgICdvdXRwdXRJbmRleCc6IGZlYXR1cmVPYmplY3Qub3V0cHV0SW5kZXgsXG4gICAgICAgICAgICAgICAgICAgICAgICAnZnJhbWVTaXplJzogZmVhdHVyZU9iamVjdC5mcmFtZVNpemUsXG4gICAgICAgICAgICAgICAgICAgICAgICAnZmVhdHVyZXMnOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ251bWJlck9mQ2hhbm5lbHMnOiBmZWF0dXJlT2JqZWN0LnJlc3VsdHMubnVtYmVyT2ZDaGFubmVscyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAncmVzdWx0cyc6IFtdXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGk7XG5cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiByZWN1cnNpdmVQb3N0RmVhdHVyZXMocm9vdE5vZGUsIHJlc3VsdHNMaXN0LCBGZWF0dXJlTGlzdCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBBZGQgdGhlIHJlc3VsdHMgdHJlZSB3aGVyZSBuZWNlc3NhcnlcbiAgICAgICAgICAgICAgICAgICAgdmFyIGksIHBhcmFtO1xuXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIGFvKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLm5hbWUgPT09IHBhcmFtO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGZvciAocGFyYW0gaW4gcmVzdWx0c0xpc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHRzTGlzdC5oYXNPd25Qcm9wZXJ0eShwYXJhbSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbm9kZSA9IEZlYXR1cmVMaXN0LmZpbmQoYW8pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHRzTGlzdFtwYXJhbV0uY29uc3RydWN0b3IgPT09IE9iamVjdCAmJiBub2RlLnJlc3VsdHMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvb3ROb2RlW3BhcmFtXSA9IHt9O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjdXJzaXZlUG9zdEZlYXR1cmVzKHJvb3ROb2RlW3BhcmFtXSwgcmVzdWx0c0xpc3RbcGFyYW1dLCBub2RlLnJlc3VsdHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9vdE5vZGVbcGFyYW1dID0gcmVzdWx0c0xpc3RbcGFyYW1dO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIFBlcmZvcm0gcmVjdXJzaXZlIG1hcCBmb3IgZWFjaCBjaGFubmVsXG4gICAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IGZlYXR1cmVPYmplY3QucmVzdWx0cy5udW1iZXJPZkNoYW5uZWxzOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5mZWF0dXJlcy5yZXN1bHRzW2ldID0ge307XG4gICAgICAgICAgICAgICAgICAgIHJlY3Vyc2l2ZVBvc3RGZWF0dXJlcyhtZXNzYWdlLmZlYXR1cmVzLnJlc3VsdHNbaV0sIGZlYXR1cmVPYmplY3QucmVzdWx0cy5yZXN1bHRzW2ldLnJlc3VsdHMsIEZlYXR1cmVzKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcGx1Z2luSW5zdGFuY2Uubm9kZS5mZWF0dXJlTWFwLlJlY2VpdmVyLnBvc3RGZWF0dXJlcyhtZXNzYWdlKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH07XG5cbiAgICAgICAgZnVuY3Rpb24gZmluZFNvdXJjZUluZGV4KFNlbmRlcikge1xuICAgICAgICAgICAgcmV0dXJuIE1hcHBpbmdzLmZpbmRJbmRleChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBlLmdldFNlbmRlcigpID09PSB0aGlzO1xuICAgICAgICAgICAgfSwgU2VuZGVyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGZpbmRTb3VyY2VNYXAoTWFwcGluZ3MsIHNvdXJjZSwgcGx1Z2luU2VuZGVyKSB7XG4gICAgICAgICAgICB2YXIgc291cmNlTWFwID0gTWFwcGluZ3NbZmluZFNvdXJjZUluZGV4KHNvdXJjZSldO1xuICAgICAgICAgICAgaWYgKCFzb3VyY2VNYXApIHtcbiAgICAgICAgICAgICAgICBzb3VyY2VNYXAgPSBNYXBwaW5nc1tmaW5kU291cmNlSW5kZXgocGx1Z2luU2VuZGVyKV07XG4gICAgICAgICAgICAgICAgaWYgKCFzb3VyY2VNYXApIHtcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgKFwiQ291bGQgbm90IGxvY2F0ZSBzb3VyY2UgbWFwXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzb3VyY2VNYXA7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBHRU5FUkFMIElOVEVSRkFDRVxuICAgICAgICB0aGlzLmNyZWF0ZVNvdXJjZU1hcCA9IGZ1bmN0aW9uIChTZW5kZXIsIHBsdWdpbkluc3RhbmNlKSB7XG4gICAgICAgICAgICB2YXIgbm9kZSA9IG5ldyBTb3VyY2VNYXAoU2VuZGVyLCBwbHVnaW5JbnN0YW5jZSk7XG4gICAgICAgICAgICBNYXBwaW5ncy5wdXNoKG5vZGUpO1xuICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZGVsZXRlU291cmNlTWFwID0gZnVuY3Rpb24gKFNlbmRlcikge1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gZmluZFNvdXJjZUluZGV4KFNlbmRlcik7XG4gICAgICAgICAgICBpZiAoaW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgKFwiQ291bGQgbm90IGZpbmQgdGhlIHNvdXJjZSBtYXAgZm9yIHRoZSBwbHVnaW5cIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBNYXBwaW5ncy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuZ2V0UGx1Z2luU2VuZGVyID0gZnVuY3Rpb24gKHBsdWdpbikge1xuICAgICAgICAgICAgaWYgKHBsdWdpbi5jb25zdHJ1Y3RvciA9PT0gUGx1Z2luSW5zdGFuY2UpIHtcbiAgICAgICAgICAgICAgICBwbHVnaW4gPSBwbHVnaW4ubm9kZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBwbHVnaW4uZmVhdHVyZU1hcC5TZW5kZXI7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5yZXF1ZXN0RmVhdHVyZXMgPSBmdW5jdGlvbiAocmVxdWVzdG9yLCBzb3VyY2UsIGZlYXR1cmVPYmplY3QpIHtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0b3IuY29uc3RydWN0b3IgIT09IFBsdWdpbkluc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgcmVxdWVzdG9yID0gcmVxdWVzdG9yLnBsdWdpbkluc3RhbmNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gR2V0IHRoZSBzb3VyY2UgbWFwXG4gICAgICAgICAgICB2YXIgcGx1Z2luU2VuZGVyID0gdGhpcy5nZXRQbHVnaW5TZW5kZXIoc291cmNlKTtcbiAgICAgICAgICAgIHZhciBzb3VyY2VNYXAgPSBmaW5kU291cmNlTWFwKE1hcHBpbmdzLCBzb3VyY2UsIHBsdWdpblNlbmRlcik7XG4gICAgICAgICAgICBzb3VyY2VNYXAucmVxdWVzdEZlYXR1cmVzKHJlcXVlc3RvciwgZmVhdHVyZU9iamVjdCk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZGVsZXRlRmVhdHVyZXMgPSBmdW5jdGlvbiAocmVxdWVzdG9yLCBzb3VyY2UsIGZlYXR1cmVPYmplY3QpIHtcbiAgICAgICAgICAgIGlmIChyZXF1ZXN0b3IuY29uc3RydWN0b3IgIT09IFBsdWdpbkluc3RhbmNlKSB7XG4gICAgICAgICAgICAgICAgcmVxdWVzdG9yID0gcmVxdWVzdG9yLnBsdWdpbkluc3RhbmNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHNvdXJjZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgTWFwcGluZ3MuZm9yRWFjaChmdW5jdGlvbiAoc291cmNlTWFwKSB7XG4gICAgICAgICAgICAgICAgICAgIHNvdXJjZU1hcC5jYW5jZWxGZWF0dXJlcyhyZXF1ZXN0b3IpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBHZXQgdGhlIHNvdXJjZSBtYXBcbiAgICAgICAgICAgICAgICB2YXIgcGx1Z2luU2VuZGVyID0gdGhpcy5nZXRQbHVnaW5TZW5kZXIoc291cmNlKTtcbiAgICAgICAgICAgICAgICB2YXIgc291cmNlTWFwID0gZmluZFNvdXJjZU1hcChNYXBwaW5ncywgc291cmNlLCBwbHVnaW5TZW5kZXIpO1xuICAgICAgICAgICAgICAgIHNvdXJjZU1hcC5jYW5jZWxGZWF0dXJlcyhyZXF1ZXN0b3IsIGZlYXR1cmVPYmplY3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmdldEZlYXR1cmVMaXN0ID0gZnVuY3Rpb24gKHJlcXVlc3Rvciwgc291cmNlKSB7fTtcbiAgICAgICAgdGhpcy5wb3N0RmVhdHVyZXMgPSBmdW5jdGlvbiAoZmVhdHVyZU9iamVjdCkge1xuICAgICAgICAgICAgLy8gUmVjZWl2ZSBmcm9tIHRoZSBTZW5kZXIgb2JqZWN0c1xuICAgICAgICAgICAgLy8gVHJpZ2dlciBkaXN0cmlidXRlZCBzZWFyY2ggZm9yIHJlc3VsdHMgdHJhbnNtaXNzaW9uXG5cbiAgICAgICAgICAgIC8vIEZpcnN0IGdldCB0aGUgaW5zdGFuY2UgbWFwcGluZyBmb3Igb3V0cHV0L2ZyYW1lXG4gICAgICAgICAgICB2YXIgc291cmNlID0gTWFwcGluZ3NbZmluZFNvdXJjZUluZGV4KGZlYXR1cmVPYmplY3QucGx1Z2luKV07XG4gICAgICAgICAgICBpZiAoIXNvdXJjZSkge1xuICAgICAgICAgICAgICAgIHNvdXJjZSA9IE1hcHBpbmdzW2ZpbmRTb3VyY2VJbmRleCh0aGlzLmdldFBsdWdpblNlbmRlcihmZWF0dXJlT2JqZWN0LnBsdWdpbikpXTtcbiAgICAgICAgICAgICAgICBpZiAoIXNvdXJjZSkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyAoXCJQbHVnaW4gSW5zdGFuY2Ugbm90IGxvYWRlZCFcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGZyYW1lTWFwID0gc291cmNlLmZpbmRGcmFtZU1hcChmZWF0dXJlT2JqZWN0Lm91dHB1dEluZGV4LCBmZWF0dXJlT2JqZWN0LmZyYW1lU2l6ZSk7XG5cbiAgICAgICAgICAgIC8vIFNlbmQgdGhlIGZlYXR1cmUgb2JqZWN0IHRvIHRoZSBSZXF1ZXN0b3JNYXAgb2JqZWN0IHRvIGhhbmRsZSBjb21tc1xuICAgICAgICAgICAgZnJhbWVNYXAucmVxdWVzdG9ycy5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgZS5wb3N0RmVhdHVyZXModGhpcyk7XG4gICAgICAgICAgICB9LCBmZWF0dXJlT2JqZWN0KTtcblxuICAgICAgICB9O1xuICAgIH07XG5cbiAgICB0aGlzLkZlYXR1cmVNYXAgPSBuZXcgRmVhdHVyZU1hcCgpO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLkZlYXR1cmVNYXAsIFwiZmFjdG9yeVwiLCB7XG4gICAgICAgICd2YWx1ZSc6IHRoaXNcbiAgICB9KTtcblxuICAgIHZhciBzdG9yZXMgPSBbXTtcblxuICAgIHRoaXMuY3JlYXRlU3RvcmUgPSBmdW5jdGlvbiAoc3RvcmVOYW1lKSB7XG4gICAgICAgIHZhciBub2RlID0gbmV3IExpbmtlZFN0b3JlLkxpbmtlZFN0b3JlKHN0b3JlTmFtZSk7XG4gICAgICAgIHN0b3Jlcy5wdXNoKG5vZGUpO1xuICAgICAgICByZXR1cm4gbm9kZTtcbiAgICB9O1xuXG4gICAgdGhpcy5nZXRTdG9yZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBzdG9yZXM7XG4gICAgfTtcblxuICAgIHRoaXMuZmluZFN0b3JlID0gZnVuY3Rpb24gKHN0b3JlTmFtZSkge1xuICAgICAgICByZXR1cm4gc3RvcmVzLmZpbmQoZnVuY3Rpb24gKGEpIHtcbiAgICAgICAgICAgIHJldHVybiBhLm5hbWUgPT09IHN0b3JlTmFtZTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8vIEJ1aWxkIHRoZSBkZWZhdWx0IFN0b3Jlc1xuICAgIHRoaXMuU2Vzc2lvbkRhdGEgPSBuZXcgTGlua2VkU3RvcmUuTGlua2VkU3RvcmUoXCJTZXNzaW9uXCIpO1xuICAgIHRoaXMuVXNlckRhdGEgPSBuZXcgTGlua2VkU3RvcmUuTGlua2VkU3RvcmUoXCJVc2VyXCIpO1xuXG4gICAgLy8gQ3JlYXRlZCBmb3IgdGhlIGlucHV0IG9mIGVhY2ggU3ViRmFjdG9yeSBwbHVnaW4gY2hhaW5cbiAgICB2YXIgU3ViRmFjdG9yeUZlYXR1cmVTZW5kZXIgPSBmdW5jdGlvbiAob3duZXIsIEZhY3RvcnlGZWF0dXJlTWFwKSB7XG4gICAgICAgIHZhciBPdXRwdXROb2RlID0gZnVuY3Rpb24gKHBhcmVudCwgb3V0cHV0KSB7XG4gICAgICAgICAgICB2YXIgZXh0cmFjdG9ycyA9IFtdO1xuICAgICAgICAgICAgdmFyIEV4dHJhY3RvciA9IGZ1bmN0aW9uIChvdXRwdXQsIGZyYW1lU2l6ZSkge1xuICAgICAgICAgICAgICAgIHRoaXMuZXh0cmFjdG9yID0gb3V0cHV0LmNvbnRleHQuY3JlYXRlQW5hbHlzZXIoKTtcbiAgICAgICAgICAgICAgICB0aGlzLmV4dHJhY3Rvci5mZnRTaXplID0gZnJhbWVTaXplO1xuICAgICAgICAgICAgICAgIG91dHB1dC5jb25uZWN0KHRoaXMuZXh0cmFjdG9yKTtcbiAgICAgICAgICAgICAgICB0aGlzLmZlYXR1cmVzID0gW107XG4gICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIFwiZnJhbWVTaXplXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgJ3ZhbHVlJzogZnJhbWVTaXplXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB2YXIgcmVjdXJzaXZlUHJvY2Vzc2luZyA9IG93bmVyLnJlY3Vyc2l2ZVByb2Nlc3Npbmc7XG4gICAgICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiByZWN1cnNpdmVQcm9jZXNzaW5nKGJhc2UsIGxpc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGwgPSBsaXN0Lmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGksIGVudHJ5O1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbnRyeSA9IGxpc3RbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlW2VudHJ5Lm5hbWVdLmFwcGx5KGJhc2UsIGVudHJ5LnBhcmFtZXRlcnMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVudHJ5LmZlYXR1cmVzICYmIGVudHJ5LmZlYXR1cmVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWN1cnNpdmVQcm9jZXNzaW5nKGJhc2UucmVzdWx0W2VudHJ5Lm5hbWVdLCBlbnRyeS5mZWF0dXJlcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBmdW5jdGlvbiBvbmF1ZGlvY2FsbGJhY2soZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAvL3RoaXMgPT09IEV4dHJhY3RvclxuICAgICAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdudW1iZXJPZkNoYW5uZWxzJzogMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICdyZXN1bHRzJzogW11cbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgcmVjdXJzaXZlUHJvY2Vzc2luZyhkYXRhLCB0aGlzLmZlYXR1cmVzKTtcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZS5yZXN1bHRzWzBdID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ2NoYW5uZWwnOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ3Jlc3VsdHMnOiBKU09OLnBhcnNlKGRhdGEudG9KU09OKCkpXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHRoaXMucG9zdEZlYXR1cmVzKGRhdGEubGVuZ3RoLCBtZXNzYWdlKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aGlzLnNldEZlYXR1cmVzID0gZnVuY3Rpb24gKGZlYXR1cmVMaXN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmVhdHVyZXMgPSBmZWF0dXJlTGlzdDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZmVhdHVyZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmV4dHJhY3Rvci5jbGVhckNhbGxiYWNrKCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmV4dHJhY3Rvci5mcmFtZUNhbGxiYWNrKG9uYXVkaW9jYWxsYmFjaywgdGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHRoaXMucmVqb2luRXh0cmFjdG9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBvdXRwdXQuY29ubmVjdCh0aGlzLmV4dHJhY3Rvcik7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgV29ya2VyRXh0cmFjdG9yID0gZnVuY3Rpb24gKG91dHB1dCwgZnJhbWVTaXplKSB7XG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gb25hdWRpb2NhbGxiYWNrKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGMsIGZyYW1lcyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGMgPSAwOyBjIDwgZS5pbnB1dEJ1ZmZlci5udW1iZXJPZkNoYW5uZWxzOyBjKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZyYW1lc1tjXSA9IGUuaW5wdXRCdWZmZXIuZ2V0Q2hhbm5lbERhdGEoYyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdzdGF0ZSc6IDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAnZnJhbWVzJzogZnJhbWVzXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIHJlc3BvbnNlKG1zZykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnBvc3RGZWF0dXJlcyhmcmFtZVNpemUsIG1zZy5kYXRhLnJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgd29ya2VyID0gbmV3IFdvcmtlcihcImpzYXAvZmVhdHVyZS13b3JrZXIuanNcIik7XG4gICAgICAgICAgICAgICAgd29ya2VyLm9uZXJyb3IgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICB0aGlzLnNldEZlYXR1cmVzID0gZnVuY3Rpb24gKGZlYXR1cmVMaXN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNvbmZpZ01lc3NhZ2UgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAnc3RhdGUnOiAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ3NhbXBsZVJhdGUnOiBvdXRwdXQuY29udGV4dC5zYW1wbGVSYXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2ZlYXR1cmVMaXN0JzogZmVhdHVyZUxpc3QsXG4gICAgICAgICAgICAgICAgICAgICAgICAnbnVtQ2hhbm5lbHMnOiBvdXRwdXQubnVtYmVyT2ZPdXRwdXRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2ZyYW1lU2l6ZSc6IHRoaXMuZnJhbWVTaXplXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZmVhdHVyZXMgPSBmZWF0dXJlTGlzdDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZlYXR1cmVMaXN0ICYmIGZlYXR1cmVMaXN0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdvcmtlci5vbm1lc3NhZ2UgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlLmRhdGEuc3RhdGUgPT09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd29ya2VyLm9ubWVzc2FnZSA9IHJlc3BvbnNlLmJpbmQoc2VsZik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuZXh0cmFjdG9yLm9uYXVkaW9wcm9jZXNzID0gb25hdWRpb2NhbGxiYWNrLmJpbmQoc2VsZik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd29ya2VyLnBvc3RNZXNzYWdlKGNvbmZpZ01lc3NhZ2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICB3b3JrZXIucG9zdE1lc3NhZ2Uoe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdzdGF0ZSc6IDBcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5leHRyYWN0b3Iub25hdWRpb3Byb2Nlc3MgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICB0aGlzLnJlam9pbkV4dHJhY3RvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgb3V0cHV0LmNvbm5lY3QodGhpcy5leHRyYWN0b3IpO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICB0aGlzLmV4dHJhY3RvciA9IG91dHB1dC5jb250ZXh0LmNyZWF0ZVNjcmlwdFByb2Nlc3NvcihmcmFtZVNpemUsIG91dHB1dC5udW1iZXJPZk91dHB1dHMsIDEpO1xuICAgICAgICAgICAgICAgIG91dHB1dC5jb25uZWN0KHRoaXMuZXh0cmFjdG9yKTtcbiAgICAgICAgICAgICAgICB0aGlzLmV4dHJhY3Rvci5jb25uZWN0KG91dHB1dC5jb250ZXh0LmRlc3RpbmF0aW9uKTtcblxuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcImZyYW1lU2l6ZVwiLCB7XG4gICAgICAgICAgICAgICAgICAgICd2YWx1ZSc6IGZyYW1lU2l6ZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuYWRkRXh0cmFjdG9yID0gZnVuY3Rpb24gKGZyYW1lU2l6ZSkge1xuICAgICAgICAgICAgICAgIHZhciBvYmo7XG4gICAgICAgICAgICAgICAgaWYgKHdpbmRvdy5Xb3JrZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgb2JqID0gbmV3IFdvcmtlckV4dHJhY3RvcihvdXRwdXQsIGZyYW1lU2l6ZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgb2JqID0gbmV3IEV4dHJhY3RvcihvdXRwdXQsIGZyYW1lU2l6ZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGV4dHJhY3RvcnMucHVzaChvYmopO1xuICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIFwicG9zdEZlYXR1cmVzXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgJ3ZhbHVlJzogZnVuY3Rpb24gKGZyYW1lU2l6ZSwgcmVzdWx0c0pTT04pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvYmogPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ291dHB1dEluZGV4JzogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZnJhbWVTaXplJzogZnJhbWVTaXplLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdyZXN1bHRzJzogcmVzdWx0c0pTT05cbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBvc3RGZWF0dXJlcyhvYmopO1xuICAgICAgICAgICAgICAgICAgICB9LmJpbmQodGhpcylcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuZmluZEV4dHJhY3RvciA9IGZ1bmN0aW9uIChmcmFtZVNpemUpIHtcbiAgICAgICAgICAgICAgICB2YXIgY2hlY2sgPSBmcmFtZVNpemU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGV4dHJhY3RvcnMuZmluZChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBUaGlzIE1VU1QgYmUgPT0gTk9UID09PVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gTnVtYmVyKGUuZnJhbWVTaXplKSA9PT0gTnVtYmVyKGNoZWNrKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLnJlam9pbkV4dHJhY3RvcnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgZXh0cmFjdG9ycy5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIGUucmVqb2luRXh0cmFjdG9yKCk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5kZWxldGVFeHRyYWN0b3IgPSBmdW5jdGlvbiAoZnJhbWVTaXplKSB7fTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIG91dHB1dE5vZGVzO1xuICAgICAgICB0aGlzLnVwZGF0ZUZlYXR1cmVzID0gZnVuY3Rpb24gKGZlYXR1cmVPYmplY3QpIHtcbiAgICAgICAgICAgIHZhciBvO1xuICAgICAgICAgICAgZm9yIChvID0gMDsgbyA8IGZlYXR1cmVPYmplY3QubGVuZ3RoOyBvKyspIHtcbiAgICAgICAgICAgICAgICBpZiAob3V0cHV0Tm9kZXMgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAobyA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IChcIlJlcXVlc3RlZCBhbiBvdXRwdXQgdGhhdCBkb2VzIG5vdCBleGlzdFwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBvdXRwdXROb2RlcyA9IG5ldyBPdXRwdXROb2RlKG93bmVyLCBvd25lci5jaGFpblN0YXJ0KTtcbiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG91dHB1dE5vZGVzLCBcInBvc3RGZWF0dXJlc1wiLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAndmFsdWUnOiBmdW5jdGlvbiAocmVzdWx0T2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wb3N0RmVhdHVyZXMocmVzdWx0T2JqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdmFyIHNpO1xuICAgICAgICAgICAgICAgIGZvciAoc2kgPSAwOyBzaSA8IGZlYXR1cmVPYmplY3Rbb10ubGVuZ3RoOyBzaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBleHRyYWN0b3IgPSBvdXRwdXROb2Rlcy5maW5kRXh0cmFjdG9yKGZlYXR1cmVPYmplY3Rbb11bc2ldLmZyYW1lU2l6ZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZXh0cmFjdG9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBleHRyYWN0b3IgPSBvdXRwdXROb2Rlcy5hZGRFeHRyYWN0b3IoZmVhdHVyZU9iamVjdFtvXVtzaV0uZnJhbWVTaXplKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBleHRyYWN0b3Iuc2V0RmVhdHVyZXMoZmVhdHVyZU9iamVjdFtvXVtzaV0uZmVhdHVyZUxpc3QpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLnJlam9pbkV4dHJhY3RvcnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAob3V0cHV0Tm9kZXMpIHtcbiAgICAgICAgICAgICAgICBvdXRwdXROb2Rlcy5yZWpvaW5FeHRyYWN0b3JzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5wb3N0RmVhdHVyZXMgPSBmdW5jdGlvbiAoZmVhdHVyZU9iamVjdCkge1xuICAgICAgICAgICAgLypcbiAgICAgICAgICAgICAgICBDYWxsZWQgYnkgdGhlIGluZGl2aWR1YWwgZXh0cmFjdG9yIGluc3RhbmNlczpcbiAgICAgICAgICAgICAgICBmZWF0dXJlT2JqZWN0ID0geydmcmFtZVNpemUnOiBmcmFtZVNpemUsXG4gICAgICAgICAgICAgICAgJ291dHB1dEluZGV4Jzogb3V0cHV0SW5kZXgsXG4gICAgICAgICAgICAgICAgJ3Jlc3VsdHMnOltdfVxuICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIEZhY3RvcnlGZWF0dXJlTWFwLnBvc3RGZWF0dXJlcyh7XG4gICAgICAgICAgICAgICAgJ3BsdWdpbic6IHRoaXMsXG4gICAgICAgICAgICAgICAgJ291dHB1dEluZGV4JzogZmVhdHVyZU9iamVjdC5vdXRwdXRJbmRleCxcbiAgICAgICAgICAgICAgICAnZnJhbWVTaXplJzogZmVhdHVyZU9iamVjdC5mcmFtZVNpemUsXG4gICAgICAgICAgICAgICAgJ3Jlc3VsdHMnOiBmZWF0dXJlT2JqZWN0LnJlc3VsdHNcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8vIFNlbmQgdG8gRmFjdG9yeVxuICAgICAgICBGYWN0b3J5RmVhdHVyZU1hcC5jcmVhdGVTb3VyY2VNYXAodGhpcywgdW5kZWZpbmVkKTtcbiAgICB9O1xuXG4gICAgdmFyIEF1ZGlvUGx1Z2luQ2hhaW5NYW5hZ2VyID0gZnVuY3Rpb24gKFBsdWdpbkZhY3RvcnksIGNoYWluU3RhcnQsIGNoYWluU3RvcCkge1xuXG4gICAgICAgIHZhciBwbHVnaW5fbGlzdCA9IFtdLFxuICAgICAgICAgICAgcGx1Z2luQ2hhaW5TdGFydCA9IGNoYWluU3RhcnQsXG4gICAgICAgICAgICBwbHVnaW5DaGFpblN0b3AgPSBjaGFpblN0b3AsXG4gICAgICAgICAgICBmYWN0b3J5TmFtZSA9IFwiXCIsXG4gICAgICAgICAgICBzdGF0ZSA9IDEsXG4gICAgICAgICAgICBjaGFpblN0YXJ0RmVhdHVyZSA9IG5ldyBTdWJGYWN0b3J5RmVhdHVyZVNlbmRlcih0aGlzLCBQbHVnaW5GYWN0b3J5LkZlYXR1cmVNYXApLFxuICAgICAgICAgICAgc2VtYW50aWNTdG9yZXMgPSBbXTtcbiAgICAgICAgdGhpcy5wYXJlbnQgPSBQbHVnaW5GYWN0b3J5O1xuICAgICAgICBwbHVnaW5DaGFpblN0YXJ0LmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgcGx1Z2luQ2hhaW5TdGFydC5jb25uZWN0KGNoYWluU3RvcCk7XG5cbiAgICAgICAgdGhpcy5UcmFja0RhdGEgPSBuZXcgTGlua2VkU3RvcmUuTGlua2VkU3RvcmUoXCJUcmFja1wiKTtcbiAgICAgICAgdGhpcy5QbHVnaW5EYXRhID0gbmV3IExpbmtlZFN0b3JlLkxpbmtlZFN0b3JlKFwiUGx1Z2luXCIpO1xuXG4gICAgICAgIHRoaXMuZmVhdHVyZVNlbmRlciA9IGNoYWluU3RhcnRGZWF0dXJlO1xuXG4gICAgICAgIHRoaXMuZ2V0RmVhdHVyZUNoYWluID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIH07XG5cbiAgICAgICAgZnVuY3Rpb24gcmVidWlsZCgpIHtcbiAgICAgICAgICAgIHZhciBpID0gMCxcbiAgICAgICAgICAgICAgICBsID0gcGx1Z2luX2xpc3QubGVuZ3RoIC0gMTtcbiAgICAgICAgICAgIHdoaWxlIChpIDwgbCkge1xuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50Tm9kZSA9IHBsdWdpbl9saXN0W2krK107XG4gICAgICAgICAgICAgICAgdmFyIG5leHROb2RlID0gcGx1Z2luX2xpc3RbaV07XG4gICAgICAgICAgICAgICAgY3VycmVudE5vZGUucmVjb25uZWN0KG5leHROb2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGlzb2xhdGUoKSB7XG4gICAgICAgICAgICBwbHVnaW5fbGlzdC5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgZS5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGN1dENoYWluKCkge1xuICAgICAgICAgICAgaWYgKHBsdWdpbl9saXN0Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICBwbHVnaW5DaGFpblN0YXJ0LmRpc2Nvbm5lY3QocGx1Z2luX2xpc3RbMF0uaW5wdXQpO1xuICAgICAgICAgICAgICAgIHBsdWdpbl9saXN0W3BsdWdpbl9saXN0Lmxlbmd0aCAtIDFdLm91dHB1dC5kaXNjb25uZWN0KHBsdWdpbkNoYWluU3RvcCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHBsdWdpbkNoYWluU3RhcnQuZGlzY29ubmVjdChwbHVnaW5DaGFpblN0b3ApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBqb2luQ2hhaW4oKSB7XG4gICAgICAgICAgICBpZiAocGx1Z2luX2xpc3QubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIHBsdWdpbkNoYWluU3RhcnQuY29ubmVjdChwbHVnaW5fbGlzdFswXS5pbnB1dCk7XG4gICAgICAgICAgICAgICAgcGx1Z2luX2xpc3RbcGx1Z2luX2xpc3QubGVuZ3RoIC0gMV0ub3V0cHV0LmNvbm5lY3QocGx1Z2luQ2hhaW5TdG9wKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcGx1Z2luQ2hhaW5TdGFydC5jb25uZWN0KHBsdWdpbkNoYWluU3RvcCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjaGFpblN0YXJ0RmVhdHVyZS5yZWpvaW5FeHRyYWN0b3JzKCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmJ5cGFzc1BsdWdpbiA9IGZ1bmN0aW9uIChwbHVnaW5faW5zdGFuY2UsIHN0YXRlKSB7XG4gICAgICAgICAgICAvLyBDaGVjayBpcyBhIG1lbWJlciBvZiB0aGlzIGNoYWluXG4gICAgICAgICAgICBpZiAocGx1Z2luX2xpc3QuaW5jbHVkZXMocGx1Z2luX2luc3RhbmNlKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwbHVnaW5faW5zdGFuY2UuYnlwYXNzKHN0YXRlKTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmdldFByb3RvdHlwZXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJlbnQuZ2V0UHJvdG90eXBlcygpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuZ2V0RmFjdG9yeSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcmVudDtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmRlc3Ryb3kgPSBmdW5jdGlvbiAocmVjb25uZWN0KSB7XG4gICAgICAgICAgICB2YXIgaTtcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBwbHVnaW5fbGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHRoaXMuZGVzdHJveVBsdWdpbihwbHVnaW5fbGlzdFtpXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwbHVnaW5DaGFpblN0YXJ0LmRpc2Nvbm5lY3QoKTtcbiAgICAgICAgICAgIGlmIChyZWNvbm5lY3QgPT09IHRydWUpIHtcbiAgICAgICAgICAgICAgICBwbHVnaW5DaGFpblN0YXJ0LmNvbm5lY3QocGx1Z2luQ2hhaW5TdG9wKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvLyBQbHVnaW4gY3JlYXRpb24gLyBkZXN0cnVjdGlvblxuXG4gICAgICAgIGZ1bmN0aW9uIGJ1aWxkTmV3UGx1Z2luKHByb3RvdHlwZU9iamVjdCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgIGlmIChzdGF0ZSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICByZWplY3QgKFwiU3ViRmFjdG9yeSBoYXMgYmVlbiBkZXN0cm95ZWQhIENhbm5vdCBhZGQgbmV3IHBsdWdpbnNcIik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShwcm90b3R5cGVPYmplY3QpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHByb3RvdHlwZU9iamVjdC5jcmVhdGVQbHVnaW5JbnN0YW5jZShzZWxmLCBmYWxzZSlcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihub2RlKSB7XG4gICAgICAgICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKG5vZGUsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdUcmFja0RhdGEnOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHNlbGYuVHJhY2tEYXRhXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbm9kZTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5jcmVhdGVQbHVnaW4gPSBmdW5jdGlvbiAocHJvdG90eXBlT2JqZWN0KSB7XG4gICAgICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgICAgICByZXR1cm4gYnVpbGROZXdQbHVnaW4ocHJvdG90eXBlT2JqZWN0KS5jYXRjaChmdW5jdGlvbihlKXtcbiAgICAgICAgICAgICAgICB0aHJvdyhcIlBsdWdpbiBkaWQgbm90IGdldCBjcmVhdGVkISBBYm9ydGluZ1wiKTtcbiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24obm9kZSkge1xuICAgICAgICAgICAgICAgIGN1dENoYWluKCk7XG4gICAgICAgICAgICAgICAgcGx1Z2luX2xpc3QucHVzaChub2RlKTtcbiAgICAgICAgICAgICAgICBpc29sYXRlKCk7XG4gICAgICAgICAgICAgICAgcmVidWlsZCgpO1xuICAgICAgICAgICAgICAgIGpvaW5DaGFpbigpO1xuICAgICAgICAgICAgICAgIG5vZGUubm9kZS5vbmxvYWRlZC5jYWxsKG5vZGUubm9kZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG5vZGU7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmRlc3Ryb3lQbHVnaW4gPSBmdW5jdGlvbiAocGx1Z2luX29iamVjdCkge1xuICAgICAgICAgICAgaWYgKHN0YXRlID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5nZXRQbHVnaW5JbmRleChwbHVnaW5fb2JqZWN0KTtcbiAgICAgICAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgY3V0Q2hhaW4oKTtcbiAgICAgICAgICAgICAgICBwbHVnaW5fb2JqZWN0Lm5vZGUuc3RvcC5jYWxsKHBsdWdpbl9vYmplY3Qubm9kZSk7XG4gICAgICAgICAgICAgICAgcGx1Z2luX29iamVjdC5ub2RlLm9udW5sb2FkZWQuY2FsbChwbHVnaW5fb2JqZWN0Lm5vZGUpO1xuICAgICAgICAgICAgICAgIHBsdWdpbl9vYmplY3Qubm9kZS5kZWNvbnN0cnVjdC5jYWxsKHBsdWdpbl9vYmplY3Qubm9kZSk7XG4gICAgICAgICAgICAgICAgcGx1Z2luX2xpc3Quc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICB0aGlzLnBhcmVudC5kZWxldGVQbHVnaW4ocGx1Z2luX29iamVjdC5pZCk7XG4gICAgICAgICAgICAgICAgaXNvbGF0ZSgpO1xuICAgICAgICAgICAgICAgIHJlYnVpbGQoKTtcbiAgICAgICAgICAgICAgICBqb2luQ2hhaW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmdldFBsdWdpbnMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gcGx1Z2luX2xpc3Q7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5nZXRBbGxQbHVnaW5zID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyZW50LmdldEFsbFBsdWdpbnNPYmplY3QoKTtcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmdldFBsdWdpbkluZGV4ID0gZnVuY3Rpb24gKHBsdWdpbl9vYmplY3QpIHtcbiAgICAgICAgICAgIGlmIChzdGF0ZSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBpbmRleCA9IHBsdWdpbl9saXN0LmZpbmRJbmRleChmdW5jdGlvbiAoZWxlbWVudCwgaW5kZXgsIGFycmF5KSB7XG4gICAgICAgICAgICAgICAgaWYgKGVsZW1lbnQgPT09IHRoaXMpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH0sIHBsdWdpbl9vYmplY3QpO1xuICAgICAgICAgICAgcmV0dXJuIGluZGV4O1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMubW92ZVBsdWdpbiA9IGZ1bmN0aW9uIChwbHVnaW5fb2JqZWN0LCBuZXdfaW5kZXgpIHtcbiAgICAgICAgICAgIGlmIChzdGF0ZSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBvYmosIGluZGV4ID0gdGhpcy5nZXRQbHVnaW5JbmRleChwbHVnaW5fb2JqZWN0KSxcbiAgICAgICAgICAgICAgICBob2xkTG93LCBob2xkSGlnaCwgaTtcbiAgICAgICAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgY3V0Q2hhaW4oKTtcbiAgICAgICAgICAgICAgICBpc29sYXRlKCk7XG4gICAgICAgICAgICAgICAgb2JqID0gcGx1Z2luX2xpc3Quc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgICAgICAgICBwbHVnaW5fb2JqZWN0Lm5vZGUub251bmxvYWRlZC5jYWxsKHBsdWdpbl9vYmplY3Qubm9kZSk7XG4gICAgICAgICAgICAgICAgaWYgKG5ld19pbmRleCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBwbHVnaW5fbGlzdCA9IG9iai5jb25jYXQocGx1Z2luX2xpc3QpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAobmV3X2luZGV4ID49IHBsdWdpbl9saXN0Lmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBwbHVnaW5fbGlzdCA9IHBsdWdpbl9saXN0LmNvbmNhdChvYmopO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGhvbGRMb3cgPSBwbHVnaW5fbGlzdC5zbGljZSgwLCBuZXdfaW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICBob2xkSGlnaCA9IHBsdWdpbl9saXN0LnNsaWNlKG5ld19pbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIHBsdWdpbl9saXN0ID0gaG9sZExvdy5jb25jYXQob2JqLmNvbmNhdChob2xkSGlnaCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZWJ1aWxkKCk7XG4gICAgICAgICAgICAgICAgam9pbkNoYWluKCk7XG4gICAgICAgICAgICAgICAgcGx1Z2luX29iamVjdC5ub2RlLm9ubG9hZGVkLmNhbGwocGx1Z2luX29iamVjdC5ub2RlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLmNvcHlQbHVnaW4gPSBmdW5jdGlvbihwbHVnaW5fb2JqZWN0LCBjb3B5X2luZGV4KSB7XG4gICAgICAgICAgICBpZiAoY29weV9pbmRleCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgY29weV9pbmRleCA9IHBsdWdpbl9saXN0Lmxlbmd0aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0eXBlb2YgY29weV9pbmRleCAhPSBcIm51bWJlclwiIHx8IGNvcHlfaW5kZXggPCAwIHx8IGNvcHlfaW5kZXggPiBwbHVnaW5fbGlzdC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyhcIlBsdWdpbiBjb3B5IGluZGV4IG91dHNpZGUgb2YgdGhlIGNoYWluIHNjb3BlLlwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBidWlsZE5ld1BsdWdpbihwbHVnaW5fb2JqZWN0LnByb3RvdHlwZU9iamVjdClcbiAgICAgICAgICAgIC5jYXRjaChmdW5jdGlvbihlKXtcbiAgICAgICAgICAgICAgICB0aHJvdyhcIlBsdWdpbiBkaWQgbm90IGdldCBjcmVhdGVkISBBYm9ydGluZ1wiKTtcbiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24obm9kZSkge1xuICAgICAgICAgICAgICAgIG5vZGUubm9kZS5wYXJhbWV0ZXJzLnNldFBhcmFtZXRlcnNCeU9iamVjdChwbHVnaW5fb2JqZWN0Lm5vZGUucGFyYW1ldGVycy5nZXRQYXJhbWV0ZXJPYmplY3QoKSk7XG4gICAgICAgICAgICAgICAgY3V0Q2hhaW4oKTtcbiAgICAgICAgICAgICAgICBpc29sYXRlKCk7XG4gICAgICAgICAgICAgICAgcGx1Z2luX2xpc3Quc3BsaWNlKGNvcHlfaW5kZXgsIDAsIG5vZGUpO1xuICAgICAgICAgICAgICAgIHJlYnVpbGQoKTtcbiAgICAgICAgICAgICAgICBqb2luQ2hhaW4oKTtcbiAgICAgICAgICAgICAgICBub2RlLm5vZGUub25sb2FkZWQuY2FsbChub2RlLm5vZGUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfTtcblxuICAgICAgICBmdW5jdGlvbiByZWN1cnNpdmVQcm9jZXNzaW5nKGJhc2UsIGxpc3QpIHtcbiAgICAgICAgICAgIHZhciBsID0gbGlzdC5sZW5ndGgsXG4gICAgICAgICAgICAgICAgaSwgZW50cnk7XG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgZW50cnkgPSBsaXN0W2ldO1xuICAgICAgICAgICAgICAgIGJhc2VbZW50cnkubmFtZV0uYXBwbHkoYmFzZSwgZW50cnkucGFyYW1ldGVycyk7XG4gICAgICAgICAgICAgICAgaWYgKGVudHJ5LmZlYXR1cmVzICYmIGVudHJ5LmZlYXR1cmVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgcmVjdXJzaXZlUHJvY2Vzc2luZyhiYXNlLnJlc3VsdFtlbnRyeS5uYW1lXSwgZW50cnkuZmVhdHVyZXMpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMsIHtcbiAgICAgICAgICAgICdjaGFpblN0YXJ0Jzoge1xuICAgICAgICAgICAgICAgICd2YWx1ZSc6IGNoYWluU3RhcnRcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAnY2hhaW5TdG9wJzoge1xuICAgICAgICAgICAgICAgICd2YWx1ZSc6IGNoYWluU3RvcFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICduYW1lJzoge1xuICAgICAgICAgICAgICAgICdnZXQnOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWN0b3J5TmFtZTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICdzZXQnOiBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG5hbWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZhY3RvcnlOYW1lID0gbmFtZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFjdG9yeU5hbWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICdyZWN1cnNpdmVQcm9jZXNzaW5nJzoge1xuICAgICAgICAgICAgICAgICdnZXQnOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZWN1cnNpdmVQcm9jZXNzaW5nO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHZhciBNaWRpU3ludGhlc2lzZXJIb3N0ID0gZnVuY3Rpb24oZmFjdG9yeSkge1xuICAgICAgICBmdW5jdGlvbiBidWlsZE5ld1N5bnRoZXNpc2VyT2JqZWN0KHByb3RvdHlwZU9iamVjdCkge1xuICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgIGlmIChwcm90b3R5cGVPYmplY3QuaGFzTWlkaUlucHV0ID09IGZhbHNlIHx8IHByb3RvdHlwZU9iamVjdC5oYXNNaWRpT3V0cHV0ID09IHRydWUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0IChcIlByb3RvdHlwZSBpcyBub3QgYSBNaWRpU3ludGhlc2lzIHR5cGUuIGhhc01pZGlJbnB1dCBtdXN0IGJlIHRydWUgYW5kIGhhc01pZGlPdXRwdXQgbXVzdCBiZSBmYWxzZVwiKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHByb3RvdHlwZU9iamVjdCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJvdG90eXBlT2JqZWN0LmNyZWF0ZVBsdWdpbkluc3RhbmNlKHNlbGYsIGZhbHNlKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKG5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMobm9kZSwge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ1RyYWNrRGF0YSc6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogc2VsZi5UcmFja0RhdGFcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBub2RlO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgbWlkaVN5bnRoU2xvdDtcbiAgICAgICAgdmFyIGNvbm5lY3Rpb25zID0gW107XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMsIHtcbiAgICAgICAgICAgIFwiY29ubmVjdFwiOiB7XG4gICAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiBmdW5jdGlvbihkZXN0aW5hdGlvbk5vZGUsIG91dHB1dCwgaW5wdXQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRlc3RpbmF0aW9uTm9kZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyAoXCJNdXN0IGRlZmluZSBhbiBBdWRpb05vZGUgb2JqZWN0XCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHZhciBleGlzdHMgPSBjb25uZWN0aW9ucy5maW5kKGZ1bmN0aW9uKGNvbm4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb25uLmRlc3RpbmF0aW9uTm9kZSA9PSBkZXN0aW5hdGlvbk5vZGUgJiYgY29ubi5vdXRwdXQgPT0gb3V0cHV0ICYmIGNvbm4uaW5wdXQgPT0gaW5wdXQ7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXhpc3RzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9ucy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZXN0aW5hdGlvbk5vZGU6ZGVzdGluYXRpb25Ob2RlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dDpvdXRwdXQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5wdXQ6aW5wdXRcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChtaWRpU3ludGhTbG90ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIk1JREkgU3ludGhlc2lzZXIgaXMgbm90IGxvYWRlZCwgY29ubmVjdGlvbnMgd2lsbCBiZSB2YWxpZGF0ZWQgb24gbG9hZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pZGlTeW50aFNsb3Qubm9kZS5jb25uZWN0KGRlc3RpbmF0aW9uTm9kZSwgb3V0cHV0LCBpbnB1dCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJkaXNjb25uZWN0XCI6IHtcbiAgICAgICAgICAgICAgICBcInZhbHVlXCI6IGZ1bmN0aW9uKGRlc3RpbmF0aW9uTm9kZSwgb3V0cHV0LCBpbnB1dCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoZGVzdGluYXRpb25Ob2RlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtaWRpU3ludGhTbG90KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWlkaVN5bnRoU2xvdC5kaXNjb25uZWN0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9ucyA9IFtdO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBkZXN0aW5hdGlvbk5vZGUgPT0gXCJudW1iZXJcIiAmJiB0eXBlb2Ygb3V0cHV0ID09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dCA9IGRlc3RpbmF0aW9uTm9kZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc3RpbmF0aW9uTm9kZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb25zID0gY29ubmVjdGlvbnMuZmlsdGVyKGZ1bmN0aW9uKGNvbm4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29ubi5vdXRwdXQgPT0gb3V0cHV0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtaWRpU3ludGhTbG90KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaWRpU3ludGhTbG90Lm5vZGUuZGlzY29ubmVjdChjb25uLmRlc3RpbmF0aW9uTm9kZSwgY29ubi5vdXRwdXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZGVzdGluYXRpb25Ob2RlID09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG91dHB1dCA9PSBcInVuZGVmaW5lZFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9ucyA9IGNvbm5lY3Rpb25zLmZpbHRlcihmdW5jdGlvbihjb25uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbm4uZGVzdGluYXRpb25Ob2RlID09IGRlc3RpbmF0aW9uTm9kZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobWlkaVN5bnRoU2xvdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWlkaVN5bnRoU2xvdC5ub2RlLmRpc2Nvbm5lY3QoY29ubi5kZXN0aW5hdGlvbk5vZGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZGVzdGluYXRpb25Ob2RlID09IFwib2JqZWN0XCIgJiYgdHlwZW9mIG91dHB1dCA9PSBcIm51bWJlclwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9ucyA9IGNvbm5lY3Rpb25zLmZpbHRlcihmdW5jdGlvbihjb25uKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbm4uZGVzdGluYXRpb25Ob2RlID09IGRlc3RpbmF0aW9uTm9kZSAmJiBjb25uLm91dHB1dCA9PSBvdXRwdXQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1pZGlTeW50aFNsb3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pZGlTeW50aFNsb3Qubm9kZS5kaXNjb25uZWN0KGNvbm4uZGVzdGluYXRpb25Ob2RlLCBjb25uLm91dHB1dCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBkZXN0aW5hdGlvbk5vZGUgPT0gXCJvYmplY3RcIiAmJiB0eXBlb2Ygb3V0cHV0ID09IFwibnVtYmVyXCIgJiYgdHlwZW9mIGlucHV0ID09IFwibnVtYmVyXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbm5lY3Rpb25zID0gY29ubmVjdGlvbnMuZmlsdGVyKGZ1bmN0aW9uKGNvbm4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29ubi5kZXN0aW5hdGlvbk5vZGUgPT0gZGVzdGluYXRpb25Ob2RlICYmIGNvbm4ub3V0cHV0ID09IG91dHB1dCAmJiBjb25uLmlucHV0ID09IGlucHV0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtaWRpU3ludGhTbG90KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaWRpU3ludGhTbG90Lm5vZGUuZGlzY29ubmVjdChjb25uLmRlc3RpbmF0aW9uTm9kZSwgY29ubi5vdXRwdXQsIGNvbm4uaW5wdXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcInNjaGVkdWxlRXZlbnRcIjoge1xuICAgICAgICAgICAgICAgIFwidmFsdWVcIjogZnVuY3Rpb24obXNnLCB0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtaWRpU3ludGhTbG90KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtaWRpU3ludGhTbG90Lm5vZGUuc2NoZWR1bGVFdmVudChtc2csIHQpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3coXCJNSURJIFN5bnRoZXNpc2VyIG5vdCBsb2FkZWRcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJjYW5jZWxBbGxFdmVudHNcIjoge1xuICAgICAgICAgICAgICAgIFwidmFsdWVcIjogZnVuY3Rpb24obXNnLCB0KSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChtaWRpU3ludGhTbG90KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtaWRpU3ludGhTbG90Lm5vZGUuY2FuY2VsQWxsRXZlbnRzKCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyhcIk1JREkgU3ludGhlc2lzZXIgbm90IGxvYWRlZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBcIm1pZGlTeW50aGVzaXNlclwiOiB7XG4gICAgICAgICAgICAgICAgXCJnZXRcIjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWlkaVN5bnRoU2xvdDtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIFwic2V0XCI6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyhcIkNhbm5vdCBzZXQgcmVhZC1vbmx5IGF0dHJpYnV0ZS5cIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIFwibG9hZE1pZGlTeW50aGVzaXNlck1vZHVsZVwiOiB7XG4gICAgICAgICAgICAgICAgXCJ2YWx1ZVwiOiBmdW5jdGlvbihwcm90b3R5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJvdG90eXBlLmhhc01pZGlJbnB1dCA9PSBmYWxzZSB8fCBwcm90b3R5cGUuaGFzTWlkaU91dHB1dCA9PSB0cnVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0IChcIlByb3RvdHlwZSBpcyBub3QgYSBNaWRpU3ludGhlc2lzIHR5cGUuIGhhc01pZGlJbnB1dCBtdXN0IGJlIHRydWUgYW5kIGhhc01pZGlPdXRwdXQgbXVzdCBiZSBmYWxzZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShwcm90b3R5cGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKHByb3RvdHlwZU9iamVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJ1aWxkTmV3U3ludGhlc2lzZXJPYmplY3QuY2FsbChzZWxmLCBwcm90b3R5cGVPYmplY3QpLmNhdGNoKGZ1bmN0aW9uKGUpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93KFwiUGx1Z2luIGRpZCBub3QgZ2V0IGNyZWF0ZWQhIEFib3J0aW5nXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24obm9kZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbWlkaVN5bnRoU2xvdCA9IG5vZGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25uZWN0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uKGNvbm4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaWRpU3ludGhTbG90Lm5vZGUuY29ubmVjdChjb25uLmRlc3RpbmF0aW9uTm9kZSwgY29ubi5vdXRwdXQsIGNvbm4uaW5wdXQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWlkaVN5bnRoU2xvdDtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHZhciBQbHVnaW5Vc2VySW50ZXJmYWNlTWVzc2FnZUh1YiA9IChmdW5jdGlvbihmYWN0b3J5KXtcbiAgICAgICAgZnVuY3Rpb24gYnVpbGRQbHVnaW5JbnRlcmZhY2UocGx1Z2luX29iamVjdCwgaW50ZXJmYWNlX29iamVjdCkge1xuICAgICAgICAgICAgdmFyIGlmcmFtZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpZnJhbWVcIik7XG4gICAgICAgICAgICBpZnJhbWUuc3JjID0gaW50ZXJmYWNlX29iamVjdC5zcmM7XG4gICAgICAgICAgICBpZiAoaW50ZXJmYWNlX29iamVjdC53aWR0aCkge1xuICAgICAgICAgICAgICAgIGlmcmFtZS53aWR0aCA9IGludGVyZmFjZV9vYmplY3Qud2lkdGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaW50ZXJmYWNlX29iamVjdC5oZWlnaHQpIHtcbiAgICAgICAgICAgICAgICBpZnJhbWUuaGVpZ2h0ID0gaW50ZXJmYWNlX29iamVjdC5oZWlnaHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZnJhbWUuc3R5bGUuYm9yZGVyID0gXCIwXCI7XG4gICAgICAgICAgICByZXR1cm4gaWZyYW1lO1xuICAgICAgICB9XG4gICAgICAgIGZ1bmN0aW9uIHNldERlZmF1bHRJbnRlcmZhY2UodXJsLCB3aWR0aCwgaGVpZ2h0KSB7XG4gICAgICAgICAgICBkZWZhdWx0X2ludGVyZmFjZSA9IHtcbiAgICAgICAgICAgICAgICB1cmw6IHVybCxcbiAgICAgICAgICAgICAgICB3aWR0aDogd2lkdGgsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiBoZWlnaHRcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gZGVmYXVsdF9pbnRlcmZhY2U7XG4gICAgICAgIH1cbiAgICAgICAgZnVuY3Rpb24gcG9sbEFsbFBsdWdpbnMoKSB7XG4gICAgICAgICAgICBmYWN0b3J5LmdldEFsbFBsdWdpbnMoKS5mb3JFYWNoKGZ1bmN0aW9uKHBsdWdpbikge1xuICAgICAgICAgICAgICAgIHBsdWdpbi5ub2RlLmV4dGVybmFsSW50ZXJmYWNlLnVwZGF0ZUludGVyZmFjZXMoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHZhciBkZWZhdWx0X2ludGVyZmFjZSA9IHtcbiAgICAgICAgICAgIHNyYzogXCJqc2FwX2RlZmF1bHQuaHRtbFwiXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIE9iamVjdC5jcmVhdGUoe1xuICAgICAgICAgICAgXCJzZXREZWZhdWx0SW50ZXJmYWNlXCI6IHNldERlZmF1bHRJbnRlcmZhY2UsXG4gICAgICAgICAgICBcImJ1aWxkUGx1Z2luSW50ZXJmYWNlXCI6YnVpbGRQbHVnaW5JbnRlcmZhY2UsXG4gICAgICAgICAgICBcInBvbGxBbGxQbHVnaW5zXCI6IHBvbGxBbGxQbHVnaW5zXG4gICAgICAgIH0pO1xuICAgIH0pKHRoaXMpO1xuXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcywge1xuICAgICAgICBcImNvbnRleHRcIjoge1xuICAgICAgICAgICAgXCJ2YWx1ZVwiOiBhdWRpb19jb250ZXh0XG4gICAgICAgIH0sXG4gICAgICAgIFwicGx1Z2luUm9vdFVSTFwiOiB7XG4gICAgICAgICAgICBcImdldFwiOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJvb3RVUkw7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgXCJzZXRcIjogZnVuY3Rpb24gKHQpIHtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHQgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgcm9vdFVSTCA9IHQ7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByb290VVJMO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aHJvdyAoXCJDYW5ub3Qgc2V0IHJvb3QgVVJMIHdpdGhvdXQgYSBzdHJpbmdcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIFwiY3JlYXRlRmFjdG9yeUNvcHlcIjoge1xuICAgICAgICAgICAgXCJ2YWx1ZVwiOiBmdW5jdGlvbiAoY29udGV4dCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjb3B5RmFjdG9yeShjb250ZXh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgXCJQbHVnaW5HVUlcIjoge1xuICAgICAgICAgICAgXCJ2YWx1ZVwiOiBQbHVnaW5Vc2VySW50ZXJmYWNlTWVzc2FnZUh1YlxuICAgICAgICB9XG4gICAgfSk7XG59O1xuIl0sInNvdXJjZVJvb3QiOiIifQ==